"use strict";var satmProlifeLinkUserMapping=[];function satmProcessAtMentions(t,e,n){if(t){var s=[];t.forEach(function(t){s=s.concat(satmGetMentionURLs(t,e))}),satmProcessAtMentionURLs(s,t,n)}}function satmProcessChangedElement(t,e,s){var n;(n=t.matches("a[href*='"+e+"']")?[t]:t.querySelectorAll("a[href*='"+e+"']"))&&0<n.length&&n.forEach(function(t){var e=satmGetURLWithoutProtocol(t.getAttribute("href")),n=satmProlifeLinkUserMapping[e];n?t.text!=n&&(t.text=n):satmProcessAtMentionLink(t,s)})}function satmGetMentionURLs(t,e){if(e)return jQuery(t+" a[href*='"+e+"']").map(function(){return this.protocol="https",this.href}).get()}function satmProcessAtMentionURLs(t,s,e){jQuery.unique(t).forEach(function(n){var t=new URL(n);jQuery.ajax(e+"/users"+(null==t?void 0:t.pathname)+"/displayName",{success:function(t){var e=t.displayName;e&&satmChangeMentionedUserLinkText(n,e,s)}})})}function satmProcessAtMentionLink(n,t){n.protocol="https";var s=n.getAttribute("href"),e=new URL(s);jQuery.ajax(t+"/users"+(null==e?void 0:e.pathname)+"/displayName",{success:function(t){var e=t.displayName;(satmProlifeLinkUserMapping[satmGetURLWithoutProtocol(s)]=e)&&(n.text=e)}})}function satmChangeMentionedUserLinkText(t,e,n){var s=satmGetURLWithoutProtocol(t);satmProlifeLinkUserMapping[s]=e,n.forEach(function(t){jQuery(t+" a[href$='"+s+"']").each(function(){jQuery(this).text(e)})})}function satmGetURLWithoutProtocol(t){return t.replace(/^https?:\/\//g,"")}jQuery(document).ready(function(){if(satmProcessAtMentions(satmContentSelectors,satmProfileBaseUrl,satmUssUrl),"undefined"!=typeof satmChangeableElementsSelectors&&satmChangeableElementsSelectors&&satmChangeableElementsSelectors.forEach(function(t){jQuery(t).on("DOMNodeInserted",function(t){satmProcessChangedElement(t.target,satmProfileBaseUrl,satmUssUrl)})}),"undefined"!=typeof satmPotentialElements&&satmPotentialElements)for(var e in satmPotentialElements){var t=satmPotentialElements[e];jQuery(t.staticAncestor).on("DOMNodeInserted",t.dynamicAncestor+":not(.satm-live)",function(t){t.target.querySelectorAll(e).forEach(function(e){satmProcessChangedElement(e,satmProfileBaseUrl,satmUssUrl),jQuery(e).on("DOMNodeInserted",function(t){satmProcessChangedElement(e,satmProfileBaseUrl,satmUssUrl)})}),jQuery(this).addClass("satm-live")})}});
function satmProcessAtMentions(t,e){if(t){var n=[];t.forEach(function(t){n=n.concat(satmGetMentionURLs(t,e))}),satmProcessAtMentionURLs(n,t)}}function satmProcessChangedElement(t,e){var n;n=t.matches("a[href*='"+e+"']")?[t]:t.querySelectorAll("a[href*='"+e+"']"),n&&n.length>0&&n.forEach(function(t){var e=satmGetURLWithoutProtocol(t.getAttribute("href")),n=satmProlifeLinkUserMapping[e];n?t.text!=n&&(t.text=n):satmProcessAtMentionLink(t)})}function satmGetMentionURLs(t,e){return e?jQuery(t+" a[href*='"+e+"']").map(function(){return this.protocol="https",this.href}).get():void 0}function satmProcessAtMentionURLs(t,e){jQuery.unique(t).forEach(function(t){jQuery.ajax(t,{success:function(n){var s=satmGetUserDisplayNameFromHtml(n);s&&satmChangeMentionedUserLinkText(t,s,e)}})})}function satmProcessAtMentionLink(t){t.protocol="https";var e=t.getAttribute("href");jQuery.ajax(e,{success:function(n){var s=satmGetUserDisplayNameFromHtml(n);satmProlifeLinkUserMapping[satmGetURLWithoutProtocol(e)]=s,s&&(t.text=s)}})}function satmGetUserDisplayNameFromHtml(t){var e=/<meta\s+content='([^']+)'\s+property='og:title'>/g,n=e.exec(t);if(n&&n[1]){var s=document.createElement("div");return s.innerHTML=n[1],s.innerText}return null}function satmChangeMentionedUserLinkText(t,e,n){var s=satmGetURLWithoutProtocol(t);satmProlifeLinkUserMapping[s]=e,n.forEach(function(t){jQuery(t+" a[href$='"+s+"']").each(function(){jQuery(this).text(e)})})}function satmGetURLWithoutProtocol(t){return t.replace(/^https?:\/\//g,"")}var satmProlifeLinkUserMapping=[];jQuery(document).ready(function(){if(satmProcessAtMentions(satmContentSelectors,satmProfileBaseUrl),"undefined"!=typeof satmChangeableElementsSelectors&&satmChangeableElementsSelectors&&satmChangeableElementsSelectors.forEach(function(t){jQuery(t).on("DOMNodeInserted",function(t){satmProcessChangedElement(t.target,satmProfileBaseUrl)})}),"undefined"!=typeof satmPotentialElements&&satmPotentialElements)for(var t in satmPotentialElements){var e=satmPotentialElements[t];jQuery(e.staticAncestor).on("DOMNodeInserted",e.dynamicAncestor+":not(.satm-live)",function(e){e.target.querySelectorAll(t).forEach(function(t){satmProcessChangedElement(t,satmProfileBaseUrl),jQuery(t).on("DOMNodeInserted",function(e){satmProcessChangedElement(t,satmProfileBaseUrl)})}),jQuery(this).addClass("satm-live")})}});
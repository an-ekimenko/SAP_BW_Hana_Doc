"use strict";jQuery(document).ready(function(a){return u=a,m=window.relatedContentWidgetSettings,t=function(){var c="No related content found.";function _(a){u(a).append(m.isNewBlogDetailPage?'<div class="ds-loading-indicator--bars ds-m-xs"><div class="ds-loading-indicator__bar ds-loading-indicator__bar--bar1"></div><div class="ds-loading-indicator__bar ds-loading-indicator__bar--bar2"></div><div class="ds-loading-indicator__bar ds-loading-indicator__bar--bar3"></div></div>':'<div class="dm-loading-indicator"><div class="dm-loading-indicator__bar dm-loading-indicator__bar--bar1"></div><div class="dm-loading-indicator__bar dm-loading-indicator__bar--bar2"></div><div class="dm-loading-indicator__bar dm-loading-indicator__bar--bar3"></div></div>')}function g(a){return'<li class="dm-widgetlist__item"><div class="dm-widget__contentMessage"><p>'.concat(a,"</p></div></li>")}return{loadRelatedContent:function(a,t){var n=t.id,r=t.type,i=t.title,e=t.primary_tag,d=m.isNewBlogDetailPage?"ul.ds-relatedContent__list":"ul.dm-widgetlist",l=a.find(d),s=l.attr("data-types"),o=parseInt(l.attr("data-limit"));u.ajax({url:m.contentServiceUrl,data:{topics:e,topicSwitch:!1,types:s,text:i,size:o+1},type:"GET",dataType:"json",beforeSend:function(){_(a)},complete:function(){!function(a){m.isNewBlogDetailPage?u(a).find(".ds-loading-indicator--bars").remove():u(a).find(".dm-loading-indicator").remove()}(a)},success:function(a){if(void 0!==a.page&&0!==a.page.totalElements){var e="",d=!1;u.each(a._embedded.contents,function(a,t){if(d||a!==o)if(t.objectType===r&&void 0!==t.id&&t.id.match("_"+n+"$"))d=!0;else{t.author.url=m.profileUrl+"/"+t.author.userName,t.pub=new Date(t.published.split("+")[0]).toLocaleString("en-us",{month:"short",day:"2-digit",year:"numeric"});var i=function(a){var t=m.isNewBlogDetailPage,i=t?"ds-link ds-relatedContent__item-username":"dm-widget__article-username",e="";return a.author.displayName.startsWith("Former")&&(i+=" disabled",e='aria-disabled="true"'),t?'<li class="ds-relatedContent__item">\n                          <a class="ds-link ds-link--blue ds-relatedContent__item-text" href="'.concat(a.url,'" title="').concat(a.displayName,'">').concat(a.displayName,'</a>\n                          <div class="ds-relatedContent__item-metadata">By\n                            <a target="_blank" class="').concat(i,'" href="').concat(a.author.url,'" ').concat(e,' title="">').concat(a.author.displayName,"</a>").concat(a.pub,"\n                          </div>\n                        </li>"):'<li class="dm-widgetlist__item">\n                          <div class="dm-widget__article">\n                            <div class="dm-widget__article-content-box">\n                              <div class="dm-widget__article-text">\n                                <a class="dm-widget__article-title" href="'.concat(a.url,'" title="">').concat(a.displayName,'</a>\n                                <div class="dm-widget__article-metadata">By\n                                  <a target="_blank" class="').concat(i,'" href="').concat(a.author.url,'" ').concat(e,' title="">').concat(a.author.displayName,"</a>, ").concat(a.pub,"\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                        </li>")}(t);e+=i}}),e.length?l.append(e):l.append(g(c))}else l.append(g(c))},error:function(a){l.append(g("We are sorry but we are currently unable to retrieve related content."))}})}}}(),void u(m.widgetSelector).each(function(a){t.loadRelatedContent(u(this),m.targetContentItem);var e="ds-side-bar-widget--collapsed";u(this).on("click",".ds-side-bar-widget__heading--collapsible",function(a){var t=u(this).closest(".ds-side-bar-widget");t.toggleClass(e);var i=t.hasClass(e);u(this).attr("aria-expanded",!i)})});var u,m,t});
"use strict";for(var targetDataId,targetModal,prevActiveElement,activeClass="ds-lightbox--active",imageIdx="data-index",lightboxDataId="data-id",modalSelector=".ds-lightbox",clickableImgSelector="img.ds-lightbox__img",closeIconSelector=".ds-lightbox__header a",prevButtonSelector=".lightbox-gallery-button--prev",nextButtonSelector=".lightbox-gallery-button--next",zoomInButtonSelector=".ds-lightbox__zoom-in",zoomOutButtonSelector=".ds-lightbox__zoom-out",_focusElements=[".ds-lightbox__header a",".lightbox-gallery-button--prev",".lightbox-gallery-button--next",".ds-lightbox__zoom-in",".ds-lightbox__zoom-out"],slideNextVal=1,slidePrevVal=-1,maxMobileWindowWidth=980,modals=document.querySelectorAll(modalSelector),closeIcon=document.querySelectorAll(closeIconSelector),clickableImg=document.querySelectorAll(clickableImgSelector),lightboxPrevButtons=document.querySelectorAll(prevButtonSelector),lightboxNextButtons=document.querySelectorAll(nextButtonSelector),zoomInButtons=document.querySelectorAll(zoomInButtonSelector),zoomOutButtons=document.querySelectorAll(zoomOutButtonSelector),slideIndex=1,windowWidth=window.innerWidth,scrollbarWid=getScrollbarWidth(),clickableImgsGroupped=groupClickableImgsByLightboxDataId(clickableImg),isOpened=!1,_i=0,_Object$keys=Object.keys(clickableImgsGroupped);_i<_Object$keys.length;_i++){var key=_Object$keys[_i];removeImgsForLinksFromLightbox(clickableImgsGroupped[key],key)}document.addEventListener("keydown",function(e){return e||(e=window.event),"Escape"!==e.key&&"Esc"!==e.key||targetModal&&targetModal.classList.contains(activeClass)&&(isOpened=!1,targetModal.classList.remove(activeClass),prevActiveElement.focus(),enableBackgroundScroll()),"ArrowRight"===e.key?(isOpened&&lightboxNextButtons.forEach(function(e){return e.click()}),!1):"ArrowLeft"===e.key?(isOpened&&lightboxPrevButtons.forEach(function(e){return e.click()}),!1):void(9==e.which&&isOpened&&focusCatcher(e))}),window.addEventListener("click",function(e){e||(e=window.event),closeClickOutsideLightbox(e)}),window.addEventListener("resize",updateWindowSize);for(var i=0;i<zoomInButtons.length;i++)zoomInButtons[i].addEventListener("click",zoomin);for(var _i2=0;_i2<zoomOutButtons.length;_i2++)zoomOutButtons[_i2].addEventListener("click",zoomout);for(var _i3=0;_i3<closeIcon.length;_i3++)closeIcon[_i3].addEventListener("click",function(e){e||(e=window.event),toggleLightbox(e)});for(var _i4=0;_i4<lightboxPrevButtons.length;_i4++)lightboxPrevButtons[_i4].addEventListener("click",function(e){e||(e=window.event);var t=e.target.closest(modalSelector).getAttribute(lightboxDataId);plusSlides(slidePrevVal,""+t)});for(var _i5=0;_i5<lightboxNextButtons.length;_i5++)lightboxNextButtons[_i5].addEventListener("click",function(e){e||(e=window.event);var t=e.target.closest(modalSelector).getAttribute(lightboxDataId);plusSlides(slideNextVal,""+t)});function groupClickableImgsByLightboxDataId(e){var o={};return e.forEach(function(e,t){o[e.getAttribute(lightboxDataId)]=o[e.getAttribute(lightboxDataId)]||[],o[e.getAttribute(lightboxDataId)].push(e)}),o}function removeImgsForLinksFromLightbox(n,r){for(var d=0,e=function(e){var t=jQuery(n[e]).parents("a[href]"),o=parseInt(n[e].getAttribute(imageIdx))-d;if(0<d&&n[e].setAttribute(imageIdx,o),0!==t.length){var l=document.querySelector('.ds-lightbox[data-id="'+r+'"] .ds-lightbox__content'),i=l.querySelectorAll(".ds-lightbox__slide");l.removeChild(i[o-1]),n[e].removeAttribute(imageIdx),n[e].removeAttribute(lightboxDataId),n[e].classList.remove("ds-lightbox__img"),d++}else n[e].addEventListener("click",function(e){e||(e=window.event),toggleLightbox(e,o)})},t=0;t<n.length;t++)e(t)}function updateWindowSize(){windowWidth=window.innerWidth,scrollbarWid=getScrollbarWidth(),windowWidth<maxMobileWindowWidth&&targetModal&&targetModal.classList.contains(activeClass)&&(targetModal.classList.remove(activeClass),enableBackgroundScroll())}function closeClickOutsideLightbox(e){e.target==targetModal&&(targetModal.classList.remove(activeClass),prevActiveElement.focus(),enableBackgroundScroll())}function enableBackgroundScroll(){document.body.style.overflow="",document.body.style.paddingRight=""}function getScrollbarWidth(){return window.innerWidth-document.documentElement.clientWidth}function toggleLightbox(e,t){maxMobileWindowWidth<=windowWidth&&(targetDataId="I"===e.target.tagName?e.target.closest(modalSelector).getAttribute(lightboxDataId):e.target.getAttribute(lightboxDataId),modals.forEach(function(e,t){e.getAttribute(lightboxDataId)===targetDataId&&(targetModal=e)}),targetModal?targetModal.classList.contains(activeClass)?(targetModal.classList.remove(activeClass),enableBackgroundScroll(),isOpened=!0,prevActiveElement.focus()):(targetModal.classList.add(activeClass),document.body.style.overflow="hidden",document.body.style.paddingRight=scrollbarWid+"px",void 0!==t&&currentSlide(t,targetDataId),prevActiveElement=document.activeElement,isOpened=!0,focusControl()):console.error('No target modal found, Please check "data-id" attributes!'))}function plusSlides(e,t){showSlides(slideIndex+=e,t)}function currentSlide(e,t){showSlides(slideIndex=e,t)}function updateSlideNum(e,t,o){var l=document.querySelector('.ds-lightbox[data-id="'+o+'"] .ds-lightbox__slideNumber');l.querySelector("span.ds-lightbox__slideNumber--current").innerHTML=e,l.querySelector("span.ds-lightbox__slideNumber--total").innerHTML=t}function showSlides(e,t){var o=document.querySelectorAll('.ds-lightbox[data-id="'+t+'"] .ds-lightbox__slide');e>o.length&&(slideIndex=1),e<1&&(slideIndex=o.length);for(var l=0;l<o.length;l++)o[l].style.display="none";updateSlideNum(slideIndex,o.length,t),o[slideIndex-1].style.display="flex"}function zoomin(){var e=targetModal.querySelectorAll(".ds-lightbox__slide")[slideIndex-1].querySelector("img.ds-lightbox__slide--img"),t=e.clientWidth;e.style.width=t+100+"px"}function zoomout(){var e=targetModal.querySelectorAll(".ds-lightbox__slide")[slideIndex-1].querySelector("img.ds-lightbox__slide--img"),t=e.clientWidth;if(100==t)return!1;e.style.width=t-100+"px"}function focusCatcher(e){var t=targetModal.querySelectorAll(_focusElements),o=Array.prototype.slice.call(t);if(targetModal.contains(document.activeElement)){var l=o.indexOf(document.activeElement);e.shiftKey&&0===l&&(o[o.length-1].focus(),e.preventDefault()),e.shiftKey||l!==o.length-1||(o[0].focus(),e.preventDefault())}else o[0].focus(),e.preventDefault()}function focusControl(){targetModal.querySelectorAll(_focusElements)[0].focus()}
"use strict";(()=>{var mH=Object.create;var Hl=Object.defineProperty,pH=Object.defineProperties,hH=Object.getOwnPropertyDescriptor,uH=Object.getOwnPropertyDescriptors,fH=Object.getOwnPropertyNames,Bg=Object.getOwnPropertySymbols,gH=Object.getPrototypeOf,jg=Object.prototype.hasOwnProperty,vH=Object.prototype.propertyIsEnumerable;var Hm=Math.pow,Ug=(i,t,e)=>t in i?Hl(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,C=(i,t)=>{for(var e in t||(t={}))jg.call(t,e)&&Ug(i,e,t[e]);if(Bg)for(var e of Bg(t))vH.call(t,e)&&Ug(i,e,t[e]);return i},ut=(i,t)=>pH(i,uH(t));var u=(i,t)=>()=>(i&&(t=i(i=0)),t);var Fs=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports),ot=(i,t)=>{for(var e in t)Hl(i,e,{get:t[e],enumerable:!0})},EH=(i,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of fH(t))!jg.call(i,s)&&s!==e&&Hl(i,s,{get:()=>t[s],enumerable:!(n=hH(t,s))||n.enumerable});return i};var Bs=(i,t,e)=>(e=i!=null?mH(gH(i)):{},EH(t||!i||!i.__esModule?Hl(e,"default",{value:i,enumerable:!0}):e,i));var T=(i,t,e)=>new Promise((n,s)=>{var o=l=>{try{a(e.next(l))}catch(c){s(c)}},r=l=>{try{a(e.throw(l))}catch(c){s(c)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(o,r);a((e=e.apply(i,t)).next())});var zg,Vg=u(()=>{"use strict";zg=i=>{let t=(n,s,o,r,a)=>{for(let l=0,{length:c}=n;l<c;l++){let d=n[l];d instanceof HTMLElement&&(r?s.has(d)||(s.add(d),o.delete(d),i(d,r)):o.has(d)||(o.add(d),s.delete(d),i(d,r)),a||t(d.querySelectorAll("*"),s,o,r,!0))}},e=new MutationObserver(n=>{for(let s=new Set,o=new Set,r=0,{length:a}=n;r<a;r++){let{addedNodes:l,removedNodes:c}=n[r];t(c,s,o,!1,!1),t(l,s,o,!0,!1)}});return e.observe(document.documentElement,{subtree:!0,childList:!0}),e}});var Wg,qg=u(()=>{"use strict";Vg();Wg=(i,t)=>{let e=new WeakMap,n=(l,c)=>{let d;if(c)for(let m,p=0;p<i.length;p++)l.matches(m=i[p])&&(e.has(l)||e.set(l,new Set),d=e.get(l),d.has(m)||(d.add(m),t(l,c,m)));else e.has(l)&&(d=e.get(l),e.delete(l),d.forEach(m=>{t(l,c,m)}))},s=l=>{for(let c=0;c<l.length;c++){let d=l[c];d instanceof HTMLElement&&e.delete(d)}},o=(l,c=!0)=>{for(let d=0;d<l.length;d++){let m=l[d];m instanceof HTMLElement&&n(m,c)}},r=zg(n),a=()=>{let l=r.takeRecords();for(let c=0;c<l.length;c++)o(l[c].removedNodes,!1),o(l[c].addedNodes,!0)};return i.length&&o(document.documentElement.querySelectorAll(i.toString())),{drop:s,flush:a,observer:r,parse:o}}});var Gg,Dl,is,sr,$e,Ki,Us,b,Q,tt,Jg,kl,Zg,V=u(()=>{"use strict";Gg="role",Dl="slot",is=i=>`[data-${Gg}~="${i}"]`,sr=i=>`[data-${Dl}~="${i}"]`,$e=(i,t)=>(t||document).querySelector(is(i))||void 0,Ki=(i,t)=>Array.from((t||document).querySelectorAll(is(i))),Us=(i,t)=>i.closest(is(t))||void 0,b=(i,t,e)=>(e||document).querySelector(sr(`${i}.${t}`))||void 0,Q=(i,t,e)=>i.closest(sr(`${t}.${e}`))||void 0,tt=(i,t,e)=>Array.from((e||document).querySelectorAll(sr(`${i}.${t}`))),Jg=(i,t)=>{i.dataset[Gg]=t},kl=(i,t,e)=>{i.dataset[Dl]=`${t}.${e}`},Zg=i=>{i.dataset[Dl]!==void 0&&delete i.dataset[Dl]}});var x,$l,Dm,km,Xg,js,ns,Qg,Nl,Pl,Yg,_H,tv,Kg,TH,yH,LH,xH,ev,Fl,H,ce,St,zs,B=u(()=>{"use strict";qg();V();x=class{constructor(t,e){this.element=t;this.role=e}root(t,e){return Us(t,e||this.role)}slot(t,e){return b(this.role,t,e||this.element)}slots(t,e){return tt(this.role,t,e||this.element)}closestSlot(t,e){return Q(t,this.role,e)}},$l=new WeakMap,Dm=new WeakSet,km=[],Xg=new WeakMap,js=new Set,ns=[],Qg={},Nl={},Pl=new WeakMap,Yg=i=>{let t=i;do if(t.nextSibling)return!0;while(t=t.parentNode);return!1},_H=()=>{km.splice(0).forEach(i=>{$l.get(i)!==!0&&($l.set(i,!0),i.parsedInit&&!Dm.has(i)&&(Dm.add(i),i.parsedInit()),i.parsed&&i.element.ownerDocument.contains(i.element)&&i.parsed())})},tv=i=>{km.length||requestAnimationFrame(_H),km.push(i)},Kg=(i,t,e,n)=>{t.disconnect(),e.removeEventListener("DOMContentLoaded",n),tv(i)},TH=(i,t)=>{for(let e=Xg.get(t),n=0;n<i.length;n++){let{target:s,attributeName:o,oldValue:r}=i[n],a=s.getAttribute(o);e.attributeChanged(o,r,a)}},yH=(i,t,e,n)=>{let s=new n(i,t);if(Pl.has(i)?Pl.get(i)[t]=s:Pl.set(i,{[t]:s}),e.set(i,s),s.init&&s.init(),s.observedAttributes&&s.attributeChanged){let o=new MutationObserver(TH);o.observe(i,{attributes:!0,attributeOldValue:!0,attributeFilter:s.observedAttributes.map(r=>(i.hasAttribute(r)&&s.attributeChanged(r,null,i.getAttribute(r)),r))}),Xg.set(o,s)}return s},{flush:LH,parse:xH,drop:ev}=Wg(ns,(i,t,e)=>{let{r:n,m:s,o}=Qg[e],r;if(o.prototype instanceof x)if(r=s.get(i)||yH(i,n,s,o),t){if(r.parsed||r.parsedInit&&!Dm.has(r)){let{ownerDocument:a}=i;if($l.set(r,!1),a.readyState==="complete"||Yg(i))tv(r);else{let l=()=>Kg(r,c,a,l);a.addEventListener("DOMContentLoaded",l);let c=new MutationObserver(()=>{Yg(i)&&Kg(r,c,a,l)});c.observe(i.parentNode,{childList:!0,subtree:!0})}}r.connected&&r.connected()}else!t&&r.disconnected&&(!r.parsed&&!r.parsedInit||$l.get(r))&&r.disconnected();else s.has(i)||(s.set(i,o),o(i,n))}),Fl=(i,t)=>{let e=t?i:is(i);if(!(e in Nl)){let n=()=>{},s=new Promise(o=>{n=o});Nl[e]={_:n,$:s}}return Nl[e].$},H=(i,t,e)=>{let n=e?i:is(i);if(ns.includes(n))throw new Error(`Duplicated selector: ${n}`);LH(),ns.push(n),Qg[n]={r:i,m:new WeakMap,o:t},xH(document.querySelectorAll(n)),Fl(i,e),Nl[n]._()},ce=(i,t,e)=>{let n=e?i:is(i);js.add(n),H(n,()=>{js.has(n)&&(js.delete(n),t().then(({default:s})=>{ns.splice(ns.indexOf(n),1),ev(document.querySelectorAll(n)),H(i,s,e)}))},!0)},St=(i,t,e)=>{let n=e?`meta[name="module"][content~="${i}"]`:i;js.add(n),H(n,()=>{js.has(n)&&(js.delete(n),t().then(({default:s})=>{ns.splice(ns.indexOf(n),1),ev(document.querySelectorAll(n)),s()}))},!0)},zs=(i,t)=>{let e=Pl.get(i);if(e)return t?e[t]:e[Object.keys(e)[0]]}});var or,Bl,wH,CH,AH,ee,Si=u(()=>{"use strict";or=new Map,Bl=[],wH=(i,t)=>{or.has(t)&&or.get(t).unobserve(i)},CH=(i,t)=>{let{target:e,isIntersecting:n}=i;for(let s=Bl.length-1,o;o=Bl[s];s--)if(o.targetEl===e&&o.rootMargin===t){let r=o.onEnter&&n;r&&o.onEnter(e);let a=o.onExit&&!n;a&&o.onExit(e),o.callOnce&&(r||a)&&(wH(e,o.rootMargin),Bl.splice(s,1))}},AH=i=>{if(or.has(i))return or.get(i);let t=new IntersectionObserver(e=>{e.forEach(n=>CH(n,i))},{rootMargin:`${i}px 0px`});return or.set(i,t),t},ee=(i,t)=>{if(!t.onEnter&&!t.onExit)throw Error("Provide an Iview callback");let e=t.rootMargin||0,n={targetEl:i,rootMargin:e,onEnter:t.onEnter,onExit:t.onExit,callOnce:!t.permanent};Bl.push(n),AH(e).observe(i)}});var Vs,Ul=u(()=>{"use strict";Vs=i=>{let t=!1,e;return()=>(t||(e=i(),t=!0),e)}});var Fe,hi,rr,jl,_,Ws,Xi,iv,j=u(()=>{"use strict";Ul();Fe=(i,t)=>window.getComputedStyle(i,null).getPropertyValue(t),hi=(i,t)=>parseFloat(Fe(i,t))||0,rr=i=>{document.body.classList.toggle("docbusy",i)},jl=Vs(()=>{let t=document.createElement("a").style;return t.cssText="position:-webkit-sticky;position:sticky;",t.position.includes("sticky")}),_=(i,t)=>{i.style.display=t?"":"none"},Ws=i=>i.style.display!=="none",Xi=i=>{let t=i.getBoundingClientRect();return t.x+=window.scrollX,t.y+=window.scrollY,t},iv=()=>{let i=document.createElement("div");i.style.cssText="overflow:auto;position:absolute;top:0;width:100px;height:100px";let t=document.createElement("div");t.style.width="200px",t.style.height="200px",i.appendChild(t),document.body.appendChild(i);let e=i.offsetWidth-i.clientWidth;return i.remove(),e}});var nv,zl,sv=u(()=>{"use strict";nv=["click","dblclick","mousedown","mousemove","mouseup","touchend","touchmove","touchstart","keydown","keyup"],zl=class extends EventTarget{constructor(){super();this.lastEventTime=Date.now();this.minEventTime=0;nv.forEach(e=>{document.addEventListener(e,this)})}handleEvent(e){(e.type!=="mousemove"||e.movementX!==0||e.movementY!==0)&&(this.lastEventTime=Date.now(),this.lastEventTime>this.minEventTime&&(this.dispatchEvent(new CustomEvent("activity")),this.minEventTime=this.lastEventTime+3e3))}getLastEventTime(){return this.lastEventTime}dispose(){nv.forEach(e=>{document.removeEventListener(e,this)})}}});var Vl,ov=u(()=>{"use strict";sv();Vl=class extends EventTarget{constructor(e){super();this.idleThreshold=e;this.isIdle=!1;this.activityMonitor=new zl;this.hasActivityListener=!1;this.maybeStillActive()}maybeStillActive(){let e=this.idleThreshold+1-(Date.now()-this.activityMonitor.getLastEventTime());e>0?this.onActivityTimerId=setTimeout(this.maybeStillActive.bind(this),e):this.becomeIdle()}becomeIdle(){this.isIdle=!0,this.activityMonitor.addEventListener("activity",this),this.hasActivityListener=!0,this.dispatchEvent(new CustomEvent("idle"))}handleEvent(){this.isIdle=!1,this.removeActivityListener(),this.dispatchEvent(new CustomEvent("active")),this.maybeStillActive()}removeActivityListener(){this.hasActivityListener&&(this.activityMonitor.removeEventListener("activity",this),this.hasActivityListener=!1)}dispose(){this.removeActivityListener(),clearTimeout(this.onActivityTimerId),this.activityMonitor.dispose()}}});var SH,Mi,lr=u(()=>{"use strict";ov();SH=2e4,Mi=new Vl(SH)});var J,O,q,wt,vt,qs,Wl,Ii,S,lv,D=u(()=>{"use strict";j();J=(i,t)=>(t||document).querySelector(i),O=(i,t)=>J(`.${i}`,t),q=(i,t)=>Array.from((t||document).querySelectorAll(i)),wt=(i,t)=>q(`.${i}`,t),vt=(i,t)=>i.closest(`.${t}`),qs=i=>{let t=J('[type="submit"]',i);t&&t.click()},Wl=i=>{let t;for(;i;){let e=Fe(i,"position");if(e==="absolute"||e==="relative"||e==="fixed"){let n=hi(i,"z-index");!Number.isNaN(n)&&n>(t||0)&&(t=n)}i=i.parentElement}return t},Ii=i=>{let t=document.createElement("div");if(t.innerHTML=i.trim(),t.childNodes.length===1)return t.removeChild(t.firstChild);let e=document.createDocumentFragment();for(;t.firstChild;)e.appendChild(t.firstChild);return e},S=(i,t,...e)=>{typeof t=="string"&&(t={className:t});let n=document.createElement(i);return Object.entries(t||{}).forEach(([s,o])=>{s==="style"?n.style.cssText=o:s==="class"?n.className=o:s.startsWith("aria-")||s.startsWith("data-")?n.setAttribute(s,o):n[s]=o}),n.append(...e.filter(Boolean)),n},lv=i=>{i.replaceWith(...i.children)}});var yn,ii,de,ge=u(()=>{"use strict";yn=(i,t)=>{let e=i.elements[t];if(!!e){if(e.type)return e.value;for(let n=0;n<e.length;n++){let s=e[n].type==="checkbox"||e[n].type==="radio"?e[n].checked&&e[n].value:e[n].value;if(s)return s}}},ii=i=>{let t=new URLSearchParams;if(i){let e=new FormData(i);for(let[n,s]of e)s instanceof File||t.append(n,s)}return t},de=i=>{i.dispatchEvent(new Event("change",{bubbles:!0}))}});function Ri(i,t,e){return Math.min(Math.max(i,t),e)}function cr(i,t){return i.indexOf(t)>-1}function Nm(i,t){return i.apply(null,t)}function fv(i){var t=/\(([^)]+)\)/.exec(i);return t?t[1].split(",").map(function(e){return parseFloat(e)}):[]}function gv(i,t){var e=fv(i),n=Ri(G.und(e[0])?1:e[0],.1,100),s=Ri(G.und(e[1])?100:e[1],.1,100),o=Ri(G.und(e[2])?10:e[2],.1,100),r=Ri(G.und(e[3])?0:e[3],.1,100),a=Math.sqrt(s/n),l=o/(2*Math.sqrt(s*n)),c=l<1?a*Math.sqrt(1-l*l):0,d=1,m=l<1?(l*a+-r)/c:-r+a;function p(f){var g=t?t*f/1e3:f;return l<1?g=Math.exp(-g*l*a)*(d*Math.cos(c*g)+m*Math.sin(c*g)):g=(d+m*g)*Math.exp(-g*a),f===0||f===1?f:1-g}function h(){var f=ql.springs[i];if(f)return f;for(var g=1/6,E=0,M=0;;)if(E+=g,p(E)===1){if(M++,M>=16)break}else M=0;var I=E*g*1e3;return ql.springs[i]=I,I}return t?p:h}function DH(i){return i===void 0&&(i=10),function(t){return Math.ceil(Ri(t,1e-6,1)*i)*(1/i)}}function Bm(i,t){if(G.fnc(i))return i;var e=i.split("(")[0],n=vv[e],s=fv(i);switch(e){case"spring":return gv(i,t);case"cubicBezier":return Nm(kH,s);case"steps":return Nm(DH,s);default:return Nm(n,s)}}function Ev(i){try{var t=document.querySelectorAll(i);return t}catch(e){return}}function Gl(i,t){for(var e=i.length,n=arguments.length>=2?arguments[1]:void 0,s=[],o=0;o<e;o++)if(o in i){var r=i[o];t.call(n,r,o,i)&&s.push(r)}return s}function Jl(i){return i.reduce(function(t,e){return t.concat(G.arr(e)?Jl(e):e)},[])}function cv(i){return G.arr(i)?i:(G.str(i)&&(i=Ev(i)||i),i instanceof NodeList||i instanceof HTMLCollection?[].slice.call(i):[i])}function Um(i,t){return i.some(function(e){return e===t})}function jm(i){var t={};for(var e in i)t[e]=i[e];return t}function Pm(i,t){var e=jm(i);for(var n in i)e[n]=t.hasOwnProperty(n)?t[n]:i[n];return e}function Zl(i,t){var e=jm(i);for(var n in t)e[n]=G.und(i[n])?t[n]:i[n];return e}function NH(i){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(i);return t?"rgba("+t[1]+",1)":i}function PH(i){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,e=i.replace(t,function(a,l,c,d){return l+l+c+c+d+d}),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),s=parseInt(n[1],16),o=parseInt(n[2],16),r=parseInt(n[3],16);return"rgba("+s+","+o+","+r+",1)"}function $H(i){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(i)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(i),e=parseInt(t[1],10)/360,n=parseInt(t[2],10)/100,s=parseInt(t[3],10)/100,o=t[4]||1;function r(p,h,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?p+(h-p)*6*f:f<1/2?h:f<2/3?p+(h-p)*(2/3-f)*6:p}var a,l,c;if(n==0)a=l=c=s;else{var d=s<.5?s*(1+n):s+n-s*n,m=2*s-d;a=r(m,d,e+1/3),l=r(m,d,e),c=r(m,d,e-1/3)}return"rgba("+a*255+","+l*255+","+c*255+","+o+")"}function FH(i){if(G.rgb(i))return NH(i);if(G.hex(i))return PH(i);if(G.hsl(i))return $H(i)}function Qi(i){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(i);if(t)return t[1]}function BH(i){if(cr(i,"translate")||i==="perspective")return"px";if(cr(i,"rotate")||cr(i,"skew"))return"deg"}function $m(i,t){return G.fnc(i)?i(t.target,t.id,t.total):i}function Oi(i,t){return i.getAttribute(t)}function zm(i,t,e){var n=Qi(t);if(Um([e,"deg","rad","turn"],n))return t;var s=ql.CSS[t+e];if(!G.und(s))return s;var o=100,r=document.createElement(i.tagName),a=i.parentNode&&i.parentNode!==document?i.parentNode:document.body;a.appendChild(r),r.style.position="absolute",r.style.width=o+e;var l=o/r.offsetWidth;a.removeChild(r);var c=l*parseFloat(t);return ql.CSS[t+e]=c,c}function bv(i,t,e){if(t in i.style){var n=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),s=i.style[t]||getComputedStyle(i).getPropertyValue(n)||"0";return e?zm(i,s,e):s}}function Vm(i,t){if(G.dom(i)&&!G.inp(i)&&(!G.nil(Oi(i,t))||G.svg(i)&&i[t]))return"attribute";if(G.dom(i)&&Um(HH,t))return"transform";if(G.dom(i)&&t!=="transform"&&bv(i,t))return"css";if(i[t]!=null)return"object"}function _v(i){if(!!G.dom(i)){for(var t=i.style.transform||"",e=/(\w+)\(([^)]*)\)/g,n=new Map,s;s=e.exec(t);)n.set(s[1],s[2]);return n}}function UH(i,t,e,n){var s=cr(t,"scale")?1:0+BH(t),o=_v(i).get(t)||s;return e&&(e.transforms.list.set(t,o),e.transforms.last=t),n?zm(i,o,n):o}function Wm(i,t,e,n){switch(Vm(i,t)){case"transform":return UH(i,t,n,e);case"css":return bv(i,t,e);case"attribute":return Oi(i,t);default:return i[t]||0}}function qm(i,t){var e=/^(\*=|\+=|-=)/.exec(i);if(!e)return i;var n=Qi(i)||0,s=parseFloat(t),o=parseFloat(i.replace(e[0],""));switch(e[0][0]){case"+":return s+o+n;case"-":return s-o+n;case"*":return s*o+n}}function Tv(i,t){if(G.col(i))return FH(i);if(/\s/g.test(i))return i;var e=Qi(i),n=e?i.substr(0,i.length-e.length):i;return t?n+t:n}function Gm(i,t){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))}function jH(i){return Math.PI*2*Oi(i,"r")}function zH(i){return Oi(i,"width")*2+Oi(i,"height")*2}function VH(i){return Gm({x:Oi(i,"x1"),y:Oi(i,"y1")},{x:Oi(i,"x2"),y:Oi(i,"y2")})}function yv(i){for(var t=i.points,e=0,n,s=0;s<t.numberOfItems;s++){var o=t.getItem(s);s>0&&(e+=Gm(n,o)),n=o}return e}function WH(i){var t=i.points;return yv(i)+Gm(t.getItem(t.numberOfItems-1),t.getItem(0))}function Lv(i){if(i.getTotalLength)return i.getTotalLength();switch(i.tagName.toLowerCase()){case"circle":return jH(i);case"rect":return zH(i);case"line":return VH(i);case"polyline":return yv(i);case"polygon":return WH(i)}}function qH(i){var t=Lv(i);return i.setAttribute("stroke-dasharray",t),t}function GH(i){for(var t=i.parentNode;G.svg(t)&&G.svg(t.parentNode);)t=t.parentNode;return t}function xv(i,t){var e=t||{},n=e.el||GH(i),s=n.getBoundingClientRect(),o=Oi(n,"viewBox"),r=s.width,a=s.height,l=e.viewBox||(o?o.split(" "):[0,0,r,a]);return{el:n,viewBox:l,x:l[0]/1,y:l[1]/1,w:r,h:a,vW:l[2],vH:l[3]}}function JH(i,t){var e=G.str(i)?Ev(i)[0]:i,n=t||100;return function(s){return{property:s,el:e,svg:xv(e),totalLength:Lv(e)*(n/100)}}}function ZH(i,t,e){function n(d){d===void 0&&(d=0);var m=t+d>=1?t+d:0;return i.el.getPointAtLength(m)}var s=xv(i.el,i.svg),o=n(),r=n(-1),a=n(1),l=e?1:s.w/s.vW,c=e?1:s.h/s.vH;switch(i.property){case"x":return(o.x-s.x)*l;case"y":return(o.y-s.y)*c;case"angle":return Math.atan2(a.y-r.y,a.x-r.x)*180/Math.PI}}function dv(i,t){var e=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,n=Tv(G.pth(i)?i.totalLength:i,t)+"";return{original:n,numbers:n.match(e)?n.match(e).map(Number):[0],strings:G.str(i)||t?n.split(e):[]}}function Jm(i){var t=i?Jl(G.arr(i)?i.map(cv):cv(i)):[];return Gl(t,function(e,n,s){return s.indexOf(e)===n})}function wv(i){var t=Jm(i);return t.map(function(e,n){return{target:e,id:n,total:t.length,transforms:{list:_v(e)}}})}function YH(i,t){var e=jm(t);if(/^spring/.test(e.easing)&&(e.duration=gv(e.easing)),G.arr(i)){var n=i.length,s=n===2&&!G.obj(i[0]);s?i={value:i}:G.fnc(t.duration)||(e.duration=t.duration/n)}var o=G.arr(i)?i:[i];return o.map(function(r,a){var l=G.obj(r)&&!G.pth(r)?r:{value:r};return G.und(l.delay)&&(l.delay=a?0:t.delay),G.und(l.endDelay)&&(l.endDelay=a===o.length-1?t.endDelay:0),l}).map(function(r){return Zl(r,e)})}function KH(i){for(var t=Gl(Jl(i.map(function(o){return Object.keys(o)})),function(o){return G.key(o)}).reduce(function(o,r){return o.indexOf(r)<0&&o.push(r),o},[]),e={},n=function(o){var r=t[o];e[r]=i.map(function(a){var l={};for(var c in a)G.key(c)?c==r&&(l.value=a[c]):l[c]=a[c];return l})},s=0;s<t.length;s++)n(s);return e}function XH(i,t){var e=[],n=t.keyframes;n&&(t=Zl(KH(n),t));for(var s in t)G.key(s)&&e.push({name:s,tweens:YH(t[s],i)});return e}function QH(i,t){var e={};for(var n in i){var s=$m(i[n],t);G.arr(s)&&(s=s.map(function(o){return $m(o,t)}),s.length===1&&(s=s[0])),e[n]=s}return e.duration=parseFloat(e.duration),e.delay=parseFloat(e.delay),e}function tD(i,t){var e;return i.tweens.map(function(n){var s=QH(n,t),o=s.value,r=G.arr(o)?o[1]:o,a=Qi(r),l=Wm(t.target,i.name,a,t),c=e?e.to.original:l,d=G.arr(o)?o[0]:c,m=Qi(d)||Qi(l),p=a||m;return G.und(r)&&(r=c),s.from=dv(d,p),s.to=dv(qm(r,d),p),s.start=e?e.end:0,s.end=s.start+s.delay+s.duration+s.endDelay,s.easing=Bm(s.easing,s.duration),s.isPath=G.pth(o),s.isPathTargetInsideSVG=s.isPath&&G.svg(t.target),s.isColor=G.col(s.from.original),s.isColor&&(s.round=1),e=s,s})}function Av(i,t){var e=wv(i);e.forEach(function(n){for(var s in t){var o=$m(t[s],n),r=n.target,a=Qi(o),l=Wm(r,s,a,n),c=a||Qi(l),d=qm(Tv(o,c),l),m=Vm(r,s);Cv[m](r,s,d,n.transforms,!0)}})}function eD(i,t){var e=Vm(i.target,t.name);if(e){var n=tD(t,i),s=n[n.length-1];return{type:e,property:t.name,animatable:i,tweens:n,duration:s.end,delay:n[0].delay,endDelay:s.endDelay}}}function iD(i,t){return Gl(Jl(i.map(function(e){return t.map(function(n){return eD(e,n)})})),function(e){return!G.und(e)})}function Sv(i,t){var e=i.length,n=function(o){return o.timelineOffset?o.timelineOffset:0},s={};return s.duration=e?Math.max.apply(Math,i.map(function(o){return n(o)+o.duration})):t.duration,s.delay=e?Math.min.apply(Math,i.map(function(o){return n(o)+o.delay})):t.delay,s.endDelay=e?s.duration-Math.max.apply(Math,i.map(function(o){return n(o)+o.duration-o.endDelay})):t.endDelay,s}function nD(i){var t=Pm(uv,i),e=Pm(Fm,i),n=XH(e,i),s=wv(i.targets),o=iD(s,n),r=Sv(o,e),a=mv;return mv++,Zl(t,{id:a,children:[],animatables:s,animations:o,duration:r.duration,delay:r.delay,endDelay:r.endDelay})}function pv(){return!!document&&document.hidden}function Pt(i){i===void 0&&(i={});var t=0,e=0,n=0,s,o=0,r=null;function a(A){var w=window.Promise&&new Promise(function(P){return r=P});return A.finished=w,w}var l=nD(i),c=a(l);function d(){var A=l.direction;A!=="alternate"&&(l.direction=A!=="normal"?"normal":"reverse"),l.reversed=!l.reversed,s.forEach(function(w){return w.reversed=l.reversed})}function m(A){return l.reversed?l.duration-A:A}function p(){t=0,e=m(l.currentTime)*(1/Pt.speed)}function h(A,w){w&&w.seek(A-w.timelineOffset)}function f(A){if(l.reversePlayback)for(var P=o;P--;)h(A,s[P]);else for(var w=0;w<o;w++)h(A,s[w])}function g(A){for(var w=0,P=l.animations,U=P.length;w<U;){var F=P[w],st=F.animatable,Y=F.tweens,mt=Y.length-1,W=Y[mt];mt&&(W=Gl(Y,function(Yi){return A<Yi.end})[0]||W);for(var xt=Ri(A-W.start-W.delay,0,W.duration)/W.duration,pt=isNaN(xt)?1:W.easing(xt),Ot=W.to.strings,Ut=W.round,At=[],te=W.to.numbers.length,le=void 0,Te=0;Te<te;Te++){var pi=void 0,Ji=W.to.numbers[Te],Ai=W.from.numbers[Te]||0;W.isPath?pi=ZH(W.value,pt*Ji,W.isPathTargetInsideSVG):pi=Ai+pt*(Ji-Ai),Ut&&(W.isColor&&Te>2||(pi=Math.round(pi*Ut)/Ut)),At.push(pi)}var ts=Ot.length;if(!ts)le=At[0];else{le=Ot[0];for(var ei=0;ei<ts;ei++){var Zi=Ot[ei],_n=Ot[ei+1],Tn=At[ei];isNaN(Tn)||(_n?le+=Tn+_n:le+=Tn+" ")}}Cv[F.type](st.target,F.property,le,st.transforms),F.currentValue=le,w++}}function E(A){l[A]&&!l.passThrough&&l[A](l)}function M(){l.remaining&&l.remaining!==!0&&l.remaining--}function I(A){var w=l.duration,P=l.delay,U=w-l.endDelay,F=m(A);l.progress=Ri(F/w*100,0,100),l.reversePlayback=F<l.currentTime,s&&f(F),!l.began&&l.currentTime>0&&(l.began=!0,E("begin")),!l.loopBegan&&l.currentTime>0&&(l.loopBegan=!0,E("loopBegin")),F<=P&&l.currentTime!==0&&g(0),(F>=U&&l.currentTime!==w||!w)&&g(w),F>P&&F<U?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,E("changeBegin")),E("change"),g(F)):l.changeBegan&&(l.changeCompleted=!0,l.changeBegan=!1,E("changeComplete")),l.currentTime=Ri(F,0,w),l.began&&E("update"),A>=w&&(e=0,M(),l.remaining?(t=n,E("loopComplete"),l.loopBegan=!1,l.direction==="alternate"&&d()):(l.paused=!0,l.completed||(l.completed=!0,E("loopComplete"),E("complete"),!l.passThrough&&"Promise"in window&&(r(),c=a(l)))))}return l.reset=function(){var A=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.loopBegan=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed=A==="reverse",l.remaining=l.loop,s=l.children,o=s.length;for(var w=o;w--;)l.children[w].reset();(l.reversed&&l.loop!==!0||A==="alternate"&&l.loop===1)&&l.remaining++,g(l.reversed?l.duration:0)},l._onDocumentVisibility=p,l.set=function(A,w){return Av(A,w),l},l.tick=function(A){n=A,t||(t=n),I((n+(e-t))*Pt.speed)},l.seek=function(A){I(m(A))},l.pause=function(){l.paused=!0,p()},l.play=function(){!l.paused||(l.completed&&l.reset(),l.paused=!1,ui.push(l),p(),Mv())},l.reverse=function(){d(),l.completed=!l.reversed,p()},l.restart=function(){l.reset(),l.play()},l.remove=function(A){var w=Jm(A);Iv(w,l)},l.reset(),l.autoplay&&l.play(),l}function hv(i,t){for(var e=t.length;e--;)Um(i,t[e].animatable.target)&&t.splice(e,1)}function Iv(i,t){var e=t.animations,n=t.children;hv(i,e);for(var s=n.length;s--;){var o=n[s],r=o.animations;hv(i,r),!r.length&&!o.children.length&&n.splice(s,1)}!e.length&&!n.length&&t.pause()}function sD(i){for(var t=Jm(i),e=ui.length;e--;){var n=ui[e];Iv(t,n)}}function oD(i,t){t===void 0&&(t={});var e=t.direction||"normal",n=t.easing?Bm(t.easing):null,s=t.grid,o=t.axis,r=t.from||0,a=r==="first",l=r==="center",c=r==="last",d=G.arr(i),m=parseFloat(d?i[0]:i),p=d?parseFloat(i[1]):0,h=Qi(d?i[1]:i)||0,f=t.start||0+(d?m:0),g=[],E=0;return function(M,I,A){if(a&&(r=0),l&&(r=(A-1)/2),c&&(r=A-1),!g.length){for(var w=0;w<A;w++){if(!s)g.push(Math.abs(r-w));else{var P=l?(s[0]-1)/2:r%s[0],U=l?(s[1]-1)/2:Math.floor(r/s[0]),F=w%s[0],st=Math.floor(w/s[0]),Y=P-F,mt=U-st,W=Math.sqrt(Y*Y+mt*mt);o==="x"&&(W=-Y),o==="y"&&(W=-mt),g.push(W)}E=Math.max.apply(Math,g)}n&&(g=g.map(function(pt){return n(pt/E)*E})),e==="reverse"&&(g=g.map(function(pt){return o?pt<0?pt*-1:-pt:Math.abs(E-pt)}))}var xt=d?(p-m)/E:m;return f+xt*(Math.round(g[I]*100)/100)+h}}function rD(i){i===void 0&&(i={});var t=Pt(i);return t.duration=0,t.add=function(e,n){var s=ui.indexOf(t),o=t.children;s>-1&&ui.splice(s,1);function r(p){p.passThrough=!0}for(var a=0;a<o.length;a++)r(o[a]);var l=Zl(e,Pm(Fm,i));l.targets=l.targets||i.targets;var c=t.duration;l.autoplay=!1,l.direction=t.direction,l.timelineOffset=G.und(n)?c:qm(n,c),r(t),t.seek(l.timelineOffset);var d=Pt(l);r(d),o.push(d);var m=Sv(o,i);return t.delay=m.delay,t.endDelay=m.endDelay,t.duration=m.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}var uv,Fm,HH,ql,G,kH,vv,Cv,mv,ui,Mv,Be,ss=u(()=>{uv={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},Fm={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},HH=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],ql={CSS:{},springs:{}};G={arr:function(i){return Array.isArray(i)},obj:function(i){return cr(Object.prototype.toString.call(i),"Object")},pth:function(i){return G.obj(i)&&i.hasOwnProperty("totalLength")},svg:function(i){return i instanceof SVGElement},inp:function(i){return i instanceof HTMLInputElement},dom:function(i){return i.nodeType||G.svg(i)},str:function(i){return typeof i=="string"},fnc:function(i){return typeof i=="function"},und:function(i){return typeof i=="undefined"},nil:function(i){return G.und(i)||i===null},hex:function(i){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(i)},rgb:function(i){return/^rgb/.test(i)},hsl:function(i){return/^hsl/.test(i)},col:function(i){return G.hex(i)||G.rgb(i)||G.hsl(i)},key:function(i){return!uv.hasOwnProperty(i)&&!Fm.hasOwnProperty(i)&&i!=="targets"&&i!=="keyframes"}};kH=function(){var i=11,t=1/(i-1);function e(d,m){return 1-3*m+3*d}function n(d,m){return 3*m-6*d}function s(d){return 3*d}function o(d,m,p){return((e(m,p)*d+n(m,p))*d+s(m))*d}function r(d,m,p){return 3*e(m,p)*d*d+2*n(m,p)*d+s(m)}function a(d,m,p,h,f){var g,E,M=0;do E=m+(p-m)/2,g=o(E,h,f)-d,g>0?p=E:m=E;while(Math.abs(g)>1e-7&&++M<10);return E}function l(d,m,p,h){for(var f=0;f<4;++f){var g=r(m,p,h);if(g===0)return m;var E=o(m,p,h)-d;m-=E/g}return m}function c(d,m,p,h){if(!(0<=d&&d<=1&&0<=p&&p<=1))return;var f=new Float32Array(i);if(d!==m||p!==h)for(var g=0;g<i;++g)f[g]=o(g*t,d,p);function E(M){for(var I=0,A=1,w=i-1;A!==w&&f[A]<=M;++A)I+=t;--A;var P=(M-f[A])/(f[A+1]-f[A]),U=I+P*t,F=r(U,d,p);return F>=.001?l(M,U,d,p):F===0?U:a(M,I,I+t,d,p)}return function(M){return d===m&&p===h||M===0||M===1?M:o(E(M),m,h)}}return c}(),vv=function(){var i={linear:function(){return function(n){return n}}},t={Sine:function(){return function(n){return 1-Math.cos(n*Math.PI/2)}},Circ:function(){return function(n){return 1-Math.sqrt(1-n*n)}},Back:function(){return function(n){return n*n*(3*n-2)}},Bounce:function(){return function(n){for(var s,o=4;n<((s=Math.pow(2,--o))-1)/11;);return 1/Math.pow(4,3-o)-7.5625*Math.pow((s*3-2)/22-n,2)}},Elastic:function(n,s){n===void 0&&(n=1),s===void 0&&(s=.5);var o=Ri(n,1,10),r=Ri(s,.1,2);return function(a){return a===0||a===1?a:-o*Math.pow(2,10*(a-1))*Math.sin((a-1-r/(Math.PI*2)*Math.asin(1/o))*(Math.PI*2)/r)}}},e=["Quad","Cubic","Quart","Quint","Expo"];return e.forEach(function(n,s){t[n]=function(){return function(o){return Math.pow(o,s+2)}}}),Object.keys(t).forEach(function(n){var s=t[n];i["easeIn"+n]=s,i["easeOut"+n]=function(o,r){return function(a){return 1-s(o,r)(1-a)}},i["easeInOut"+n]=function(o,r){return function(a){return a<.5?s(o,r)(a*2)/2:1-s(o,r)(a*-2+2)/2}},i["easeOutIn"+n]=function(o,r){return function(a){return a<.5?(1-s(o,r)(1-a*2))/2:(s(o,r)(a*2-1)+1)/2}}}),i}();Cv={css:function(i,t,e){return i.style[t]=e},attribute:function(i,t,e){return i.setAttribute(t,e)},object:function(i,t,e){return i[t]=e},transform:function(i,t,e,n,s){if(n.list.set(t,e),t===n.last||s){var o="";n.list.forEach(function(r,a){o+=a+"("+r+") "}),i.style.transform=o}}};mv=0;ui=[],Mv=function(){var i;function t(){!i&&(!pv()||!Pt.suspendWhenDocumentHidden)&&ui.length>0&&(i=requestAnimationFrame(e))}function e(s){for(var o=ui.length,r=0;r<o;){var a=ui[r];a.paused?(ui.splice(r,1),o--):(a.tick(s),r++)}i=r>0?requestAnimationFrame(e):void 0}function n(){!Pt.suspendWhenDocumentHidden||(pv()?i=cancelAnimationFrame(i):(ui.forEach(function(s){return s._onDocumentVisibility()}),Mv()))}return typeof document!="undefined"&&document.addEventListener("visibilitychange",n),t}();Pt.version="3.2.1";Pt.speed=1;Pt.suspendWhenDocumentHidden=!0;Pt.running=ui;Pt.remove=sD;Pt.get=Wm;Pt.set=Av;Pt.convertPx=zm;Pt.path=JH;Pt.setDashoffset=qH;Pt.stagger=oD;Pt.timeline=rD;Pt.easing=Bm;Pt.penner=vv;Pt.random=function(i,t){return Math.floor(Math.random()*(t-i+1))+i};Be=Pt});var Rv,aD,Zm,dr,mr,Lt,ye=u(()=>{"use strict";ss();j();Rv=d2Env.isApp?0:-55,aD=d2Env.isApp?0:-5,Zm=(i,t)=>{let e=i.getBoundingClientRect(),{left:n,top:s}=e,o=t===document.scrollingElement,r=e.height>t.clientHeight;if(o)s+=(r?s>0:s<0)?Rv:-aD;else{let m=hi(t,"border-left-width"),p=hi(t,"border-top-width"),h=t.getBoundingClientRect();n-=h.left+m,s-=h.top+p}let a=t.clientWidth-e.width,l=t.clientHeight-e.height,c=t.scrollLeft+Math.min(n,Math.max(n-a,0)),d=t.scrollTop+Math.min(s,Math.max(s-l,0));return{left:c,top:d}},dr=(i,t=document.scrollingElement,e)=>{e?t.scrollTop=i:Be({targets:t,scrollTop:i,duration:500,elasticity:0,easing:"easeInOutCubic"})},mr=(i,t=document.scrollingElement,e)=>{let n=i.getBoundingClientRect();dr(t.scrollTop+n.top+(t?0:Rv),t,e)},Lt=(i,t=document.scrollingElement,e)=>{let n=Zm(i,t);dr(n.top,t,e)}});var $t,Jt,Vt,jt,Yl,Ln,tn,os,Ov,Kl,Gs,Hv,Ym,Xl,lD,cD,dD,mD,pD,hD,uD,fD,gD,Dv,Ue=u(()=>{$t="top",Jt="bottom",Vt="right",jt="left",Yl="auto",Ln=[$t,Jt,Vt,jt],tn="start",os="end",Ov="clippingParents",Kl="viewport",Gs="popper",Hv="reference",Ym=Ln.reduce(function(i,t){return i.concat([t+"-"+tn,t+"-"+os])},[]),Xl=[].concat(Ln,[Yl]).reduce(function(i,t){return i.concat([t,t+"-"+tn,t+"-"+os])},[]),lD="beforeRead",cD="read",dD="afterRead",mD="beforeMain",pD="main",hD="afterMain",uD="beforeWrite",fD="write",gD="afterWrite",Dv=[lD,cD,dD,mD,pD,hD,uD,fD,gD]});function ie(i){return i?(i.nodeName||"").toLowerCase():null}var xn=u(()=>{});function kt(i){if(i==null)return window;if(i.toString()!=="[object Window]"){var t=i.ownerDocument;return t&&t.defaultView||window}return i}var fi=u(()=>{});function ni(i){var t=kt(i).Element;return i instanceof t||i instanceof Element}function Zt(i){var t=kt(i).HTMLElement;return i instanceof t||i instanceof HTMLElement}function Js(i){if(typeof ShadowRoot=="undefined")return!1;var t=kt(i).ShadowRoot;return i instanceof t||i instanceof ShadowRoot}var je=u(()=>{fi()});function vD(i){var t=i.state;Object.keys(t.elements).forEach(function(e){var n=t.styles[e]||{},s=t.attributes[e]||{},o=t.elements[e];!Zt(o)||!ie(o)||(Object.assign(o.style,n),Object.keys(s).forEach(function(r){var a=s[r];a===!1?o.removeAttribute(r):o.setAttribute(r,a===!0?"":a)}))})}function ED(i){var t=i.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(n){var s=t.elements[n],o=t.attributes[n]||{},r=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:e[n]),a=r.reduce(function(l,c){return l[c]="",l},{});!Zt(s)||!ie(s)||(Object.assign(s.style,a),Object.keys(o).forEach(function(l){s.removeAttribute(l)}))})}}var kv,Nv=u(()=>{xn();je();kv={name:"applyStyles",enabled:!0,phase:"write",fn:vD,effect:ED,requires:["computeStyles"]}});function ne(i){return i.split("-")[0]}var wn=u(()=>{});var gi,rs,en,Cn=u(()=>{gi=Math.max,rs=Math.min,en=Math.round});function Zs(){var i=navigator.userAgentData;return i!=null&&i.brands?i.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}var Km=u(()=>{});function pr(){return!/^((?!chrome|android).)*safari/i.test(Zs())}var Xm=u(()=>{Km()});function si(i,t,e){t===void 0&&(t=!1),e===void 0&&(e=!1);var n=i.getBoundingClientRect(),s=1,o=1;t&&Zt(i)&&(s=i.offsetWidth>0&&en(n.width)/i.offsetWidth||1,o=i.offsetHeight>0&&en(n.height)/i.offsetHeight||1);var r=ni(i)?kt(i):window,a=r.visualViewport,l=!pr()&&e,c=(n.left+(l&&a?a.offsetLeft:0))/s,d=(n.top+(l&&a?a.offsetTop:0))/o,m=n.width/s,p=n.height/o;return{width:m,height:p,top:d,right:c+m,bottom:d+p,left:c,x:c,y:d}}var Ys=u(()=>{je();Cn();fi();Xm()});function as(i){var t=si(i),e=i.offsetWidth,n=i.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:i.offsetLeft,y:i.offsetTop,width:e,height:n}}var Ql=u(()=>{Ys()});function hr(i,t){var e=t.getRootNode&&t.getRootNode();if(i.contains(t))return!0;if(e&&Js(e)){var n=t;do{if(n&&i.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}var Qm=u(()=>{je()});function Le(i){return kt(i).getComputedStyle(i)}var Ks=u(()=>{fi()});function tp(i){return["table","td","th"].indexOf(ie(i))>=0}var Pv=u(()=>{xn()});function me(i){return((ni(i)?i.ownerDocument:i.document)||window.document).documentElement}var nn=u(()=>{je()});function sn(i){return ie(i)==="html"?i:i.assignedSlot||i.parentNode||(Js(i)?i.host:null)||me(i)}var ur=u(()=>{xn();nn();je()});function $v(i){return!Zt(i)||Le(i).position==="fixed"?null:i.offsetParent}function bD(i){var t=/firefox/i.test(Zs()),e=/Trident/i.test(Zs());if(e&&Zt(i)){var n=Le(i);if(n.position==="fixed")return null}var s=sn(i);for(Js(s)&&(s=s.host);Zt(s)&&["html","body"].indexOf(ie(s))<0;){var o=Le(s);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return s;s=s.parentNode}return null}function vi(i){for(var t=kt(i),e=$v(i);e&&tp(e)&&Le(e).position==="static";)e=$v(e);return e&&(ie(e)==="html"||ie(e)==="body"&&Le(e).position==="static")?t:e||bD(i)||t}var Xs=u(()=>{fi();xn();Ks();je();Pv();ur();Km()});function ls(i){return["top","bottom"].indexOf(i)>=0?"x":"y"}var tc=u(()=>{});function cs(i,t,e){return gi(i,rs(t,e))}function Fv(i,t,e){var n=cs(i,t,e);return n>e?e:n}var ep=u(()=>{Cn()});function fr(){return{top:0,right:0,bottom:0,left:0}}var ip=u(()=>{});function gr(i){return Object.assign({},fr(),i)}var np=u(()=>{ip()});function vr(i,t){return t.reduce(function(e,n){return e[n]=i,e},{})}var sp=u(()=>{});function TD(i){var t,e=i.state,n=i.name,s=i.options,o=e.elements.arrow,r=e.modifiersData.popperOffsets,a=ne(e.placement),l=ls(a),c=[jt,Vt].indexOf(a)>=0,d=c?"height":"width";if(!(!o||!r)){var m=_D(s.padding,e),p=as(o),h=l==="y"?$t:jt,f=l==="y"?Jt:Vt,g=e.rects.reference[d]+e.rects.reference[l]-r[l]-e.rects.popper[d],E=r[l]-e.rects.reference[l],M=vi(o),I=M?l==="y"?M.clientHeight||0:M.clientWidth||0:0,A=g/2-E/2,w=m[h],P=I-p[d]-m[f],U=I/2-p[d]/2+A,F=cs(w,U,P),st=l;e.modifiersData[n]=(t={},t[st]=F,t.centerOffset=F-U,t)}}function yD(i){var t=i.state,e=i.options,n=e.element,s=n===void 0?"[data-popper-arrow]":n;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||!hr(t.elements.popper,s)||(t.elements.arrow=s))}var _D,Bv,Uv=u(()=>{wn();Ql();Qm();Xs();tc();ep();np();sp();Ue();_D=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,gr(typeof t!="number"?t:vr(t,Ln))};Bv={name:"arrow",enabled:!0,phase:"main",fn:TD,effect:yD,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]}});function oi(i){return i.split("-")[1]}var Qs=u(()=>{});function xD(i){var t=i.x,e=i.y,n=window,s=n.devicePixelRatio||1;return{x:en(t*s)/s||0,y:en(e*s)/s||0}}function jv(i){var t,e=i.popper,n=i.popperRect,s=i.placement,o=i.variation,r=i.offsets,a=i.position,l=i.gpuAcceleration,c=i.adaptive,d=i.roundOffsets,m=i.isFixed,p=r.x,h=p===void 0?0:p,f=r.y,g=f===void 0?0:f,E=typeof d=="function"?d({x:h,y:g}):{x:h,y:g};h=E.x,g=E.y;var M=r.hasOwnProperty("x"),I=r.hasOwnProperty("y"),A=jt,w=$t,P=window;if(c){var U=vi(e),F="clientHeight",st="clientWidth";if(U===kt(e)&&(U=me(e),Le(U).position!=="static"&&a==="absolute"&&(F="scrollHeight",st="scrollWidth")),U=U,s===$t||(s===jt||s===Vt)&&o===os){w=Jt;var Y=m&&U===P&&P.visualViewport?P.visualViewport.height:U[F];g-=Y-n.height,g*=l?1:-1}if(s===jt||(s===$t||s===Jt)&&o===os){A=Vt;var mt=m&&U===P&&P.visualViewport?P.visualViewport.width:U[st];h-=mt-n.width,h*=l?1:-1}}var W=Object.assign({position:a},c&&LD),xt=d===!0?xD({x:h,y:g}):{x:h,y:g};if(h=xt.x,g=xt.y,l){var pt;return Object.assign({},W,(pt={},pt[w]=I?"0":"",pt[A]=M?"0":"",pt.transform=(P.devicePixelRatio||1)<=1?"translate("+h+"px, "+g+"px)":"translate3d("+h+"px, "+g+"px, 0)",pt))}return Object.assign({},W,(t={},t[w]=I?g+"px":"",t[A]=M?h+"px":"",t.transform="",t))}function wD(i){var t=i.state,e=i.options,n=e.gpuAcceleration,s=n===void 0?!0:n,o=e.adaptive,r=o===void 0?!0:o,a=e.roundOffsets,l=a===void 0?!0:a;if(!1)var c;var d={placement:ne(t.placement),variation:oi(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,jv(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:r,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,jv(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var LD,zv,Vv=u(()=>{Ue();Xs();fi();nn();Ks();wn();Qs();Cn();LD={top:"auto",right:"auto",bottom:"auto",left:"auto"};zv={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:wD,data:{}}});function CD(i){var t=i.state,e=i.instance,n=i.options,s=n.scroll,o=s===void 0?!0:s,r=n.resize,a=r===void 0?!0:r,l=kt(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&c.forEach(function(d){d.addEventListener("scroll",e.update,ec)}),a&&l.addEventListener("resize",e.update,ec),function(){o&&c.forEach(function(d){d.removeEventListener("scroll",e.update,ec)}),a&&l.removeEventListener("resize",e.update,ec)}}var ec,Wv,qv=u(()=>{fi();ec={passive:!0};Wv={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:CD,data:{}}});function to(i){return i.replace(/left|right|bottom|top/g,function(t){return AD[t]})}var AD,Gv=u(()=>{AD={left:"right",right:"left",bottom:"top",top:"bottom"}});function ic(i){return i.replace(/start|end/g,function(t){return SD[t]})}var SD,Jv=u(()=>{SD={start:"end",end:"start"}});function ds(i){var t=kt(i),e=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:e,scrollTop:n}}var nc=u(()=>{fi()});function ms(i){return si(me(i)).left+ds(i).scrollLeft}var sc=u(()=>{Ys();nn();nc()});function op(i,t){var e=kt(i),n=me(i),s=e.visualViewport,o=n.clientWidth,r=n.clientHeight,a=0,l=0;if(s){o=s.width,r=s.height;var c=pr();(c||!c&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:o,height:r,x:a+ms(i),y:l}}var Zv=u(()=>{fi();nn();sc();Xm()});function rp(i){var t,e=me(i),n=ds(i),s=(t=i.ownerDocument)==null?void 0:t.body,o=gi(e.scrollWidth,e.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),r=gi(e.scrollHeight,e.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-n.scrollLeft+ms(i),l=-n.scrollTop;return Le(s||e).direction==="rtl"&&(a+=gi(e.clientWidth,s?s.clientWidth:0)-o),{width:o,height:r,x:a,y:l}}var Yv=u(()=>{nn();Ks();sc();nc();Cn()});function ps(i){var t=Le(i),e=t.overflow,n=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+s+n)}var oc=u(()=>{Ks()});function rc(i){return["html","body","#document"].indexOf(ie(i))>=0?i.ownerDocument.body:Zt(i)&&ps(i)?i:rc(sn(i))}var Kv=u(()=>{ur();oc();xn();je()});function An(i,t){var e;t===void 0&&(t=[]);var n=rc(i),s=n===((e=i.ownerDocument)==null?void 0:e.body),o=kt(n),r=s?[o].concat(o.visualViewport||[],ps(n)?n:[]):n,a=t.concat(r);return s?a:a.concat(An(sn(r)))}var ap=u(()=>{Kv();ur();fi();oc()});function eo(i){return Object.assign({},i,{left:i.x,top:i.y,right:i.x+i.width,bottom:i.y+i.height})}var lp=u(()=>{});function MD(i,t){var e=si(i,!1,t==="fixed");return e.top=e.top+i.clientTop,e.left=e.left+i.clientLeft,e.bottom=e.top+i.clientHeight,e.right=e.left+i.clientWidth,e.width=i.clientWidth,e.height=i.clientHeight,e.x=e.left,e.y=e.top,e}function Xv(i,t,e){return t===Kl?eo(op(i,e)):ni(t)?MD(t,e):eo(rp(me(i)))}function ID(i){var t=An(sn(i)),e=["absolute","fixed"].indexOf(Le(i).position)>=0,n=e&&Zt(i)?vi(i):i;return ni(n)?t.filter(function(s){return ni(s)&&hr(s,n)&&ie(s)!=="body"}):[]}function cp(i,t,e,n){var s=t==="clippingParents"?ID(i):[].concat(t),o=[].concat(s,[e]),r=o[0],a=o.reduce(function(l,c){var d=Xv(i,c,n);return l.top=gi(d.top,l.top),l.right=rs(d.right,l.right),l.bottom=rs(d.bottom,l.bottom),l.left=gi(d.left,l.left),l},Xv(i,r,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}var Qv=u(()=>{Ue();Zv();Yv();ap();Xs();nn();Ks();je();Ys();ur();Qm();xn();lp();Cn()});function Er(i){var t=i.reference,e=i.element,n=i.placement,s=n?ne(n):null,o=n?oi(n):null,r=t.x+t.width/2-e.width/2,a=t.y+t.height/2-e.height/2,l;switch(s){case $t:l={x:r,y:t.y-e.height};break;case Jt:l={x:r,y:t.y+t.height};break;case Vt:l={x:t.x+t.width,y:a};break;case jt:l={x:t.x-e.width,y:a};break;default:l={x:t.x,y:t.y}}var c=s?ls(s):null;if(c!=null){var d=c==="y"?"height":"width";switch(o){case tn:l[c]=l[c]-(t[d]/2-e[d]/2);break;case os:l[c]=l[c]+(t[d]/2-e[d]/2);break;default:}}return l}var dp=u(()=>{wn();Qs();tc();Ue()});function Ei(i,t){t===void 0&&(t={});var e=t,n=e.placement,s=n===void 0?i.placement:n,o=e.strategy,r=o===void 0?i.strategy:o,a=e.boundary,l=a===void 0?Ov:a,c=e.rootBoundary,d=c===void 0?Kl:c,m=e.elementContext,p=m===void 0?Gs:m,h=e.altBoundary,f=h===void 0?!1:h,g=e.padding,E=g===void 0?0:g,M=gr(typeof E!="number"?E:vr(E,Ln)),I=p===Gs?Hv:Gs,A=i.rects.popper,w=i.elements[f?I:p],P=cp(ni(w)?w:w.contextElement||me(i.elements.popper),l,d,r),U=si(i.elements.reference),F=Er({reference:U,element:A,strategy:"absolute",placement:s}),st=eo(Object.assign({},A,F)),Y=p===Gs?st:U,mt={top:P.top-Y.top+M.top,bottom:Y.bottom-P.bottom+M.bottom,left:P.left-Y.left+M.left,right:Y.right-P.right+M.right},W=i.modifiersData.offset;if(p===Gs&&W){var xt=W[s];Object.keys(mt).forEach(function(pt){var Ot=[Vt,Jt].indexOf(pt)>=0?1:-1,Ut=[$t,Jt].indexOf(pt)>=0?"y":"x";mt[pt]+=xt[Ut]*Ot})}return mt}var br=u(()=>{Qv();nn();Ys();dp();lp();Ue();je();np();sp()});function mp(i,t){t===void 0&&(t={});var e=t,n=e.placement,s=e.boundary,o=e.rootBoundary,r=e.padding,a=e.flipVariations,l=e.allowedAutoPlacements,c=l===void 0?Xl:l,d=oi(n),m=d?a?Ym:Ym.filter(function(f){return oi(f)===d}):Ln,p=m.filter(function(f){return c.indexOf(f)>=0});p.length===0&&(p=m);var h=p.reduce(function(f,g){return f[g]=Ei(i,{placement:g,boundary:s,rootBoundary:o,padding:r})[ne(g)],f},{});return Object.keys(h).sort(function(f,g){return h[f]-h[g]})}var tE=u(()=>{Qs();Ue();br();wn()});function RD(i){if(ne(i)===Yl)return[];var t=to(i);return[ic(i),t,ic(t)]}function OD(i){var t=i.state,e=i.options,n=i.name;if(!t.modifiersData[n]._skip){for(var s=e.mainAxis,o=s===void 0?!0:s,r=e.altAxis,a=r===void 0?!0:r,l=e.fallbackPlacements,c=e.padding,d=e.boundary,m=e.rootBoundary,p=e.altBoundary,h=e.flipVariations,f=h===void 0?!0:h,g=e.allowedAutoPlacements,E=t.options.placement,M=ne(E),I=M===E,A=l||(I||!f?[to(E)]:RD(E)),w=[E].concat(A).reduce(function(ei,Zi){return ei.concat(ne(Zi)===Yl?mp(t,{placement:Zi,boundary:d,rootBoundary:m,padding:c,flipVariations:f,allowedAutoPlacements:g}):Zi)},[]),P=t.rects.reference,U=t.rects.popper,F=new Map,st=!0,Y=w[0],mt=0;mt<w.length;mt++){var W=w[mt],xt=ne(W),pt=oi(W)===tn,Ot=[$t,Jt].indexOf(xt)>=0,Ut=Ot?"width":"height",At=Ei(t,{placement:W,boundary:d,rootBoundary:m,altBoundary:p,padding:c}),te=Ot?pt?Vt:jt:pt?Jt:$t;P[Ut]>U[Ut]&&(te=to(te));var le=to(te),Te=[];if(o&&Te.push(At[xt]<=0),a&&Te.push(At[te]<=0,At[le]<=0),Te.every(function(ei){return ei})){Y=W,st=!1;break}F.set(W,Te)}if(st)for(var pi=f?3:1,Ji=function(Zi){var _n=w.find(function(Tn){var Yi=F.get(Tn);if(Yi)return Yi.slice(0,Zi).every(function(Im){return Im})});if(_n)return Y=_n,"break"},Ai=pi;Ai>0;Ai--){var ts=Ji(Ai);if(ts==="break")break}t.placement!==Y&&(t.modifiersData[n]._skip=!0,t.placement=Y,t.reset=!0)}}var eE,iE=u(()=>{Gv();wn();Jv();br();tE();Ue();Qs();eE={name:"flip",enabled:!0,phase:"main",fn:OD,requiresIfExists:["offset"],data:{_skip:!1}}});function nE(i,t,e){return e===void 0&&(e={x:0,y:0}),{top:i.top-t.height-e.y,right:i.right-t.width+e.x,bottom:i.bottom-t.height+e.y,left:i.left-t.width-e.x}}function sE(i){return[$t,Vt,Jt,jt].some(function(t){return i[t]>=0})}function HD(i){var t=i.state,e=i.name,n=t.rects.reference,s=t.rects.popper,o=t.modifiersData.preventOverflow,r=Ei(t,{elementContext:"reference"}),a=Ei(t,{altBoundary:!0}),l=nE(r,n),c=nE(a,s,o),d=sE(l),m=sE(c);t.modifiersData[e]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:m},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":m})}var oE,rE=u(()=>{Ue();br();oE={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:HD}});function DD(i,t,e){var n=ne(i),s=[jt,$t].indexOf(n)>=0?-1:1,o=typeof e=="function"?e(Object.assign({},t,{placement:i})):e,r=o[0],a=o[1];return r=r||0,a=(a||0)*s,[jt,Vt].indexOf(n)>=0?{x:a,y:r}:{x:r,y:a}}function kD(i){var t=i.state,e=i.options,n=i.name,s=e.offset,o=s===void 0?[0,0]:s,r=Xl.reduce(function(d,m){return d[m]=DD(m,t.rects,o),d},{}),a=r[t.placement],l=a.x,c=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[n]=r}var aE,lE=u(()=>{wn();Ue();aE={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:kD}});function ND(i){var t=i.state,e=i.name;t.modifiersData[e]=Er({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var cE,dE=u(()=>{dp();cE={name:"popperOffsets",enabled:!0,phase:"read",fn:ND,data:{}}});function pp(i){return i==="x"?"y":"x"}var mE=u(()=>{});function PD(i){var t=i.state,e=i.options,n=i.name,s=e.mainAxis,o=s===void 0?!0:s,r=e.altAxis,a=r===void 0?!1:r,l=e.boundary,c=e.rootBoundary,d=e.altBoundary,m=e.padding,p=e.tether,h=p===void 0?!0:p,f=e.tetherOffset,g=f===void 0?0:f,E=Ei(t,{boundary:l,rootBoundary:c,padding:m,altBoundary:d}),M=ne(t.placement),I=oi(t.placement),A=!I,w=ls(M),P=pp(w),U=t.modifiersData.popperOffsets,F=t.rects.reference,st=t.rects.popper,Y=typeof g=="function"?g(Object.assign({},t.rects,{placement:t.placement})):g,mt=typeof Y=="number"?{mainAxis:Y,altAxis:Y}:Object.assign({mainAxis:0,altAxis:0},Y),W=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,xt={x:0,y:0};if(!!U){if(o){var pt,Ot=w==="y"?$t:jt,Ut=w==="y"?Jt:Vt,At=w==="y"?"height":"width",te=U[w],le=te+E[Ot],Te=te-E[Ut],pi=h?-st[At]/2:0,Ji=I===tn?F[At]:st[At],Ai=I===tn?-st[At]:-F[At],ts=t.elements.arrow,ei=h&&ts?as(ts):{width:0,height:0},Zi=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:fr(),_n=Zi[Ot],Tn=Zi[Ut],Yi=cs(0,F[At],ei[At]),Im=A?F[At]/2-pi-Yi-_n-mt.mainAxis:Ji-Yi-_n-mt.mainAxis,oH=A?-F[At]/2+pi+Yi+Tn+mt.mainAxis:Ai+Yi+Tn+mt.mainAxis,Rm=t.elements.arrow&&vi(t.elements.arrow),rH=Rm?w==="y"?Rm.clientTop||0:Rm.clientLeft||0:0,Rg=(pt=W==null?void 0:W[w])!=null?pt:0,aH=te+Im-Rg-rH,lH=te+oH-Rg,Og=cs(h?rs(le,aH):le,te,h?gi(Te,lH):Te);U[w]=Og,xt[w]=Og-te}if(a){var Hg,cH=w==="x"?$t:jt,dH=w==="x"?Jt:Vt,es=U[P],Ol=P==="y"?"height":"width",Dg=es+E[cH],kg=es-E[dH],Om=[$t,jt].indexOf(M)!==-1,Ng=(Hg=W==null?void 0:W[P])!=null?Hg:0,Pg=Om?Dg:es-F[Ol]-st[Ol]-Ng+mt.altAxis,$g=Om?es+F[Ol]+st[Ol]-Ng-mt.altAxis:kg,Fg=h&&Om?Fv(Pg,es,$g):cs(h?Pg:Dg,es,h?$g:kg);U[P]=Fg,xt[P]=Fg-es}t.modifiersData[n]=xt}}var pE,hE=u(()=>{Ue();wn();tc();mE();ep();Ql();Xs();br();Qs();ip();Cn();pE={name:"preventOverflow",enabled:!0,phase:"main",fn:PD,requiresIfExists:["offset"]}});var hp=u(()=>{});function up(i){return{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}}var uE=u(()=>{});function fp(i){return i===kt(i)||!Zt(i)?ds(i):up(i)}var fE=u(()=>{nc();fi();je();uE()});function $D(i){var t=i.getBoundingClientRect(),e=en(t.width)/i.offsetWidth||1,n=en(t.height)/i.offsetHeight||1;return e!==1||n!==1}function gp(i,t,e){e===void 0&&(e=!1);var n=Zt(t),s=Zt(t)&&$D(t),o=me(t),r=si(i,s,e),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!e)&&((ie(t)!=="body"||ps(o))&&(a=fp(t)),Zt(t)?(l=si(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=ms(o))),{x:r.left+a.scrollLeft-l.x,y:r.top+a.scrollTop-l.y,width:r.width,height:r.height}}var gE=u(()=>{Ys();fE();xn();je();sc();nn();oc();Cn()});function FD(i){var t=new Map,e=new Set,n=[];i.forEach(function(o){t.set(o.name,o)});function s(o){e.add(o.name);var r=[].concat(o.requires||[],o.requiresIfExists||[]);r.forEach(function(a){if(!e.has(a)){var l=t.get(a);l&&s(l)}}),n.push(o)}return i.forEach(function(o){e.has(o.name)||s(o)}),n}function vp(i){var t=FD(i);return Dv.reduce(function(e,n){return e.concat(t.filter(function(s){return s.phase===n}))},[])}var vE=u(()=>{Ue()});function Ep(i){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(i())})})),t}}var EE=u(()=>{});function bp(i){var t=i.reduce(function(e,n){var s=e[n.name];return e[n.name]=s?Object.assign({},s,n,{options:Object.assign({},s.options,n.options),data:Object.assign({},s.data,n.data)}):n,e},{});return Object.keys(t).map(function(e){return t[e]})}var bE=u(()=>{});function TE(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function yE(i){i===void 0&&(i={});var t=i,e=t.defaultModifiers,n=e===void 0?[]:e,s=t.defaultOptions,o=s===void 0?_E:s;return function(a,l,c){c===void 0&&(c=o);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},_E,o),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},m=[],p=!1,h={state:d,setOptions:function(M){var I=typeof M=="function"?M(d.options):M;g(),d.options=Object.assign({},o,d.options,I),d.scrollParents={reference:ni(a)?An(a):a.contextElement?An(a.contextElement):[],popper:An(l)};var A=vp(bp([].concat(n,d.options.modifiers)));if(d.orderedModifiers=A.filter(function(W){return W.enabled}),!1){var w;if(getBasePlacement(d.options.placement)===auto)var P;var U,F,st,Y,mt}return f(),h.update()},forceUpdate:function(){if(!p){var M=d.elements,I=M.reference,A=M.popper;if(!!TE(I,A)){d.rects={reference:gp(I,vi(A),d.options.strategy==="fixed"),popper:as(A)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(W){return d.modifiersData[W.name]=Object.assign({},W.data)});for(var w=0,P=0;P<d.orderedModifiers.length;P++){if(d.reset===!0){d.reset=!1,P=-1;continue}var U=d.orderedModifiers[P],F=U.fn,st=U.options,Y=st===void 0?{}:st,mt=U.name;typeof F=="function"&&(d=F({state:d,options:Y,name:mt,instance:h})||d)}}}},update:Ep(function(){return new Promise(function(E){h.forceUpdate(),E(d)})}),destroy:function(){g(),p=!0}};if(!TE(a,l))return h;h.setOptions(c).then(function(E){!p&&c.onFirstUpdate&&c.onFirstUpdate(E)});function f(){d.orderedModifiers.forEach(function(E){var M=E.name,I=E.options,A=I===void 0?{}:I,w=E.effect;if(typeof w=="function"){var P=w({state:d,name:M,instance:h,options:A}),U=function(){};m.push(P||U)}})}function g(){m.forEach(function(E){return E()}),m=[]}return h}}var _E,LE=u(()=>{gE();Ql();ap();Xs();vE();EE();bE();je();_E={placement:"bottom",modifiers:[],strategy:"absolute"}});var BD,hs,xE=u(()=>{LE();qv();dE();Vv();Nv();lE();iE();hE();Uv();rE();hp();BD=[Wv,cE,zv,kv,aE,eE,pE,Bv,oE],hs=yE({defaultModifiers:BD})});var ac=u(()=>{Ue();hp();xE()});var UD,lc,aZ,_p=u(()=>{"use strict";UD=()=>["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,lc=Boolean(navigator.userAgent.match(/android/i)),aZ=UD()});var jD,us,Tp=u(()=>{"use strict";ac();ss();_p();D();jD=200,us=class extends EventTarget{constructor(e,n,s={}){super();this.element=s.element,this.anchor=n,this.message=e,this.config=s}render(){let e=this.anchor&&document.body.contains(this.anchor),n=S("div",`c-bubble__body${this.config.isDark?" ctx-dark":""}`,this.close=S("div","c-bubble__close"),this.contentElement=typeof this.message=="string"?S("div",{className:"c-bubble__content",innerHTML:this.message}):S("div","c-bubble__content",this.message),e&&S("div",{className:"c-bubble__arrow","data-popper-arrow":""}));this.element?this.element.classList.add("c-bubble"):this.element=S("div","c-bubble"),this.config.classNames&&this.element.classList.add(...this.config.classNames);let s=this.anchor&&Wl(this.anchor)||0;this.element.style.zIndex=String(Math.max(s+1,this.config.minZIndex||10)),this.element.appendChild(n),document.body.contains(this.element)||document.body.appendChild(this.element)}show(){let e=Boolean(this.anchor&&document.body.contains(this.anchor));this.popper=hs(this.anchor||document.body,this.element,{placement:e&&this.config.placement||"top",modifiers:[{name:"offset",options:{offset:this.config.offset||[0,9]}},{name:"arrow",enabled:e},{name:"preventOverflow",options:{padding:e?5:20,altAxis:!e,tether:e}},{name:"flip",enabled:e&&!this.config.noFlip,options:{padding:{top:d2Env.isApp?lc?56:0:50,bottom:d2Env.isApp?56:0}}}],onFirstUpdate:()=>{this.onCreate()}}),this.anchor&&this.anchor.parentElement&&(this.anchorObserver=new MutationObserver(()=>{(!this.anchor||!document.body.contains(this.anchor))&&(this.anchorObserver.disconnect(),this.attachEventListeners(!1),this.onHide())}),this.anchorObserver.observe(this.anchor.parentElement,{childList:!0}))}attachEventListeners(e){e?(this.close.addEventListener("click",this),document.addEventListener("click",this,!0),document.addEventListener("keydown",this)):(this.close.removeEventListener("click",this),document.removeEventListener("click",this,!0),document.removeEventListener("keydown",this))}handleEvent(e){switch(e.type){case"click":(!this.element.contains(e.target)||e.target===this.close)&&this.hide();break;case"keydown":e.keyCode===27&&this.hide()}}setTransition(e){return Be({targets:this.element,opacity:e?[0,1]:[1,0],duration:jD,easing:e?"easeOutSine":"easeInSine",elasticity:0})}onCreate(){if(this.config.isDropdown||this.config.noAnimation)this.onShow();else{let e=this.setTransition(!0);e.complete=()=>this.onShow()}this.attachEventListeners(!0)}hide(){if(!!this.dispatchEvent(new CustomEvent("beforehide",{cancelable:!0})))if(this.attachEventListeners(!1),this.anchorObserver&&this.anchorObserver.disconnect(),this.config.noAnimation)this.onHide();else{let e=this.setTransition(!1);e.complete=()=>this.onHide()}}onShow(){this.dispatchEvent(new CustomEvent("show"))}onHide(){this.popper&&(this.popper.destroy(),delete this.popper),this.element&&(this.element.remove(),delete this.element),this.dispatchEvent(new CustomEvent("hide"))}}});var cc,dc,yp=u(()=>{"use strict";cc="Подтвердить",dc="Отменить"});var mc,CE=u(()=>{"use strict";yp();D();Tp();mc=class extends us{constructor(e,n,s,o,r){super(`<h3 class="x-header o-b-xs">${e}</h3>${n?`<div class="x-text">${n}</div>`:""}`,s,{classNames:["c-bubble--confirm"]});this.confirmButton=o,this.cancelButton=r,this.resolve=()=>{},this.promise=new Promise(a=>{this.resolve=a}),this.isConfirm=!1}render(){super.render(),this.contentElement.appendChild(S("div","o-t-l",this.confirm=S("button","c-button c-button--block c-button--l c-button--primary",this.confirmButton||cc),this.cancel=S("button","c-button c-button--block c-button--l o-t-s",this.cancelButton||dc)))}onCreate(){super.onCreate(),this.confirm.focus(),this.confirm.addEventListener("click",()=>{this.isConfirm=!0,this.hide()}),this.cancel.addEventListener("click",()=>this.hide())}onHide(){super.onHide(),this.resolve(this.isConfirm)}}});var AE,SE,Lp=u(()=>{"use strict";AE="Закрыть (Esc)",SE="Выберите действие"});var _r,xp=u(()=>{"use strict";_r=(i,t)=>{if(!d2Env.isApp)return;let e=t?t.toString():"";window.location.href=`drive2://${i}${e?`/?${e}`:""}`}});var wp,Cp,ME,IE,ze,pc,on=u(()=>{"use strict";ME=i=>{wp=i},IE=i=>{Cp=i},ze=()=>{wp&&wp.hide()},pc=()=>{Cp&&Cp.hide()}});var rn,hc=u(()=>{"use strict";D();j();on();rn=class extends EventTarget{constructor(e={}){super();this.needTransition=!1;this.canHazOverlay=()=>!1;this.visible=!1;this.backwardTabWrapInProgress=!1;let{anchor:n,title:s,html:o}=e;this.anchor=n,this.title=s||"",this.html=o||"",this.config=C({className:"c-modal__content--basic"},e)}createDom(){this.element=S("div","c-modal",this.containerEl=S("div",{className:"c-modal__container",tabIndex:"0"},this.headerGroup=S("div","c-modal__header-group",this.header=S("div",{className:"c-modal__header",innerHTML:this.title}),this.close=S("div","c-modal__close",S("div"))),this.contentElement=S("div",{className:`c-modal__content${this.config.className?` ${this.config.className}`:""}`,innerHTML:this.html}))),_(this.element,!1),this.tabCatcherEl=S("div",{tabIndex:"0",style:"position:fixed"}),_(this.tabCatcherEl,!1),document.body.append(this.element,this.tabCatcherEl)}render(){this.createDom()}decorate(e){this.createDom(),this.contentElement.replaceWith(e),this.contentElement=e,this.contentElement.classList.add("c-modal__content"),this.config.className&&this.contentElement.classList.add(this.config.className),_(this.contentElement,!0)}show(){this.visible||!this.dispatchEvent(new CustomEvent("beforeshow",{cancelable:!0}))||(this.visible=!0,this.onBeforeShow(),ze(),pc(),this.attachEventListeners(!0),this.showElements(!0),this.needTransition?this.playTransition(!0):this.onShow())}hide(){!this.visible||!this.dispatchEvent(new CustomEvent("beforehide",{cancelable:!0}))||(this.visible=!1,this.onBeforeHide(),this.attachEventListeners(!1),this.needTransition?this.playTransition(!1):this.onHide())}focus(){this.focusElement()}setupBackwardTabWrap(){this.backwardTabWrapInProgress=!0;try{this.tabCatcherEl.focus()}catch(e){}setTimeout(()=>this.resetBackwardTabWrap())}resetBackwardTabWrap(){this.backwardTabWrapInProgress=!1}showElements(e){_(this.tabCatcherEl,e),_(this.element,e)}attachEventListeners(e){e?(document.documentElement.addEventListener("focus",this,!0),this.close.addEventListener("click",this),document.addEventListener("keydown",this)):(document.documentElement.removeEventListener("focus",this,!0),this.close.removeEventListener("click",this),document.removeEventListener("keydown",this))}playTransition(e){e?this.onShow():this.onHide()}handleEvent(e){switch(e.type){case"focus":this.onFocus(e);break;case"click":this.onClick(e);break;case"keydown":this.onKey(e)}}onClick(e){e.preventDefault(),e.stopPropagation(),this.hide()}onFocus(e){this.backwardTabWrapInProgress?this.resetBackwardTabWrap():e.target===this.tabCatcherEl&&setTimeout(()=>this.focusElement())}onKey(e){let n=e.target,s=!1;e.keyCode===27?n.tagName==="SELECT"&&!n.disabled||(s=!0):e.keyCode===9&&e.shiftKey&&n===this.containerEl&&this.setupBackwardTabWrap(),s&&(e.stopPropagation(),e.preventDefault(),this.hide())}onBeforeShow(){}onShow(){this.focus();let e=J("[data-autofocus],[autofocus]",this.contentElement);e&&setTimeout(()=>e.focus()),this.dispatchEvent(new CustomEvent("show"))}onBeforeHide(){}onHide(){this.element.remove(),this.tabCatcherEl.remove(),this.dispatchEvent(new CustomEvent("hide"))}focusElement(){try{let{scrollTop:e}=this.element;this.containerEl.focus(),this.element.scrollTop=e}catch(e){}}}});var an,uc=u(()=>{"use strict";Lp();D();xp();hc();an=class extends rn{constructor(e={}){super(C({title:SE},e));this.scrollY=0}createDomInternal(){this.element.classList.add("c-modal--pop-screen"),this.closeClone=this.close.cloneNode(!1),this.closeClone.classList.replace("c-modal__close","c-modal__close-box"),this.wrapper.prepend(this.closeClone)}createDom(){super.createDom(),this.wrapper=S("div","c-modal__wrapper"),this.wrapper.appendChild(this.containerEl),this.element.appendChild(this.wrapper),this.createDomInternal()}attachEventListeners(e){super.attachEventListeners(e),e?this.closeClone.addEventListener("click",this):this.closeClone.removeEventListener("click",this)}setDocumentHidden(e){e&&(this.scrollY=document.scrollingElement.scrollTop),document.documentElement.classList.toggle("g-dialog-active",e),document.scrollingElement.scrollTop=e?0:this.scrollY}onBeforeShow(){super.onBeforeShow(),this.canHazOverlay(!0)&&(this.setDocumentHidden(!0),d2Env.isApp&&setTimeout(()=>{let e=new URLSearchParams({header:this.title,headerColor:"ffffff",statusBarStyle:"dark"});_r("modal",e)}))}onHide(){super.onHide(),this.canHazOverlay(!1)&&(this.setDocumentHidden(!1),d2Env.isApp&&_r("modal-close"))}focusElement(){try{this.containerEl.focus(),this.wrapper.scrollTop=0,setTimeout(()=>{this.wrapper.scrollTop=0})}catch(e){}}}});var fc,RE=u(()=>{"use strict";yp();D();uc();fc=class extends an{constructor(e,n,s,o,r){super({anchor:s,title:e});this.resolve=()=>{};this.promise=new Promise(e=>{this.resolve=e});this.isConfirm=!1;this.html=n?`<div class="x-box x-box--ghost">${n}</div>`:"",this.confirmButton=o,this.cancelButton=r}render(){super.render(),this.contentElement.appendChild(S("div","x-box x-box--ghost o-t-l",this.confirm=S("button","c-button c-button--block c-button--l c-button--primary",this.confirmButton||cc),this.cancel=S("button","c-button c-button--block c-button--l o-t-s",this.cancelButton||dc)))}attachEventListeners(e){super.attachEventListeners(e),e&&(this.confirm.addEventListener("click",()=>{this.isConfirm=!0,this.hide()}),this.cancel.addEventListener("click",()=>{this.hide()}))}onShow(){super.onShow(),this.confirm.focus()}onHide(){super.onHide(),setTimeout(()=>{this.resolve(this.isConfirm)},1e3)}}});var bt,ln=u(()=>{"use strict";bt=class{constructor(t,e){this.width=t;this.height=e}clone(){return new bt(this.width,this.height)}getLongest(){return Math.max(this.width,this.height)}getShortest(){return Math.min(this.width,this.height)}area(){return this.width*this.height}aspectRatio(){return this.width/this.height}ceil(){return this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this}fitsInside(t){return this.width<=t.width&&this.height<=t.height}floor(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this}round(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this}scale(t,e){return this.width*=t,this.height*=typeof e=="number"?e:t,this}scaleToCover(t){let e=this.aspectRatio()<=t.aspectRatio()?t.width/this.width:t.height/this.height;return this.scale(e)}scaleToFit(t){let e=this.aspectRatio()>t.aspectRatio()?t.width/this.width:t.height/this.height;return this.scale(e)}static equals(t,e){return t===e?!0:!t||!e?!1:t.width===e.width&&t.height===e.height}}});var Ap,OE=u(()=>{"use strict";j();Ap=i=>{document.body.style.marginRight=i?`${iv()}px`:"",document.documentElement.style.overflow=i?"hidden":""}});var HE,DE,Tr,Sp=u(()=>{"use strict";ss();Lp();D();ln();j();OE();hc();HE="cubicBezier(.39,.575,.565,1)",DE="is-visible",Tr=class extends rn{constructor(e){super(e);this.transitionDuration=300;this.needTransition=!0,this.onDocumentClick=this.onDocumentClick.bind(this)}createDom(){this.bgEl=S("div","c-modal__bg"),_(this.bgEl,!1),document.body.appendChild(this.bgEl),super.createDom(),this.close.title=AE}showElements(e){_(this.bgEl,e),super.showElements(e)}getPreviewSize(e,n){return e.clone().scaleToFit(n)}playTransition(e){if(!this.anchor){this.onTransitionEnd();return}this.anchorBox=this.anchorBox&&!document.documentElement.contains(this.anchor)?this.anchorBox:Xi(this.anchor);let n=Xi(this.containerEl),s=new bt(n.width,n.height),o=this.getPreviewSize(s,new bt(this.anchorBox.width,this.anchorBox.height)),r=o.width/s.width,a=this.anchorBox.left-n.left-Math.round((o.width-this.anchorBox.width)/2),l=this.anchorBox.top-n.top-Math.round((o.height-this.anchorBox.height)/2);if(this.transition){this.bgTransition.reverse(),this.transition.reverse();return}this.bgTransition=Be({targets:this.bgEl,opacity:e?[0,1]:0,duration:this.transitionDuration,easing:HE,elasticity:0}),this.transition=Be({targets:this.containerEl,translateX:e?[a,0]:a,translateY:e?[l,0]:l,scale:e?[r,1]:r,opacity:this.config.noFadeIn?1:e?[0,1]:0,duration:this.transitionDuration,easing:HE,elasticity:0}),this.transition.complete=this.onTransitionEnd.bind(this)}onTransitionEnd(){this.containerEl&&(this.containerEl.style.transform=""),this.visible?this.onShow():this.onHide()}attachEventListeners(e){super.attachEventListeners(e),this.config.closeOnClick&&(e?document.addEventListener("click",this.onDocumentClick,!0):document.removeEventListener("click",this.onDocumentClick,!0))}onDocumentClick(e){this.containerEl.contains(e.target)||(e.preventDefault(),e.stopPropagation(),this.hide())}onBeforeShow(){super.onBeforeShow(),this.canHazOverlay(!0)&&Ap(!0)}onShow(){super.onShow(),this.transition=void 0,this.bgTransition=void 0,this.element.classList.add(DE)}onHide(){this.transition=void 0,this.bgTransition=void 0,this.element.classList.remove(DE),this.bgEl.remove(),super.onHide(),this.canHazOverlay(!1)&&Ap(!1)}}});var gc,kE=u(()=>{"use strict";D();uc();gc=class extends an{createDomInternal(){this.sentinel=S("div","c-modal__sentinel"),this.wrapper.prepend(this.sentinel),this.headerTop=S("div","c-modal__header-top"),this.closeClone=this.close.cloneNode(!1),this.headerTop.append(this.header.cloneNode(!0),this.closeClone),this.containerEl.prepend(this.headerGroup),this.element.appendChild(this.headerTop),this.observer=new IntersectionObserver(e=>{this.element.classList.toggle("is-stuck",!e[0].isIntersecting)},{threshold:0})}onShow(){super.onShow(),this.observer.observe(this.sentinel)}onHide(){super.onHide(),this.observer.unobserve(this.sentinel)}}});var io,Ve,NE,VD,vc,Mp=u(()=>{"use strict";io=(()=>{let e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",n=`[\\s|\\(]+(${e})[,|\\s]+(${e})[,|\\s]+(${e})\\s*\\)?`,s=`[\\s|\\(]+(${e})[,|\\s]+(${e})[,|\\s]+(${e})[,|\\s]+(${e})\\s*\\)?`;return{CSS_UNIT:new RegExp(e),rgb:new RegExp(`rgb${n}`),rgba:new RegExp(`rgba${s}`),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})(),Ve=i=>parseInt(i,16),NE=i=>Ve(i)/255,VD=i=>{if(!i)return;if(i=i.trim().toLowerCase(),i==="transparent")return{r:0,g:0,b:0,a:0};let t;if(t=io.rgb.exec(i))return{r:Number(t[1]),g:Number(t[2]),b:Number(t[3])};if(t=io.rgba.exec(i))return{r:Number(t[1]),g:Number(t[2]),b:Number(t[3]),a:Number(t[4])};if(t=io.hex8.exec(i))return{r:Ve(t[1]),g:Ve(t[2]),b:Ve(t[3]),a:NE(t[4])};if(t=io.hex6.exec(i))return{r:Ve(t[1]),g:Ve(t[2]),b:Ve(t[3])};if(t=io.hex4.exec(i))return{r:Ve(`${t[1]}${t[1]}`),g:Ve(`${t[2]}${t[2]}`),b:Ve(`${t[3]}${t[3]}`),a:NE(`${t[4]}${t[4]}`)};if(t=io.hex3.exec(i))return{r:Ve(`${t[1]}${t[1]}`),g:Ve(`${t[2]}${t[2]}`),b:Ve(`${t[3]}${t[3]}`)}},vc=i=>{function t(s){let o=s.toString(16);return o.length===1?`0${o}`:o}function e(s){return`#${t(s.r)}${t(s.g)}${t(s.b)}`}if(!i)return i;let n=VD(i);return e(n)}});function no(i){if(!d2Env.isApp)return i;let t=i.indexOf("base64");return t!==-1?i.substr(t+7):i}var Ip=u(()=>{"use strict"});function yr(i){let t=i.querySelectorAll("img"),e=t[t.length-1],n=vc(i.style.backgroundColor),s=e.dataset[WD]||e.src||"",o=d2Env.isApp?e.dataset[qD]||e.src||"":e.src||"",{size:r}=i.dataset,a={element:e,url:no(s)};if(r){let[l,c]=r.split(",");a.width=Number(l),a.height=Number(c)}return n&&(a.color=n),o&&(!d2Env.isApp||o.indexOf("data:image/png")===0)&&(a.inline=no(o)),a}var WD,qD,Ec=u(()=>{"use strict";Mp();Ip();WD="src",qD="lowsrc"});var Lr=Fs(Rp=>{"use strict";Rp.__esModule=!0;var GD=function(i){var t=function(){i.cancelToken=!1},e=function(n,s){for(var o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];i.callbackThis=n,i.args=o,!i.cancelToken&&("requestAnimationFrame"in window?i.cancelToken=window.requestAnimationFrame(function(){s.apply(i.callbackThis,i.args),t()}):(s.apply(i.callbackThis,i.args),i.cancelToken=window.setTimeout(t,16.666666666666668)))};return e.cancel=function(){"requestAnimationFrame"in window&&window.cancelAnimationFrame(i.cancelToken),window.clearTimeout(i.cancelToken),t()},e},PE=function(i,t){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];var s=GD({}),o=arguments.length,r=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];s.apply(void 0,[o>1?t:this,i].concat(e,a))};return r.cancel=function(){return s.cancel()},r};Rp.throttle=function(i){var t=PE(i);return t.bind=PE.bind(null,i),t}});var $E,Hp,Op,fs,xr=u(()=>{"use strict";$E=Bs(Lr(),1);ln();Hp=class extends EventTarget{constructor(e=window){super();this.win=e;this.win.addEventListener("resize",(0,$E.throttle)(this.handleResize).bind(this),{passive:!0});let{clientWidth:n,clientHeight:s}=this.win.document.documentElement;this.size=new bt(n,s)}getSize(){return this.size?this.size.clone():null}handleResize(){let e=this.win.document.documentElement,n=new bt(e.clientWidth,e.clientHeight);bt.equals(n,this.size)||(this.size=n,this.dispatchEvent(new CustomEvent("resize")))}},Op=new WeakMap,fs=(i=window)=>(Op.has(i)||Op.set(i,new Hp(i)),Op.get(i))});var FE=u(()=>{"use strict";Ec();xr();ln();Sp()});var Yt,Dp,BE,Ht,zt,Np,Pp,$p,kp,bc,UE,bi,pe,Mt,jE,et,nt=u(()=>{"use strict";Tp();CE();RE();hc();Sp();kE();uc();FE();Yt=[],Dp=!1,BE=i=>i&&!Dp||!i&&Dp&&Yt.length===0?(Dp=i,!0):!1,Ht=()=>{let i=Yt.pop();i&&i.hide()},zt=()=>{if(Yt.length){let i=Yt[Yt.length-1];(i instanceof us||i instanceof an)&&Ht()}},Np=i=>{i||Ht()},Pp=i=>{Yt.length>1&&Yt[Yt.length-1]!==i.target&&i.preventDefault()},$p=i=>{let t=Yt.indexOf(i.target);t!==-1&&Yt.splice(t)},kp=(i,t={},e)=>{Np(e);let n=new i(t);return n.addEventListener("beforehide",Pp),n.addEventListener("hide",$p),Yt.push(n),n.canHazOverlay=BE,n},bc=i=>kp(an,i,!0),UE=i=>{let t=bc(i);return t.render(),t.show(),t},bi=(i,t,e)=>d2Env.isMobile?e?bc(i):kp(gc,i,t):kp(Tr,i,t),pe=(i,t)=>{let e=bi(i,t);return e.render(),e.show(),e},Mt=(i,t,e={},n)=>{Yt.length!==0&&!(Yt[Yt.length-1]instanceof rn)&&Np(n);let s=new us(i,t,e);return s.addEventListener("beforehide",Pp),s.addEventListener("hide",$p),Yt.push(s),s.render(),s.show(),s},jE=(i,t,e={})=>(e.classNames=e.classNames||[],e.classNames.push("c-bubble--error"),Mt(i,t,ut(C({},e),{isDark:!0}))),et=(i,t,e,n,s,o)=>{Yt.length!==0&&!(Yt[Yt.length-1]instanceof rn)&&Np(o||d2Env.isMobile);let r=d2Env.isMobile?new fc(i,t,e,n,s):new mc(i,t,e,n,s);return r.addEventListener("beforehide",Pp),r.addEventListener("hide",$p),Yt.push(r),d2Env.isMobile&&(r.canHazOverlay=BE),r.render(),r.show(),r.promise}});var JD,ZD,YD,KD,zE,_c,XD,cn,VE,QD,wr,Fp,WE,Hi,We=u(()=>{"use strict";D();ge();j();ye();nt();JD=/^[a-zA-Z0-9\-_.+]+@(?:[a-zA-Z0-9-]+\.)+[a-zA-Z]+$/,ZD=/^(http|https|ftp):\/\/(([A-Z0-9][A-Z0-9_-]*)(\.[A-Z0-9][A-Z0-9_-]*)+)(:(\d+))?\/?/i,YD="is-invalid",KD="is-empty",zE="field-validation-error",_c=new WeakMap,XD=(i,t)=>i.getAttribute(t)||i.dataset[t]||void 0,cn=(i,...t)=>{let e=typeof i=="string"?document.getElementById(i):i;!e||(_c.has(e)?_c.get(e).push(...t):_c.set(e,t))},VE=i=>{let t=typeof i=="string"?document.getElementById(i):i;return _c.get(t)||[]},QD=(i,t)=>{try{return typeof i=="string"?t[i].value:i.value}catch(e){return}},wr=(i,t,e)=>{let n=t.closest(".c-form__item, .x-form__item");if(n){n.classList.toggle(KD,Boolean(e)),n.classList.add(YD);let s=O(zE,n);if(s||(s=document.createElement("span"),s.classList.add(zE),n.appendChild(s)),_(s,!e),s.innerHTML=i,n.offsetHeight===0&&n.closest("details")){let r=n.querySelector("summary");r&&(r.open=!0)}}else t.offsetParent!==null&&Mt(i,t,{placement:"bottom-start"})},Fp=(i,t)=>{let[e,n,s,o]=t,r=typeof e=="string"?i[e]||document.getElementById(e):e;if(o)return!Array.from(r).map(m=>[m,n,s]).some(m=>!Fp(i,m));let a="";if(r)try{a=r.value||yn(i,e)}catch(m){}else return!0;let l=typeof s=="function"||r.length?void 0:XD(r,s==="minlengthorempty"?"minlength":s),c=Number(l),d=typeof s=="function"?s.call({getValue:QD},i,r,a):s==="required"?Boolean(a):s==="max"?a&&Number(a)<=c:s==="min"?a&&Number(a)>=c:s==="maxlength"?a&&a.length<=c||a==="":s==="minlength"?a&&a.length>=c:s==="minlengthorempty"?a&&a.length>=c||a==="":s==="pattern"?a&&l&&new RegExp(l).test(a):s==="email"?a&&JD.test(a):s==="imagereq"?Boolean(i[`${e}-1`]):s==="url"?a&&ZD.test(a):!0;if(!d){r.length&&r[0].type&&(r=r[0]),a=Array.isArray(a)?a[0]:a;let m=n.replace("{value}",a);m&&wr(m,r);try{Lt(r),r.focus()}catch(p){}}return Boolean(d)},WE=i=>i&&VE(i).find(t=>!Fp(i,t)),Hi=i=>i?!VE(i).some(n=>!Fp(i,n)):!0});var so,oo,Cr,Ar=u(()=>{"use strict";so="data-action",oo=".",Cr=":"});var Sr,qE=u(()=>{"use strict";Ar();Sr=class{constructor(t){this.flowType_=t.action,this.node_=t.actionElement||t.targetElement,this.event_=t.event,this.eventType_=t.eventType,this.target_=t.targetElement||(t.event&&t.event.target&&t.event.target.nodeType===1?t.event.target:void 0)}flowType(){return this.flowType_}actionNamespace(){let t=this.flowType_;return t.substr(0,t.indexOf(oo))}actionName(){let t=this.flowType_;return t.substring(t.indexOf(oo)+1)}node(){return this.node_}event(){return this.event_}eventType(){return this.eventType_}target(){return this.target_}}});var tk,gs,GE=u(()=>{"use strict";qE();Ar();tk=i=>new Sr(i),gs=class{constructor(t,e){this.actions_={};this.namespaceActions_={};this.loaders_={};this.defaultLoaderNamespaces_={};this.queue_=[];this.globalHandlers_={};let n=t||tk;this.flowFactory_=s=>n(s),this.getHandler_=e}dispatch(t,e){if(Array.isArray(t)){this.queue_=[...t],this.replayQueuedEvents_();return}if(e){let{event:a,eventType:l}=t,c=this.globalHandlers_[l];if(c)for(let d=0,m;m=c[d];d++)m(a)===!1&&a.preventDefault();return}let{action:n}=t,s=gs.getNamespace(n),o=this.namespaceActions_[s],r;if(this.getHandler_?r=this.getHandler_(t):o?o.accept(t)&&(r=o.handle):r=this.actions_[n],r){let a=this.flowFactory_(t);r(a);return}this.queue_.push(t),o||this.maybeInvokeLoader_(s,t)}registerLoader(t,e){this.loaders_[t]={loader:e,called:!1}}registerDefaultLoader(t){this.defaultLoader_=t}registerNamespaceHandler(t,e,n=()=>!0){this.namespaceActions_[t]={accept:n,handle:e}}maybeInvokeLoader_(t,e){let n=this.loaders_[t];n?n.called||(n.loader(this,t,e),n.called=!0):this.defaultLoader_&&!(t in this.defaultLoaderNamespaces_)&&(this.defaultLoaderNamespaces_[t]=!0,this.defaultLoader_(this,t,e))}static getNamespace(t){return t.split(".")[0]}registerHandlers(t,e,n){for(let s in e)this.actions_[t+oo+s]=n?e[s].bind(n):e[s];this.replayQueuedEvents_()}unregisterHandler(t,e){delete this.actions_[t+oo+e]}registerGlobalHandler(t,e){this.globalHandlers_[t]=this.globalHandlers_[t]||[],this.globalHandlers_[t].push(e)}unregisterGlobalHandler(t,e){if(this.globalHandlers_[t]){let n=this.globalHandlers_[t].indexOf(e);n!==-1&&this.globalHandlers_[t].splice(n,1)}}canDispatch(t){let{action:e}=t;if(this.actions_.hasOwnProperty(e))return!0;let n=gs.getNamespace(e);return this.namespaceActions_.hasOwnProperty(n)?this.namespaceActions_[n].accept(t):!1}replay(){this.replayQueuedEvents_()}replayNow(){!this.eventReplayer_||this.queue_.length===0||this.eventReplayer_(this.queue_,this)}replayQueuedEvents_(){!this.eventReplayer_||this.queue_.length===0||queueMicrotask(()=>{this.eventReplayer_(this.queue_,this)})}setEventReplayer(t){this.eventReplayer_=t,this.replayQueuedEvents_()}}});var JE,Bp,Mr,Up,Tc,ZE,YE,jp=u(()=>{"use strict";JE=new Map,Bp=new WeakMap,Mr=i=>Bp.get(i),Up=(i,t)=>{Bp.set(i,t)},Tc=i=>JE.get(i),ZE=(i,t)=>{JE.set(i,t)},YE=i=>{Bp.delete(i)}});var XE,QE,tb,eb=u(()=>{"use strict";XE=(i,t,e)=>{let n=t==="focus"||t==="blur"||t==="error"||t==="load";return i.addEventListener(t,e,n),{eventType:t,handler:e,capture:n}},QE=(i,t)=>{i.removeEventListener(t.eventType,t.handler,t.capture)},tb=i=>i.ctrlKey||i.shiftKey||i.metaKey||i.button===1});var zp,ek,Ir,qe,vs,Vp=u(()=>{"use strict";jp();eb();Ar();zp=!1,ek={},Ir=class{constructor(t){this.div=t;this.handlers=[]}containsNode(t){return this.div.contains(t)}static isNested(t,e){for(let n=0;n<e.length;++n)if(e[n].div!==t.div&&e[n].containsNode(t.div))return!0;return!1}installHandler(t){this.handlers.push(t.call(null,this.div))}cleanUp(){for(let t=0;t<this.handlers.length;++t){let e=this.handlers[t];QE(this.div,e)}this.handlers.length=0}},qe=class{constructor(){this.installers=[];this.containers=[];this.nestedContainers=[];this.events={};this.queue=[]}static getDefaultEventType(){return qe.defaultEventType}static setDefaultEventType(t){qe.defaultEventType=t}static eventHandler(t,e){return function n(s){let o=this,r=qe.createEventInfo(e,s,o);if(t.dispatcher&&(r.eventType==="clickonly"&&(r.eventType="click"),t.dispatcher(r,!0)),!qe.canSkipDispatch(r))if(zp&&s.stopPropagation(),t.dispatcher){qe.shouldPreventDefaultBeforeDispatching(r)&&s.preventDefault();let a=t.dispatcher(r);a&&n.call(this,a)}else qe.queueEvent(t,r,s)}}static shouldPreventDefaultBeforeDispatching(t){return!!t.actionElement&&t.actionElement.tagName==="A"&&t.actionElement.getAttribute("data-npd")===null&&(t.eventType==="click"||t.eventType==="clickmod")}static queueEvent(t,e,n){e.event=n,t.queue.push(e)}static createEventInfo(t,e,n){t==="click"&&tb(e)&&(t="clickmod");let s=e.target,o={eventType:t,event:e,targetElement:s,action:"",actionElement:void 0,timeStamp:Date.now()};for(let r=s;r&&r!==n;r=r.parentElement){let a=qe.getAction(r,t);if(a.action)return ut(C(C({},o),a),{actionElement:r,event:a.event||o.event})}return o}static canSkipDispatch(t){return!t.actionElement}static parseActions(t){let e=Mr(t);if(!e){let n=t.getAttribute(so);if(!n)e=ek,Up(t,e);else{if(e=Tc(n),!e){e={};let s=n.split(/\s*;\s*/),o=s?s.length:0;for(let r=0;r<o;r++){let a=s[r];if(!a)continue;let l=a.indexOf(Cr),c=l!==-1,d=c?a.substr(0,l).trim():qe.defaultEventType;e[d]=c?a.substr(l+1).trim():a}ZE(n,e)}Up(t,e)}}return e}static getAction(t,e){let s=qe.parseActions(t)[e]||"";return{eventType:e,action:s,event:void 0}}static containerHandlerInstaller(t,e){return n=>XE(n,t,e)}addEvent(t,e){if(this.events.hasOwnProperty(t))return;let n=qe.eventHandler(this,t),s=qe.containerHandlerInstaller(e||t,n);this.events[t]=n,this.installers.push(s);for(let o=0;o<this.containers.length;++o)this.containers[o].installHandler(s)}handler(t){return this.events[t]}addContainer(t){let e=new Ir(t);if(zp)this.setUpContainer_(e),this.containers.push(e);else{if(this.hasContainerFor_(t))return this.nestedContainers.push(e),e;this.setUpContainer_(e),this.containers.push(e),this.updateNestedContainers_()}return e}updateNestedContainers_(){let t=this.nestedContainers.concat(this.containers),e=[],n=[];for(let s=0;s<this.containers.length;++s){let o=this.containers[s];Ir.isNested(o,t)?(e.push(o),o.cleanUp()):n.push(o)}for(let s=0;s<this.nestedContainers.length;++s){let o=this.nestedContainers[s];Ir.isNested(o,t)?e.push(o):(n.push(o),this.setUpContainer_(o))}this.containers=n,this.nestedContainers=e}setUpContainer_(t){typeof navigator!="undefined"&&/iPhone|iPad|iPod/.test(navigator.userAgent)&&(t.div.style.cursor="pointer");for(let e=0;e<this.installers.length;++e)t.installHandler(this.installers[e])}hasContainerFor_(t){for(let e=0;e<this.containers.length;e++)if(this.containers[e].containsNode(t))return!0;return!1}removeContainer(t){t.cleanUp();let e=!1;for(let n=0;n<this.containers.length;++n)if(this.containers[n]===t){this.containers.splice(n,1),e=!0;break}if(!e){for(let n=0;n<this.nestedContainers.length;++n)if(this.nestedContainers[n]===t){this.nestedContainers.splice(n,1);break}}zp||this.updateNestedContainers_()}dispatchTo(t){this.dispatcher=t,this.queue&&(this.queue.length>0&&t(this.queue),this.queue.length=0)}},vs=qe;vs.defaultEventType="click"});var Wp,qp,Gp,ik,nk,sk,ok,rk,ri,v,R=u(()=>{"use strict";We();GE();Vp();D();ge();Wp="__unloadw",ik=(i,t)=>{let e=i[i.length-1];t.canDispatch(e)&&(t.dispatch(e),i.length=0)},nk=i=>{qp&&ii(qp).toString()!==Gp.toString()&&(i.preventDefault(),i.returnValue="")},sk=i=>{let t=i.target,e=Hi(t);return e&&t[Wp]&&(delete t[Wp],window.onbeforeunload=null),e},ok=i=>{let t=i.target,e=t&&t.closest("form"),n=e&&"keysubmit"in e.dataset;e&&n&&(i.ctrlKey||i.metaKey)&&i.keyCode===13&&qs(e)},rk=i=>{let t=i.target,e=t&&t.closest("form"),n=e&&"leavewarning"in e.dataset;e&&n&&typeof window.onbeforeunload!="function"&&(Gp||(qp=e,Gp=ii(e)),e[Wp]=!0,window.onbeforeunload=nk)},ri=new vs;ri.addContainer(document.documentElement);document.documentElement.style.cursor="";ri.addEvent("click");ri.addEvent("focus");ri.addEvent("blur");ri.addEvent("submit");ri.addEvent("keyup");ri.addEvent("touchstart");ri.addEvent("input");ri.addEvent("change");ri.addEvent("mouseover");ri.addEvent("mouseout");v=new gs;ri.dispatchTo(v.dispatch.bind(v));v.registerGlobalHandler("submit",sk);v.registerGlobalHandler("keyup",ok);v.registerGlobalHandler("focus",rk);v.setEventReplayer(ik)});var Rr,ib,ro,nb,sb,ob,rb,Or=u(()=>{"use strict";Rr="Внести в Чёрный список?",ib="Внести в Чёрный список",ro="Убрать из Чёрного списка",nb="Разблокировать пользователя?",sb="Он сможет писать вам сообщения, комментарии и появится в списке контактов",ob="Разблокировать",rb="Внести"});var ao,ab,Lc,Jp=u(()=>{"use strict";ao="Ошибка исполнения запроса",ab="Слишком много запросов, попробуйте позже",Lc="Ошибочный ответ сервера"});var lo,xc=u(()=>{"use strict";lo=()=>{let i="0123456789abcdef",t="xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx",e="",n=0,s=Math.random()*4294967295|0;for(;n++<32;){let o=t[n-1],r=s&15,a=o=="x"?r:r&3|8;e+=o=="-"||o=="4"?o:i[a],s=n%8==0?Math.random()*4294967295|0:s>>4}return e}});var Yp,ak,Zp,se,Di=u(()=>{"use strict";j();Yp=300,ak="is-active",Zp=new WeakMap,se=class{constructor(t){this.target=t;this.target.classList.add("c-spin"),Zp.has(this.target)&&Zp.get(this.target).stop(),Zp.set(this.target,this)}start(t){clearTimeout(this.tm),this.tm=setTimeout(()=>{this.setActive(!0)},t||Yp)}stop(){clearTimeout(this.tm),this.setActive(!1)}setActive(t){rr(t),this.target.classList.toggle(ak,t)}}});function db(i){clearTimeout(cb),i?cb=setTimeout(()=>{rr(i)},Yp):rr(i)}var cb,mb=u(()=>{"use strict";Di();j()});var Sn,Re,Kp=u(()=>{"use strict";nt();Jp();xc();mb();Sn=class extends EventTarget{constructor(e,n,s){super();let o=Sn.normalizeParams(e,n);this.url=o.url,this.config=o.config,this.isDummy=s,this.request=new XMLHttpRequest,this.completed=!1}abort(e,n){let s=Sn.normalizeParams(e,n),o=this.url!==s.url||(this.config.body||"").toString()!==(s.config.body||"").toString();return o&&this.request.abort(),o}dispose(){this.completed||this.request.abort()}send(){return new Promise((e,n)=>{if(this.isDummy)return;let{request:s}=this,{delay:o,method:r,body:a,headers:l,throwError:c}=this.config,d=m=>{c&&n(m)};s.open(r,this.url,!0),s.onload=()=>{if((s.status/100|0)!==2){let{status:m,statusText:p}=s,h=m===429?ab:p!==""?p:ao;this.showError(Sn.formatError(h,s),!0),d();return}if(this.config.returnType===3)try{let m=JSON.parse(s.responseText),{error:p,notification:h}=m,g=(Boolean(h)?h:p)||[];g=Array.isArray(g)?g:[g];let E=`<p>${g.join("</p><p>")}</p>`;g.length?(this.showError(E,!1),d({messages:g,formattedMessage:E,json:m})):e(m)}catch(m){this.showError(Sn.formatError(Lc,s),!1),d()}else this.config.returnType===2?e(s.responseText):e(s)},s.onerror=()=>{this.showError(Sn.formatError(ao),!0),d()},s.onreadystatechange=()=>{s.readyState===4&&(this.completed=!0,this.enableSpinner(!1),this.dispatchEvent(new Event("complete")))},Object.entries(l).forEach(([m,p])=>s.setRequestHeader(m,p)),d2Env.isApp&&o?setTimeout(()=>{this.enableSpinner(!0),s.send(a&&a.toString())},120):(this.enableSpinner(!0),s.send(a&&a.toString()))})}enableSpinner(e){let{silent:n,spinner:s}=this.config;s?e?s.start():s.stop():n||db(e)}showError(e,n){let{anchorEl:s,silent:o}=this.config;if(!o){let r={classNames:["c-bubble--xhr"]};n?jE(e,s,r):Mt(e,s,r)}}static normalizeParams(e,n){let s=e,o=C({method:"GET"},n);o.headers=C(C({},Sn.defaultHeaders),o.headers||{});let r=o.body instanceof URLSearchParams?o.body:new URLSearchParams(typeof o.body=="string"?o.body:void 0);if(o.body instanceof FormData)for(let[a,l]of o.body)l instanceof File||r.append(a,l);else if(typeof o.body!="string"&&!(o.body instanceof URLSearchParams))for(let a in o.body){let l=o.body[a];(Array.isArray(l)?l:[l]).forEach(c=>r.append(a,String(c)))}if(o.method==="GET"||o.method==="HEAD"){let a=new URL(s,window.location.href);for(let[l,c]of r)a.searchParams.append(l,c);s=a.href,o.body=""}else Object.entries(d2Env.formContext).forEach(([a,l])=>r.append(a,l)),o.headers["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8",o.body=r;return{url:s,config:o}}static formatError(e,n){let s=n?n.getResponseHeader("X-Request-ID")||n.status:"";return e+(s?` (${s}).`:".")}},Re=Sn;Re.defaultHeaders=C({"X-Requested-With":"XMLHttpRequest","X-Origin-Request-ID":d2Env.requestId,"X-Client-Request-ID":lo()},d2Env.isMobile&&{"X-Needs-Mobile-Version":"true"})});var Xp,Qp,pb,L,Ct,$=u(()=>{"use strict";Kp();Xp=new Map,Qp=(i,t,e={})=>{let n=Xp.get(t);if(n&&!n.completed&&!n.abort(i,e))return new Re(i,e,!0);let s=new Re(i,e);return s.addEventListener("complete",()=>Xp.delete(t),{once:!0}),Xp.set(t,s),s},pb=(i,t={},e={})=>t&&typeof t=="object"?(t.returnType=1,new Re(i,t).send()):(e.returnType=1,Qp(i,t,e).send()),L=(i,t={},e={})=>t&&typeof t=="object"?(t.returnType=3,new Re(i,t).send()):(e.returnType=3,Qp(i,t,e).send()),Ct=(i,t={},e={})=>t&&typeof t=="object"?(t.returnType=2,new Re(i,t).send()):(e.returnType=2,Qp(i,t,e).send())});var ft,dn,Ft=u(()=>{"use strict";jp();Vp();Ar();ft=i=>{let t=i.event();t&&t.preventDefault()},dn=(i,t)=>{let e=vs.getDefaultEventType(),n=Mr(i)&&C({},Mr(i));if(!n){let o=i.getAttribute(so);if(!o)n={};else if(n=Tc(o),!n){n={};let r=o.split(/\s*;\s*/);for(let a=0,l=r?r.length:0;a<l;a++){let c=r[a];if(c){let d=c.indexOf(Cr),m=d!==-1,p=m?c.substr(0,d).trim():e;n[p]=m?c.substr(d+1).trim():c}}}}delete n[t||e];let s=Object.keys(n).map(o=>(o===e?"":o+Cr)+n[o]).join(";");YE(i),s?i.setAttribute(so,s):i.removeAttribute(so)}});var Ge,gk,bb,In=u(()=>{"use strict";R();V();nt();Ge=i=>{let t=b("signuptt","content");return t&&Mt(t.content.cloneNode(!0),i),!!t},gk=i=>{let t=i.node(),e=t&&t.href;!Ge(t)&&e&&(window.location.href=e)},bb=()=>{v.registerHandlers("signuptt",{show:gk})}});var _b,It,Dr,Oe,Rn,ve=u(()=>{"use strict";_b=i=>i.replace(/[\s]+/g," ").trim(),It=i=>i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\x00/g,"&#0;"),Dr=i=>String(i).replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"),Oe=i=>{let t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},e=document.createElement("div");return i.replace(/&([^;\s<&]+);?/g,(n,s)=>{let o=t[n];if(o)return o;if(s.charAt(0)==="#"){let r=Number("0"+s.substr(1));Number.isNaN(r)||(o=String.fromCharCode(r))}return o||(e.innerHTML=n+" ",o=e.firstChild.nodeValue.slice(0,-1)),t[n]=o,o})},Rn=(i,t=" ")=>{i=String(i);let e=i.length,n=e>3?e%3:0;return(n?i.substring(0,n)+t:"")+i.substring(n).replace(/(\d{3})(?=\d)/g,`$1${t}`)}});var mo,wc=u(()=>{"use strict";mo=i=>{i.offsetHeight}});var Es,Rb,th=u(()=>{"use strict";Es=(i,t)=>{let e=`${i}=`,n=(document.cookie||"").split(";");for(let s of n){let o=s.trim();if(o.lastIndexOf(e,0)===0)return o.substring(e.length);if(o===i)return""}return t},Rb=(i,t,e={})=>{let{maxAge:n=-1,path:s,domain:o,secure:r=!1,sameSite:a}=e,l;n<0?l="":n===0?l=`;expires=${new Date(1970,1,1).toUTCString()}`:l=`;expires=${new Date(Date.now()+n*1e3).toUTCString()}`;let c=s?`;path=${s}`:"",d=o?`;domain=${o}`:"",m=r?";secure":"",p=a!=null?`;samesite=${a}`:"";document.cookie=i+"="+t+d+c+l+m+p}});var Je,Sk,Ob,On=u(()=>{"use strict";R();th();th();Je=(i,t,e)=>{Rb(i,String(t),{maxAge:Number(e)===-1?-1:Number(e)*24*60*60,sameSite:"lax",path:"/",secure:window.location.protocol==="https:"})},Sk=i=>{let t=i.node();t.dataset.cookieParams&&Je(...t.dataset.cookieParams.split(","))},Ob=()=>{v.registerHandlers("cookie",{set:Sk})}});var Bb=Fs((pK,Fb)=>{var bs="long",Hn="short",eh="narrow",_t="numeric",Dn="2-digit";Fb.exports={number:{decimal:{style:"decimal"},integer:{style:"decimal",maximumFractionDigits:0},currency:{style:"currency",currency:"USD"},percent:{style:"percent"},default:{style:"decimal"}},date:{short:{month:_t,day:_t,year:Dn},medium:{month:Hn,day:_t,year:_t},long:{month:bs,day:_t,year:_t},full:{month:bs,day:_t,year:_t,weekday:bs},default:{month:Hn,day:_t,year:_t}},time:{short:{hour:_t,minute:_t},medium:{hour:_t,minute:_t,second:_t},long:{hour:_t,minute:_t,second:_t,timeZoneName:Hn},full:{hour:_t,minute:_t,second:_t,timeZoneName:Hn},default:{hour:_t,minute:_t,second:_t}},duration:{default:{hours:{minimumIntegerDigits:1,maximumFractionDigits:0},minutes:{minimumIntegerDigits:2,maximumFractionDigits:0},seconds:{minimumIntegerDigits:2,maximumFractionDigits:3}}},parseNumberPattern:function(i){if(!!i){var t={},e=i.match(/\b[A-Z]{3}\b/i),n=i.replace(/[^¤]/g,"").length;if(!n&&e&&(n=1),n?(t.style="currency",t.currencyDisplay=n===1?"symbol":n===2?"code":"name",t.currency=e?e[0].toUpperCase():"USD"):i.indexOf("%")>=0&&(t.style="percent"),!/[@#0]/.test(i))return t.style?t:void 0;if(t.useGrouping=i.indexOf(",")>=0,/E\+?[@#0]+/i.test(i)||i.indexOf("@")>=0){var s=i.replace(/E\+?[@#0]+|[^@#0]/gi,"");t.minimumSignificantDigits=Math.min(Math.max(s.replace(/[^@0]/g,"").length,1),21),t.maximumSignificantDigits=Math.min(Math.max(s.length,1),21)}else{for(var o=i.replace(/[^#0.]/g,"").split("."),r=o[0],a=r.length-1;r[a]==="0";)--a;t.minimumIntegerDigits=Math.min(Math.max(r.length-1-a,1),21);var l=o[1]||"";for(a=0;l[a]==="0";)++a;for(t.minimumFractionDigits=Math.min(Math.max(a,0),20);l[a]==="#";)++a;t.maximumFractionDigits=Math.min(Math.max(a,0),20)}return t}},parseDatePattern:function(i){if(!!i){for(var t={},e=0;e<i.length;){for(var n=i[e],s=1;i[++e]===n;)++s;switch(n){case"G":t.era=s===5?eh:s===4?bs:Hn;break;case"y":case"Y":t.year=s===2?Dn:_t;break;case"M":case"L":s=Math.min(Math.max(s-1,0),4),t.month=[_t,Dn,Hn,bs,eh][s];break;case"E":case"e":case"c":t.weekday=s===5?eh:s===4?bs:Hn;break;case"d":case"D":t.day=s===2?Dn:_t;break;case"h":case"K":t.hour12=!0,t.hour=s===2?Dn:_t;break;case"H":case"k":t.hour12=!1,t.hour=s===2?Dn:_t;break;case"m":t.minute=s===2?Dn:_t;break;case"s":case"S":t.second=s===2?Dn:_t;break;case"z":case"Z":case"v":case"V":t.timeZoneName=s===1?Hn:bs;break}}return Object.keys(t).length?t:void 0}}}});var jb=Fs((hK,Ub)=>{Ub.exports=function(t,e){if(typeof t=="string"&&e[t])return t;for(var n=[].concat(t||[]),s=0,o=n.length;s<o;++s)for(var r=n[s].split("-");r.length;){var a=r.join("-");if(e[a])return a;r.pop()}}});var Wb=Fs((uK,Vb)=>{"use strict";var ih="one",Dk="two",zb="few",kk="many",nh="other";function Nk(i){var t=Math.floor(Math.abs(+i)),e=(i+".").split(".")[1].length;return t===1&&e===0?ih:nh}function Pk(i){var t=Math.floor(Math.abs(+i)),e=(i+".").split(".")[1].length;return e===0&&t%10===1&&t%100!==11?ih:e===0&&2<=t%10&&t%10<=4&&(t%100<12||14<t%100)?zb:e===0&&t%10===0||e===0&&5<=t%10&&t%10<=9||e===0&&11<=t%100&&t%100<=14?kk:nh}function $k(i){var t=+i;return t%10===1&&t%100!==11?ih:t%10===2&&t%100!==12?Dk:t%10===3&&t%100!==13?zb:nh}Vb.exports={en:{cardinal:Nk,ordinal:$k},ru:{cardinal:Pk}}});var Yb=Fs((Sc,Zb)=>{"use strict";var kn=Bb(),Fk=jb(),qb=Wb();Sc=Zb.exports=function(t,e,n){return Ac(t,null,e||"en",n||{},!0)};Sc.toParts=function(t,e,n){return Ac(t,null,e||"en",n||{},!1)};function Ac(i,t,e,n,s){var o=i.map(function(r){return Bk(r,t,e,n,s)});return s?o.length===1?o[0]:function(a){for(var l="",c=0;c<o.length;++c)l+=o[c](a);return l}:function(a){return o.reduce(function(l,c){return l.concat(c(a))},[])}}function Bk(i,t,e,n,s){if(typeof i=="string"){var o=i;return function(){return o}}var r=i[0],a=i[1];if(t&&i[0]==="#"){r=t[0];var l=t[2],c=(n.number||oh.number)([r,"number"],e);return function(f){return c(Cc(r,f)-l,f)}}var d;a==="plural"||a==="selectordinal"?(d={},Object.keys(i[3]).forEach(function(h){d[h]=Ac(i[3][h],i,e,n,s)}),i=[i[0],i[1],i[2],d]):i[2]&&typeof i[2]=="object"&&(d={},Object.keys(i[2]).forEach(function(h){d[h]=Ac(i[2][h],i,e,n,s)}),i=[i[0],i[1],d]);var m=a&&(n[a]||oh[a]);if(m){var p=m(i,e);return function(f){return p(Cc(r,f),f)}}return s?function(f){return String(Cc(r,f))}:function(f){return Cc(r,f)}}function Cc(i,t){if(t&&i in t)return t[i];for(var e=i.split("."),n=t,s=0,o=e.length;n&&s<o;++s)n=n[e[s]];return n}function sh(i,t){var e=i[2],n=kn.number[e]||kn.parseNumberPattern(e)||kn.number.default;return new Intl.NumberFormat(t,n).format}function Uk(i,t){var e=i[2],n=kn.duration[e]||kn.duration.default,s=new Intl.NumberFormat(t,n.seconds).format,o=new Intl.NumberFormat(t,n.minutes).format,r=new Intl.NumberFormat(t,n.hours).format,a=/^fi$|^fi-|^da/.test(String(t))?".":":";return function(l,c){if(l=+l,!isFinite(l))return s(l);var d=~~(l/60/60),m=~~(l/60%60),p=(d?r(Math.abs(d))+a:"")+o(Math.abs(m))+a+s(Math.abs(l%60));return l<0?r(-1).replace(r(1),p):p}}function Gb(i,t){var e=i[1],n=i[2],s=kn[e][n]||kn.parseDatePattern(n)||kn[e].default;return new Intl.DateTimeFormat(t,s).format}function Jb(i,t){var e=i[1],n=e==="selectordinal"?"ordinal":"cardinal",s=i[2],o=i[3],r;if(Intl.PluralRules&&Intl.PluralRules.supportedLocalesOf(t).length>0)r=new Intl.PluralRules(t,{type:n});else{var a=Fk(t,qb),l=a&&qb[a][n]||jk;r={select:l}}return function(c,d){var m=o["="+ +c]||o[r.select(c-s)]||o.other;return m(d)}}function jk(){return"other"}function zk(i,t){var e=i[2];return function(n,s){var o=e[n]||e.other;return o(s)}}var oh={number:sh,ordinal:sh,spellout:sh,duration:Uk,date:Gb,time:Gb,plural:Jb,selectordinal:Jb,select:zk};Sc.types=oh});var Qb=Fs((ph,Xb)=>{"use strict";var Ni="{",he="}",_s=",",po="#",$r="<",ki=">",_i="</",Mc="/>",Nn="'",rh="offset:",Vk=["number","date","time","ordinal","duration","spellout"],Wk=["plural","select","selectordinal"];ph=Xb.exports=function(t,e){return ch({pattern:String(t),index:0,tagsType:e&&e.tagsType||null,tokens:e&&e.tokens||null},"")};function ch(i,t){var e=i.pattern,n=e.length,s=[],o=i.index,r=lh(i,t);for(r&&s.push(r),r&&i.tokens&&i.tokens.push(["text",e.slice(o,i.index)]);i.index<n;){if(e[i.index]===he){if(!t)throw Wt(i);break}if(t&&i.tagsType&&e.slice(i.index,i.index+_i.length)===_i)break;s.push(qk(i)),o=i.index,r=lh(i,t),r&&s.push(r),r&&i.tokens&&i.tokens.push(["text",e.slice(o,i.index)])}return s}function lh(i,t){for(var e=i.pattern,n=e.length,s=t==="plural"||t==="selectordinal",o=!!i.tagsType,r=t==="{style}",a="";i.index<n;){var l=e[i.index];if(l===Ni||l===he||s&&l===po||o&&l===$r||r&&dh(l.charCodeAt(0)))break;if(l===Nn)if(l=e[++i.index],l===Nn)a+=l,++i.index;else if(l===Ni||l===he||s&&l===po||o&&l===$r||r)for(a+=l;++i.index<n;)if(l=e[i.index],l===Nn&&e[i.index+1]===Nn)a+=Nn,++i.index;else if(l===Nn){++i.index;break}else a+=l;else a+=Nn;else a+=l,++i.index}return a}function dh(i){return i>=9&&i<=13||i===32||i===133||i===160||i===6158||i>=8192&&i<=8205||i===8232||i===8233||i===8239||i===8287||i===8288||i===12288||i===65279}function Ze(i){for(var t=i.pattern,e=t.length,n=i.index;i.index<e&&dh(t.charCodeAt(i.index));)++i.index;n<i.index&&i.tokens&&i.tokens.push(["space",i.pattern.slice(n,i.index)])}function qk(i){var t=i.pattern;if(t[i.index]===po)return i.tokens&&i.tokens.push(["syntax",po]),++i.index,[po];var e=Gk(i);if(e)return e;if(t[i.index]!==Ni)throw Wt(i,Ni);i.tokens&&i.tokens.push(["syntax",Ni]),++i.index,Ze(i);var n=ho(i);if(!n)throw Wt(i,"placeholder id");i.tokens&&i.tokens.push(["id",n]),Ze(i);var s=t[i.index];if(s===he)return i.tokens&&i.tokens.push(["syntax",he]),++i.index,[n];if(s!==_s)throw Wt(i,_s+" or "+he);i.tokens&&i.tokens.push(["syntax",_s]),++i.index,Ze(i);var o=ho(i);if(!o)throw Wt(i,"placeholder type");if(i.tokens&&i.tokens.push(["type",o]),Ze(i),s=t[i.index],s===he){if(i.tokens&&i.tokens.push(["syntax",he]),o==="plural"||o==="selectordinal"||o==="select")throw Wt(i,o+" sub-messages");return++i.index,[n,o]}if(s!==_s)throw Wt(i,_s+" or "+he);i.tokens&&i.tokens.push(["syntax",_s]),++i.index,Ze(i);var r;if(o==="plural"||o==="selectordinal"){var a=Jk(i);Ze(i),r=[n,o,a,ah(i,o)]}else if(o==="select")r=[n,o,ah(i,o)];else if(Vk.indexOf(o)>=0)r=[n,o,Kb(i)];else{var l=i.index,c=Kb(i);Ze(i),t[i.index]===Ni&&(i.index=l,c=ah(i,o)),r=[n,o,c]}if(Ze(i),t[i.index]!==he)throw Wt(i,he);return i.tokens&&i.tokens.push(["syntax",he]),++i.index,r}function Gk(i){var t=i.tagsType;if(!(!t||i.pattern[i.index]!==$r)){if(i.pattern.slice(i.index,i.index+_i.length)===_i)throw Wt(i,null,"closing tag without matching opening tag");i.tokens&&i.tokens.push(["syntax",$r]),++i.index;var e=ho(i,!0);if(!e)throw Wt(i,"placeholder id");if(i.tokens&&i.tokens.push(["id",e]),Ze(i),i.pattern.slice(i.index,i.index+Mc.length)===Mc)return i.tokens&&i.tokens.push(["syntax",Mc]),i.index+=Mc.length,[e,t];if(i.pattern[i.index]!==ki)throw Wt(i,ki);i.tokens&&i.tokens.push(["syntax",ki]),++i.index;var n=ch(i,t),s=i.index;if(i.pattern.slice(i.index,i.index+_i.length)!==_i)throw Wt(i,_i+e+ki);i.tokens&&i.tokens.push(["syntax",_i]),i.index+=_i.length;var o=ho(i,!0);if(o&&i.tokens&&i.tokens.push(["id",o]),e!==o)throw i.index=s,Wt(i,_i+e+ki,_i+o+ki);if(Ze(i),i.pattern[i.index]!==ki)throw Wt(i,ki);return i.tokens&&i.tokens.push(["syntax",ki]),++i.index,[e,t,{children:n}]}}function ho(i,t){for(var e=i.pattern,n=e.length,s="";i.index<n;){var o=e[i.index];if(o===Ni||o===he||o===_s||o===po||o===Nn||dh(o.charCodeAt(0))||t&&(o===$r||o===ki||o==="/"))break;s+=o,++i.index}return s}function Kb(i){var t=i.index,e=lh(i,"{style}");if(!e)throw Wt(i,"placeholder style name");return i.tokens&&i.tokens.push(["style",i.pattern.slice(t,i.index)]),e}function Jk(i){var t=i.pattern,e=t.length,n=0;if(t.slice(i.index,i.index+rh.length)===rh){i.tokens&&i.tokens.push(["offset","offset"],["syntax",":"]),i.index+=rh.length,Ze(i);for(var s=i.index;i.index<e&&Zk(t.charCodeAt(i.index));)++i.index;if(s===i.index)throw Wt(i,"offset number");i.tokens&&i.tokens.push(["number",t.slice(s,i.index)]),n=+t.slice(s,i.index)}return n}function Zk(i){return i>=48&&i<=57}function ah(i,t){for(var e=i.pattern,n=e.length,s={};i.index<n&&e[i.index]!==he;){var o=ho(i);if(!o)throw Wt(i,"sub-message selector");i.tokens&&i.tokens.push(["selector",o]),Ze(i),s[o]=Yk(i,t),Ze(i)}if(!s.other&&Wk.indexOf(t)>=0)throw Wt(i,null,null,'"other" sub-message must be specified in '+t);return s}function Yk(i,t){if(i.pattern[i.index]!==Ni)throw Wt(i,Ni+" to start sub-message");i.tokens&&i.tokens.push(["syntax",Ni]),++i.index;var e=ch(i,t);if(i.pattern[i.index]!==he)throw Wt(i,he+" to end sub-message");return i.tokens&&i.tokens.push(["syntax",he]),++i.index,e}function Wt(i,t,e,n){var s=i.pattern,o=s.slice(0,i.index).split(/\r?\n/),r=i.index,a=o.length,l=o.slice(-1)[0].length;return e=e||(i.index>=s.length?"end of message pattern":ho(i)||s[i.index]),n||(n=Kk(t,e)),n+=" in "+s.replace(/\r?\n/g,`
`),new mh(n,t,e,r,a,l)}function Kk(i,t){return i?"Expected "+i+" but found "+t:"Unexpected "+t+" found"}function mh(i,t,e,n,s,o){Error.call(this,i),this.name="SyntaxError",this.message=i,this.expected=t,this.found=e,this.offset=n,this.line=s,this.column=o}mh.prototype=Object.create(Error.prototype);ph.SyntaxError=mh});var t_,e_,Z,xe=u(()=>{"use strict";t_=Bs(Yb(),1),e_=Bs(Qb(),1),Z=(i,t)=>(0,t_.default)((0,e_.default)(i),"ru")(t)});function Ls(i,t,e=i,n){var s,o,r,a;if(t===oe)return t;let l=n!==void 0?(s=e._$Cl)===null||s===void 0?void 0:s[n]:e._$Cu,c=Ur(t)?void 0:t._$litDirective$;return(l==null?void 0:l.constructor)!==c&&((o=l==null?void 0:l._$AO)===null||o===void 0||o.call(l,!1),c===void 0?l=void 0:(l=new c(i),l._$AT(i,e,n)),n!==void 0?((r=(a=e)._$Cl)!==null&&r!==void 0?r:a._$Cl=[])[n]=l:e._$Cu=l),l!==void 0&&(t=Ls(i,l._$AS(i,t.values),l,n)),t}var uh,Ic,fo,n_,mn,fh,Qk,go,Br,Ur,d_,m_,Fr,s_,o_,Ts,r_,a_,p_,h_,y,TK,oe,N,l_,z,uo,u_,ys,Rc,Pn,xs,Oc,tN,Hc,Dc,kc,f_,c_,ct=u(()=>{Ic=window,fo=Ic.trustedTypes,n_=fo?fo.createPolicy("lit-html",{createHTML:i=>i}):void 0,mn=`lit$${(Math.random()+"").slice(9)}$`,fh="?"+mn,Qk=`<${fh}>`,go=document,Br=(i="")=>go.createComment(i),Ur=i=>i===null||typeof i!="object"&&typeof i!="function",d_=Array.isArray,m_=i=>d_(i)||typeof(i==null?void 0:i[Symbol.iterator])=="function",Fr=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,s_=/-->/g,o_=/>/g,Ts=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),r_=/'/g,a_=/"/g,p_=/^(?:script|style|textarea|title)$/i,h_=i=>(t,...e)=>({_$litType$:i,strings:t,values:e}),y=h_(1),TK=h_(2),oe=Symbol.for("lit-noChange"),N=Symbol.for("lit-nothing"),l_=new WeakMap,z=(i,t,e)=>{var n,s;let o=(n=e==null?void 0:e.renderBefore)!==null&&n!==void 0?n:t,r=o._$litPart$;if(r===void 0){let a=(s=e==null?void 0:e.renderBefore)!==null&&s!==void 0?s:null;o._$litPart$=r=new Pn(t.insertBefore(Br(),a),a,void 0,e!=null?e:{})}return r._$AI(i),r},uo=go.createTreeWalker(go,129,null,!1),u_=(i,t)=>{let e=i.length-1,n=[],s,o=t===2?"<svg>":"",r=Fr;for(let l=0;l<e;l++){let c=i[l],d,m,p=-1,h=0;for(;h<c.length&&(r.lastIndex=h,m=r.exec(c),m!==null);)h=r.lastIndex,r===Fr?m[1]==="!--"?r=s_:m[1]!==void 0?r=o_:m[2]!==void 0?(p_.test(m[2])&&(s=RegExp("</"+m[2],"g")),r=Ts):m[3]!==void 0&&(r=Ts):r===Ts?m[0]===">"?(r=s!=null?s:Fr,p=-1):m[1]===void 0?p=-2:(p=r.lastIndex-m[2].length,d=m[1],r=m[3]===void 0?Ts:m[3]==='"'?a_:r_):r===a_||r===r_?r=Ts:r===s_||r===o_?r=Fr:(r=Ts,s=void 0);let f=r===Ts&&i[l+1].startsWith("/>")?" ":"";o+=r===Fr?c+Qk:p>=0?(n.push(d),c.slice(0,p)+"$lit$"+c.slice(p)+mn+f):c+mn+(p===-2?(n.push(void 0),l):f)}let a=o+(i[e]||"<?>")+(t===2?"</svg>":"");if(!Array.isArray(i)||!i.hasOwnProperty("raw"))throw Error("invalid template strings array");return[n_!==void 0?n_.createHTML(a):a,n]},ys=class{constructor({strings:t,_$litType$:e},n){let s;this.parts=[];let o=0,r=0,a=t.length-1,l=this.parts,[c,d]=u_(t,e);if(this.el=ys.createElement(c,n),uo.currentNode=this.el.content,e===2){let m=this.el.content,p=m.firstChild;p.remove(),m.append(...p.childNodes)}for(;(s=uo.nextNode())!==null&&l.length<a;){if(s.nodeType===1){if(s.hasAttributes()){let m=[];for(let p of s.getAttributeNames())if(p.endsWith("$lit$")||p.startsWith(mn)){let h=d[r++];if(m.push(p),h!==void 0){let f=s.getAttribute(h.toLowerCase()+"$lit$").split(mn),g=/([.?@])?(.*)/.exec(h);l.push({type:1,index:o,name:g[2],strings:f,ctor:g[1]==="."?Oc:g[1]==="?"?Hc:g[1]==="@"?Dc:xs})}else l.push({type:6,index:o})}for(let p of m)s.removeAttribute(p)}if(p_.test(s.tagName)){let m=s.textContent.split(mn),p=m.length-1;if(p>0){s.textContent=fo?fo.emptyScript:"";for(let h=0;h<p;h++)s.append(m[h],Br()),uo.nextNode(),l.push({type:2,index:++o});s.append(m[p],Br())}}}else if(s.nodeType===8)if(s.data===fh)l.push({type:2,index:o});else{let m=-1;for(;(m=s.data.indexOf(mn,m+1))!==-1;)l.push({type:7,index:o}),m+=mn.length-1}o++}}static createElement(t,e){let n=go.createElement("template");return n.innerHTML=t,n}};Rc=class{constructor(t,e){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(t){var e;let{el:{content:n},parts:s}=this._$AD,o=((e=t==null?void 0:t.creationScope)!==null&&e!==void 0?e:go).importNode(n,!0);uo.currentNode=o;let r=uo.nextNode(),a=0,l=0,c=s[0];for(;c!==void 0;){if(a===c.index){let d;c.type===2?d=new Pn(r,r.nextSibling,this,t):c.type===1?d=new c.ctor(r,c.name,c.strings,this,t):c.type===6&&(d=new kc(r,this,t)),this.v.push(d),c=s[++l]}a!==(c==null?void 0:c.index)&&(r=uo.nextNode(),a++)}return o}m(t){let e=0;for(let n of this.v)n!==void 0&&(n.strings!==void 0?(n._$AI(t,n,e),e+=n.strings.length-2):n._$AI(t[e])),e++}},Pn=class{constructor(t,e,n,s){var o;this.type=2,this._$AH=N,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=n,this.options=s,this._$C_=(o=s==null?void 0:s.isConnected)===null||o===void 0||o}get _$AU(){var t,e;return(e=(t=this._$AM)===null||t===void 0?void 0:t._$AU)!==null&&e!==void 0?e:this._$C_}get parentNode(){let t=this._$AA.parentNode,e=this._$AM;return e!==void 0&&t.nodeType===11&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=Ls(this,t,e),Ur(t)?t===N||t==null||t===""?(this._$AH!==N&&this._$AR(),this._$AH=N):t!==this._$AH&&t!==oe&&this.$(t):t._$litType$!==void 0?this.T(t):t.nodeType!==void 0?this.k(t):m_(t)?this.O(t):this.$(t)}S(t,e=this._$AB){return this._$AA.parentNode.insertBefore(t,e)}k(t){this._$AH!==t&&(this._$AR(),this._$AH=this.S(t))}$(t){this._$AH!==N&&Ur(this._$AH)?this._$AA.nextSibling.data=t:this.k(go.createTextNode(t)),this._$AH=t}T(t){var e;let{values:n,_$litType$:s}=t,o=typeof s=="number"?this._$AC(t):(s.el===void 0&&(s.el=ys.createElement(s.h,this.options)),s);if(((e=this._$AH)===null||e===void 0?void 0:e._$AD)===o)this._$AH.m(n);else{let r=new Rc(o,this),a=r.p(this.options);r.m(n),this.k(a),this._$AH=r}}_$AC(t){let e=l_.get(t.strings);return e===void 0&&l_.set(t.strings,e=new ys(t)),e}O(t){d_(this._$AH)||(this._$AH=[],this._$AR());let e=this._$AH,n,s=0;for(let o of t)s===e.length?e.push(n=new Pn(this.S(Br()),this.S(Br()),this,this.options)):n=e[s],n._$AI(o),s++;s<e.length&&(this._$AR(n&&n._$AB.nextSibling,s),e.length=s)}_$AR(t=this._$AA.nextSibling,e){var n;for((n=this._$AP)===null||n===void 0||n.call(this,!1,!0,e);t&&t!==this._$AB;){let s=t.nextSibling;t.remove(),t=s}}setConnected(t){var e;this._$AM===void 0&&(this._$C_=t,(e=this._$AP)===null||e===void 0||e.call(this,t))}},xs=class{constructor(t,e,n,s,o){this.type=1,this._$AH=N,this._$AN=void 0,this.element=t,this.name=e,this._$AM=s,this.options=o,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=N}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,n,s){let o=this.strings,r=!1;if(o===void 0)t=Ls(this,t,e,0),r=!Ur(t)||t!==this._$AH&&t!==oe,r&&(this._$AH=t);else{let a=t,l,c;for(t=o[0],l=0;l<o.length-1;l++)c=Ls(this,a[n+l],e,l),c===oe&&(c=this._$AH[l]),r||(r=!Ur(c)||c!==this._$AH[l]),c===N?t=N:t!==N&&(t+=(c!=null?c:"")+o[l+1]),this._$AH[l]=c}r&&!s&&this.P(t)}P(t){t===N?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t!=null?t:"")}},Oc=class extends xs{constructor(){super(...arguments),this.type=3}P(t){this.element[this.name]=t===N?void 0:t}},tN=fo?fo.emptyScript:"",Hc=class extends xs{constructor(){super(...arguments),this.type=4}P(t){t&&t!==N?this.element.setAttribute(this.name,tN):this.element.removeAttribute(this.name)}},Dc=class extends xs{constructor(t,e,n,s,o){super(t,e,n,s,o),this.type=5}_$AI(t,e=this){var n;if((t=(n=Ls(this,t,e,0))!==null&&n!==void 0?n:N)===oe)return;let s=this._$AH,o=t===N&&s!==N||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,r=t!==N&&(s===N||o);o&&this.element.removeEventListener(this.name,this,s),r&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,n;typeof this._$AH=="function"?this._$AH.call((n=(e=this.options)===null||e===void 0?void 0:e.host)!==null&&n!==void 0?n:this.element,t):this._$AH.handleEvent(t)}},kc=class{constructor(t,e,n){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(t){Ls(this,t)}},f_={A:"$lit$",M:mn,C:fh,L:1,R:u_,D:Rc,V:m_,I:Ls,H:Pn,N:xs,U:Hc,B:Dc,F:Oc,W:kc},c_=Ic.litHtmlPolyfillSupport;c_==null||c_(ys,Pn),((uh=Ic.litHtmlVersions)!==null&&uh!==void 0?uh:Ic.litHtmlVersions=[]).push("2.3.1")});var we,Pi,ai,vo=u(()=>{we={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},Pi=i=>(...t)=>({_$litDirective$:i,values:t}),ai=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,n){this._$Ct=t,this._$AM=e,this._$Ci=n}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}});var eN,v_,g_,Eo,$n,iN,Nc,E_,Pc,gh=u(()=>{ct();({H:eN}=f_),v_=i=>i.strings===void 0,g_=()=>document.createComment(""),Eo=(i,t,e)=>{var n;let s=i._$AA.parentNode,o=t===void 0?i._$AB:t._$AA;if(e===void 0){let r=s.insertBefore(g_(),o),a=s.insertBefore(g_(),o);e=new eN(r,a,i,i.options)}else{let r=e._$AB.nextSibling,a=e._$AM,l=a!==i;if(l){let c;(n=e._$AQ)===null||n===void 0||n.call(e,i),e._$AM=i,e._$AP!==void 0&&(c=i._$AU)!==a._$AU&&e._$AP(c)}if(r!==o||l){let c=e._$AA;for(;c!==r;){let d=c.nextSibling;s.insertBefore(c,o),c=d}}}return e},$n=(i,t,e=i)=>(i._$AI(t,e),i),iN={},Nc=(i,t=iN)=>i._$AH=t,E_=i=>i._$AH,Pc=i=>{var t;(t=i._$AP)===null||t===void 0||t.call(i,!1,!0);let e=i._$AA,n=i._$AB.nextSibling;for(;e!==n;){let s=e.nextSibling;e.remove(),e=s}}});var b_,rt,re=u(()=>{ct();vo();gh();b_=(i,t,e)=>{let n=new Map;for(let s=t;s<=e;s++)n.set(i[s],s);return n},rt=Pi(class extends ai{constructor(i){if(super(i),i.type!==we.CHILD)throw Error("repeat() can only be used in text expressions")}ht(i,t,e){let n;e===void 0?e=t:t!==void 0&&(n=t);let s=[],o=[],r=0;for(let a of i)s[r]=n?n(a,r):r,o[r]=e(a,r),r++;return{values:o,keys:s}}render(i,t,e){return this.ht(i,t,e).values}update(i,[t,e,n]){var s;let o=E_(i),{values:r,keys:a}=this.ht(t,e,n);if(!Array.isArray(o))return this.ut=a,r;let l=(s=this.ut)!==null&&s!==void 0?s:this.ut=[],c=[],d,m,p=0,h=o.length-1,f=0,g=r.length-1;for(;p<=h&&f<=g;)if(o[p]===null)p++;else if(o[h]===null)h--;else if(l[p]===a[f])c[f]=$n(o[p],r[f]),p++,f++;else if(l[h]===a[g])c[g]=$n(o[h],r[g]),h--,g--;else if(l[p]===a[g])c[g]=$n(o[p],r[g]),Eo(i,c[g+1],o[p]),p++,g--;else if(l[h]===a[f])c[f]=$n(o[h],r[f]),Eo(i,o[p],o[h]),h--,f++;else if(d===void 0&&(d=b_(a,f,g),m=b_(l,p,h)),d.has(l[p]))if(d.has(l[h])){let E=m.get(a[f]),M=E!==void 0?o[E]:null;if(M===null){let I=Eo(i,o[p]);$n(I,r[f]),c[f]=I}else c[f]=$n(M,r[f]),Eo(i,o[p],M),o[E]=null;f++}else Pc(o[h]),h--;else Pc(o[p]),p++;for(;f<=g;){let E=Eo(i,c[g+1]);$n(E,r[f]),c[f++]=E}for(;p<=h;){let E=o[p++];E!==null&&Pc(E)}return this.ut=a,Nc(i,c),oe}})});var __,T_=u(()=>{"use strict";__=i=>new Promise(t=>{setTimeout(t,i)})});var y_,Eh,vh,bh,L_=u(()=>{"use strict";T_();$();y_=340,Eh=class{constructor(t,e){this.urlPattern=t;this.isPost=e;this.cache=new Map;this.lastRequest=Date.now()}get(t,e){return T(this,null,function*(){if(this.cache.has(t))return this.cache.get(t);let n=Date.now(),s=n-this.lastRequest;if(s<y_)return yield __(y_-s),this.get(t,e);this.lastRequest=n;let o=yield L(this.urlPattern.replace("{key}",t),{method:this.isPost?"POST":"GET",anchorEl:e});return this.cache.set(t,o),o})}},vh=new Map,bh=(i,t)=>(vh.has(i)||vh.set(i,new Eh(i,t)),vh.get(i))});var ws,x_,jr=u(()=>{"use strict";L_();ws=bh("/ajax/brand.models.cshtml?brand={key}"),x_=bh("/ajax/geo.cshtml?_=p&c={key}")});var bo,$i,pn=u(()=>{"use strict";ct();bo=(i,t="")=>y`<x-icon class="${t}" name="${i}"></x-icon>`,$i=i=>{if(i._$litPart$===void 0){let t=i.firstChild;for(;t;){let e=t.nextSibling;t.remove(),t=e}}}});var $c,nN,_h,at,Ce=u(()=>{"use strict";j();$c=new WeakMap,nN=i=>{let t=document.createElement("div");return t.style.overflowY="hidden",t.style.overflowX="visible",i.parentElement.replaceChild(t,i),t.appendChild(i),t},_h=class extends EventTarget{constructor(e,n){super();this.element=e;this.duration=500;this.enableInterruption=!0;this.height=0;this.inProgress=!1;n!==void 0&&(e.style.display=n?"":"none"),this.expanded=n||Fe(e,"display")!=="none"}toggle(e){this.expand(!this.expanded,e)}hideAndRemove(e){this.addEventListener("end",()=>{this.element.remove()},{once:!0}),this.expand(!1,e)}expand(e,n){!n&&!this.enableInterruption&&this.inProgress||e!==this.expanded&&(this.expanded=e,this.dispatchEvent(new CustomEvent("start")),n?this.finish():this.animate())}finish(){this.element.style.transition="",this.element.style.display=this.expanded?"":"none",this.wrapperEl&&(this.wrapperEl.parentNode.replaceChild(this.element,this.wrapperEl),this.wrapperEl=void 0),this.dispatchEvent(new CustomEvent("end")),this.dispatchEvent(new CustomEvent(this.expanded?"show":"hide"))}animationFinish(){this.element.style.marginTop=this.marginTop||"",this.marginTop=void 0,this.finish()}animate(){let e=()=>{clearTimeout(this.backupTimeout),this.animationFinish()};clearTimeout(this.backupTimeout),this.inProgress=!0,setTimeout(()=>{this.inProgress=!1},this.duration+100);let n=this.wrapperEl!==void 0;this.element.removeEventListener("transitionend",e),this.marginTop===void 0&&(this.marginTop=this.element.style.marginTop||""),this.createWrapper(),this.element.addEventListener("transitionend",e,{once:!0}),setTimeout(()=>{if(!this.wrapperEl)return;n||(this.element.style.transition=`margin-top ${this.duration}ms cubic-bezier(0.445, 0.05, 0.55, 0.95)`);let s=this.expanded?0:-this.height;this.element.style.marginTop=`${s}px`,this.backupTimeout=setTimeout(()=>{this.animationFinish()},this.duration+100)})}createWrapper(){if(this.wrapperEl)return;let{element:e}=this,n=e.parentElement;e.style.display="";let s=e.offsetTop;this.wrapperEl=nN(e);let o=n.offsetHeight;this.height=this.wrapperEl.offsetHeight,e.style.marginTop="0";let r=e.offsetTop-s;r!==0&&(this.wrapperEl.style.marginTop=`${-r}px`);let a=n.offsetHeight-o;a!==0&&(this.wrapperEl.style.marginBottom=`${-a}px`);let l=this.expanded?-this.height:0;e.style.marginTop=`${l}px`}},at=(i,t)=>($c.has(i)?t!==void 0&&$c.get(i).expand(t):$c.set(i,new _h(i,t)),$c.get(i))});var Kt,_o=u(()=>{ct();vo();Kt=Pi(class extends ai{constructor(i){var t;if(super(i),i.type!==we.ATTRIBUTE||i.name!=="style"||((t=i.strings)===null||t===void 0?void 0:t.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(i){return Object.keys(i).reduce((t,e)=>{let n=i[e];return n==null?t:t+`${e=e.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${n};`},"")}update(i,[t]){let{style:e}=i.element;if(this.vt===void 0){this.vt=new Set;for(let n in t)this.vt.add(n);return this.render(t)}this.vt.forEach(n=>{t[n]==null&&(this.vt.delete(n),n.includes("-")?e.removeProperty(n):e[n]="")});for(let n in t){let s=t[n];s!=null&&(this.vt.add(n),n.includes("-")?e.setProperty(n,s):e[n]=s)}return oe}})});var j_,Bc,Ae,To,z_,V_,yo,Ti,Uc,W_,Th,yh,ue=u(()=>{"use strict";j_="Вы уверены?",Bc="Подтвердить покупку?",Ae="Удалить",To="Скрыть",z_="Закрыть окно?",V_="Внесённые изменения не сохранятся",yo="Закрыть",Ti="Сохранить",Uc="Отменить",W_="{Amount, plural, one {# кредит} many {# кредитов} other {# кредита}}",Th="Выделить все",yh="Отменить все"});var jc,Lh=u(()=>{"use strict";jc=i=>{let t=i.text||i.textContent||i.innerHTML||"",e=document.getElementsByTagName("head")[0]||document.documentElement,n=document.createElement("script");n.type="text/javascript",i.src?n.src=i.src:n.appendChild(document.createTextNode(t)),e.insertBefore(n,e.firstChild),e.removeChild(n),i.parentNode&&i.parentNode.removeChild(i)}});var Z_,lN,q_,G_,J_,wh,xh,He,xo=u(()=>{"use strict";Z_=Bs(Lr(),1),lN=1e3,q_=0,wh=class extends EventTarget{constructor(){super(),window.addEventListener("scroll",(0,Z_.throttle)(this.handleScroll).bind(this),{passive:!0})}handleScroll(){let{clientHeight:t,scrollHeight:e}=document.documentElement,{scrollTop:n}=document.scrollingElement;if(J_!==e&&e-n-t<=600){J_=e;let s=Math.max(0,lN-(Date.now()-q_));clearTimeout(G_),G_=setTimeout(()=>{q_=Date.now(),this.dispatchEvent(new Event("scroll"))},s)}}},He=()=>(xh||(xh=new wh),xh)});var Un,zc=u(()=>{ct();Un=i=>i!=null?i:N});var Vc,Q_=u(()=>{"use strict";Vc=class{constructor(){this.key=1;this.pendingKeys=[];this.publishDepth=0;this.subscriptions=[];this.topics={}}subscribe(t,e,n){let s=this.topics[t];s||(s=this.topics[t]=[]);let{key:o}=this;return this.subscriptions[o]=t,this.subscriptions[o+1]=e,this.subscriptions[o+2]=n,this.key=o+3,s.push(o),o}subscribeOnce(t,e,n){let s=!1,o=this.subscribe(t,()=>{s||(s=!0,this.unsubscribeByKey(o),e.apply(n,arguments))},this);return o}unsubscribe(t,e,n){let s=this.topics[t];if(s){let{subscriptions:o}=this,r=s.find(a=>o[a+1]===e&&o[a+2]===n);if(r)return this.unsubscribeByKey(r)}return!1}unsubscribeByKey(t){let e=this.subscriptions[t];if(e){let n=this.topics[e];if(this.publishDepth!==0)this.pendingKeys.push(t),this.subscriptions[t+1]=()=>{};else{if(n){let s=n.indexOf(t);s!==-1&&n.splice(s,1)}delete this.subscriptions[t],delete this.subscriptions[t+1],delete this.subscriptions[t+2]}}return!!e}publish(t,...e){let n=this.topics[t];if(n){this.publishDepth++;let s=0;try{for(s=0;s<n.length;s++){let o=n[s];this.subscriptions[o+1].apply(this.subscriptions[o+2],e)}}finally{if(this.publishDepth--,this.pendingKeys.length>0&&this.publishDepth===0){let o;for(;o=this.pendingKeys.pop();)this.unsubscribeByKey(o)}}return s!==0}return!1}clear(t){if(t){let e=this.topics[t];e&&(e.forEach(n=>this.unsubscribeByKey(n)),delete this.topics[t])}else this.subscriptions.length=0,this.topics={}}dispose(){this.clear(),this.pendingKeys.length=0}}});var it,Se=u(()=>{"use strict";Q_();it=new Vc});var XT,QT,ht,Mh,ty,mN,ae=u(()=>{"use strict";XT=[],QT=[],ht=(i,t)=>{if(!d2Env.isApp)if(window.ym)try{window.ym(33911514,"reachGoal",i,t)}catch(e){}else XT.push([i,t])},Mh=i=>{if(!d2Env.isApp)if(window.ym)try{window.ym(33911514,"params",i)}catch(t){}else QT.push(i)},ty=()=>{document.removeEventListener(`yacounter${33911514}inited`,ty),XT.forEach(i=>{ht(i[0],i[1])}),QT.forEach(Mh)},mN=i=>{let e=i.target.closest("[data-ym-target]");if(!e)return;e.dataset.ymTarget.split(/\s+/).forEach((o,r)=>{let a,l=e.dataset[r===0?"ymParams":`ymParams${r+1}`];if(l)try{a=JSON.parse(l)}catch(c){}ht(o,a)})};d2Env.isApp||(document.addEventListener(`yacounter${33911514}inited`,ty),document.documentElement.addEventListener("click",mN))});var Kr,Ih,ey,iy,ny,Gc,Rh,Oh=u(()=>{"use strict";We();Kr=new WeakMap,Ih=i=>{i.preventDefault();let t=i.currentTarget;Hi(t)&&Kr.has(t)&&Kr.get(t)()},ey=i=>{(i.ctrlKey||i.metaKey)&&i.keyCode===13&&Ih(i)},iy=i=>{i.currentTarget.addEventListener("keyup",ey)},ny=i=>{i.currentTarget.removeEventListener("keyup",ey)},Gc=(i,t)=>{Kr.has(i)||Kr.set(i,t),i.addEventListener("submit",Ih),i.addEventListener("focusin",iy),i.addEventListener("focusout",ny)},Rh=i=>{i.removeEventListener("submit",Ih),i.removeEventListener("focusin",iy),i.removeEventListener("focusout",ny),Kr.delete(i)}});var pN,Xt,Fi=u(()=>{"use strict";pN=0,Xt=()=>{let i=pN++,t="";for(;i>=0;)t=String.fromCharCode(i%26+97)+t,i=Math.floor(i/26)-1;return t}});var yt,De=u(()=>{"use strict";ue();D();ge();$();Oh();Fi();Di();nt();yt=class extends EventTarget{constructor(e,n,s){super();this.config=e;this.isNested=n;this.isPopscreen=s;this.element=document.createElement("div");this.formData="";this.showCloseConfirm=!1;this.closeWithoutConfirm=!this.showCloseConfirm;this.requestId=Xt();this.submitHandler=this.defaultSubmitHandler;this.formDataTransformer=e=>new FormData(e)}setSubmitHandler(e){this.submitHandler=e}setFormDataTransformer(e){this.formDataTransformer=e}initCloseConfirm(e){this.showCloseConfirm=!0,this.closeWithoutConfirm=!this.showCloseConfirm,e&&(this.isDataChanged=e),this.form&&(this.formData=ii(this.form).toString()),this.config&&delete this.config.closeOnClick}isDataChanged(){return Boolean(this.form&&this.formData!==ii(this.form).toString())}show(){var e;if(this.closeWithoutConfirm=!this.showCloseConfirm,this.dialog=bi(this.config,this.isNested,this.isPopscreen),this.dialog.decorate(this.element),this.dialog.addEventListener("beforehide",n=>T(this,null,function*(){let s=this.isDataChanged();!this.closeWithoutConfirm&&s&&(n.preventDefault(),(yield et(z_,V_,void 0,yo))&&this.close())})),this.dialog.addEventListener("hide",()=>this.close(),{once:!0}),this.dialog.show(),this.form=(e=this.dialog.contentElement)==null?void 0:e.querySelector("form"),this.form){let n=O("js-spinner",this.form);n&&(this.spinner=new se(n)),Gc(this.form,()=>this.submit())}}close(){this.closeWithoutConfirm=!0,this.stopSpinner(),this.form&&Rh(this.form),this.dialog&&this.dialog.hide(),zt()}submit(){!this.submitHandler||!this.form||(this.spinner&&this.spinner.start(),this.submitHandler(this.form,this.form.querySelector('button[type="submit"]')).then(e=>{this.form&&Rh(this.form),this.dispatchEvent(new CustomEvent("submit",{detail:e,cancelable:!0}))&&this.close()}).catch(()=>{}).finally(()=>{this.stopSpinner()}))}stopSpinner(){this.spinner&&this.spinner.stop()}defaultSubmitHandler(e,n){return L(e.action,this.requestId,{method:e.getAttribute("method")||"POST",anchorEl:n,body:this.formDataTransformer(e),throwError:!0})}}});var Rt,yi=u(()=>{ct();vo();Rt=Pi(class extends ai{constructor(i){var t;if(super(i),i.type!==we.ATTRIBUTE||i.name!=="class"||((t=i.strings)===null||t===void 0?void 0:t.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(i){return" "+Object.keys(i).filter(t=>i[t]).join(" ")+" "}update(i,[t]){var e,n;if(this.nt===void 0){this.nt=new Set,i.strings!==void 0&&(this.st=new Set(i.strings.join(" ").split(/\s/).filter(o=>o!=="")));for(let o in t)t[o]&&!(!((e=this.st)===null||e===void 0)&&e.has(o))&&this.nt.add(o);return this.render(t)}let s=i.element.classList;this.nt.forEach(o=>{o in t||(s.remove(o),this.nt.delete(o))});for(let o in t){let r=!!t[o];r===this.nt.has(o)||((n=this.st)===null||n===void 0?void 0:n.has(o))||(r?(s.add(o),this.nt.add(o)):(s.remove(o),this.nt.delete(o)))}return oe}})});var li,wo=u(()=>{"use strict";ct();yi();re();D();nt();li=class extends EventTarget{constructor(t,e,n){super();let s=S("div",d2Env.isMobile?"":"c-dropdown-menu");if(z(rt(e,o=>o.action,o=>y`
<div class=${Rt({"x-menu":!0,"x-menu--mod":!!o.isMod,"x-menu--delete":!!o.delete})}
  @click=${r=>this.click(r.target,o)}>${o.text}
</div>
    `),s),d2Env.isMobile){let o=bc({anchor:t,title:n});o.decorate(s),o.show()}else Mt(s,t,{classNames:["c-bubble--dropdown"],placement:"bottom",isDropdown:!0,minZIndex:2})}click(t,e){e.inactive||(e.confirmTitle?et(e.confirmTitle,e.confirmMessage,t,e.confirm,e.cancel,!0).then(n=>{n&&this.dispatchEvent(new CustomEvent("select",{detail:e.action}))}):this.dispatchEvent(new CustomEvent("select",{detail:e.action})))}}});var Xr,Ye,Qr=u(()=>{ct();vo();Xr=class extends ai{constructor(t){if(super(t),this.it=N,t.type!==we.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(t){if(t===N||t==null)return this._t=void 0,this.it=t;if(t===oe)return t;if(typeof t!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(t===this.it)return this._t;this.it=t;let e=[t];return e.raw=e,this._t={_$litType$:this.constructor.resultType,strings:e,values:[]}}};Xr.directiveName="unsafeHTML",Xr.resultType=1;Ye=Pi(Xr)});var Yc,ta,$h=u(()=>{"use strict";Yc="Ой!",ta="Хорошо, я понял"});var jn,Kc=u(()=>{"use strict";Si();jn=class extends EventTarget{constructor(e,n,s){super();this.element=e;this.height=0;this.element.rows=1,n&&(this.element.style.minHeight=`${n}px`),s&&(this.element.style.maxHeight=`${s}px`),this.handleEvent(),this.element.addEventListener("focus",this),this.element.addEventListener("input",this),this.element.addEventListener("blur",this),ee(this.element,{onEnter:()=>this.handleEvent()})}handleEvent(){let e=document.scrollingElement.scrollTop,{element:n}=this;n.style.height="auto";let{scrollHeight:s}=n;n.style.height=`${s}px`;let o=s>n.offsetHeight?"auto":"hidden";o!==n.style.overflowY&&(n.style.overflowY=o),document.scrollingElement.scrollTop=e,s!==this.height&&(this.height=s,this.dispatchEvent(new CustomEvent("resize")))}setContent(e){this.element.value=e,this.handleEvent()}setEnabled(e){this.element.disabled=!e,this.handleEvent()}dispose(){this.element.removeEventListener("focus",this),this.element.removeEventListener("input",this),this.element.removeEventListener("blur",this)}}});var Ly,xy,wy,Cy,Fh,Ay=u(()=>{"use strict";Ly="Слишком большой файл{SIZE}. Максимально допустимый размер {MAX_SIZE}.",xy="Неизвестный формат изображения. Поддерживаемые форматы: JPEG, PNG.",wy="Неизвестная ошибка при добавлении фотографии ({CODE}).",Cy="Ошибочный ответ сервера ({STATUS}).",Fh="Загрузить фотографи{NUM_FILES, plural, one {ю} other {и}}"});var Sy,Li,na=u(()=>{"use strict";Ay();D();xe();ve();j();Fi();xc();nt();Sy="23MB",Li=class extends EventTarget{constructor(e,n){super();this.entityType_=e;this.buttonClass_=n;this.buttonId_=this.makeId("b"),this.containerId_=this.makeId("c"),this.errors_=[],this.uploadUrl_="/ajax/upload.cshtml",this.action_="upload",this.maxFiles_=1,this.dataAttributes_={},this.buttonCaption_=Fh}getCssClass(){return"uploader"}getElement(){return this.element_}getAction(){return this.action_}setAction(e){this.action_=e}setDataAttribute(e,n){this.dataAttributes_[e]=n}getUploadUrl(){return this.uploadUrl_}setUploadUrl(e){e&&(this.uploadUrl_=e,this.uploader_&&this.pluploadInit_())}setMaxFiles(e){this.maxFiles_=e,this.uploader_&&this.pluploadInit_(),this.buttonEl_&&(this.buttonEl_.innerHTML=Z(Fh,{NUM_FILES:e}))}getButton(){return this.buttonEl_}getMaxFiles(){return this.maxFiles_}setButtonCaption(e){this.buttonCaption_=e}getButtonCaption(){return this.buttonCaption_}getId(){return this.id_||(this.id_=Xt())}makeId(e){return this.getId()+"."+e}createDom(){this.element_=document.createElement("div");let e=this.element_,n=`${this.getCssClass()}-progress`;e.classList.add(this.getCssClass());let s=S("div",`${this.getCssClass()}-button`,this.buttonEl_=S("button",{className:`${this.getCssClass()}-button-text${this.buttonClass_?` ${this.buttonClass_}`:""}`,type:"button"}));s.id=this.containerId_,e.append(s,this.progressEl_=S("div",n,this.progressBarEl_=S("div",`${n}-bar`)),this.progressNumEl_=S("div",`${n}-num`)),this.buttonEl_.innerHTML=Z(this.buttonCaption_,{NUM_FILES:this.maxFiles_}),this.buttonEl_.id=this.buttonId_,Object.entries(this.dataAttributes_).forEach(([o,r])=>this.buttonEl_.setAttribute(`data-${o}`,r)),this.setProgress_(0,0,0),this.enableProgress_(!1),this.setVisible(!!this.isVisible_)}render(e){if(this.inDocument_)throw new Error("Component already rendered");this.element_||this.createDom(),e?e.insertBefore(this.element_,null):document.body.appendChild(this.element_),this.enterDocument()}enterDocument(){this.inDocument_=!0,this.pluploadInit_()}pluploadInit_(){this.uploader_&&(this.uploader_.destroy(),this.uploader_=void 0);let e=C({type:this.entityType_,_:this.action_},d2Env.formContext);this.uuid_=lo(),this.uploader_=new plupload.Uploader({container:this.containerId_,runtimes:"html5",browse_button:this.buttonId_,url:this.uploadUrl_,filters:{max_file_size:Sy,mime_types:[{title:"Image files",extensions:"jpeg,jpg,png"}]},multi_selection:this.maxFiles_>1,required_features:{send_binary_string:!0},multipart:!0,multipart_params:e,headers:{"X-Origin-Request-ID":d2Env.requestId,"X-Client-Request-ID":this.uuid_}}),this.uploader_.init(),this.uploader_.bind("Init",this.plInit_,this),this.uploader_.bind("FilesAdded",this.plFilesAdded_,this),this.uploader_.bind("StateChanged",this.plStateChanged_,this),this.uploader_.bind("UploadProgress",this.plUploadProgress_,this),this.uploader_.bind("Error",this.plError_,this),this.uploader_.bind("FileUploaded",this.plFileUploaded_,this),this.uploader_.bind("UploadComplete",this.plUploadComplete_,this)}dispose(){this.inDocument_=!1,this.uploader_&&(this.uploader_.destroy(),this.uploader_=void 0),this.element_&&this.element_.remove()}setVisible(e){this.isVisible_=e,this.element_&&_(this.element_,e)}enableProgress_(e){_(this.buttonEl_,!e),_(this.progressEl_,e),_(this.progressNumEl_,e)}setProgress_(e,n,s){this.progressBarEl_.style.width=`${e}%`,this.progressNumEl_.textContent=`${n}/${s}`}showErrors_(){this.errors_.length&&this.isVisible_&&Mt(`<ul><li>${this.errors_.join("<li>")}</ul>`,this.element_,{classNames:["c-bubble--xhr"]}),this.errors_.length=0}plInit_(){this.dispatchEvent(new Event("init"))}plFilesAdded_(e){clearTimeout(this.errorTm_),setTimeout(()=>{let n=this.getMaxFiles(),s=e.files.length-n;s>0&&e.splice(n,s),this.setProgress_(0,0,e.files.length),e.start()},300)}plStateChanged_(e){let n=e.state===plupload.STARTED;n&&this.dispatchEvent(new Event("started")),this.enableProgress_(n)}plUploadProgress_(e){this.setProgress_(e.total.percent,e.total.uploaded+e.total.failed,e.total.failed+e.total.queued+e.total.uploaded)}plError_(e,n){let s;if(n.code===plupload.FILE_SIZE_ERROR)s=Z(Ly,{SIZE:n.file&&n.file.size?` (${plupload.formatSize(n.file.size)})`:"",MAX_SIZE:Sy});else if(n.code===plupload.IMAGE_FORMAT_ERROR||n.code===plupload.FILE_EXTENSION_ERROR)s=xy;else{let r=this.uuid_||n.status;s=Z(wy,{CODE:n.code+(r?`; ${r}`:"")})}let o=n.file?`<strong>${It(n.file.name)}</strong>: `:"";this.errors_.push(o+s),clearTimeout(this.errorTm_),this.errorTm_=setTimeout(this.showErrors_.bind(this),100)}plFileUploaded_(e,n,s){try{n.info=JSON.parse(s.response)}catch(o){n.info={},n.info.error=Z(Cy,{STATUS:this.uuid_||s.status}),n.status=plupload.FAILED}(n.info.error||n.info.notification)&&(n.status=plupload.FAILED)}plUploadComplete_(e,n){let s=[];for(let o=0,r;r=n[o];o++)r.status===plupload.FAILED?r.info&&this.errors_.push((r.name?`<strong>${It(r.name)}</strong>: `:"")+(r.info.error||r.info.notification)):s.push(r.info);s.length&&this.dispatchEvent(new CustomEvent("ready",{detail:s})),this.showErrors_(),e.splice()}}});var la,Wy=u(()=>{ct();vo();gh();la=Pi(class extends ai{constructor(i){if(super(i),i.type!==we.PROPERTY&&i.type!==we.ATTRIBUTE&&i.type!==we.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!v_(i))throw Error("`live` bindings can only contain a single expression")}render(i){return i}update(i,[t]){if(t===oe||t===N)return t;let e=i.element,n=i.name;if(i.type===we.PROPERTY){if(t===e[n])return oe}else if(i.type===we.BOOLEAN_ATTRIBUTE){if(!!t===e.hasAttribute(n))return oe}else if(i.type===we.ATTRIBUTE&&e.getAttribute(n)===t+"")return oe;return Nc(i),t}})});var As,td=u(()=>{"use strict";As="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="});var oP,rP,aP,qy,lP,zh,cP,dP,mP,Vh,pP,Gy,hP,uP,Jy,Wh=u(()=>{"use strict";td();Si();wc();oP="is-contain",rP="is-cover",aP="is-transparent",qy="is-ready",lP="is-loaded",zh="data-src",cP="data-lowsrc",dP="opacity .4s",mP=.4,Vh=[],pP=i=>{Vh.includes(i)||Vh.push(i)},Gy=i=>Vh.includes(i),hP=i=>{let t=i.target,e=t.parentElement;e.classList.add(lP),setTimeout(()=>{t.style.transition="",e.classList.remove(qy)},mP*1e3+100)},uP=i=>{let t=i.getAttribute(zh);if(!t)return;let e=i.parentElement;i.setAttribute(cP,i.src),i.removeAttribute(zh),e.classList.add(qy),mo(i),i.style.transition=dP,i.addEventListener("load",hP,{once:!0,passive:!0}),i.src=t,pP(t)},Jy=i=>{if(i.dataset.defined==="")return;let t=i.querySelector("img"),e=i.querySelector("span");if(!t||!e)return;i.dataset.defined="";let n=i.classList.contains(oP),s=i.classList.contains(rP),o=i.classList.contains(aP),r=t.getAttribute(zh);if(o&&(i.style.backgroundColor=""),r){let a=document.createElement("img");a.src=As,e.appendChild(a),a.style.backgroundImage=`url(${t.src})`,a.style.backgroundSize=n?"contain":s?"cover":"100% 100%",a.style.backgroundPosition="50% 50%",a.style.backgroundRepeat="no-repeat",ee(t,{rootMargin:200,onEnter:uP})}}});var Zy,ca,Ss,xi,hn=u(()=>{"use strict";ct();yi();zc();Wy();_o();Wh();td();Zy=(i,t=960)=>{let e=t*t;return i.images.reduce((n,s)=>Math.abs(e-n.width*n.height)<Math.abs(e-s.width*s.width)?n:s)},ca=(i,t=0,e={},n=960)=>{let s=Zy(i,n),o=t===1?"is-contain":t===2?"is-cover":"",r=e.isTransparent?"is-transparent":"",a=`${s.width},${s.height}`,l=e.size||s,c=100*l.height/l.width,d=i.color?`style="background-color:${i.color};"`:"";return`<div class="o-img ${o} ${r} ${e.className||""}" data-size="${a}" ${d}>
    <span style="display: block; padding-top: ${c}%;"></span>
    <img src="${d2Env.isMobile?i.inline||As:s.url}" ${d2Env.isMobile?`data-src="${s.url}"`:""}>
  </div>`},Ss=(i,t=0,e={},n=960)=>{let s=document.createElement("div");return s.innerHTML=ca(i,t,e,n),s.firstElementChild},xi=(i,t=0,e={},n=960)=>{let s=Zy(i,n),{url:o}=s,r=d2Env.isMobile&&!Gy(o),a=`${s.width},${s.height}`,l=e.size||{width:s.width,height:s.height},c=`${100*(l.height/l.width)}%`,d={"o-img":!0,"is-contain":t===1,"is-cover":t===2,"is-transparent":Boolean(e.isTransparent)};e.className&&e.className.split(/\s+/).forEach(p=>{d[p]=!0});let m=r?i.inline||As:o;return y`<div class=${la(Rt(d))} data-size=${la(a)} style="background-color: ${i.color||""}">
    <span style=${Kt({display:"block",paddingTop:c})}></span>
    <img src=${la(m)} data-src=${Un(r?la(o):void 0)} loading=${Un(d2Env.isMobile?void 0:"lazy")}>
  </div>`}});var ci,pa=u(()=>{"use strict";ci=(i,t,e)=>Math.min(Math.max(i,t),e)});var Jh,oL,Zh=u(()=>{"use strict";Jh=class extends Error{};Jh.prototype.name="AssertionError";oL=(i,t)=>(i!=null,i)});var ed,rL=u(()=>{"use strict";Zh();ed=class extends EventTarget{constructor(e,n,s){super();this.token_=null;this.rows_=[];this.hiliteId_=-1;this.firstRowId_=0;this.inputToAnchorMap_=new WeakMap;this.maxMatches_=10;this.autoHilite_=!0;this.allowFreeSelect_=!1;this.wrap_=!1;this.triggerSuggestionsOnUpdate_=!1;this.matcher_=e,this.selectionHandler_=s,this.renderer_=n,n.addEventListener("hilite",this),n.addEventListener("select",this),n.addEventListener("dismiss",this)}getMatcher(){return this.matcher_,void 0}setMatcher(e){this.matcher_=e}getSelectionHandler(){return this.selectionHandler_,void 0}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}getToken(){return this.token_}getSuggestion(e){return this.rows_[e]}getAllSuggestions(){return this.rows_,void 0}getSuggestionCount(){return this.rows_.length}getHighlightedId(){return this.hiliteId_}handleEvent(e){let n=this.matcher_;if(e.target===this.renderer_)switch(e.type){case"hilite":this.hiliteId(e.detail.row);break;case"select":let s=!1;if(typeof e.detail.row=="number"){let o=e.detail.row,r=this.getIndexOfId(o),a=this.rows_[r];s=!!a&&n.isRowDisabled&&n.isRowDisabled(a),a&&!s&&this.hiliteId_!==o&&this.hiliteId(o)}s||this.selectHilited();break;case"dismiss":this.dismissOnDelay()}}setMaxMatches(e){this.maxMatches_=e}setAutoHilite(e){this.autoHilite_=e}setAllowFreeSelect(e){this.allowFreeSelect_=e}setWrap(e){this.wrap_=e}setTriggerSuggestionsOnUpdate(e){this.triggerSuggestionsOnUpdate_=e}setToken(e){this.token_!=e&&(this.token_=e,this.matcher_.requestMatchingRows(this.token_,this.maxMatches_,this.matchListener_.bind(this)),this.cancelDelayedDismiss())}getTarget(){return this.target_}setTarget(e){this.target_=e}isOpen(){return this.renderer_.isVisible()}getRowCount(){return this.getSuggestionCount()}hiliteNext(){let e=this.firstRowId_+this.rows_.length-1,n=this.hiliteId_;for(let s=0;s<this.rows_.length;s++){if(n>=this.firstRowId_&&n<e)n++;else if(n===-1)n=this.firstRowId_;else{if(this.allowFreeSelect_&&n===e)return this.hiliteId(-1),!1;if(this.wrap_&&n===e)n=this.firstRowId_;else return!1}if(this.hiliteId(n))return!0}return!1}hilitePrev(){let e=this.firstRowId_+this.rows_.length-1,n=this.hiliteId_;for(let s=0;s<this.rows_.length;s++){if(n>this.firstRowId_)n--;else{if(this.allowFreeSelect_&&n==this.firstRowId_)return this.hiliteId(-1),!1;if(this.wrap_&&(n==-1||n==this.firstRowId_))n=e;else return!1}if(this.hiliteId(n))return!0}return!1}hiliteId(e){let n=this.getIndexOfId(e),s=this.rows_[n];return!!s&&this.matcher_.isRowDisabled&&this.matcher_.isRowDisabled(s)?!1:(this.hiliteId_=e,this.renderer_.hiliteId(e),n!==-1)}hiliteIndex(e){return this.hiliteId(this.getIdOfIndex_(e))}selectHilited(){let e=this.getIndexOfId(this.hiliteId_);if(e!==-1){let n=this.rows_[e],s=this.selectionHandler_.selectRow(n);return this.triggerSuggestionsOnUpdate_?(this.token_=null,this.dismissOnDelay()):this.dismiss(),s||(this.dispatchEvent(new CustomEvent("update",{detail:{row:n,index:e}})),this.triggerSuggestionsOnUpdate_&&this.selectionHandler_.update(!0)),!0}return this.dismiss(),this.dispatchEvent(new CustomEvent("update",{detail:{row:null,index:null}})),!1}hasHighlight(){return this.isOpen()&&this.getIndexOfId(this.hiliteId_)!=-1}dismiss(){this.hiliteId_=-1,this.token_=null,this.firstRowId_+=this.rows_.length,this.rows_=[],clearTimeout(this.dismissTimer_),this.dismissTimer_=void 0,this.renderer_.dismiss(),this.dispatchEvent(new Event("suggestionsupdate")),this.dispatchEvent(new Event("dismiss"))}dismissOnDelay(){this.dismissTimer_||(this.dismissTimer_=setTimeout(()=>this.dismiss(),100))}immediatelyCancelDelayedDismiss_(){return this.dismissTimer_?(window.clearTimeout(this.dismissTimer_),this.dismissTimer_=void 0,!0):!1}cancelDelayedDismiss(){this.immediatelyCancelDelayedDismiss_()||window.setTimeout(this.immediatelyCancelDelayedDismiss_.bind(this),10)}dispose(){this.renderer_.dispose(),this.selectionHandler_.dispose()}matchListener_(e,n,s){this.token_===e&&this.renderRows(n,s)}renderRows(e,n){let s=typeof n=="object"&&n,r=(s?s.getPreserveHilited():n)?this.getIndexOfId(this.hiliteId_):-1;this.firstRowId_+=this.rows_.length,this.rows_=e;let a=[];for(let d=0;d<e.length;++d)a.push({id:this.getIdOfIndex_(d),data:e[d]});let l;this.target_&&(l=this.inputToAnchorMap_.get(this.target_)||this.target_),this.renderer_.setAnchorElement(l),this.renderer_.renderRows(a,this.token_||"",this.target_);let c=this.autoHilite_;s&&s.getAutoHilite()!==void 0&&(c=s.getAutoHilite()),this.hiliteId_=-1,(c||r>=0)&&a.length!==0&&this.token_&&(r>=0?this.hiliteId(this.getIdOfIndex_(r)):this.hiliteNext()),this.dispatchEvent(new Event("suggestionsupdate"))}getIndexOfId(e){let n=e-this.firstRowId_;return n<0||n>=this.rows_.length?-1:n}getIdOfIndex_(e){return this.firstRowId_+e}attachInputs(...e){this.selectionHandler_.attachInputs(...e)}detachInputs(...e){this.selectionHandler_.detachInputs(...e),e.forEach(s=>{this.inputToAnchorMap_.delete(s)})}attachInputWithAnchor(e,n){this.inputToAnchorMap_.set(e,n),this.attachInputs(e)}update(e){this.selectionHandler_.update(e)}}});var AP,id,aL=u(()=>{"use strict";ac();ve();j();ye();Zh();Fi();AP=300,id=class extends EventTarget{constructor(e,n,s,o){super();this.element_=null;this.token_="";this.rows_=[];this.rowDivs_=[];this.hilitedRow_=-1;this.startRenderingRows_=-1;this.visible_=!1;this.className="ac-renderer";this.rowClassName="ac-row";this.activeClassName="ac-active";this.highlightedClassName="ac-highlighted";this.matchWordBoundary_=!0;this.highlightAllTokens_=!1;this.showScrollbarsIfTooLarge_=!1;this.borderWidth_=0;this.parent_=e||document.body,this.doc_=this.parent_.ownerDocument,this.reposition_=!e,this.customRenderer_=n||null,this.useStandardHighlighting_=o!=null?o:!0,this.rightAlign_=!!s,this.showScrollbarsIfTooLarge_=!1,this.handleClick_=this.handleClick_.bind(this),this.handleMouseDown_=this.handleMouseDown_.bind(this),this.handleMouseOver_=this.handleMouseOver_.bind(this)}getElement(){return this.element_}setWidthProvider(e,n,s){this.widthProvider_=e,n&&(this.borderWidth_=n),s&&(this.maxWidthProvider_=s)}setRightAlign(e){this.rightAlign_=e}getRightAlign(){return this.rightAlign_}setShowScrollbarsIfTooLarge(e){this.showScrollbarsIfTooLarge_=e}setUseStandardHighlighting(e){this.useStandardHighlighting_=e}setMatchWordBoundary(e){this.matchWordBoundary_=e}setHighlightAllTokens(e){this.highlightAllTokens_=e}setAnchorElement(e){this.anchorElement_=e}getAnchorElement(){return this.anchorElement_}renderRows(e,n,s){this.token_=n,this.rows_=e,this.hilitedRow_=-1,this.startRenderingRows_=Date.now(),this.target_=s,this.rowDivs_=[],this.redraw()}dismiss(){this.visible_&&(this.visible_=!1,this.toggleAriaMarkup_(!1),_(this.element_,!1))}show(){this.visible_||(this.visible_=!0,this.toggleAriaMarkup_(!0),_(this.element_,!0))}toggleAriaMarkup_(e){!this.target_||(this.target_.setAttribute("aria-haspopup",String(e)),this.element_.setAttribute("aria-expanded",String(e)),this.target_.setAttribute("aria-expanded",String(e)),e?this.target_.setAttribute("aria-owns",this.element_.id):(this.target_.removeAttribute("aria-owns"),this.target_.setAttribute("aria-activedescendant","")))}isVisible(){return this.visible_}hiliteRow(e){let n=e>=0&&e<this.rows_.length?this.rows_[e]:void 0,s=e>=0&&e<this.rowDivs_.length?this.rowDivs_[e]:void 0,o=new CustomEvent("rowhilite",{detail:{rowNode:s,row:n?n.data:null},cancelable:!0});this.dispatchEvent(o)&&(this.hiliteNone(),this.hilitedRow_=e,s&&(s.classList.add(this.activeClassName),this.target_&&this.target_.setAttribute("aria-activedescendant",s.id),Lt(s,this.element_,!0)))}hiliteNone(){this.hilitedRow_>=0&&oL(this.rowDivs_[this.hilitedRow_]).classList.remove(this.activeClassName)}hiliteId(e){if(e==-1)this.hiliteRow(-1);else for(let n=0;n<this.rows_.length;n++)if(this.rows_[n].id==e){this.hiliteRow(n);return}}setMenuClasses_(e){e.classList.add(...this.className.split(" "))}maybeCreateElement_(){if(!this.element_){let e=this.doc_.createElement("div");e.style.display="none",this.showScrollbarsIfTooLarge_&&(e.style.overflowY="auto"),this.element_=e,this.setMenuClasses_(e),e.setAttribute("role","listbox"),e.id=Xt(),this.parent_.appendChild(e),e.addEventListener("click",this.handleClick_),e.addEventListener("mousedown",this.handleMouseDown_),e.addEventListener("mouseover",this.handleMouseOver_)}}redraw(){if(this.maybeCreateElement_(),this.widthProvider_&&(this.element_.style.minWidth=`${this.widthProvider_.clientWidth-this.borderWidth_}px`),this.maxWidthProvider_&&(this.element_.style.maxWidth=`${this.maxWidthProvider_.clientWidth-this.borderWidth_}px`),this.target_&&this.reposition_){let e=this.anchorElement_||this.target_;e&&hs(e,this.element_,{placement:this.rightAlign_?"bottom-end":"bottom-start",modifiers:[{name:"flip",enabled:!1}]})}if(this.rowDivs_.length=0,this.element_.innerHTML="",this.customRenderer_&&this.customRenderer_.render?this.customRenderer_.render(this,this.element_,this.rows_,this.token_):this.rows_.forEach(e=>{this.element_.appendChild(this.renderRowHtml(e,this.token_))}),this.rows_.length===0){this.dismiss();return}this.show()}setAutoPosition(e){this.reposition_=e}getAutoPosition(){return this.reposition_}getTarget(){return this.target_||null}dispose(){this.element_&&(this.element_.removeEventListener("click",this.handleClick_),this.element_.removeEventListener("mousedown",this.handleMouseDown_),this.element_.removeEventListener("mouseover",this.handleMouseOver_),this.element_.remove(),this.element_=null,this.visible_=!1)}renderRowContents_(e,n,s){s.textContent=e.data.toString()}startHiliteMatchingText_(e,n){this.wasHighlightedAtLeastOnce_=!1,this.hiliteMatchingText_(e,n)}hiliteMatchingText_(e,n){if(!(!this.highlightAllTokens_&&this.wasHighlightedAtLeastOnce_))if(e.nodeType===3){let s=null;Array.isArray(n)&&n.length>1&&!this.highlightAllTokens_&&(s=n.slice(1));let o=this.getTokenRegExp_(n);if(o.length===0)return;let r=e.nodeValue,a=this.matchWordBoundary_?new RegExp(`\\b(?:${o})`,"gi"):new RegExp(o,"gi"),l=[],c=0,d=a.exec(r),m=0;for(;d;)m++,l.push(r.substring(c,d.index)),l.push(r.substring(d.index,a.lastIndex)),c=a.lastIndex,d=a.exec(r);if(l.push(r.substring(c)),l.length>1){let p=this.highlightAllTokens_?m:1;for(let f=0;f<p;f++){let g=2*f;e.nodeValue=l[g];let E=this.doc_.createElement("b");E.className=this.highlightedClassName,E.appendChild(this.doc_.createTextNode(l[g+1])),E=e.parentNode.insertBefore(E,e.nextSibling),e.parentNode.insertBefore(this.doc_.createTextNode(""),E.nextSibling),e=E.nextSibling}let h=l.slice(p*2);e.nodeValue=h.join(""),this.wasHighlightedAtLeastOnce_=!0}else s&&this.hiliteMatchingText_(e,s)}else{let s=e.firstChild;for(;s;){let o=s.nextSibling;this.hiliteMatchingText_(s,n),s=o}}}getTokenRegExp_(e){let n="";return e&&(Array.isArray(e)&&(e=e.filter(s=>Boolean((s||"").trim()))),this.highlightAllTokens_?Array.isArray(e)?n=e.map(Dr).join("|"):(n=_b(e),n=Dr(n),n=n.replace(/ /g,"|")):Array.isArray(e)?n=e.length>0?Dr(e[0]):"":/^\W/.test(e)||(n=Dr(e))),n}renderRowHtml(e,n){let s=this.doc_.createElement("div");return s.className=this.rowClassName,s.id=Xt(),s.setAttribute("role","option"),this.customRenderer_&&this.customRenderer_.renderRow?this.customRenderer_.renderRow(e,n,s):this.renderRowContents_(e,n,s),n&&this.useStandardHighlighting_&&this.startHiliteMatchingText_(s,n),s.classList.add(this.rowClassName),this.rowDivs_.push(s),s}getRowFromEventTarget_(e){for(;e&&e!==this.element_&&!e.classList.contains(this.rowClassName);)e=e.parentNode;return e?this.rowDivs_.indexOf(e):-1}handleClick_(e){let n=this.getRowFromEventTarget_(e.target);n>=0&&this.dispatchEvent(new CustomEvent("select",{detail:{row:this.rows_[n].id}})),e.stopPropagation()}handleMouseDown_(e){e.stopPropagation(),e.preventDefault()}handleMouseOver_(e){let n=this.getRowFromEventTarget_(e.target);if(n>=0){if(Date.now()-this.startRenderingRows_<AP)return;this.dispatchEvent(new CustomEvent("hilite",{detail:{row:this.rows_[n].id}}))}}}});var fa,lL=u(()=>{"use strict";fa=class extends EventTarget{constructor(e=1){super();this.interval_=e;this.tick_=this.tick_.bind(this),this.last_=Date.now(),this.enabled=!1}getInterval(){return this.interval_}setInterval(e){this.interval_=e,this.timer_&&this.enabled?(this.stop(),this.start()):this.timer_&&this.stop()}tick_(){if(this.enabled){let e=Date.now()-this.last_;if(e>0&&e<this.interval_*.8){this.timer_=setTimeout(this.tick_,this.interval_-e);return}this.timer_&&(clearTimeout(this.timer_),this.timer_=void 0),this.dispatchTick(),this.enabled&&(this.stop(),this.start())}}dispatchTick(){this.dispatchEvent(new Event("tick"))}start(){this.enabled=!0,this.timer_||(this.timer_=setTimeout(this.tick_,this.interval_),this.last_=Date.now())}stop(){this.enabled=!1,this.timer_&&(clearTimeout(this.timer_),this.timer_=void 0)}dispose(){this.stop()}}});var SP,nd,cL=u(()=>{"use strict";lL();SP=",;",nd=class{constructor(t=SP,e="",n=!0,s=150){this.preventSelectionOnTab_=!1;this.lastKeyCode_=-1;this.whitespaceWrapEntries_=!0;this.generateNewTokenOnLiteral_=!0;this.upsideDown_=!1;this.separatorUpdates_=!0;this.separatorSelects_=!0;this.lastValue_="";this.waitingForIme_=!1;this.rowJustSelected_=!1;this.updateDuringTyping_=!0;this.attachedInputs_=[];this.multi_=n,this.setSeparators(t),this.literals_=e,this.preventDefaultOnTab_=n,this.timer_=s>0?new fa(s):void 0,this.handleFocus=this.handleFocus.bind(this),this.handleBlur=this.handleBlur.bind(this),this.onKey_=this.onKey_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onKeyPress_=this.onKeyPress_.bind(this),this.onTick_=this.onTick_.bind(this),this.onKeyDownOnInactiveElement_=this.onKeyDownOnInactiveElement_.bind(this)}attachAutoComplete(t){this.ac_=t}getAutoComplete(){return this.ac_}getActiveElement(){return this.activeElement_}getValue(){return this.activeElement_.value}setValue(t){this.activeElement_.value=t}getCursorPosition(){return this.activeElement_.selectionStart}setCursorPosition(t){this.activeElement_.selectionStart=t,this.activeElement_.selectionEnd=t}attachInput(t){if(this.attachedInputs_.push(t),t&&t.nodeType===1){let e=t;e.setAttribute("role","combobox"),e.setAttribute("aria-autocomplete","list")}t.addEventListener("focus",this.handleFocus),t.addEventListener("blur",this.handleBlur),this.activeElement_||(t.addEventListener("keydown",this.onKeyDownOnInactiveElement_),t&&t.nodeType===1&&t.ownerDocument.activeElement===t&&this.processFocus(t))}detachInput(t){let e=this.attachedInputs_.indexOf(t);e!==-1&&this.attachedInputs_.splice(e,1),this.attachedInputs_.push(t),t&&t.nodeType===1&&(t.removeAttribute("role"),t.removeAttribute("aria-autocomplete")),t==this.activeElement_&&this.handleBlur(),t.removeEventListener("focus",this.handleFocus),t.removeEventListener("blur",this.handleBlur),this.activeElement_||t.removeEventListener("keydown",this.onKeyDownOnInactiveElement_)}attachInputs(...t){t.forEach(e=>this.attachInput(e))}detachInputs(...t){t.forEach(e=>this.detachInput(e))}selectRow(t,e){return this.activeElement_&&this.setTokenText(t.toString(),e),!1}setTokenText(t,e){if(e!==void 0?e:this.multi_){let n=this.getTokenIndex_(this.getValue(),this.getCursorPosition()),s=this.splitInput_(this.getValue()),o=t;if(this.separatorCheck_&&!this.separatorCheck_.test(o)&&(o=o.trimRight()+this.defaultSeparator_),this.whitespaceWrapEntries_&&(n!==0&&s[n-1].trim()!==""&&(o=" "+o),n===s.length-1&&(o+=" ")),o!==s[n]){s[n]=o;let r=this.activeElement_;r.value=s.join("");let a=0;for(let l=0;l<=n;l++)a+=s[l].length;r.focus(),this.setCursorPosition(a)}}else this.setValue(t);this.rowJustSelected_=!0}dispose(){this.activeTimeoutId_!=null&&clearTimeout(this.activeTimeoutId_),this.attachedInputs_.forEach(t=>{t.removeEventListener("focus",this.handleFocus),t.removeEventListener("blur",this.handleBlur),t.removeEventListener("keydown",this.onKeyDownOnInactiveElement_)}),this.removeEventHandlers_(),this.timer_&&this.timer_.dispose()}setSeparators(t,e){this.separators_=t,this.defaultSeparator_=e!=null?e:this.separators_.substring(0,1);let n=this.multi_?`[\\s${this.separators_}]+`:"[\\s]+";this.trimmer_=new RegExp(`^${n}|${n}$`,"g"),this.separatorCheck_=new RegExp(`\\s*[${this.separators_}]$`)}setUpsideDown(t){this.upsideDown_=t}setWhitespaceWrapEntries(t){this.whitespaceWrapEntries_=t}setGenerateNewTokenOnLiteral(t){this.generateNewTokenOnLiteral_=t}setTrimmingRegExp(t){this.trimmer_=t}setEndsWithSeparatorRegExp(t){this.separatorCheck_=t}setPreventDefaultOnTab(t){this.preventDefaultOnTab_=t}setPreventSelectionOnTab(t){this.preventSelectionOnTab_=t}setSeparatorCompletes(t){this.separatorUpdates_=t,this.separatorSelects_=t}setSeparatorSelects(t){this.separatorSelects_=t}getThrottleTime(){return this.timer_?this.timer_.getInterval():-1}setRowJustSelected(t){this.rowJustSelected_=t}setThrottleTime(t){if(t<0){this.timer_.dispose(),this.timer_=void 0;return}this.timer_?this.timer_.setInterval(t):this.timer_=new fa(t)}getUpdateDuringTyping(){return this.updateDuringTyping_}setUpdateDuringTyping(t){this.updateDuringTyping_=t}handleKeyEvent(t){switch(t.keyCode){case 40:if(this.ac_.isOpen())return this.moveDown_(),t.preventDefault(),!0;if(!this.multi_)return this.update(!0),t.preventDefault(),!0;break;case 38:if(this.ac_.isOpen())return this.moveUp_(),t.preventDefault(),!0;break;case 9:if(this.ac_.isOpen()&&!t.shiftKey&&!this.preventSelectionOnTab_){if(this.update(),this.ac_.selectHilited()&&this.preventDefaultOnTab_)return t.preventDefault(),!0}else this.ac_.dismiss();break;case 13:if(this.ac_.isOpen()){if(this.update(),this.ac_.selectHilited())return t.preventDefault(),t.stopPropagation(),!0}else this.ac_.dismiss();break;case 27:if(this.ac_.isOpen())return this.ac_.dismiss(),t.preventDefault(),t.stopPropagation(),!0;break;case 229:if(!this.waitingForIme_)return this.startWaitingForIme_(),!0;break;default:this.timer_&&!this.updateDuringTyping_&&(this.timer_.stop(),this.timer_.start())}return this.handleSeparator_(t)}handleSeparator_(t){let e=this.multi_&&t.charCode&&this.separators_.includes(String.fromCharCode(t.charCode));return this.separatorUpdates_&&e&&this.update(),this.separatorSelects_&&e&&this.ac_.selectHilited()?(t.preventDefault(),!0):!1}addEventHandlers_(){this.activeElement_.addEventListener("keydown",this.onKey_)}removeEventHandlers_(){this.activeElement_&&this.activeElement_.removeEventListener("keydown",this.onKey_),this.waitingForIme_&&this.stopWaitingForIme_()}handleFocus(t){this.processFocus(t.target)}processFocus(t){this.activeElement_||t.removeEventListener("keydown",this.onKeyDownOnInactiveElement_),this.ac_&&this.ac_.cancelDelayedDismiss(),t!=this.activeElement_&&(this.activeElement_=t,this.timer_&&(this.timer_.start(),this.timer_.addEventListener("tick",this.onTick_)),this.lastValue_=this.getValue(),this.addEventHandlers_())}handleBlur(){this.processBlur()}processBlur(){this.activeElement_&&(this.removeEventHandlers_(),this.activeElement_=void 0,this.timer_&&(this.timer_.stop(),this.timer_.removeEventListener("tick",this.onTick_)),this.ac_&&this.ac_.dismissOnDelay())}onTick_(){this.update()}onKeyDownOnInactiveElement_(t){this.handleFocus(t)}onKey_(t){this.lastKeyCode_=t.keyCode,this.ac_&&this.handleKeyEvent(t)}onKeyPress_(){this.waitingForIme_&&this.lastKeyCode_!=229&&this.stopWaitingForIme_()}onKeyUp_(t){this.waitingForIme_&&(t.keyCode==13||t.keyCode==77&&t.ctrlKey)&&this.stopWaitingForIme_()}startWaitingForIme_(){this.waitingForIme_||(this.activeElement_.addEventListener("keyup",this.onKeyUp_),this.activeElement_.addEventListener("keypress",this.onKeyPress_),this.waitingForIme_=!0)}stopWaitingForIme_(){!this.waitingForIme_||(this.waitingForIme_=!1,this.activeElement_.removeEventListener("keyup",this.onKeyUp_),this.activeElement_.removeEventListener("keypress",this.onKeyPress_))}update(t){if(this.activeElement_&&(t||this.getValue()!=this.lastValue_)){if(t||!this.rowJustSelected_){let e=this.parseToken();this.ac_&&(this.ac_.setTarget(this.activeElement_),this.ac_.setToken(e))}this.lastValue_=this.getValue()}this.rowJustSelected_=!1}parseToken(){return this.parseToken_()}moveUp_(){return this.upsideDown_?this.ac_.hiliteNext():this.ac_.hilitePrev()}moveDown_(){return this.upsideDown_?this.ac_.hilitePrev():this.ac_.hiliteNext()}parseToken_(){let t=this.getCursorPosition(),e=this.getValue();return this.trim_(this.splitInput_(e)[this.getTokenIndex_(e,t)])}trim_(t){return this.trimmer_?String(t).replace(this.trimmer_,""):t}getTokenIndex_(t,e){let n=this.splitInput_(t);if(e==t.length)return n.length-1;let s=0;for(let o=0,r=0;o<n.length&&r<=e;o++)r+=n[o].length,s=o;return s}splitInput_(t){if(!this.multi_)return[t];let e=String(t).split(""),n=[],s=[];for(let o=0,r=!1;o<e.length;o++)this.literals_&&this.literals_.includes(e[o])?(this.generateNewTokenOnLiteral_&&!r&&(n.push(s.join("")),s.length=0),s.push(e[o]),r=!r):!r&&this.separators_.includes(e[o])?(s.push(e[o]),n.push(s.join("")),s.length=0):s.push(e[o]);return n.push(s.join("")),n}}});var sd,dL=u(()=>{"use strict";cL();sd=class extends nd{selectRow(t){let e=super.selectRow.call(this,t);return t.select(this.ac_.getTarget()),e}}});var Ro,mL=u(()=>{"use strict";Ro=class{constructor(t,e){this.xhr_=new XMLHttpRequest;this.method_="GET";this.eventAttached_=!1;this.url_=t,this.useSimilar_=!e}setMethod(t){this.method_=t}setContent(t){this.content_=t}setHeaders(t){this.headers_=t}getXhr(){return this.xhr_}static buildUrl(t,e,n,s){let o=new URL(t,window.location.href),{searchParams:r}=o;return r.append("token",e),r.append("max_matches",String(n)),r.append("use_similar",String(Number(s))),o.href}parseResponseText(t){let e=[];if(t)try{e=JSON.parse(t)}catch(n){}return e}xhrCallback(t,e){let n=this.xhr_.responseText;e(t,this.parseResponseText(n))}requestMatchingRows(t,e,n){let s=Ro.buildUrl(this.url_,t,e,this.useSimilar_);if(!s)return;let o=()=>this.xhrCallback(t,n);this.xhr_.abort(),this.eventAttached_&&this.xhr_.removeEventListener("load",o),this.eventAttached_=!0,this.xhr_.open(this.method_,s,!0),this.xhr_.addEventListener("load",o,{once:!0}),Object.entries(this.headers_||{}).forEach(([r,a])=>this.xhr_.setRequestHeader(r,a)),this.xhr_.send(this.content_)}}});var od,pL=u(()=>{"use strict";mL();od=class extends Ro{setRowFilter(e){this.rowFilter_=e}setRowBuilder(e){this.rowBuilder_=e}requestMatchingRows(e,n,s){let o=(r,a)=>{try{let l=[];for(let c=0;c<a.length;c++)for(let d=1;d<a[c].length;d++){let m=this.rowBuilder_(a[c][0],a[c][d]);l.push(m),typeof m.render=="undefined"&&(m.render=p=>{p.textContent=m.toString()}),typeof m.select=="undefined"&&(m.select=p=>{p.value=m.toString()})}this.rowFilter_&&(l=this.rowFilter_(l)),s(r,l)}catch(l){s(r,[])}};super.requestMatchingRows(e,n,o)}}});var Me,Ms=u(()=>{"use strict";rL();aL();dL();pL();Me=class extends ed{constructor(t,e,n,s,o){let r={renderRow:(d,m,p)=>d.data.render(p,m)},a=new id(o,r),l=new od(t,!s),c=new sd(void 0,void 0,!!n,300);o&&d2Env.isApp&&(c.processBlur=()=>{}),super(l,a,c),c.attachAutoComplete(this),c.attachInputs(e)}getXhr(){return this.matcher_.getXhr()}setRowFilter(t){this.matcher_.setRowFilter(t)}setRowBuilder(t){this.matcher_.setRowBuilder(t)}setUseStandardHighlighting(t){this.renderer_.setUseStandardHighlighting(t)}getInputHandler(){return this.selectionHandler_}setMethodn(t){this.matcher_.setMethod(t)}setContent(t){this.matcher_.setContent(t)}setHeaders(t){this.matcher_.setHeaders(t)}}});var Oo,rd=u(()=>{"use strict";D();Oo=(i,t)=>ut(C({},t),{render(e){let n=S("span",t.kind==="country"?"ac-imp":void 0,t.caption);if(e.appendChild(n),t.extra){let s=S("span","ac-desc",t.extra);e.appendChild(s)}},select(e){e.value=t.caption}})});var zn,Ea=u(()=>{"use strict";zn=(i,t)=>{let e,n=0,s,o=a=>{i(...a)},r=()=>{e=void 0;let a=t-(Date.now()-n);a>0?e=setTimeout(r,a):o(s)};return(...a)=>{n=Date.now(),s=a,e||(e=setTimeout(r,t))}}});function ke(i,t,e){let n=document.createElement(t||"div");return i&&(n.className=i),e&&e.appendChild(n),n}function qt(i,t){return i.x=t.x,i.y=t.y,t.id!==void 0&&(i.id=t.id),i}function rx(i){i.x=Math.round(i.x),i.y=Math.round(i.y)}function tu(i,t){let e=Math.abs(i.x-t.x),n=Math.abs(i.y-t.y);return Math.sqrt(e*e+n*n)}function Ia(i,t){return i.x===t.x&&i.y===t.y}function Oa(i,t,e){return Math.min(Math.max(i,t),e)}function Ra(i,t,e){let n="translate3d("+i+"px,"+(t||0)+"px,0)";return e!==void 0&&(n+=" scale3d("+e+","+e+",1)"),n}function Rs(i,t,e,n){i.style.transform=Ra(t,e,n)}function ax(i,t,e,n){i.style.transition=t?t+" "+e+"ms "+(n||ZP):"none"}function eu(i,t,e){i.style.width=typeof t=="number"?t+"px":t,i.style.height=typeof e=="number"?e+"px":e}function YP(i){ax(i)}function KP(i){return"decode"in i?i.decode():i.complete?Promise.resolve(i):new Promise((t,e)=>{i.onload=()=>t(i),i.onerror=e})}function XP(i){if(i.which===2||i.ctrlKey||i.metaKey||i.altKey||i.shiftKey)return!0}function QP(i,t,e=document){let n=[];if(i instanceof Element)n=[i];else if(i instanceof NodeList||Array.isArray(i))n=Array.from(i);else{let s=typeof i=="string"?i:t;s&&(n=Array.from(e.querySelectorAll(s)))}return n}function QL(){return!!(navigator.vendor&&navigator.vendor.match(/apple/i))}function cx(i,t){if(i.getViewportSizeFn){let e=i.getViewportSizeFn(i,t);if(e)return e}return{x:document.documentElement.clientWidth,y:window.innerHeight}}function Ma(i,t,e,n,s){let o;if(t.paddingFn)o=t.paddingFn(e,n,s)[i];else if(t.padding)o=t.padding[i];else{let r="padding"+i[0].toUpperCase()+i.slice(1);t[r]&&(o=t[r])}return o||0}function dx(i,t,e,n){return{x:t.x-Ma("left",i,t,e,n)-Ma("right",i,t,e,n),y:t.y-Ma("top",i,t,e,n)-Ma("bottom",i,t,e,n)}}function i$(i,t){return i*t/(1-t)}function nx(i,t,e){return i.x=(t.x+e.x)/2,i.y=(t.y+e.y)/2,i}function sx(i){return!!i.target.closest(".pswp__container")}function p$(i){if(typeof i=="string")return i;if(!i||!i.isCustomSVG)return"";let t=i,e='<svg aria-hidden="true" class="pswp__icn" viewBox="0 0 %d %d" width="%d" height="%d">';return e=e.split("%d").join(t.size||32),t.outlineID&&(e+='<use class="pswp__icn-shadow" xlink:href="#'+t.outlineID+'"/>'),e+=t.inner,e+="</svg>",e}function mx(i,t,e){i.classList.add("pswp__button--arrow"),t.on("change",()=>{t.options.loop||(e?i.disabled=!(t.currIndex<t.getNumItems()-1):i.disabled=!(t.currIndex>0))})}function ox(i,t){i.classList[t?"add":"remove"]("pswp--zoomed-in")}function b$(i){let t=i.getBoundingClientRect();return{x:t.left,y:t.top,w:t.width}}function _$(i,t,e){let n=i.getBoundingClientRect(),s=n.width/t,o=n.height/e,r=s>o?s:o,a=(n.width-t*r)/2,l=(n.height-e*r)/2,c={x:n.left+a,y:n.top+l,w:t*r};return c.innerRect={w:n.width,h:n.height,x:a,y:l},c}function T$(i,t,e){let n=e.dispatch("thumbBounds",{index:i,itemData:t,instance:e});if(n.thumbBounds)return n.thumbBounds;let{element:s}=t,o,r;if(s&&e.options.thumbSelector!==!1){let a=e.options.thumbSelector||"img";r=s.matches(a)?s:s.querySelector(a)}return r=e.applyFilters("thumbEl",r,t,i),r&&(t.thumbCropped?o=_$(r,t.width||t.w,t.height||t.h):o=b$(r)),e.applyFilters("thumbBounds",o,t,i)}function px(i,t,e){let n=t.createContentFromData(i,e);if(!n||!n.lazyLoad)return;let{options:s}=t,o=t.viewportSize||cx(s,t),r=dx(s,o,i,e),a=new dd(s,i,-1);return a.update(n.width,n.height,r),n.lazyLoad(),n.setDisplayedSize(Math.ceil(n.width*a.initial),Math.ceil(n.height*a.initial)),n}function L$(i,t){let e=t.getItemData(i);if(!t.dispatch("lazyLoadSlide",{index:i,itemData:e}).defaultPrevented)return px(e,t,i)}var ZP,di,lx,iu,nu,tx,dd,su,t$,e$,ex,ix,ou,n$,s$,ru,au,o$,r$,a$,lu,l$,cu,du,c$,mu,d$,m$,pu,hu,uu,fu,gu,h$,u$,f$,g$,v$,E$,vu,Eu,bu,_u,Tu,y$,yu,Lu,Sa,xu,x$,md,hx=u(()=>{ZP="cubic-bezier(.4,0,.22,1)";di={IDLE:"idle",LOADING:"loading",LOADED:"loaded",ERROR:"error"};lx=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>{lx=!0}}))}catch(i){}iu=class{constructor(){this._pool=[]}add(t,e,n,s){this._toggleListener(t,e,n,s)}remove(t,e,n,s){this._toggleListener(t,e,n,s,!0)}removeAll(){this._pool.forEach(t=>{this._toggleListener(t.target,t.type,t.listener,t.passive,!0,!0)}),this._pool=[]}_toggleListener(t,e,n,s,o,r){if(!t)return;let a=o?"removeEventListener":"addEventListener";e.split(" ").forEach(c=>{if(c){r||(o?this._pool=this._pool.filter(m=>m.type!==c||m.listener!==n||m.target!==t):this._pool.push({target:t,type:c,listener:n,passive:s}));let d=lx?{passive:s||!1}:!1;t[a](c,n,d)}})}};nu=class{constructor(t){this.slide=t,this.currZoomLevel=1,this.center={},this.max={},this.min={},this.reset()}update(t){this.currZoomLevel=t,this.slide.width?(this._updateAxis("x"),this._updateAxis("y"),this.slide.pswp.dispatch("calcBounds",{slide:this.slide})):this.reset()}_updateAxis(t){let{pswp:e}=this.slide,n=this.slide[t==="x"?"width":"height"]*this.currZoomLevel,o=Ma(t==="x"?"left":"top",e.options,e.viewportSize,this.slide.data,this.slide.index),r=this.slide.panAreaSize[t];this.center[t]=Math.round((r-n)/2)+o,this.max[t]=n>r?Math.round(r-n)+o:this.center[t],this.min[t]=n>r?o:this.center[t]}reset(){this.center.x=0,this.center.y=0,this.max.x=0,this.max.y=0,this.min.x=0,this.min.y=0}correctPan(t,e){return Oa(e,this.max[t],this.min[t])}},tx=4e3,dd=class{constructor(t,e,n,s){this.pswp=s,this.options=t,this.itemData=e,this.index=n}update(t,e,n){this.elementSize={x:t,y:e},this.panAreaSize=n;let s=this.panAreaSize.x/this.elementSize.x,o=this.panAreaSize.y/this.elementSize.y;this.fit=Math.min(1,s<o?s:o),this.fill=Math.min(1,s>o?s:o),this.vFill=Math.min(1,o),this.initial=this._getInitial(),this.secondary=this._getSecondary(),this.max=Math.max(this.initial,this.secondary,this._getMax()),this.min=Math.min(this.fit,this.initial,this.secondary),this.pswp&&this.pswp.dispatch("zoomLevelsUpdate",{zoomLevels:this,slideData:this.itemData})}_parseZoomLevelOption(t){let e=t+"ZoomLevel",n=this.options[e];if(!!n)return typeof n=="function"?n(this):n==="fill"?this.fill:n==="fit"?this.fit:Number(n)}_getSecondary(){let t=this._parseZoomLevelOption("secondary");return t||(t=Math.min(1,this.fit*3),t*this.elementSize.x>tx&&(t=tx/this.elementSize.x),t)}_getInitial(){return this._parseZoomLevelOption("initial")||this.fit}_getMax(){let t=this._parseZoomLevelOption("max");return t||Math.max(1,this.fit*4)}},su=class{constructor(t,e,n){this.data=t,this.index=e,this.pswp=n,this.isActive=e===n.currIndex,this.currentResolution=0,this.panAreaSize={},this.isFirstSlide=this.isActive&&!n.opener.isOpen,this.zoomLevels=new dd(n.options,t,e,n),this.pswp.dispatch("gettingData",{slide:this,data:this.data,index:e}),this.pan={x:0,y:0},this.content=this.pswp.contentLoader.getContentBySlide(this),this.container=ke("pswp__zoom-wrap"),this.currZoomLevel=1,this.width=this.content.width,this.height=this.content.height,this.bounds=new nu(this),this.prevDisplayedWidth=-1,this.prevDisplayedHeight=-1,this.pswp.dispatch("slideInit",{slide:this})}setIsActive(t){t&&!this.isActive?this.activate():!t&&this.isActive&&this.deactivate()}append(t){this.holderElement=t,this.container.style.transformOrigin="0 0",this.data&&(this.calculateSize(),this.load(),this.updateContentSize(),this.appendHeavy(),this.holderElement.appendChild(this.container),this.zoomAndPanToInitial(),this.pswp.dispatch("firstZoomPan",{slide:this}),this.applyCurrentZoomPan(),this.pswp.dispatch("afterSetContent",{slide:this}),this.isActive&&this.activate())}load(){this.content.load(),this.pswp.dispatch("slideLoad",{slide:this})}appendHeavy(){let{pswp:t}=this,e=!0;this.heavyAppended||!t.opener.isOpen||t.mainScroll.isShifted()||!this.isActive&&!e||this.pswp.dispatch("appendHeavy",{slide:this}).defaultPrevented||(this.heavyAppended=!0,this.content.append(),this.pswp.dispatch("appendHeavyContent",{slide:this}))}activate(){this.isActive=!0,this.appendHeavy(),this.content.activate(),this.pswp.dispatch("slideActivate",{slide:this})}deactivate(){this.isActive=!1,this.content.deactivate(),this.currZoomLevel!==this.zoomLevels.initial&&this.calculateSize(),this.currentResolution=0,this.zoomAndPanToInitial(),this.applyCurrentZoomPan(),this.updateContentSize(),this.pswp.dispatch("slideDeactivate",{slide:this})}destroy(){this.content.hasSlide=!1,this.content.remove(),this.container.remove(),this.pswp.dispatch("slideDestroy",{slide:this})}resize(){this.currZoomLevel===this.zoomLevels.initial||!this.isActive?(this.calculateSize(),this.currentResolution=0,this.zoomAndPanToInitial(),this.applyCurrentZoomPan(),this.updateContentSize()):(this.calculateSize(),this.bounds.update(this.currZoomLevel),this.panTo(this.pan.x,this.pan.y))}updateContentSize(t){let e=this.currentResolution||this.zoomLevels.initial;if(!e)return;let n=Math.round(this.width*e)||this.pswp.viewportSize.x,s=Math.round(this.height*e)||this.pswp.viewportSize.y;!this.sizeChanged(n,s)&&!t||this.content.setDisplayedSize(n,s)}sizeChanged(t,e){return t!==this.prevDisplayedWidth||e!==this.prevDisplayedHeight?(this.prevDisplayedWidth=t,this.prevDisplayedHeight=e,!0):!1}getPlaceholderElement(){if(this.content.placeholder)return this.content.placeholder.element}zoomTo(t,e,n,s){let{pswp:o}=this;if(!this.isZoomable()||o.mainScroll.isShifted())return;o.dispatch("beforeZoomTo",{destZoomLevel:t,centerPoint:e,transitionDuration:n}),o.animations.stopAllPan();let r=this.currZoomLevel;s||(t=Oa(t,this.zoomLevels.min,this.zoomLevels.max)),this.setZoomLevel(t),this.pan.x=this.calculateZoomToPanOffset("x",e,r),this.pan.y=this.calculateZoomToPanOffset("y",e,r),rx(this.pan);let a=()=>{this._setResolution(t),this.applyCurrentZoomPan()};n?o.animations.startTransition({isPan:!0,name:"zoomTo",target:this.container,transform:this.getCurrentTransform(),onComplete:a,duration:n,easing:o.options.easing}):a()}toggleZoom(t){this.zoomTo(this.currZoomLevel===this.zoomLevels.initial?this.zoomLevels.secondary:this.zoomLevels.initial,t,this.pswp.options.zoomAnimationDuration)}setZoomLevel(t){this.currZoomLevel=t,this.bounds.update(this.currZoomLevel)}calculateZoomToPanOffset(t,e,n){if(this.bounds.max[t]-this.bounds.min[t]===0)return this.bounds.center[t];e||(e=this.pswp.getViewportCenterPoint());let o=this.currZoomLevel/n;return this.bounds.correctPan(t,(this.pan[t]-e[t])*o+e[t])}panTo(t,e){this.pan.x=this.bounds.correctPan("x",t),this.pan.y=this.bounds.correctPan("y",e),this.applyCurrentZoomPan()}isPannable(){return this.width&&this.currZoomLevel>this.zoomLevels.fit}isZoomable(){return this.width&&this.content.isZoomable()}applyCurrentZoomPan(){this._applyZoomTransform(this.pan.x,this.pan.y,this.currZoomLevel),this===this.pswp.currSlide&&this.pswp.dispatch("zoomPanUpdate",{slide:this})}zoomAndPanToInitial(){this.currZoomLevel=this.zoomLevels.initial,this.bounds.update(this.currZoomLevel),qt(this.pan,this.bounds.center),this.pswp.dispatch("initialZoomPan",{slide:this})}_applyZoomTransform(t,e,n){n/=this.currentResolution||this.zoomLevels.initial,Rs(this.container,t,e,n)}calculateSize(){let{pswp:t}=this;qt(this.panAreaSize,dx(t.options,t.viewportSize,this.data,this.index)),this.zoomLevels.update(this.width,this.height,this.panAreaSize),t.dispatch("calcSlideSize",{slide:this})}getCurrentTransform(){let t=this.currZoomLevel/(this.currentResolution||this.zoomLevels.initial);return Ra(this.pan.x,this.pan.y,t)}_setResolution(t){t!==this.currentResolution&&(this.currentResolution=t,this.updateContentSize(),this.pswp.dispatch("resolutionChanged"))}},t$=.35,e$=.6,ex=.4,ix=.5;ou=class{constructor(t){this.gestures=t,this.pswp=t.pswp,this.startPan={}}start(){qt(this.startPan,this.pswp.currSlide.pan),this.pswp.animations.stopAll()}change(){let{p1:t,prevP1:e,dragAxis:n,pswp:s}=this.gestures,{currSlide:o}=s;if(n==="y"&&s.options.closeOnVerticalDrag&&o.currZoomLevel<=o.zoomLevels.fit&&!this.gestures.isMultitouch){let r=o.pan.y+(t.y-e.y);if(!s.dispatch("verticalDrag",{panY:r}).defaultPrevented){this._setPanWithFriction("y",r,e$);let a=1-Math.abs(this._getVerticalDragRatio(o.pan.y));s.applyBgOpacity(a),o.applyCurrentZoomPan()}}else this._panOrMoveMainScroll("x")||(this._panOrMoveMainScroll("y"),rx(o.pan),o.applyCurrentZoomPan())}end(){let{pswp:t,velocity:e}=this.gestures,{mainScroll:n}=t,s=0;if(t.animations.stopAll(),n.isShifted()){let r=(n.x-n.getCurrSlideX())/t.viewportSize.x;e.x<-ix&&r<0||e.x<.1&&r<-.5?(s=1,e.x=Math.min(e.x,0)):(e.x>ix&&r>0||e.x>-.1&&r>.5)&&(s=-1,e.x=Math.max(e.x,0)),n.moveIndexBy(s,!0,e.x)}t.currSlide.currZoomLevel>t.currSlide.zoomLevels.max||this.gestures.isMultitouch?this.gestures.zoomLevels.correctZoomPan(!0):(this._finishPanGestureForAxis("x"),this._finishPanGestureForAxis("y"))}_finishPanGestureForAxis(t){let{pswp:e}=this,{currSlide:n}=e,{velocity:s}=this.gestures,{pan:o,bounds:r}=n,a=o[t],l=e.bgOpacity<1&&t==="y",c=.995,d=a+i$(s[t],c);if(l){let g=this._getVerticalDragRatio(a),E=this._getVerticalDragRatio(d);if(g<0&&E<-ex||g>0&&E>ex){e.close();return}}let m=r.correctPan(t,d);if(a===m)return;let p=m===d?1:.82,h=e.bgOpacity,f=m-a;e.animations.startSpring({name:"panGesture"+t,isPan:!0,start:a,end:m,velocity:s[t],dampingRatio:p,onUpdate:g=>{if(l&&e.bgOpacity<1){let E=1-(m-g)/f;e.applyBgOpacity(Oa(h+(1-h)*E,0,1))}o[t]=Math.floor(g),n.applyCurrentZoomPan()}})}_panOrMoveMainScroll(t){let{p1:e,pswp:n,dragAxis:s,prevP1:o,isMultitouch:r}=this.gestures,{currSlide:a,mainScroll:l}=n,c=e[t]-o[t],d=l.x+c;if(!c)return;if(t==="x"&&!a.isPannable()&&!r)return l.moveTo(d,!0),!0;let{bounds:m}=a,p=a.pan[t]+c;if(n.options.allowPanToNext&&s==="x"&&t==="x"&&!r){let h=l.getCurrSlideX(),f=l.x-h,g=c>0,E=!g;if(p>m.min[t]&&g){if(m.min[t]<=this.startPan[t])return l.moveTo(d,!0),!0;this._setPanWithFriction(t,p)}else if(p<m.max[t]&&E){if(this.startPan[t]<=m.max[t])return l.moveTo(d,!0),!0;this._setPanWithFriction(t,p)}else if(f!==0){if(f>0)return l.moveTo(Math.max(d,h),!0),!0;if(f<0)return l.moveTo(Math.min(d,h),!0),!0}else this._setPanWithFriction(t,p)}else t==="y"?!l.isShifted()&&m.min.y!==m.max.y&&this._setPanWithFriction(t,p):this._setPanWithFriction(t,p)}_getVerticalDragRatio(t){return(t-this.pswp.currSlide.bounds.center.y)/(this.pswp.viewportSize.y/3)}_setPanWithFriction(t,e,n){let{pan:s,bounds:o}=this.pswp.currSlide;if(o.correctPan(t,e)!==e||n){let a=Math.round(e-s[t]);s[t]+=a*(n||t$)}else s[t]=e}},n$=.05,s$=.15;ru=class{constructor(t){this.gestures=t,this.pswp=this.gestures.pswp,this._startPan={},this._startZoomPoint={},this._zoomPoint={}}start(){this._startZoomLevel=this.pswp.currSlide.currZoomLevel,qt(this._startPan,this.pswp.currSlide.pan),this.pswp.animations.stopAllPan(),this._wasOverFitZoomLevel=!1}change(){let{p1:t,startP1:e,p2:n,startP2:s,pswp:o}=this.gestures,{currSlide:r}=o,a=r.zoomLevels.min,l=r.zoomLevels.max;if(!r.isZoomable()||o.mainScroll.isShifted())return;nx(this._startZoomPoint,e,s),nx(this._zoomPoint,t,n);let c=1/tu(e,s)*tu(t,n)*this._startZoomLevel;if(c>r.zoomLevels.initial+r.zoomLevels.initial/15&&(this._wasOverFitZoomLevel=!0),c<a)if(o.options.pinchToClose&&!this._wasOverFitZoomLevel&&this._startZoomLevel<=r.zoomLevels.initial){let d=1-(a-c)/(a/1.2);o.dispatch("pinchClose",{bgOpacity:d}).defaultPrevented||o.applyBgOpacity(d)}else c=a-(a-c)*s$;else c>l&&(c=l+(c-l)*n$);r.pan.x=this._calculatePanForZoomLevel("x",c),r.pan.y=this._calculatePanForZoomLevel("y",c),r.setZoomLevel(c),r.applyCurrentZoomPan()}end(){let{pswp:t}=this,{currSlide:e}=t;e.currZoomLevel<e.zoomLevels.initial&&!this._wasOverFitZoomLevel&&t.options.pinchToClose?t.close():this.correctZoomPan()}_calculatePanForZoomLevel(t,e){let n=e/this._startZoomLevel;return this._zoomPoint[t]-(this._startZoomPoint[t]-this._startPan[t])*n}correctZoomPan(t){let{pswp:e}=this,{currSlide:n}=e;if(!n.isZoomable())return;this._zoomPoint.x===void 0&&(t=!0);let s=n.currZoomLevel,o,r=!0;s<n.zoomLevels.initial?o=n.zoomLevels.initial:s>n.zoomLevels.max?o=n.zoomLevels.max:(r=!1,o=s);let a=e.bgOpacity,l=e.bgOpacity<1,c=qt({},n.pan),d=qt({},c);t&&(this._zoomPoint.x=0,this._zoomPoint.y=0,this._startZoomPoint.x=0,this._startZoomPoint.y=0,this._startZoomLevel=s,qt(this._startPan,c)),r&&(d={x:this._calculatePanForZoomLevel("x",o),y:this._calculatePanForZoomLevel("y",o)}),n.setZoomLevel(o),d={x:n.bounds.correctPan("x",d.x),y:n.bounds.correctPan("y",d.y)},n.setZoomLevel(s);let m=!0;if(Ia(d,c)&&(m=!1),!m&&!r&&!l){n._setResolution(o),n.applyCurrentZoomPan();return}e.animations.stopAllPan(),e.animations.startSpring({isPan:!0,start:0,end:1e3,velocity:0,dampingRatio:1,naturalFrequency:40,onUpdate:p=>{if(p/=1e3,m||r){if(m&&(n.pan.x=c.x+(d.x-c.x)*p,n.pan.y=c.y+(d.y-c.y)*p),r){let h=s+(o-s)*p;n.setZoomLevel(h)}n.applyCurrentZoomPan()}l&&e.bgOpacity<1&&e.applyBgOpacity(Oa(a+(1-a)*p,0,1))},onComplete:()=>{n._setResolution(o),n.applyCurrentZoomPan()}})}};au=class{constructor(t){this.gestures=t}click(t,e){let n=e.target.classList,s=n.contains("pswp__img"),o=n.contains("pswp__item")||n.contains("pswp__zoom-wrap");s?this._doClickOrTapAction("imageClick",t,e):o&&this._doClickOrTapAction("bgClick",t,e)}tap(t,e){sx(e)&&this._doClickOrTapAction("tap",t,e)}doubleTap(t,e){sx(e)&&this._doClickOrTapAction("doubleTap",t,e)}_doClickOrTapAction(t,e,n){let{pswp:s}=this.gestures,{currSlide:o}=s,r=t+"Action",a=s.options[r];if(!s.dispatch(r,{point:e,originalEvent:n}).defaultPrevented){if(typeof a=="function"){a.call(s,e,n);return}switch(a){case"close":case"next":s[a]();break;case"zoom":o.toggleZoom(e);break;case"zoom-or-close":o.isZoomable()&&o.zoomLevels.secondary!==o.zoomLevels.initial?o.toggleZoom(e):s.options.clickToCloseNonZoomable&&s.close();break;case"toggle-controls":this.gestures.pswp.element.classList.toggle("pswp--ui-visible");break}}}},o$=10,r$=300,a$=25,lu=class{constructor(t){this.pswp=t,this.dragAxis=void 0,this.p1={},this.p2={},this.prevP1={},this.prevP2={},this.startP1={},this.startP2={},this.velocity={},this._lastStartP1={},this._intervalP1={},this._numActivePoints=0,this._ongoingPointers=[],this._touchEventEnabled="ontouchstart"in window,this._pointerEventEnabled=!!window.PointerEvent,this.supportsTouch=this._touchEventEnabled||this._pointerEventEnabled&&navigator.maxTouchPoints>1,this.supportsTouch||(t.options.allowPanToNext=!1),this.drag=new ou(this),this.zoomLevels=new ru(this),this.tapHandler=new au(this),t.on("bindEvents",()=>{t.events.add(t.scrollWrap,"click",e=>this._onClick(e)),this._pointerEventEnabled?this._bindEvents("pointer","down","up","cancel"):this._touchEventEnabled?(this._bindEvents("touch","start","end","cancel"),t.scrollWrap.ontouchmove=()=>{},t.scrollWrap.ontouchend=()=>{}):this._bindEvents("mouse","down","up")})}_bindEvents(t,e,n,s){let{pswp:o}=this,{events:r}=o,a=s?t+s:"";r.add(o.scrollWrap,t+e,this.onPointerDown.bind(this)),r.add(window,t+"move",this.onPointerMove.bind(this)),r.add(window,t+n,this.onPointerUp.bind(this)),a&&r.add(o.scrollWrap,a,this.onPointerUp.bind(this))}onPointerDown(t){let e;if((t.type==="mousedown"||t.pointerType==="mouse")&&(e=!0),e&&t.button>0)return;let{pswp:n}=this;if(!n.opener.isOpen){t.preventDefault();return}n.dispatch("pointerDown",{originalEvent:t}).defaultPrevented||(e&&(n.mouseDetected(),this._preventPointerEventBehaviour(t)),n.animations.stopAll(),this._updatePoints(t,"down"),this.pointerDown=!0,this._numActivePoints===1&&(this.dragAxis=null,qt(this.startP1,this.p1)),this._numActivePoints>1?(this._clearTapTimer(),this.isMultitouch=!0):this.isMultitouch=!1)}onPointerMove(t){t.preventDefault(),this._numActivePoints&&(this._updatePoints(t,"move"),!this.pswp.dispatch("pointerMove",{originalEvent:t}).defaultPrevented&&(this._numActivePoints===1&&!this.isDragging?(this.dragAxis||this._calculateDragDirection(),this.dragAxis&&!this.isDragging&&(this.isZooming&&(this.isZooming=!1,this.zoomLevels.end()),this.isDragging=!0,this._clearTapTimer(),this._updateStartPoints(),this._intervalTime=Date.now(),this._velocityCalculated=!1,qt(this._intervalP1,this.p1),this.velocity.x=0,this.velocity.y=0,this.drag.start(),this._rafStopLoop(),this._rafRenderLoop())):this._numActivePoints>1&&!this.isZooming&&(this._finishDrag(),this.isZooming=!0,this._updateStartPoints(),this.zoomLevels.start(),this._rafStopLoop(),this._rafRenderLoop())))}_finishDrag(){this.isDragging&&(this.isDragging=!1,this._velocityCalculated||this._updateVelocity(!0),this.drag.end(),this.dragAxis=null)}onPointerUp(t){!this._numActivePoints||(this._updatePoints(t,"up"),!this.pswp.dispatch("pointerUp",{originalEvent:t}).defaultPrevented&&(this._numActivePoints===0&&(this.pointerDown=!1,this._rafStopLoop(),this.isDragging?this._finishDrag():!this.isZooming&&!this.isMultitouch&&this._finishTap(t)),this._numActivePoints<2&&this.isZooming&&(this.isZooming=!1,this.zoomLevels.end(),this._numActivePoints===1&&(this.dragAxis=null,this._updateStartPoints()))))}_rafRenderLoop(){(this.isDragging||this.isZooming)&&(this._updateVelocity(),this.isDragging?Ia(this.p1,this.prevP1)||this.drag.change():(!Ia(this.p1,this.prevP1)||!Ia(this.p2,this.prevP2))&&this.zoomLevels.change(),this._updatePrevPoints(),this.raf=requestAnimationFrame(this._rafRenderLoop.bind(this)))}_updateVelocity(t){let e=Date.now(),n=e-this._intervalTime;n<50&&!t||(this.velocity.x=this._getVelocity("x",n),this.velocity.y=this._getVelocity("y",n),this._intervalTime=e,qt(this._intervalP1,this.p1),this._velocityCalculated=!0)}_finishTap(t){let{mainScroll:e}=this.pswp;if(e.isShifted()){e.moveIndexBy(0,!0);return}if(t.type.indexOf("cancel")>0)return;if(t.type==="mouseup"||t.pointerType==="mouse"){this.tapHandler.click(this.startP1,t);return}let n=this.pswp.options.doubleTapAction?r$:0;this._tapTimer?(this._clearTapTimer(),tu(this._lastStartP1,this.startP1)<a$&&this.tapHandler.doubleTap(this.startP1,t)):(qt(this._lastStartP1,this.startP1),this._tapTimer=setTimeout(()=>{this.tapHandler.tap(this.startP1,t),this._clearTapTimer()},n))}_clearTapTimer(){this._tapTimer&&(clearTimeout(this._tapTimer),this._tapTimer=null)}_getVelocity(t,e){let n=this.p1[t]-this._intervalP1[t];return Math.abs(n)>1&&e>5?n/e:0}_rafStopLoop(){this.raf&&(cancelAnimationFrame(this.raf),this.raf=null)}_preventPointerEventBehaviour(t){return t.preventDefault(),!0}_updatePoints(t,e){if(this._pointerEventEnabled){let n=t,s=this._ongoingPointers.findIndex(o=>o.id===n.pointerId);e==="up"&&s>-1?this._ongoingPointers.splice(s,1):e==="down"&&s===-1?this._ongoingPointers.push(this._convertEventPosToPoint(n,{})):s>-1&&this._convertEventPosToPoint(n,this._ongoingPointers[s]),this._numActivePoints=this._ongoingPointers.length,this._numActivePoints>0&&qt(this.p1,this._ongoingPointers[0]),this._numActivePoints>1&&qt(this.p2,this._ongoingPointers[1])}else{let n=t;this._numActivePoints=0,n.type.indexOf("touch")>-1?n.touches&&n.touches.length>0&&(this._convertEventPosToPoint(n.touches[0],this.p1),this._numActivePoints++,n.touches.length>1&&(this._convertEventPosToPoint(n.touches[1],this.p2),this._numActivePoints++)):(this._convertEventPosToPoint(t,this.p1),e==="up"?this._numActivePoints=0:this._numActivePoints++)}}_updatePrevPoints(){qt(this.prevP1,this.p1),qt(this.prevP2,this.p2)}_updateStartPoints(){qt(this.startP1,this.p1),qt(this.startP2,this.p2),this._updatePrevPoints()}_calculateDragDirection(){if(this.pswp.mainScroll.isShifted())this.dragAxis="x";else{let t=Math.abs(this.p1.x-this.startP1.x)-Math.abs(this.p1.y-this.startP1.y);if(t!==0){let e=t>0?"x":"y";Math.abs(this.p1[e]-this.startP1[e])>=o$&&(this.dragAxis=e)}}}_convertEventPosToPoint(t,e){return e.x=t.pageX-this.pswp.offset.x,e.y=t.pageY-this.pswp.offset.y,"pointerId"in t?e.id=t.pointerId:t.identifier!==void 0&&(e.id=t.identifier),e}_onClick(t){this.pswp.mainScroll.isShifted()&&(t.preventDefault(),t.stopPropagation())}},l$=.35,cu=class{constructor(t){this.pswp=t,this.x=0,this.slideWidth=void 0,this.itemHolders=void 0,this.resetPosition()}resize(t){let{pswp:e}=this,n=Math.round(e.viewportSize.x+e.viewportSize.x*e.options.spacing),s=n!==this.slideWidth;s&&(this.slideWidth=n,this.moveTo(this.getCurrSlideX())),this.itemHolders.forEach((o,r)=>{s&&Rs(o.el,(r+this._containerShiftIndex)*this.slideWidth),t&&o.slide&&o.slide.resize()})}resetPosition(){this._currPositionIndex=0,this._prevPositionIndex=0,this.slideWidth=0,this._containerShiftIndex=-1}appendHolders(){this.itemHolders=[];for(let t=0;t<3;t++){let e=ke("pswp__item",!1,this.pswp.container);e.style.display=t===1?"block":"none",this.itemHolders.push({el:e})}}canBeSwiped(){return this.pswp.getNumItems()>1}moveIndexBy(t,e,n){let{pswp:s}=this,o=s.potentialIndex+t,r=s.getNumItems();if(s.canLoop()){o=s.getLoopedIndex(o);let l=(t+r)%r;l<=r/2?t=l:t=l-r}else o<0?o=0:o>=r&&(o=r-1),t=o-s.potentialIndex;s.potentialIndex=o,this._currPositionIndex-=t,s.animations.stopMainScroll();let a=this.getCurrSlideX();if(!e)this.moveTo(a),this.updateCurrItem();else{s.animations.startSpring({isMainScroll:!0,start:this.x,end:a,velocity:n||0,naturalFrequency:30,dampingRatio:1,onUpdate:c=>{this.moveTo(c)},onComplete:()=>{this.updateCurrItem(),s.appendHeavy()}});let l=s.potentialIndex-s.currIndex;if(s.canLoop()){let c=(l+r)%r;c<=r/2?l=c:l=c-r}Math.abs(l)>1&&this.updateCurrItem()}if(t)return!0}getCurrSlideX(){return this.slideWidth*this._currPositionIndex}isShifted(){return this.x!==this.getCurrSlideX()}updateCurrItem(){let{pswp:t}=this,e=this._prevPositionIndex-this._currPositionIndex;if(!e)return;this._prevPositionIndex=this._currPositionIndex,t.currIndex=t.potentialIndex;let n=Math.abs(e),s;n>=3&&(this._containerShiftIndex+=e+(e>0?-3:3),n=3);for(let o=0;o<n;o++)e>0?(s=this.itemHolders.shift(),this.itemHolders[2]=s,this._containerShiftIndex++,Rs(s.el,(this._containerShiftIndex+2)*this.slideWidth),t.setContent(s,t.currIndex-n+o+2)):(s=this.itemHolders.pop(),this.itemHolders.unshift(s),this._containerShiftIndex--,Rs(s.el,this._containerShiftIndex*this.slideWidth),t.setContent(s,t.currIndex+n-o-2));Math.abs(this._containerShiftIndex)>50&&!this.isShifted()&&(this.resetPosition(),this.resize()),t.animations.stopAllPan(),this.itemHolders.forEach((o,r)=>{o.slide&&o.slide.setIsActive(r===1)}),t.currSlide=this.itemHolders[1].slide,t.contentLoader.updateLazy(e),t.currSlide.applyCurrentZoomPan(),t.dispatch("change")}moveTo(t,e){let n,s;!this.pswp.canLoop()&&e&&(n=(this.slideWidth*this._currPositionIndex-t)/this.slideWidth,n+=this.pswp.currIndex,s=Math.round(t-this.x),(n<0&&s>0||n>=this.pswp.getNumItems()-1&&s<0)&&(t=this.x+s*l$)),this.x=t,Rs(this.pswp.container,t),this.pswp.dispatch("moveMainScroll",{x:t,dragging:e})}},du=class{constructor(t){this.pswp=t,t.on("bindEvents",()=>{t.options.initialPointerPos||this._focusRoot(),t.events.add(document,"focusin",this._onFocusIn.bind(this)),t.events.add(document,"keydown",this._onKeyDown.bind(this))});let e=document.activeElement;t.on("destroy",()=>{t.options.returnFocus&&e&&this._wasFocused&&e.focus()})}_focusRoot(){this._wasFocused||(this.pswp.element.focus(),this._wasFocused=!0)}_onKeyDown(t){let{pswp:e}=this;if(e.dispatch("keydown",{originalEvent:t}).defaultPrevented||XP(t))return;let n,s,o;switch(t.keyCode){case 27:e.options.escKey&&(n="close");break;case 90:n="toggleZoom";break;case 37:s="x";break;case 38:s="y";break;case 39:s="x",o=!0;break;case 40:o=!0,s="y";break;case 9:this._focusRoot();break}if(s){t.preventDefault();let{currSlide:r}=e;e.options.arrowKeys&&s==="x"&&e.getNumItems()>1?n=o?"next":"prev":r&&r.currZoomLevel>r.zoomLevels.fit&&(r.pan[s]+=o?-80:80,r.panTo(r.pan.x,r.pan.y))}n&&(t.preventDefault(),e[n]())}_onFocusIn(t){let{template:e}=this.pswp;document!==t.target&&e!==t.target&&!e.contains(t.target)&&e.focus()}},c$="cubic-bezier(.4,0,.22,1)",mu=class{constructor(t){this.props=t;let{target:e,onComplete:n,transform:s,onFinish:o}=t,{duration:r,easing:a}=t;this.onFinish=o;let l=s?"transform":"opacity",c=t[l];this._target=e,this._onComplete=n,r=r||333,a=a||c$,this._onTransitionEnd=this._onTransitionEnd.bind(this),this._helperTimeout=setTimeout(()=>{ax(e,l,r,a),this._helperTimeout=setTimeout(()=>{e.addEventListener("transitionend",this._onTransitionEnd,!1),e.addEventListener("transitioncancel",this._onTransitionEnd,!1),this._helperTimeout=setTimeout(()=>{this._finalizeAnimation()},r+500),e.style[l]=c},30)},0)}_onTransitionEnd(t){t.target===this._target&&this._finalizeAnimation()}_finalizeAnimation(){this._finished||(this._finished=!0,this.onFinish(),this._onComplete&&this._onComplete())}destroy(){this._helperTimeout&&clearTimeout(this._helperTimeout),YP(this._target),this._target.removeEventListener("transitionend",this._onTransitionEnd,!1),this._target.removeEventListener("transitioncancel",this._onTransitionEnd,!1),this._finished||this._finalizeAnimation()}},d$=12,m$=.75,pu=class{constructor(t,e,n){this.velocity=t*1e3,this._dampingRatio=e||m$,this._naturalFrequency=n||d$,this._dampingRatio<1&&(this._dampedFrequency=this._naturalFrequency*Math.sqrt(1-this._dampingRatio*this._dampingRatio))}easeFrame(t,e){let n=0,s;e/=1e3;let o=Hm(Math.E,-this._dampingRatio*this._naturalFrequency*e);if(this._dampingRatio===1)s=this.velocity+this._naturalFrequency*t,n=(t+s*e)*o,this.velocity=n*-this._naturalFrequency+s*o;else if(this._dampingRatio<1){s=1/this._dampedFrequency*(this._dampingRatio*this._naturalFrequency*t+this.velocity);let r=Math.cos(this._dampedFrequency*e),a=Math.sin(this._dampedFrequency*e);n=o*(t*r+s*a),this.velocity=n*-this._naturalFrequency*this._dampingRatio+o*(-this._dampedFrequency*t*a+this._dampedFrequency*s*r)}return n}},hu=class{constructor(t){this.props=t;let{start:e,end:n,velocity:s,onUpdate:o,onComplete:r,onFinish:a,dampingRatio:l,naturalFrequency:c}=t;this.onFinish=a;let d=new pu(s,l,c),m=Date.now(),p=e-n,h=()=>{this._raf&&(p=d.easeFrame(p,Date.now()-m),Math.abs(p)<1&&Math.abs(d.velocity)<50?(o(n),r&&r(),this.onFinish()):(m=Date.now(),o(p+n),this._raf=requestAnimationFrame(h)))};this._raf=requestAnimationFrame(h)}destroy(){this._raf>=0&&cancelAnimationFrame(this._raf),this._raf=null}},uu=class{constructor(){this.activeAnimations=[]}startSpring(t){this._start(t,!0)}startTransition(t){this._start(t)}_start(t,e){let n;return e?n=new hu(t):n=new mu(t),this.activeAnimations.push(n),n.onFinish=()=>this.stop(n),n}stop(t){t.destroy();let e=this.activeAnimations.indexOf(t);e>-1&&this.activeAnimations.splice(e,1)}stopAll(){this.activeAnimations.forEach(t=>{t.destroy()}),this.activeAnimations=[]}stopAllPan(){this.activeAnimations=this.activeAnimations.filter(t=>t.props.isPan?(t.destroy(),!1):!0)}stopMainScroll(){this.activeAnimations=this.activeAnimations.filter(t=>t.props.isMainScroll?(t.destroy(),!1):!0)}isPanRunning(){return this.activeAnimations.some(t=>t.props.isPan)}},fu=class{constructor(t){this.pswp=t,t.events.add(t.element,"wheel",this._onWheel.bind(this))}_onWheel(t){t.preventDefault();let{currSlide:e}=this.pswp,{deltaX:n,deltaY:s}=t;if(!!e&&!this.pswp.dispatch("wheel",{originalEvent:t}).defaultPrevented)if(t.ctrlKey||this.pswp.options.wheelToZoom){if(e.isZoomable()){let o=-s;t.deltaMode===1?o*=.05:o*=t.deltaMode?1:.002,o=Hm(2,o);let r=e.currZoomLevel*o;e.zoomTo(r,{x:t.clientX,y:t.clientY})}}else e.isPannable()&&(t.deltaMode===1&&(n*=18,s*=18),e.panTo(e.pan.x-n,e.pan.y-s))}};gu=class{constructor(t,e){let n=e.name||e.className,s=e.html;if(t.options[n]===!1)return;typeof t.options[n+"SVG"]=="string"&&(s=t.options[n+"SVG"]),t.dispatch("uiElementCreate",{data:e});let o="";e.isButton?(o+="pswp__button ",o+=e.className||`pswp__button--${e.name}`):o+=e.className||`pswp__${e.name}`;let r,a=e.isButton?e.tagName||"button":e.tagName||"div";if(a=a.toLowerCase(),r=ke(o,a),e.isButton){r=ke(o,a),a==="button"&&(r.type="button");let{title:d}=e,{ariaLabel:m}=e;typeof t.options[n+"Title"]=="string"&&(d=t.options[n+"Title"]),d&&(r.title=d),(m||d)&&r.setAttribute("aria-label",m||d)}r.innerHTML=p$(s),e.onInit&&e.onInit(r,t),e.onClick&&(r.onclick=d=>{typeof e.onClick=="string"?t[e.onClick]():e.onClick(d,r,t)});let l=e.appendTo||"bar",c;l==="bar"?(t.topBar||(t.topBar=ke("pswp__top-bar pswp__hide-on-close","div",t.scrollWrap)),c=t.topBar):(r.classList.add("pswp__hide-on-close"),l==="wrapper"?c=t.scrollWrap:c=t.element),c.appendChild(t.applyFilters("uiElement",r,e))}};h$={name:"arrowPrev",className:"pswp__button--arrow--prev",title:"Previous",order:10,isButton:!0,appendTo:"wrapper",html:{isCustomSVG:!0,size:60,inner:'<path d="M29 43l-3 3-16-16 16-16 3 3-13 13 13 13z" id="pswp__icn-arrow"/>',outlineID:"pswp__icn-arrow"},onClick:"prev",onInit:mx},u$={name:"arrowNext",className:"pswp__button--arrow--next",title:"Next",order:11,isButton:!0,appendTo:"wrapper",html:{isCustomSVG:!0,size:60,inner:'<use xlink:href="#pswp__icn-arrow"/>',outlineID:"pswp__icn-arrow"},onClick:"next",onInit:(i,t)=>{mx(i,t,!0)}},f$={name:"close",title:"Close",order:20,isButton:!0,html:{isCustomSVG:!0,inner:'<path d="M24 10l-2-2-6 6-6-6-2 2 6 6-6 6 2 2 6-6 6 6 2-2-6-6z" id="pswp__icn-close"/>',outlineID:"pswp__icn-close"},onClick:"close"},g$={name:"zoom",title:"Zoom",order:10,isButton:!0,html:{isCustomSVG:!0,inner:'<path d="M17.426 19.926a6 6 0 1 1 1.5-1.5L23 22.5 21.5 24l-4.074-4.074z" id="pswp__icn-zoom"/><path fill="currentColor" class="pswp__zoom-icn-bar-h" d="M11 16v-2h6v2z"/><path fill="currentColor" class="pswp__zoom-icn-bar-v" d="M13 12h2v6h-2z"/>',outlineID:"pswp__icn-zoom"},onClick:"toggleZoom"},v$={name:"preloader",appendTo:"bar",order:7,html:{isCustomSVG:!0,inner:'<path fill-rule="evenodd" clip-rule="evenodd" d="M21.2 16a5.2 5.2 0 1 1-5.2-5.2V8a8 8 0 1 0 8 8h-2.8Z" id="pswp__icn-loading"/>',outlineID:"pswp__icn-loading"},onInit:(i,t)=>{let e,n,s=(a,l)=>{i.classList[l?"add":"remove"]("pswp__preloader--"+a)},o=a=>{e!==a&&(e=a,s("active",a))},r=()=>{if(!t.currSlide.content.isLoading()){o(!1),n&&(clearTimeout(n),n=null);return}n||(n=setTimeout(()=>{o(t.currSlide.content.isLoading()),n=null},t.options.preloaderDelay))};t.on("change",r),t.on("loadComplete",a=>{t.currSlide===a.slide&&r()}),t.ui.updatePreloaderVisibility=r}},E$={name:"counter",order:5,onInit:(i,t)=>{t.on("change",()=>{i.innerText=t.currIndex+1+t.options.indexIndicatorSep+t.getNumItems()})}};vu=class{constructor(t){this.pswp=t,this.updatePreloaderVisibility=void 0,this._lastUpdatedZoomLevel=void 0}init(){let{pswp:t}=this;this.isRegistered=!1,this.uiElementsData=[f$,h$,u$,g$,v$,E$],t.dispatch("uiRegister"),this.uiElementsData.sort((e,n)=>(e.order||0)-(n.order||0)),this.items=[],this.isRegistered=!0,this.uiElementsData.forEach(e=>{this.registerElement(e)}),t.on("change",()=>{t.element.classList[t.getNumItems()===1?"add":"remove"]("pswp--one-slide")}),t.on("zoomPanUpdate",()=>this._onZoomPanUpdate())}registerElement(t){this.isRegistered?this.items.push(new gu(this.pswp,t)):this.uiElementsData.push(t)}_onZoomPanUpdate(){let{template:t,currSlide:e,options:n}=this.pswp,{currZoomLevel:s}=e;if(this.pswp.opener.isClosing||(this.pswp.opener.isOpen||(s=e.zoomLevels.initial),s===this._lastUpdatedZoomLevel))return;this._lastUpdatedZoomLevel=s;let o=e.zoomLevels.initial-e.zoomLevels.secondary;if(Math.abs(o)<.01||!e.isZoomable()){ox(t,!1),t.classList.remove("pswp--zoom-allowed");return}t.classList.add("pswp--zoom-allowed");let r=s===e.zoomLevels.initial?e.zoomLevels.secondary:e.zoomLevels.initial;ox(t,r<=s),(n.imageClickAction==="zoom"||n.imageClickAction==="zoom-or-close")&&t.classList.add("pswp--click-to-zoom")}};Eu=class{constructor(t,e){this.type=t,e&&Object.assign(this,e)}preventDefault(){this.defaultPrevented=!0}},bu=class{constructor(){this._listeners={},this._filters={},this.pswp=void 0,this.options=void 0}addFilter(t,e,n=100){this._filters[t]||(this._filters[t]=[]),this._filters[t].push({fn:e,priority:n}),this._filters[t].sort((s,o)=>s.priority-o.priority),this.pswp&&this.pswp.addFilter(t,e,n)}removeFilter(t,e){this._filters[t]&&(this._filters[t]=this._filters[t].filter(n=>n.fn!==e)),this.pswp&&this.pswp.removeFilter(t,e)}applyFilters(t,...e){return this._filters[t]&&this._filters[t].forEach(n=>{e[0]=n.fn.apply(this,e)}),e[0]}on(t,e){this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e),this.pswp&&this.pswp.on(t,e)}off(t,e){this._listeners[t]&&(this._listeners[t]=this._listeners[t].filter(n=>e!==n)),this.pswp&&this.pswp.off(t,e)}dispatch(t,e){if(this.pswp)return this.pswp.dispatch(t,e);let n=new Eu(t,e);return this._listeners&&this._listeners[t]&&this._listeners[t].forEach(s=>{s.call(this,n)}),n}},_u=class{constructor(t,e){this.element=ke("pswp__img pswp__img--placeholder",t?"img":"",e),t&&(this.element.decoding="async",this.element.alt="",this.element.src=t,this.element.setAttribute("role","presentation")),this.element.setAttribute("aria-hiden","true")}setDisplayedSize(t,e){!this.element||(this.element.tagName==="IMG"?(eu(this.element,250,"auto"),this.element.style.transformOrigin="0 0",this.element.style.transform=Ra(0,0,t/250)):eu(this.element,t,e))}destroy(){this.element.parentNode&&this.element.remove(),this.element=null}},Tu=class{constructor(t,e,n){this.instance=e,this.data=t,this.index=n,this.element=void 0,this.displayedImageWidth=0,this.displayedImageHeight=0,this.width=Number(this.data.w)||Number(this.data.width)||0,this.height=Number(this.data.h)||Number(this.data.height)||0,this.isAttached=!1,this.hasSlide=!1,this.state=di.IDLE,this.data.type?this.type=this.data.type:this.data.src?this.type="image":this.type="html",this.instance.dispatch("contentInit",{content:this})}removePlaceholder(){this.placeholder&&!this.keepPlaceholder()&&setTimeout(()=>{this.placeholder&&(this.placeholder.destroy(),this.placeholder=null)},1e3)}load(t,e){if(this.slide&&this.usePlaceholder())if(this.placeholder){let n=this.placeholder.element;n&&!n.parentElement&&this.slide.container.prepend(n)}else{let n=this.instance.applyFilters("placeholderSrc",this.data.msrc&&this.slide.isFirstSlide?this.data.msrc:!1,this);this.placeholder=new _u(n,this.slide.container)}this.element&&!e||this.instance.dispatch("contentLoad",{content:this,isLazy:t}).defaultPrevented||(this.isImageContent()?(this.element=ke("pswp__img","img"),this.displayedImageWidth&&this.loadImage(t)):(this.element=ke("pswp__content"),this.element.innerHTML=this.data.html||""),e&&this.slide&&this.slide.updateContentSize(!0))}loadImage(t){let e=this.element;this.instance.dispatch("contentLoadImage",{content:this,isLazy:t}).defaultPrevented||(this.updateSrcsetSizes(),this.data.srcset&&(e.srcset=this.data.srcset),e.src=this.data.src,e.alt=this.data.alt||"",this.state=di.LOADING,e.complete?this.onLoaded():(e.onload=()=>{this.onLoaded()},e.onerror=()=>{this.onError()}))}setSlide(t){this.slide=t,this.hasSlide=!0,this.instance=t.pswp}onLoaded(){this.state=di.LOADED,this.slide&&(this.instance.dispatch("loadComplete",{slide:this.slide,content:this}),this.slide.isActive&&this.slide.heavyAppended&&!this.element.parentNode&&(this.append(),this.slide.updateContentSize(!0)),(this.state===di.LOADED||this.state===di.ERROR)&&this.removePlaceholder())}onError(){this.state=di.ERROR,this.slide&&(this.displayError(),this.instance.dispatch("loadComplete",{slide:this.slide,isError:!0,content:this}),this.instance.dispatch("loadError",{slide:this.slide,content:this}))}isLoading(){return this.instance.applyFilters("isContentLoading",this.state===di.LOADING,this)}isError(){return this.state===di.ERROR}isImageContent(){return this.type==="image"}setDisplayedSize(t,e){if(!!this.element&&(this.placeholder&&this.placeholder.setDisplayedSize(t,e),!this.instance.dispatch("contentResize",{content:this,width:t,height:e}).defaultPrevented&&(eu(this.element,t,e),this.isImageContent()&&!this.isError()))){let n=!this.displayedImageWidth&&t;this.displayedImageWidth=t,this.displayedImageHeight=e,n?this.loadImage(!1):this.updateSrcsetSizes(),this.slide&&this.instance.dispatch("imageSizeChange",{slide:this.slide,width:t,height:e,content:this})}}isZoomable(){return this.instance.applyFilters("isContentZoomable",this.isImageContent()&&this.state!==di.ERROR,this)}updateSrcsetSizes(){if(this.data.srcset){let t=this.element,e=this.instance.applyFilters("srcsetSizesWidth",this.displayedImageWidth,this);(!t.dataset.largestUsedSize||e>parseInt(t.dataset.largestUsedSize,10))&&(t.sizes=e+"px",t.dataset.largestUsedSize=String(e))}}usePlaceholder(){return this.instance.applyFilters("useContentPlaceholder",this.isImageContent(),this)}lazyLoad(){this.instance.dispatch("contentLazyLoad",{content:this}).defaultPrevented||this.load(!0)}keepPlaceholder(){return this.instance.applyFilters("isKeepingPlaceholder",this.isLoading(),this)}destroy(){this.hasSlide=!1,this.slide=null,!this.instance.dispatch("contentDestroy",{content:this}).defaultPrevented&&(this.remove(),this.placeholder&&(this.placeholder.destroy(),this.placeholder=null),this.isImageContent()&&this.element&&(this.element.onload=null,this.element.onerror=null,this.element=null))}displayError(){if(this.slide){let t=ke("pswp__error-msg");t.innerText=this.instance.options.errorMsg,t=this.instance.applyFilters("contentErrorElement",t,this),this.element=ke("pswp__content pswp__error-msg-container"),this.element.appendChild(t),this.slide.container.innerText="",this.slide.container.appendChild(this.element),this.slide.updateContentSize(!0),this.removePlaceholder()}}append(){if(this.isAttached)return;if(this.isAttached=!0,this.state===di.ERROR){this.displayError();return}if(this.instance.dispatch("contentAppend",{content:this}).defaultPrevented)return;let t="decode"in this.element;this.isImageContent()?t&&this.slide&&(!this.slide.isActive||QL())?(this.isDecoding=!0,this.element.decode().finally(()=>{this.isDecoding=!1,this.appendImage()})):this.appendImage():this.element&&!this.element.parentNode&&this.slide.container.appendChild(this.element)}activate(){this.instance.dispatch("contentActivate",{content:this}).defaultPrevented||this.slide&&(this.isImageContent()&&this.isDecoding&&!QL()?this.appendImage():this.isError()&&this.load(!1,!0))}deactivate(){this.instance.dispatch("contentDeactivate",{content:this})}remove(){this.isAttached=!1,!this.instance.dispatch("contentRemove",{content:this}).defaultPrevented&&(this.element&&this.element.parentNode&&this.element.remove(),this.placeholder&&this.placeholder.element&&this.placeholder.element.remove())}appendImage(){!this.isAttached||this.instance.dispatch("contentAppendImage",{content:this}).defaultPrevented||(this.slide&&this.element&&!this.element.parentNode&&this.slide.container.appendChild(this.element),(this.state===di.LOADED||this.state===di.ERROR)&&this.removePlaceholder())}},y$=5;yu=class{constructor(t){this.pswp=t,this.limit=Math.max(t.options.preload[0]+t.options.preload[1]+1,y$),this._cachedItems=[]}updateLazy(t){let{pswp:e}=this;if(e.dispatch("lazyLoad").defaultPrevented)return;let{preload:n}=e.options,s=t===void 0?!0:t>=0,o;for(o=0;o<=n[1];o++)this.loadSlideByIndex(e.currIndex+(s?o:-o));for(o=1;o<=n[0];o++)this.loadSlideByIndex(e.currIndex+(s?-o:o))}loadSlideByIndex(t){t=this.pswp.getLoopedIndex(t);let e=this.getContentByIndex(t);e||(e=L$(t,this.pswp),e&&this.addToCache(e))}getContentBySlide(t){let e=this.getContentByIndex(t.index);return e||(e=this.pswp.createContentFromData(t.data,t.index),e&&this.addToCache(e)),e&&e.setSlide(t),e}addToCache(t){if(this.removeByIndex(t.index),this._cachedItems.push(t),this._cachedItems.length>this.limit){let e=this._cachedItems.findIndex(n=>!n.isAttached&&!n.hasSlide);e!==-1&&this._cachedItems.splice(e,1)[0].destroy()}}removeByIndex(t){let e=this._cachedItems.findIndex(n=>n.index===t);e!==-1&&this._cachedItems.splice(e,1)}getContentByIndex(t){return this._cachedItems.find(e=>e.index===t)}destroy(){this._cachedItems.forEach(t=>t.destroy()),this._cachedItems=null}},Lu=class extends bu{getNumItems(){let t,{dataSource:e}=this.options;e?"length"in e?t=e.length:"gallery"in e&&(e.items||(e.items=this._getGalleryDOMElements(e.gallery)),e.items&&(t=e.items.length)):t=0;let n=this.dispatch("numItems",{dataSource:e,numItems:t});return this.applyFilters("numItems",n.numItems,e)}createContentFromData(t,e){return new Tu(t,this,e)}getItemData(t){let{dataSource:e}=this.options,n;Array.isArray(e)?n=e[t]:e&&e.gallery&&(e.items||(e.items=this._getGalleryDOMElements(e.gallery)),n=e.items[t]);let s=n;s instanceof Element&&(s=this._domElementToItemData(s));let o=this.dispatch("itemData",{itemData:s||{},index:t});return this.applyFilters("itemData",o.itemData,t)}_getGalleryDOMElements(t){return this.options.children||this.options.childSelector?QP(this.options.children,this.options.childSelector,t)||[]:[t]}_domElementToItemData(t){let e={element:t},n=t.tagName==="A"?t:t.querySelector("a");if(n){e.src=n.dataset.pswpSrc||n.href,n.dataset.pswpSrcset&&(e.srcset=n.dataset.pswpSrcset),e.width=parseInt(n.dataset.pswpWidth,10),e.height=parseInt(n.dataset.pswpHeight,10),e.w=e.width,e.h=e.height,n.dataset.pswpType&&(e.type=n.dataset.pswpType);let s=t.querySelector("img");s&&(e.msrc=s.currentSrc||s.src,e.alt=s.getAttribute("alt")),(n.dataset.pswpCropped||n.dataset.cropped)&&(e.thumbCropped=!0)}return this.applyFilters("domItemData",e,t,n)}lazyLoadData(t,e){return px(t,this,e)}},Sa=.003,xu=class{constructor(t){this.pswp=t,this.isClosed=!0,this._prepareOpen=this._prepareOpen.bind(this),this._thumbBounds=void 0,t.on("firstZoomPan",this._prepareOpen)}open(){this._prepareOpen(),this._start()}close(){if(this.isClosed||this.isClosing||this.isOpening)return!1;let t=this.pswp.currSlide;return this.isOpen=!1,this.isOpening=!1,this.isClosing=!0,this._duration=this.pswp.options.hideAnimationDuration,t&&t.currZoomLevel*t.width>=this.pswp.options.maxWidthToAnimate&&(this._duration=0),this._applyStartProps(),setTimeout(()=>{this._start()},this._croppedZoom?30:0),!0}_prepareOpen(){if(this.pswp.off("firstZoomPan",this._prepareOpen),!this.isOpening){let t=this.pswp.currSlide;this.isOpening=!0,this.isClosing=!1,this._duration=this.pswp.options.showAnimationDuration,t&&t.zoomLevels.initial*t.width>=this.pswp.options.maxWidthToAnimate&&(this._duration=0),this._applyStartProps()}}_applyStartProps(){let{pswp:t}=this,e=this.pswp.currSlide,{options:n}=t;if(n.showHideAnimationType==="fade"?(n.showHideOpacity=!0,this._thumbBounds=!1):n.showHideAnimationType==="none"?(n.showHideOpacity=!1,this._duration=0,this._thumbBounds=!1):this.isOpening&&t._initialThumbBounds?this._thumbBounds=t._initialThumbBounds:this._thumbBounds=this.pswp.getThumbBounds(),this._placeholder=e.getPlaceholderElement(),t.animations.stopAll(),this._useAnimation=this._duration>50,this._animateZoom=Boolean(this._thumbBounds)&&e.content&&e.content.usePlaceholder()&&(!this.isClosing||!t.mainScroll.isShifted()),this._animateZoom?this._animateRootOpacity=n.showHideOpacity:(this._animateRootOpacity=!0,this.isOpening&&(e.zoomAndPanToInitial(),e.applyCurrentZoomPan())),this._animateBgOpacity=!this._animateRootOpacity&&this.pswp.options.bgOpacity>Sa,this._opacityElement=this._animateRootOpacity?t.element:t.bg,!this._useAnimation){this._duration=0,this._animateZoom=!1,this._animateBgOpacity=!1,this._animateRootOpacity=!0,this.isOpening&&(t.element.style.opacity=String(Sa),t.applyBgOpacity(1));return}this._animateZoom&&this._thumbBounds&&this._thumbBounds.innerRect?(this._croppedZoom=!0,this._cropContainer1=this.pswp.container,this._cropContainer2=this.pswp.currSlide.holderElement,t.container.style.overflow="hidden",t.container.style.width=t.viewportSize.x+"px"):this._croppedZoom=!1,this.isOpening?(this._animateRootOpacity?(t.element.style.opacity=String(Sa),t.applyBgOpacity(1)):(this._animateBgOpacity&&(t.bg.style.opacity=String(Sa)),t.element.style.opacity="1"),this._animateZoom&&(this._setClosedStateZoomPan(),this._placeholder&&(this._placeholder.style.willChange="transform",this._placeholder.style.opacity=String(Sa)))):this.isClosing&&(t.mainScroll.itemHolders[0].el.style.display="none",t.mainScroll.itemHolders[2].el.style.display="none",this._croppedZoom&&t.mainScroll.x!==0&&(t.mainScroll.resetPosition(),t.mainScroll.resize()))}_start(){this.isOpening&&this._useAnimation&&this._placeholder&&this._placeholder.tagName==="IMG"?new Promise(t=>{let e=!1,n=!0;KP(this._placeholder).finally(()=>{e=!0,n||t()}),setTimeout(()=>{n=!1,e&&t()},50),setTimeout(t,250)}).finally(()=>this._initiate()):this._initiate()}_initiate(){this.pswp.element.style.setProperty("--pswp-transition-duration",this._duration+"ms"),this.pswp.dispatch(this.isOpening?"openingAnimationStart":"closingAnimationStart"),this.pswp.dispatch("initialZoom"+(this.isOpening?"In":"Out")),this.pswp.element.classList[this.isOpening?"add":"remove"]("pswp--ui-visible"),this.isOpening?(this._placeholder&&(this._placeholder.style.opacity="1"),this._animateToOpenState()):this.isClosing&&this._animateToClosedState(),this._useAnimation||this._onAnimationComplete()}_onAnimationComplete(){let{pswp:t}=this;this.isOpen=this.isOpening,this.isClosed=this.isClosing,this.isOpening=!1,this.isClosing=!1,t.dispatch(this.isOpen?"openingAnimationEnd":"closingAnimationEnd"),t.dispatch("initialZoom"+(this.isOpen?"InEnd":"OutEnd")),this.isClosed?t.destroy():this.isOpen&&(this._animateZoom&&(t.container.style.overflow="visible",t.container.style.width="100%"),t.currSlide.applyCurrentZoomPan())}_animateToOpenState(){let{pswp:t}=this;this._animateZoom&&(this._croppedZoom&&(this._animateTo(this._cropContainer1,"transform","translate3d(0,0,0)"),this._animateTo(this._cropContainer2,"transform","none")),t.currSlide.zoomAndPanToInitial(),this._animateTo(t.currSlide.container,"transform",t.currSlide.getCurrentTransform())),this._animateBgOpacity&&this._animateTo(t.bg,"opacity",String(t.options.bgOpacity)),this._animateRootOpacity&&this._animateTo(t.element,"opacity","1")}_animateToClosedState(){let{pswp:t}=this;this._animateZoom&&this._setClosedStateZoomPan(!0),this._animateBgOpacity&&t.bgOpacity>.01&&this._animateTo(t.bg,"opacity","0"),this._animateRootOpacity&&this._animateTo(t.element,"opacity","0")}_setClosedStateZoomPan(t){if(!this._thumbBounds)return;let{pswp:e}=this,{innerRect:n}=this._thumbBounds,{currSlide:s,viewportSize:o}=e;if(this._croppedZoom){let r=-o.x+(this._thumbBounds.x-n.x)+n.w,a=-o.y+(this._thumbBounds.y-n.y)+n.h,l=o.x-n.w,c=o.y-n.h;t?(this._animateTo(this._cropContainer1,"transform",Ra(r,a)),this._animateTo(this._cropContainer2,"transform",Ra(l,c))):(Rs(this._cropContainer1,r,a),Rs(this._cropContainer2,l,c))}qt(s.pan,n||this._thumbBounds),s.currZoomLevel=this._thumbBounds.w/s.width,t?this._animateTo(s.container,"transform",s.getCurrentTransform()):s.applyCurrentZoomPan()}_animateTo(t,e,n){if(!this._duration){t.style[e]=n;return}let{animations:s}=this.pswp,o={duration:this._duration,easing:this.pswp.options.easing,onComplete:()=>{s.activeAnimations.length||this._onAnimationComplete()},target:t};o[e]=n,s.startTransition(o)}},x$={allowPanToNext:!0,spacing:.1,loop:!0,pinchToClose:!0,closeOnVerticalDrag:!0,hideAnimationDuration:333,showAnimationDuration:333,zoomAnimationDuration:333,escKey:!0,arrowKeys:!0,returnFocus:!0,maxWidthToAnimate:4e3,clickToCloseNonZoomable:!0,imageClickAction:"zoom-or-close",bgClickAction:"close",tapAction:"toggle-controls",doubleTapAction:"zoom",indexIndicatorSep:" / ",preloaderDelay:2e3,bgOpacity:.8,index:0,errorMsg:"The image cannot be loaded",preload:[1,2],easing:"cubic-bezier(.4,0,.22,1)"},md=class extends Lu{constructor(t){super(),this._prepareOptions(t),this.offset={},this._prevViewportSize={},this.viewportSize={},this.bgOpacity=1,this.topBar=void 0,this.events=new iu,this.animations=new uu,this.mainScroll=new cu(this),this.gestures=new lu(this),this.opener=new xu(this),this.keyboard=new du(this),this.contentLoader=new yu(this)}init(){if(this.isOpen||this.isDestroying)return;this.isOpen=!0,this.dispatch("init"),this.dispatch("beforeOpen"),this._createMainStructure();let t="pswp--open";return this.gestures.supportsTouch&&(t+=" pswp--touch"),this.options.mainClass&&(t+=" "+this.options.mainClass),this.element.className+=" "+t,this.currIndex=this.options.index||0,this.potentialIndex=this.currIndex,this.dispatch("firstUpdate"),this.scrollWheel=new fu(this),(Number.isNaN(this.currIndex)||this.currIndex<0||this.currIndex>=this.getNumItems())&&(this.currIndex=0),this.gestures.supportsTouch||this.mouseDetected(),this.updateSize(),this.offset.y=window.pageYOffset,this._initialItemData=this.getItemData(this.currIndex),this.dispatch("gettingData",{index:this.currIndex,data:this._initialItemData,slide:void 0}),this._initialThumbBounds=this.getThumbBounds(),this.dispatch("initialLayout"),this.on("openingAnimationEnd",()=>{this.mainScroll.itemHolders[0].el.style.display="block",this.mainScroll.itemHolders[2].el.style.display="block",this.setContent(this.mainScroll.itemHolders[0],this.currIndex-1),this.setContent(this.mainScroll.itemHolders[2],this.currIndex+1),this.appendHeavy(),this.contentLoader.updateLazy(),this.events.add(window,"resize",this._handlePageResize.bind(this)),this.events.add(window,"scroll",this._updatePageScrollOffset.bind(this)),this.dispatch("bindEvents")}),this.setContent(this.mainScroll.itemHolders[1],this.currIndex),this.dispatch("change"),this.opener.open(),this.dispatch("afterInit"),!0}getLoopedIndex(t){let e=this.getNumItems();return this.options.loop&&(t>e-1&&(t-=e),t<0&&(t+=e)),t=Oa(t,0,e-1),t}appendHeavy(){this.mainScroll.itemHolders.forEach(t=>{t.slide&&t.slide.appendHeavy()})}goTo(t){this.mainScroll.moveIndexBy(this.getLoopedIndex(t)-this.potentialIndex)}next(){this.goTo(this.potentialIndex+1)}prev(){this.goTo(this.potentialIndex-1)}zoomTo(...t){this.currSlide.zoomTo(...t)}toggleZoom(){this.currSlide.toggleZoom()}close(){!this.opener.isOpen||this.isDestroying||(this.isDestroying=!0,this.dispatch("close"),this.events.removeAll(),this.opener.close())}destroy(){if(!this.isDestroying){this.options.showHideAnimationType="none",this.close();return}this.dispatch("destroy"),this.listeners=null,this.scrollWrap.ontouchmove=null,this.scrollWrap.ontouchend=null,this.element.remove(),this.mainScroll.itemHolders.forEach(t=>{t.slide&&t.slide.destroy()}),this.contentLoader.destroy(),this.events.removeAll()}refreshSlideContent(t){this.contentLoader.removeByIndex(t),this.mainScroll.itemHolders.forEach((e,n)=>{let s=this.currSlide.index-1+n;this.canLoop()&&(s=this.getLoopedIndex(s)),s===t&&(this.setContent(e,t,!0),n===1&&(this.currSlide=e.slide,e.slide.setIsActive(!0)))}),this.dispatch("change")}setContent(t,e,n){if(this.canLoop()&&(e=this.getLoopedIndex(e)),t.slide){if(t.slide.index===e&&!n)return;t.slide.destroy(),t.slide=null}if(!this.canLoop()&&(e<0||e>=this.getNumItems()))return;let s=this.getItemData(e);t.slide=new su(s,e,this),e===this.currIndex&&(this.currSlide=t.slide),t.slide.append(t.el)}getViewportCenterPoint(){return{x:this.viewportSize.x/2,y:this.viewportSize.y/2}}updateSize(t){if(this.isDestroying)return;let e=cx(this.options,this);!t&&Ia(e,this._prevViewportSize)||(qt(this._prevViewportSize,e),this.dispatch("beforeResize"),qt(this.viewportSize,this._prevViewportSize),this._updatePageScrollOffset(),this.dispatch("viewportSize"),this.mainScroll.resize(this.opener.isOpen),!this.hasMouse&&window.matchMedia("(any-hover: hover)").matches&&this.mouseDetected(),this.dispatch("resize"))}applyBgOpacity(t){this.bgOpacity=Math.max(t,0),this.bg.style.opacity=String(this.bgOpacity*this.options.bgOpacity)}mouseDetected(){this.hasMouse||(this.hasMouse=!0,this.element.classList.add("pswp--has_mouse"))}_handlePageResize(){this.updateSize(),/iPhone|iPad|iPod/i.test(window.navigator.userAgent)&&setTimeout(()=>{this.updateSize()},500)}_updatePageScrollOffset(){this.setScrollOffset(0,window.pageYOffset)}setScrollOffset(t,e){this.offset.x=t,this.offset.y=e,this.dispatch("updateScrollOffset")}_createMainStructure(){this.element=ke("pswp"),this.element.setAttribute("tabindex","-1"),this.element.setAttribute("role","dialog"),this.template=this.element,this.bg=ke("pswp__bg",!1,this.element),this.scrollWrap=ke("pswp__scroll-wrap",!1,this.element),this.container=ke("pswp__container",!1,this.scrollWrap),this.mainScroll.appendHolders(),this.ui=new vu(this),this.ui.init(),(this.options.appendToEl||document.body).appendChild(this.element)}getThumbBounds(){return T$(this.currIndex,this.currSlide?this.currSlide.data:this._initialItemData,this)}canLoop(){return this.options.loop&&this.getNumItems()>2}_prepareOptions(t){window.matchMedia("(prefers-reduced-motion), (update: slow)").matches&&(t.showHideAnimationType="none",t.zoomAnimationDuration=0),this.options=C(C({},x$),t)}}});var ux,fx=u(()=>{"use strict";ux=" из "});var vx={};ot(vx,{openPhotoswipe:()=>C$});var gx,C$,Ex=u(()=>{"use strict";hx();fx();ae();C$=(i,t,e,n)=>{let s=i.map(a=>({src:a.images[0].url,width:a.images[0].width,height:a.images[0].height,msrc:a.inline})),o='<div class="pswp__arrow"></div>',r=new md(C({dataSource:s,index:t,closeSVG:'<x-icon name="menu-close"></x-icon>',arrowPrevSVG:o,arrowNextSVG:o,zoom:!1,spacing:.03,bgOpacity:1,indexIndicatorSep:ux},d2Env.isDesktop&&{maxZoomLevel:1}));r.addFilter("thumbEl",(a,l,c)=>n?n[c]:a),r.addFilter("placeholderSrc",(a,l)=>l.slide.data.msrc||a),r.on("destroy",()=>{document.documentElement.style.overflowY="",document.scrollingElement.scrollTop=gx}),!d2Env.isApp&&e&&r.on("contentActivate",()=>{ht(e)}),gx=document.scrollingElement.scrollTop,document.documentElement.style.overflowY="hidden",r.init()}});var Mu,Rx,B$,U$,j$,z$,Ox,Hx,V$,W$,Do,pd=u(()=>{"use strict";_p();V();Mu="toast",Rx="is-active",B$=3e3,U$=400,j$=d2Env.isApp&&lc?66:10,z$=10,Ox=new WeakMap,Hx=()=>{let i=j$;tt(Mu,"item").forEach(e=>{let n=e.offsetHeight;e.style.top=`${i}px`,i+=n+z$})},V$=i=>tt(Mu,"item").some(e=>Ox.get(e)===i),W$=i=>{i.classList.remove(Rx),setTimeout(()=>{i.remove(),Hx()},U$)},Do=(i,t={})=>{let{duration:e=B$,type:n}=t;if(n&&V$(n))return;let s=document.createElement("div");n&&Ox.set(s,n),kl(s,Mu,"item"),s.className=`c-toast ctx-dark ${Rx}`,s.innerHTML=i,document.body.prepend(s),Hx(),e>0&&setTimeout(()=>{W$(s)},e)}});var Uo,Ld=u(()=>{"use strict";Fi();Uo=(i=[],t="purchase")=>{let e={ecommerce:{currencyCode:"RUB",[t]:ut(C({},t==="purchase"&&{actionField:{id:Xt()}}),{products:i})}};window.dataLayer=window.dataLayer||[],window.dataLayer.push(e)}});var C1,xd,qu=u(()=>{"use strict";nt();C1="js-deposit-rebilling",xd=(i,t)=>{if((i&&i.data&&i.data.status)!=="PaymentInstrumentRequired")return;let n=document.querySelector(`.${C1}`);if(!n)return;let s=n.value||"";n.addEventListener("click",()=>{zt(),t(s)},{once:!0})}});var un,el=u(()=>{"use strict";un=(i,t)=>{let e=Math.ceil(i.length/t),n=[];for(let s=0;s<t;s+=1)n[s]=i.slice(s*e,(s+1)*e);return n}});var RA,UB,Vo,of=u(()=>{"use strict";Ul();RA="__sak",UB=i=>{try{return i.setItem(RA,"1"),i.removeItem(RA),!0}catch(t){return!1}},Vo=Vs(()=>UB(window.sessionStorage))});var ks,PA=u(()=>{"use strict";ln();ks=class{constructor(t,e,n,s){this.left=t;this.top=e;this.width=n;this.height=s}clone(){return new ks(this.left,this.top,this.width,this.height)}getSize(){return new bt(this.width,this.height)}ceil(){return this.left=Math.ceil(this.left),this.top=Math.ceil(this.top),this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this}floor(){return this.left=Math.floor(this.left),this.top=Math.floor(this.top),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this}round(){return this.left=Math.round(this.left),this.top=Math.round(this.top),this.width=Math.round(this.width),this.height=Math.round(this.height),this}translate(t,e){return this.left+=t,this.top+=e,this}scale(t,e){return e=typeof e=="number"?e:t,this.left*=t,this.width*=t,this.top*=e,this.height*=e,this}}});var $A={};ot($A,{XCrop:()=>Md,default:()=>VB});var Md,VB,FA=u(()=>{"use strict";PA();ln();pa();Md=class extends HTMLElement{connectedCallback(){if(this.image)return;this.innerHTML=`
      <img class="part-image">
      <div class="part-box">
        <div data-dir="nw" class="part-handle nw"></div>
        <div data-dir="ne" class="part-handle ne"></div>
        <div data-dir="sw" class="part-handle sw"></div>
        <div data-dir="se" class="part-handle se"></div>
      </div>`;let e=this.getAttribute("aspect-ratio");this.aspectRatio=e?new bt(...e.split("/").map(Number)):void 0,this.naturalSize=new bt(Number(this.getAttribute("width"))||0,Number(this.getAttribute("height"))||0),this.minSize=new bt(Number(this.getAttribute("min-width"))||20,Number(this.getAttribute("min-height"))||20),this.box=this.querySelector(".part-box"),this.image=this.querySelector("img"),this.src=this.getAttribute("src"),this.updateCropArea=this.updateCropArea.bind(this),this.stopUpdate=this.stopUpdate.bind(this),this.naturalSize.area()||(this.image.width=this.naturalSize.width,this.image.height=this.naturalSize.height),this.image.onload=()=>{let{naturalWidth:n,naturalHeight:s}=this.image;this.naturalSize.width=n,this.naturalSize.height=s;let o=this.offsetWidth,r=Math.round(o*s/n);this.size=new bt(o,r),this.crop=new ks(0,0,o,r);let a=o/n;if(this.minSize.scale(a),this.image.style.width=`${o}px`,this.image.style.height=`${r}px`,this.style.width=`${o}px`,this.style.height=`${r}px`,this.updateImageRotation(),this.pendingRect){this.naturalCrop=this.pendingRect,delete this.pendingRect;return}this.setInitialPosition()},this.box.addEventListener("mousedown",n=>this.startUpdate(n)),this.box.addEventListener("touchstart",n=>this.startUpdate(n),{passive:!0}),this.box.addEventListener("dblclick",()=>this.setInitialPosition()),this.image.src=this.src}static get observedAttributes(){return["rotate"]}get rotate(){return Number(this.getAttribute("rotate")||0)%360}set rotate(e){e%=360,e?this.setAttribute("rotate",String(e)):this.removeAttribute("rotate")}get naturalCrop(){return this.crop.clone().scale(this.naturalSize.width/this.size.width).round()}set naturalCrop(e){let n=new ks(e.left,e.top,e.width,e.height);if(!this.size){this.pendingRect=n;return}this.crop=n.scale(this.size.width/this.naturalSize.width).round(),this.update()}attributeChangedCallback(e,n){!this.image||e==="rotate"&&(this.updateImageRotation(Number(n||0)),this.setInitialPosition())}updateImageRotation(e=0){(this.rotate-e)%180!==0&&([this.naturalSize.width,this.naturalSize.height]=[this.naturalSize.height,this.naturalSize.width],[this.size.width,this.size.height]=[this.size.height,this.size.width],[this.minSize.width,this.minSize.height]=[this.minSize.height,this.minSize.width],this.style.width=`${this.size.width}px`,this.style.height=`${this.size.height}px`),this.image.style.transform=this.rotate?`rotate(${this.rotate}deg)`:""}setInitialPosition(){let{crop:e,size:n}=this,s=this.aspectRatio?this.aspectRatio.clone().scaleToFit(this.size):n.clone();e.left=(n.width-s.width)/2,e.top=(n.height-s.height)/2,e.width=s.width,e.height=s.height,this.update()}update(){let{box:e,crop:n}=this;e.style.left=`${n.left}px`,e.style.top=`${n.top}px`,e.style.width=`${n.width}px`,e.style.height=`${n.height}px`,this.dispatchEvent(new Event("change"))}startUpdate(e){if(!(e.currentTarget instanceof HTMLElement&&e.target instanceof HTMLElement))return;let n=e instanceof MouseEvent,{pageX:s,pageY:o}=n?e:e.touches[0];if(this.pointerX=s,this.pointerY=o,this.tempCrop=this.crop.clone(),this.isResize=e.target.hasAttribute("data-dir"),this.isResize){let r=e.target.dataset.dir||"";this.isLeft=["nw","sw"].includes(r),this.isTop=["nw","ne"].includes(r),this.style.cursor=this.isLeft===this.isTop?"nwse-resize":"nesw-resize"}this.classList.add("is-active"),this.ownerDocument.body.addEventListener("mouseup",this.stopUpdate),this.ownerDocument.body.addEventListener("mouseleave",this.stopUpdate),this.ownerDocument.body.addEventListener("mousemove",this.updateCropArea),this.addEventListener("touchend",this.stopUpdate),this.addEventListener("touchmove",this.updateCropArea,{passive:!0})}stopUpdate(){this.style.cursor="",this.classList.remove("is-active"),this.ownerDocument.body.removeEventListener("mouseup",this.stopUpdate),this.ownerDocument.body.removeEventListener("mouseleave",this.stopUpdate),this.ownerDocument.body.removeEventListener("mousemove",this.updateCropArea),this.removeEventListener("touchend",this.stopUpdate),this.removeEventListener("touchmove",this.updateCropArea)}updateCropArea(e){let{pageX:n,pageY:s}=e instanceof MouseEvent?e:e.touches[0],o=n-this.pointerX,r=s-this.pointerY,{crop:a,size:l,minSize:c,aspectRatio:d,isLeft:m,isTop:p,isResize:h}=this,{left:f,top:g,width:E,height:M}=this.tempCrop;if(h){let I=E+(m?-o:o),A=M+(p?-r:r);if(I=ci(I,c.width,m?f+E:l.width-f),A=ci(A,c.height,p?g+M:l.height-g),d){let w=d.width/d.height;I/A>w?I=A*w:A=I/w}a.left-=m?I-a.width:0,a.top-=p?A-a.height:0,a.width=I,a.height=A}else a.left=ci(f+o,0,l.width-E),a.top=ci(g+r,0,l.height-M);this.update()}},VB=()=>{customElements.define("x-crop",Md)}});var BA={};ot(BA,{default:()=>Id});var WB,qB,Id,UA=u(()=>{"use strict";D();B();j();WB="c-charcounter",qB="is-warning",Id=class extends x{init(){let{element:t}=this,e=Number(t.getAttribute("maxlength"));if(!e)return;t.dataset.maxlength=String(e),t.removeAttribute("maxlength");let n=S("div"),s=S("div",{className:WB,style:`margin-bottom:${Fe(t,"margin-bottom")}`},n);t.after(s);let o=()=>{let r=t.value.length,a=e-r,l=a<0;n.textContent=String(a).replace("-","−"),s.classList.toggle(qB,l);let c=hi(t,"border-left-width"),d=hi(t,"border-right-width"),p=(t instanceof HTMLTextAreaElement?Math.max(0,t.offsetWidth-t.scrollWidth):0)-c-d;n.style.right=`${p}px`};t.addEventListener("input",o),o()}}});var zA={};ot(zA,{default:()=>Vi});var jA,Vi,VA=u(()=>{"use strict";D();B();$();j();Ms();Di();Ce();rd();jA="/ajax/geo.cshtml",Vi=class extends x{parsedInit(){this.form=this.element.closest("form");let{country:e="country",city:n="city"}=this.element.dataset;this.countrySelect=this.form[e],this.citySelect=this.form[n],this.filter=this.form.filter,this.filter.setAttribute("autocomplete","nope"),this.visibility=this.filter.style.visibility==="hidden";let s=J(".city-wrapper",this.form);if(s){this.optional=!0;let o=this.countrySelect.value!=="";this.cityZippy=at(s,o),this.cityZippy.duration=400}this.addCity=this.addCity.bind(this),this.acXhrStop=this.acXhrStop.bind(this),this.onCountryChange=this.onCountryChange.bind(this),this.onCityChange=this.onCityChange.bind(this),this.onFocusIn=this.onFocusIn.bind(this),this.onFocusOut=this.onFocusOut.bind(this),this.countrySelect.addEventListener("change",this.onCountryChange),this.citySelect.addEventListener("change",this.onCityChange),d2Env.isMobile&&(this.filter.addEventListener("focus",this.onFocusIn),this.filter.addEventListener("blur",this.onFocusOut)),this.onCityChange()}onCountryChange(){return T(this,null,function*(){this.showFilter(!1);let e=this.countrySelect.value,n=e==="0";if(this.optional&&this.cityZippy.expand(e!==""||!n),e!==""){let s=C({_:n?"c":"l"},!n&&{c:e}),o=yield L(jA,this.role,{anchorEl:this.countrySelect,body:s});n?(this.renderCountry(o),this.onCountryChange()):(this.renderCity(o),this.onCityChange())}})}onCityChange(){let n=this.citySelect.value==="0";this.showFilter(n),this.acXhr&&(this.acXhr.removeEventListener("loadstart",this.acXhrStart),this.acXhr.removeEventListener("loadend",this.acXhrStop)),this.spin&&this.spin.stop(),this.ac&&(this.ac.removeEventListener("update",this.addCity),this.ac.dispose()),n&&(this.ac=new Me(`${jA}?_=l&c=${this.countrySelect.value}`,this.filter),this.ac.setRowBuilder(Oo),this.ac.addEventListener("update",this.addCity),this.spin=new se(J(".cityselect-spin")),this.acXhr=this.ac.getXhr(),this.acXhr.addEventListener("loadstart",this.acXhrStart),this.acXhr.addEventListener("loadend",this.acXhrStop))}acXhrStart(){this.spin&&this.spin.start()}acXhrStop(){this.spin&&this.spin.stop()}addCity(e){this.showFilter(!1),d2Env.isMobile&&this.onFocusOut();let{id:n,caption:s}=e.detail.row,o=Array.from(this.citySelect.options).findIndex(a=>a.value===n);if(o!==-1){this.citySelect.selectedIndex=o;return}let r=this.citySelect.lastElementChild;r.remove(),Vi.appendOption(this.citySelect,n,s,!0),Vi.appendOption(this.citySelect,r.value,r.text)}showFilter(e){if(this.filter.value="",e||this.filter.blur(),this.visibility)this.filter.style.visibility=e?"visible":"hidden";else{let n=this.closestSlot(this.filter,"filter");_(n||this.filter,e)}e&&this.filter.focus()}onFocusIn(){let{clientHeight:e}=document.documentElement,n=Xi(this.filter);setTimeout(()=>{d2Env.isMobile||(document.body.style.minHeight=`${n.top-5-40+e}px`),document.scrollingElement.scrollTop=n.top+(d2Env.isMobile?-60:-5)},100)}onFocusOut(){setTimeout(()=>{document.body.style.minHeight="0"},100)}renderCountry(e,n){this.countrySelect.innerHTML="",this.optional&&Vi.appendOption(this.countrySelect,"",""),e.forEach(s=>Vi.appendOption(this.countrySelect,s.isocode,s.caption,s.isocode===n))}renderCity(e,n){this.citySelect.innerHTML="";let s=e.length===1;e.forEach(o=>Vi.appendOption(this.citySelect,o.id,o.caption,s||o.id===n))}static appendOption(e,n="",s=" ",o){let r=document.createElement("option");e.appendChild(r),r.value=n,r.textContent=s,r.selected=!!o}}});function WA(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),e.push.apply(e,n)}return e}function Gi(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?WA(Object(e),!0).forEach(function(n){GB(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):WA(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}function kd(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?kd=function(t){return typeof t}:kd=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kd(i)}function GB(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function gn(){return gn=Object.assign||function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},gn.apply(this,arguments)}function JB(i,t){if(i==null)return{};var e={},n=Object.keys(i),s,o;for(o=0;o<n.length;o++)s=n[o],!(t.indexOf(s)>=0)&&(e[s]=i[s]);return e}function ZB(i,t){if(i==null)return{};var e=JB(i,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,n)||(e[n]=i[n]))}return e}function fn(i){if(typeof window!="undefined"&&window.navigator)return!!navigator.userAgent.match(i)}function Tt(i,t,e){i.addEventListener(t,e,!vn&&iS)}function Et(i,t,e){i.removeEventListener(t,e,!vn&&iS)}function Bd(i,t){if(!!t){if(t[0]===">"&&(t=t.substring(1)),i)try{if(i.matches)return i.matches(t);if(i.msMatchesSelector)return i.msMatchesSelector(t);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function KB(i){return i.host&&i!==document&&i.host.nodeType?i.host:i.parentNode}function Wi(i,t,e,n){if(i){e=e||document;do{if(t!=null&&(t[0]===">"?i.parentNode===e&&Bd(i,t):Bd(i,t))||n&&i===e)return i;if(i===e)break}while(i=KB(i))}return null}function Ke(i,t,e){if(i&&t)if(i.classList)i.classList[e?"add":"remove"](t);else{var n=(" "+i.className+" ").replace(GA," ").replace(" "+t+" "," ");i.className=(n+(e?" "+t:"")).replace(GA," ")}}function K(i,t,e){var n=i&&i.style;if(n){if(e===void 0)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(i,""):i.currentStyle&&(e=i.currentStyle),t===void 0?e:e[t];!(t in n)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),n[t]=e+(typeof e=="string"?"":"px")}}function Zo(i,t){var e="";if(typeof i=="string")e=i;else do{var n=K(i,"transform");n&&n!=="none"&&(e=n+" "+e)}while(!t&&(i=i.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(e)}function nS(i,t,e){if(i){var n=i.getElementsByTagName(t),s=0,o=n.length;if(e)for(;s<o;s++)e(n[s],s);return n}return[]}function qi(){var i=document.scrollingElement;return i||document.documentElement}function Qt(i,t,e,n,s){if(!(!i.getBoundingClientRect&&i!==window)){var o,r,a,l,c,d,m;if(i!==window&&i.parentNode&&i!==qi()?(o=i.getBoundingClientRect(),r=o.top,a=o.left,l=o.bottom,c=o.right,d=o.height,m=o.width):(r=0,a=0,l=window.innerHeight,c=window.innerWidth,d=window.innerHeight,m=window.innerWidth),(t||e)&&i!==window&&(s=s||i.parentNode,!vn))do if(s&&s.getBoundingClientRect&&(K(s,"transform")!=="none"||e&&K(s,"position")!=="static")){var p=s.getBoundingClientRect();r-=p.top+parseInt(K(s,"border-top-width")),a-=p.left+parseInt(K(s,"border-left-width")),l=r+o.height,c=a+o.width;break}while(s=s.parentNode);if(n&&i!==window){var h=Zo(s||i),f=h&&h.a,g=h&&h.d;h&&(r/=g,a/=f,m/=f,d/=g,l=r+d,c=a+m)}return{top:r,left:a,bottom:l,right:c,width:m,height:d}}}function JA(i,t,e){for(var n=Yn(i,!0),s=Qt(i)[t];n;){var o=Qt(n)[e],r=void 0;if(e==="top"||e==="left"?r=s>=o:r=s<=o,!r)return n;if(n===qi())break;n=Yn(n,!1)}return!1}function Yo(i,t,e,n){for(var s=0,o=0,r=i.children;o<r.length;){if(r[o].style.display!=="none"&&r[o]!==X.ghost&&(n||r[o]!==X.dragged)&&Wi(r[o],e.draggable,i,!1)){if(s===t)return r[o];s++}o++}return null}function _f(i,t){for(var e=i.lastElementChild;e&&(e===X.ghost||K(e,"display")==="none"||t&&!Bd(e,t));)e=e.previousElementSibling;return e||null}function mi(i,t){var e=0;if(!i||!i.parentNode)return-1;for(;i=i.previousElementSibling;)i.nodeName.toUpperCase()!=="TEMPLATE"&&i!==X.clone&&(!t||Bd(i,t))&&e++;return e}function ZA(i){var t=0,e=0,n=qi();if(i)do{var s=Zo(i),o=s.a,r=s.d;t+=i.scrollLeft*o,e+=i.scrollTop*r}while(i!==n&&(i=i.parentNode));return[t,e]}function XB(i,t){for(var e in i)if(!!i.hasOwnProperty(e)){for(var n in t)if(t.hasOwnProperty(n)&&t[n]===i[e][n])return Number(e)}return-1}function Yn(i,t){if(!i||!i.getBoundingClientRect)return qi();var e=i,n=!1;do if(e.clientWidth<e.scrollWidth||e.clientHeight<e.scrollHeight){var s=K(e);if(e.clientWidth<e.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||e.clientHeight<e.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!e.getBoundingClientRect||e===document.body)return qi();if(n||t)return e;n=!0}}while(e=e.parentNode);return qi()}function QB(i,t){if(i&&t)for(var e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}function af(i,t){return Math.round(i.top)===Math.round(t.top)&&Math.round(i.left)===Math.round(t.left)&&Math.round(i.height)===Math.round(t.height)&&Math.round(i.width)===Math.round(t.width)}function sS(i,t){return function(){if(!cl){var e=arguments,n=this;e.length===1?i.call(n,e[0]):i.apply(n,e),cl=setTimeout(function(){cl=void 0},t)}}}function tU(){clearTimeout(cl),cl=void 0}function oS(i,t,e){i.scrollLeft+=t,i.scrollTop+=e}function rS(i){var t=window.Polymer,e=window.jQuery||window.Zepto;return t&&t.dom?t.dom(i).cloneNode(!0):e?e(i).clone(!0)[0]:i.cloneNode(!0)}function eU(){var i=[],t;return{captureAnimationState:function(){if(i=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(s){if(!(K(s,"display")==="none"||s===X.ghost)){i.push({target:s,rect:Qt(s)});var o=Gi({},i[i.length-1].rect);if(s.thisAnimationDuration){var r=Zo(s,!0);r&&(o.top-=r.f,o.left-=r.e)}s.fromRect=o}})}},addAnimationState:function(n){i.push(n)},removeAnimationState:function(n){i.splice(XB(i,{target:n}),1)},animateAll:function(n){var s=this;if(!this.options.animation){clearTimeout(t),typeof n=="function"&&n();return}var o=!1,r=0;i.forEach(function(a){var l=0,c=a.target,d=c.fromRect,m=Qt(c),p=c.prevFromRect,h=c.prevToRect,f=a.rect,g=Zo(c,!0);g&&(m.top-=g.f,m.left-=g.e),c.toRect=m,c.thisAnimationDuration&&af(p,m)&&!af(d,m)&&(f.top-m.top)/(f.left-m.left)===(d.top-m.top)/(d.left-m.left)&&(l=nU(f,p,h,s.options)),af(m,d)||(c.prevFromRect=d,c.prevToRect=m,l||(l=s.options.animation),s.animate(c,f,m,l)),l&&(o=!0,r=Math.max(r,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(t),o?t=setTimeout(function(){typeof n=="function"&&n()},r):typeof n=="function"&&n(),i=[]},animate:function(n,s,o,r){if(r){K(n,"transition",""),K(n,"transform","");var a=Zo(this.el),l=a&&a.a,c=a&&a.d,d=(s.left-o.left)/(l||1),m=(s.top-o.top)/(c||1);n.animatingX=!!d,n.animatingY=!!m,K(n,"transform","translate3d("+d+"px,"+m+"px,0)"),this.forRepaintDummy=iU(n),K(n,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),K(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){K(n,"transition",""),K(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},r)}}}}function iU(i){return i.offsetWidth}function nU(i,t,e,n){return Math.sqrt(Math.pow(t.top-i.top,2)+Math.pow(t.left-i.left,2))/Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))*n.animation}function sU(i){var t=i.sortable,e=i.rootEl,n=i.name,s=i.targetEl,o=i.cloneEl,r=i.toEl,a=i.fromEl,l=i.oldIndex,c=i.newIndex,d=i.oldDraggableIndex,m=i.newDraggableIndex,p=i.originalEvent,h=i.putSortable,f=i.extraEventProperties;if(t=t||e&&e[Qe],!!t){var g,E=t.options,M="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!vn&&!hl?g=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(n,!0,!0)),g.to=r||e,g.from=a||e,g.item=s||e,g.clone=o,g.oldIndex=l,g.newIndex=c,g.oldDraggableIndex=d,g.newDraggableIndex=m,g.originalEvent=p,g.pullMode=h?h.lastPutMode:void 0;var I=Gi(Gi({},f),ul.getEventProperties(n,t));for(var A in I)g[A]=I[A];e&&e.dispatchEvent(g),E[M]&&E[M].call(t,g)}}function Ie(i){sU(Gi({putSortable:fe,cloneEl:Nt,targetEl:k,rootEl:Dt,oldIndex:Jo,oldDraggableIndex:dl,newIndex:Xe,newDraggableIndex:Jn},i))}function X(i,t){if(!(i&&i.nodeType&&i.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(i));this.el=i,this.options=t=gn({},t),i[Qe]=this;var e={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(i.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return lS(i,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,a){r.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:X.supportPointer!==!1&&"PointerEvent"in window&&!ll,emptyInsertThreshold:5};ul.initializePlugins(this,i,e);for(var n in e)!(n in t)&&(t[n]=e[n]);cS(t);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=t.forceFallback?!1:rU,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Tt(i,"pointerdown",this._onTapStart):(Tt(i,"mousedown",this._onTapStart),Tt(i,"touchstart",this._onTapStart)),this.nativeDraggable&&(Tt(i,"dragover",this),Tt(i,"dragenter",this)),jd.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),gn(this,eU())}function dU(i){i.dataTransfer&&(i.dataTransfer.dropEffect="move"),i.cancelable&&i.preventDefault()}function Dd(i,t,e,n,s,o,r,a){var l,c=i[Qe],d=c.options.onMove,m;return window.CustomEvent&&!vn&&!hl?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=i,l.dragged=e,l.draggedRect=n,l.related=s||t,l.relatedRect=o||Qt(t),l.willInsertAfter=a,l.originalEvent=r,i.dispatchEvent(l),d&&(m=d.call(c,l,r)),m}function pf(i){i.draggable=!1}function mU(){gf=!1}function pU(i,t,e){var n=Qt(Yo(e.el,0,e.options,!0)),s=10;return t?i.clientX<n.left-s||i.clientY<n.top&&i.clientX<n.right:i.clientY<n.top-s||i.clientY<n.bottom&&i.clientX<n.left}function hU(i,t,e){var n=Qt(_f(e.el,e.options.draggable)),s=10;return t?i.clientX>n.right+s||i.clientX<=n.right&&i.clientY>n.bottom&&i.clientX>=n.left:i.clientX>n.right&&i.clientY>n.top||i.clientX<=n.right&&i.clientY>n.bottom+s}function uU(i,t,e,n,s,o,r,a){var l=n?i.clientY:i.clientX,c=n?e.height:e.width,d=n?e.top:e.left,m=n?e.bottom:e.right,p=!1;if(!r){if(a&&Pd<c*s){if(!pl&&(ml===1?l>d+c*o/2:l<m-c*o/2)&&(pl=!0),pl)p=!0;else if(ml===1?l<d+Pd:l>m-Pd)return-ml}else if(l>d+c*(1-s)/2&&l<m-c*(1-s)/2)return fU(t)}return p=p||r,p&&(l<d+c*o/2||l>m-c*o/2)?l>d+c/2?1:-1:0}function fU(i){return mi(k)<mi(i)?1:-1}function gU(i){for(var t=i.tagName+i.className+i.src+i.href+i.textContent,e=t.length,n=0;e--;)n+=t.charCodeAt(e);return n.toString(36)}function vU(i){zd.length=0;for(var t=i.getElementsByTagName("input"),e=t.length;e--;){var n=t[e];n.checked&&zd.push(n)}}function $d(i){return setTimeout(i,0)}function vf(i){return clearTimeout(i)}function EU(){function i(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return i.prototype={dragStarted:function(e){var n=e.originalEvent;this.sortable.nativeDraggable?Tt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Tt(document,"pointermove",this._handleFallbackAutoScroll):n.touches?Tt(document,"touchmove",this._handleFallbackAutoScroll):Tt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var n=e.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?Et(document,"dragover",this._handleAutoScroll):(Et(document,"pointermove",this._handleFallbackAutoScroll),Et(document,"touchmove",this._handleFallbackAutoScroll),Et(document,"mousemove",this._handleFallbackAutoScroll)),QA(),Fd(),tU()},nulling:function(){Vd=Ef=rl=bf=al=hf=uf=null,Gt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,n){var s=this,o=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(o,r);if(Vd=e,n||this.options.forceAutoScrollFallback||hl||vn||ll){ff(e,this.options,a,n);var l=Yn(a,!0);bf&&(!al||o!==hf||r!==uf)&&(al&&QA(),al=setInterval(function(){var c=Yn(document.elementFromPoint(o,r),!0);c!==l&&(l=c,Fd()),ff(e,s.options,c,n)},10),hf=o,uf=r)}else{if(!this.options.bubbleScroll||Yn(a,!0)===qi()){Fd();return}ff(e,this.options,Yn(a,!1),!1)}}},gn(i,{pluginName:"scroll",initializeByDefault:!0})}function Fd(){Gt.forEach(function(i){clearInterval(i.pid)}),Gt=[]}function QA(){clearInterval(al)}function Tf(){}function yf(){}var YB,vn,hl,qA,ll,tS,eS,iS,GA,cl,Qe,Wo,lf,ul,oU,Pe,k,Bt,lt,Dt,$s,Nd,Nt,Zn,Jo,Xe,dl,Jn,Rd,fe,Go,Ud,jd,Ns,Ci,cf,df,YA,KA,ol,qo,ml,pl,Od,Pd,be,mf,gf,zd,Wd,Hd,XA,rU,aS,lS,aU,lU,cS,dS,mS,Ps,cU,Gt,rl,Ef,bf,hf,uf,Vd,al,ff,pS,Ko,qd=u(()=>{YB="1.15.0";vn=fn(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),hl=fn(/Edge/i),qA=fn(/firefox/i),ll=fn(/safari/i)&&!fn(/chrome/i)&&!fn(/android/i),tS=fn(/iP(ad|od|hone)/i),eS=fn(/chrome/i)&&fn(/android/i),iS={capture:!1,passive:!1};GA=/\s+/g;Qe="Sortable"+new Date().getTime();Wo=[],lf={initializeByDefault:!0},ul={mount:function(t){for(var e in lf)lf.hasOwnProperty(e)&&!(e in t)&&(t[e]=lf[e]);Wo.forEach(function(n){if(n.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Wo.push(t)},pluginEvent:function(t,e,n){var s=this;this.eventCanceled=!1,n.cancel=function(){s.eventCanceled=!0};var o=t+"Global";Wo.forEach(function(r){!e[r.pluginName]||(e[r.pluginName][o]&&e[r.pluginName][o](Gi({sortable:e},n)),e.options[r.pluginName]&&e[r.pluginName][t]&&e[r.pluginName][t](Gi({sortable:e},n)))})},initializePlugins:function(t,e,n,s){Wo.forEach(function(a){var l=a.pluginName;if(!(!t.options[l]&&!a.initializeByDefault)){var c=new a(t,e,t.options);c.sortable=t,c.options=t.options,t[l]=c,gn(n,c.defaults)}});for(var o in t.options)if(!!t.options.hasOwnProperty(o)){var r=this.modifyOption(t,o,t.options[o]);typeof r!="undefined"&&(t.options[o]=r)}},getEventProperties:function(t,e){var n={};return Wo.forEach(function(s){typeof s.eventProperties=="function"&&gn(n,s.eventProperties.call(e[s.pluginName],t))}),n},modifyOption:function(t,e,n){var s;return Wo.forEach(function(o){!t[o.pluginName]||o.optionListeners&&typeof o.optionListeners[e]=="function"&&(s=o.optionListeners[e].call(t[o.pluginName],n))}),s}};oU=["evt"],Pe=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=n.evt,o=ZB(n,oU);ul.pluginEvent.bind(X)(t,e,Gi({dragEl:k,parentEl:Bt,ghostEl:lt,rootEl:Dt,nextEl:$s,lastDownEl:Nd,cloneEl:Nt,cloneHidden:Zn,dragStarted:ol,putSortable:fe,activeSortable:X.active,originalEvent:s,oldIndex:Jo,oldDraggableIndex:dl,newIndex:Xe,newDraggableIndex:Jn,hideGhostForTarget:dS,unhideGhostForTarget:mS,cloneNowHidden:function(){Zn=!0},cloneNowShown:function(){Zn=!1},dispatchSortableEvent:function(a){Ie({sortable:e,name:a,originalEvent:s})}},o))};Go=!1,Ud=!1,jd=[],pl=!1,Od=!1,mf=[],gf=!1,zd=[],Wd=typeof document!="undefined",Hd=tS,XA=hl||vn?"cssFloat":"float",rU=Wd&&!eS&&!tS&&"draggable"in document.createElement("div"),aS=function(){if(!!Wd){if(vn)return!1;var i=document.createElement("x");return i.style.cssText="pointer-events:auto",i.style.pointerEvents==="auto"}}(),lS=function(t,e){var n=K(t),s=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=Yo(t,0,e),r=Yo(t,1,e),a=o&&K(o),l=r&&K(r),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Qt(o).width,d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Qt(r).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&a.float&&a.float!=="none"){var m=a.float==="left"?"left":"right";return r&&(l.clear==="both"||l.clear===m)?"vertical":"horizontal"}return o&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=s&&n[XA]==="none"||r&&n[XA]==="none"&&c+d>s)?"vertical":"horizontal"},aU=function(t,e,n){var s=n?t.left:t.top,o=n?t.right:t.bottom,r=n?t.width:t.height,a=n?e.left:e.top,l=n?e.right:e.bottom,c=n?e.width:e.height;return s===a||o===l||s+r/2===a+c/2},lU=function(t,e){var n;return jd.some(function(s){var o=s[Qe].options.emptyInsertThreshold;if(!(!o||_f(s))){var r=Qt(s),a=t>=r.left-o&&t<=r.right+o,l=e>=r.top-o&&e<=r.bottom+o;if(a&&l)return n=s}}),n},cS=function(t){function e(o,r){return function(a,l,c,d){var m=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(o==null&&(r||m))return!0;if(o==null||o===!1)return!1;if(r&&o==="clone")return o;if(typeof o=="function")return e(o(a,l,c,d),r)(a,l,c,d);var p=(r?a:l).options.group.name;return o===!0||typeof o=="string"&&o===p||o.join&&o.indexOf(p)>-1}}var n={},s=t.group;(!s||kd(s)!="object")&&(s={name:s}),n.name=s.name,n.checkPull=e(s.pull,!0),n.checkPut=e(s.put),n.revertClone=s.revertClone,t.group=n},dS=function(){!aS&&lt&&K(lt,"display","none")},mS=function(){!aS&&lt&&K(lt,"display","")};Wd&&!eS&&document.addEventListener("click",function(i){if(Ud)return i.preventDefault(),i.stopPropagation&&i.stopPropagation(),i.stopImmediatePropagation&&i.stopImmediatePropagation(),Ud=!1,!1},!0);Ps=function(t){if(k){t=t.touches?t.touches[0]:t;var e=lU(t.clientX,t.clientY);if(e){var n={};for(var s in t)t.hasOwnProperty(s)&&(n[s]=t[s]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[Qe]._onDragOver(n)}}},cU=function(t){k&&k.parentNode[Qe]._isOutsideThisEl(t.target)};X.prototype={constructor:X,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(qo=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,k):this.options.direction},_onTapStart:function(t){if(!!t.cancelable){var e=this,n=this.el,s=this.options,o=s.preventOnFilter,r=t.type,a=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(a||t).target,c=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,d=s.filter;if(vU(n),!k&&!(/mousedown|pointerdown/.test(r)&&t.button!==0||s.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&ll&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Wi(l,s.draggable,n,!1),!(l&&l.animated)&&Nd!==l)){if(Jo=mi(l),dl=mi(l,s.draggable),typeof d=="function"){if(d.call(this,t,l,this)){Ie({sortable:e,rootEl:c,name:"filter",targetEl:l,toEl:n,fromEl:n}),Pe("filter",e,{evt:t}),o&&t.cancelable&&t.preventDefault();return}}else if(d&&(d=d.split(",").some(function(m){if(m=Wi(c,m.trim(),n,!1),m)return Ie({sortable:e,rootEl:m,name:"filter",targetEl:l,fromEl:n,toEl:n}),Pe("filter",e,{evt:t}),!0}),d)){o&&t.cancelable&&t.preventDefault();return}s.handle&&!Wi(c,s.handle,n,!1)||this._prepareDragStart(t,a,l)}}},_prepareDragStart:function(t,e,n){var s=this,o=s.el,r=s.options,a=o.ownerDocument,l;if(n&&!k&&n.parentNode===o){var c=Qt(n);if(Dt=o,k=n,Bt=k.parentNode,$s=k.nextSibling,Nd=n,Rd=r.group,X.dragged=k,Ns={target:k,clientX:(e||t).clientX,clientY:(e||t).clientY},YA=Ns.clientX-c.left,KA=Ns.clientY-c.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,k.style["will-change"]="all",l=function(){if(Pe("delayEnded",s,{evt:t}),X.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!qA&&s.nativeDraggable&&(k.draggable=!0),s._triggerDragStart(t,e),Ie({sortable:s,name:"choose",originalEvent:t}),Ke(k,r.chosenClass,!0)},r.ignore.split(",").forEach(function(d){nS(k,d.trim(),pf)}),Tt(a,"dragover",Ps),Tt(a,"mousemove",Ps),Tt(a,"touchmove",Ps),Tt(a,"mouseup",s._onDrop),Tt(a,"touchend",s._onDrop),Tt(a,"touchcancel",s._onDrop),qA&&this.nativeDraggable&&(this.options.touchStartThreshold=4,k.draggable=!0),Pe("delayStart",this,{evt:t}),r.delay&&(!r.delayOnTouchOnly||e)&&(!this.nativeDraggable||!(hl||vn))){if(X.eventCanceled){this._onDrop();return}Tt(a,"mouseup",s._disableDelayedDrag),Tt(a,"touchend",s._disableDelayedDrag),Tt(a,"touchcancel",s._disableDelayedDrag),Tt(a,"mousemove",s._delayedDragTouchMoveHandler),Tt(a,"touchmove",s._delayedDragTouchMoveHandler),r.supportPointer&&Tt(a,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(l,r.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){k&&pf(k),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;Et(t,"mouseup",this._disableDelayedDrag),Et(t,"touchend",this._disableDelayedDrag),Et(t,"touchcancel",this._disableDelayedDrag),Et(t,"mousemove",this._delayedDragTouchMoveHandler),Et(t,"touchmove",this._delayedDragTouchMoveHandler),Et(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?Tt(document,"pointermove",this._onTouchMove):e?Tt(document,"touchmove",this._onTouchMove):Tt(document,"mousemove",this._onTouchMove):(Tt(k,"dragend",this),Tt(Dt,"dragstart",this._onDragStart));try{document.selection?$d(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(t,e){if(Go=!1,Dt&&k){Pe("dragStarted",this,{evt:e}),this.nativeDraggable&&Tt(document,"dragover",cU);var n=this.options;!t&&Ke(k,n.dragClass,!1),Ke(k,n.ghostClass,!0),X.active=this,t&&this._appendGhost(),Ie({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(Ci){this._lastX=Ci.clientX,this._lastY=Ci.clientY,dS();for(var t=document.elementFromPoint(Ci.clientX,Ci.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Ci.clientX,Ci.clientY),t!==e);)e=t;if(k.parentNode[Qe]._isOutsideThisEl(t),e)do{if(e[Qe]){var n=void 0;if(n=e[Qe]._onDragOver({clientX:Ci.clientX,clientY:Ci.clientY,target:t,rootEl:e}),n&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);mS()}},_onTouchMove:function(t){if(Ns){var e=this.options,n=e.fallbackTolerance,s=e.fallbackOffset,o=t.touches?t.touches[0]:t,r=lt&&Zo(lt,!0),a=lt&&r&&r.a,l=lt&&r&&r.d,c=Hd&&be&&ZA(be),d=(o.clientX-Ns.clientX+s.x)/(a||1)+(c?c[0]-mf[0]:0)/(a||1),m=(o.clientY-Ns.clientY+s.y)/(l||1)+(c?c[1]-mf[1]:0)/(l||1);if(!X.active&&!Go){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(lt){r?(r.e+=d-(cf||0),r.f+=m-(df||0)):r={a:1,b:0,c:0,d:1,e:d,f:m};var p="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");K(lt,"webkitTransform",p),K(lt,"mozTransform",p),K(lt,"msTransform",p),K(lt,"transform",p),cf=d,df=m,Ci=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!lt){var t=this.options.fallbackOnBody?document.body:Dt,e=Qt(k,!0,Hd,!0,t),n=this.options;if(Hd){for(be=t;K(be,"position")==="static"&&K(be,"transform")==="none"&&be!==document;)be=be.parentNode;be!==document.body&&be!==document.documentElement?(be===document&&(be=qi()),e.top+=be.scrollTop,e.left+=be.scrollLeft):be=qi(),mf=ZA(be)}lt=k.cloneNode(!0),Ke(lt,n.ghostClass,!1),Ke(lt,n.fallbackClass,!0),Ke(lt,n.dragClass,!0),K(lt,"transition",""),K(lt,"transform",""),K(lt,"box-sizing","border-box"),K(lt,"margin",0),K(lt,"top",e.top),K(lt,"left",e.left),K(lt,"width",e.width),K(lt,"height",e.height),K(lt,"opacity","0.8"),K(lt,"position",Hd?"absolute":"fixed"),K(lt,"zIndex","100000"),K(lt,"pointerEvents","none"),X.ghost=lt,t.appendChild(lt),K(lt,"transform-origin",YA/parseInt(lt.style.width)*100+"% "+KA/parseInt(lt.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,s=t.dataTransfer,o=n.options;if(Pe("dragStart",this,{evt:t}),X.eventCanceled){this._onDrop();return}Pe("setupClone",this),X.eventCanceled||(Nt=rS(k),Nt.removeAttribute("id"),Nt.draggable=!1,Nt.style["will-change"]="",this._hideClone(),Ke(Nt,this.options.chosenClass,!1),X.clone=Nt),n.cloneId=$d(function(){Pe("clone",n),!X.eventCanceled&&(n.options.removeCloneOnHide||Dt.insertBefore(Nt,k),n._hideClone(),Ie({sortable:n,name:"clone"}))}),!e&&Ke(k,o.dragClass,!0),e?(Ud=!0,n._loopId=setInterval(n._emulateDragOver,50)):(Et(document,"mouseup",n._onDrop),Et(document,"touchend",n._onDrop),Et(document,"touchcancel",n._onDrop),s&&(s.effectAllowed="move",o.setData&&o.setData.call(n,s,k)),Tt(document,"drop",n),K(k,"transform","translateZ(0)")),Go=!0,n._dragStartId=$d(n._dragStarted.bind(n,e,t)),Tt(document,"selectstart",n),ol=!0,ll&&K(document.body,"user-select","none")},_onDragOver:function(t){var e=this.el,n=t.target,s,o,r,a=this.options,l=a.group,c=X.active,d=Rd===l,m=a.sort,p=fe||c,h,f=this,g=!1;if(gf)return;function E(le,Te){Pe(le,f,Gi({evt:t,isOwner:d,axis:h?"vertical":"horizontal",revert:r,dragRect:s,targetRect:o,canSort:m,fromSortable:p,target:n,completed:I,onMove:function(Ji,Ai){return Dd(Dt,e,k,s,Ji,Qt(Ji),t,Ai)},changed:A},Te))}function M(){E("dragOverAnimationCapture"),f.captureAnimationState(),f!==p&&p.captureAnimationState()}function I(le){return E("dragOverCompleted",{insertion:le}),le&&(d?c._hideClone():c._showClone(f),f!==p&&(Ke(k,fe?fe.options.ghostClass:c.options.ghostClass,!1),Ke(k,a.ghostClass,!0)),fe!==f&&f!==X.active?fe=f:f===X.active&&fe&&(fe=null),p===f&&(f._ignoreWhileAnimating=n),f.animateAll(function(){E("dragOverAnimationComplete"),f._ignoreWhileAnimating=null}),f!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(n===k&&!k.animated||n===e&&!n.animated)&&(qo=null),!a.dragoverBubble&&!t.rootEl&&n!==document&&(k.parentNode[Qe]._isOutsideThisEl(t.target),!le&&Ps(t)),!a.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function A(){Xe=mi(k),Jn=mi(k,a.draggable),Ie({sortable:f,name:"change",toEl:e,newIndex:Xe,newDraggableIndex:Jn,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),n=Wi(n,a.draggable,e,!0),E("dragOver"),X.eventCanceled)return g;if(k.contains(t.target)||n.animated&&n.animatingX&&n.animatingY||f._ignoreWhileAnimating===n)return I(!1);if(Ud=!1,c&&!a.disabled&&(d?m||(r=Bt!==Dt):fe===this||(this.lastPutMode=Rd.checkPull(this,c,k,t))&&l.checkPut(this,c,k,t))){if(h=this._getDirection(t,n)==="vertical",s=Qt(k),E("dragOverValid"),X.eventCanceled)return g;if(r)return Bt=Dt,M(),this._hideClone(),E("revert"),X.eventCanceled||($s?Dt.insertBefore(k,$s):Dt.appendChild(k)),I(!0);var w=_f(e,a.draggable);if(!w||hU(t,h,this)&&!w.animated){if(w===k)return I(!1);if(w&&e===t.target&&(n=w),n&&(o=Qt(n)),Dd(Dt,e,k,s,n,o,t,!!n)!==!1)return M(),w&&w.nextSibling?e.insertBefore(k,w.nextSibling):e.appendChild(k),Bt=e,A(),I(!0)}else if(w&&pU(t,h,this)){var P=Yo(e,0,a,!0);if(P===k)return I(!1);if(n=P,o=Qt(n),Dd(Dt,e,k,s,n,o,t,!1)!==!1)return M(),e.insertBefore(k,P),Bt=e,A(),I(!0)}else if(n.parentNode===e){o=Qt(n);var U=0,F,st=k.parentNode!==e,Y=!aU(k.animated&&k.toRect||s,n.animated&&n.toRect||o,h),mt=h?"top":"left",W=JA(n,"top","top")||JA(k,"top","top"),xt=W?W.scrollTop:void 0;qo!==n&&(F=o[mt],pl=!1,Od=!Y&&a.invertSwap||st),U=uU(t,n,o,h,Y?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,Od,qo===n);var pt;if(U!==0){var Ot=mi(k);do Ot-=U,pt=Bt.children[Ot];while(pt&&(K(pt,"display")==="none"||pt===lt))}if(U===0||pt===n)return I(!1);qo=n,ml=U;var Ut=n.nextElementSibling,At=!1;At=U===1;var te=Dd(Dt,e,k,s,n,o,t,At);if(te!==!1)return(te===1||te===-1)&&(At=te===1),gf=!0,setTimeout(mU,30),M(),At&&!Ut?e.appendChild(k):n.parentNode.insertBefore(k,At?Ut:n),W&&oS(W,0,xt-W.scrollTop),Bt=k.parentNode,F!==void 0&&!Od&&(Pd=Math.abs(F-Qt(n)[mt])),A(),I(!0)}if(e.contains(k))return I(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Et(document,"mousemove",this._onTouchMove),Et(document,"touchmove",this._onTouchMove),Et(document,"pointermove",this._onTouchMove),Et(document,"dragover",Ps),Et(document,"mousemove",Ps),Et(document,"touchmove",Ps)},_offUpEvents:function(){var t=this.el.ownerDocument;Et(t,"mouseup",this._onDrop),Et(t,"touchend",this._onDrop),Et(t,"pointerup",this._onDrop),Et(t,"touchcancel",this._onDrop),Et(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;if(Xe=mi(k),Jn=mi(k,n.draggable),Pe("drop",this,{evt:t}),Bt=k&&k.parentNode,Xe=mi(k),Jn=mi(k,n.draggable),X.eventCanceled){this._nulling();return}Go=!1,Od=!1,pl=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),vf(this.cloneId),vf(this._dragStartId),this.nativeDraggable&&(Et(document,"drop",this),Et(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),ll&&K(document.body,"user-select",""),K(k,"transform",""),t&&(ol&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),lt&&lt.parentNode&&lt.parentNode.removeChild(lt),(Dt===Bt||fe&&fe.lastPutMode!=="clone")&&Nt&&Nt.parentNode&&Nt.parentNode.removeChild(Nt),k&&(this.nativeDraggable&&Et(k,"dragend",this),pf(k),k.style["will-change"]="",ol&&!Go&&Ke(k,fe?fe.options.ghostClass:this.options.ghostClass,!1),Ke(k,this.options.chosenClass,!1),Ie({sortable:this,name:"unchoose",toEl:Bt,newIndex:null,newDraggableIndex:null,originalEvent:t}),Dt!==Bt?(Xe>=0&&(Ie({rootEl:Bt,name:"add",toEl:Bt,fromEl:Dt,originalEvent:t}),Ie({sortable:this,name:"remove",toEl:Bt,originalEvent:t}),Ie({rootEl:Bt,name:"sort",toEl:Bt,fromEl:Dt,originalEvent:t}),Ie({sortable:this,name:"sort",toEl:Bt,originalEvent:t})),fe&&fe.save()):Xe!==Jo&&Xe>=0&&(Ie({sortable:this,name:"update",toEl:Bt,originalEvent:t}),Ie({sortable:this,name:"sort",toEl:Bt,originalEvent:t})),X.active&&((Xe==null||Xe===-1)&&(Xe=Jo,Jn=dl),Ie({sortable:this,name:"end",toEl:Bt,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Pe("nulling",this),Dt=k=Bt=lt=$s=Nt=Nd=Zn=Ns=Ci=ol=Xe=Jn=Jo=dl=qo=ml=fe=Rd=X.dragged=X.ghost=X.clone=X.active=null,zd.forEach(function(t){t.checked=!0}),zd.length=cf=df=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":k&&(this._onDragOver(t),dU(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],e,n=this.el.children,s=0,o=n.length,r=this.options;s<o;s++)e=n[s],Wi(e,r.draggable,this.el,!1)&&t.push(e.getAttribute(r.dataIdAttr)||gU(e));return t},sort:function(t,e){var n={},s=this.el;this.toArray().forEach(function(o,r){var a=s.children[r];Wi(a,this.options.draggable,s,!1)&&(n[o]=a)},this),e&&this.captureAnimationState(),t.forEach(function(o){n[o]&&(s.removeChild(n[o]),s.appendChild(n[o]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return Wi(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(e===void 0)return n[t];var s=ul.modifyOption(this,t,e);typeof s!="undefined"?n[t]=s:n[t]=e,t==="group"&&cS(n)},destroy:function(){Pe("destroy",this);var t=this.el;t[Qe]=null,Et(t,"mousedown",this._onTapStart),Et(t,"touchstart",this._onTapStart),Et(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Et(t,"dragover",this),Et(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),jd.splice(jd.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Zn){if(Pe("hideClone",this),X.eventCanceled)return;K(Nt,"display","none"),this.options.removeCloneOnHide&&Nt.parentNode&&Nt.parentNode.removeChild(Nt),Zn=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Zn){if(Pe("showClone",this),X.eventCanceled)return;k.parentNode==Dt&&!this.options.group.revertClone?Dt.insertBefore(Nt,k):$s?Dt.insertBefore(Nt,$s):Dt.appendChild(Nt),this.options.group.revertClone&&this.animate(k,Nt),K(Nt,"display",""),Zn=!1}}};Wd&&Tt(document,"touchmove",function(i){(X.active||Go)&&i.cancelable&&i.preventDefault()});X.utils={on:Tt,off:Et,css:K,find:nS,is:function(t,e){return!!Wi(t,e,t,!1)},extend:QB,throttle:sS,closest:Wi,toggleClass:Ke,clone:rS,index:mi,nextTick:$d,cancelNextTick:vf,detectDirection:lS,getChild:Yo};X.get=function(i){return i[Qe]};X.mount=function(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];t[0].constructor===Array&&(t=t[0]),t.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(X.utils=Gi(Gi({},X.utils),n.utils)),ul.mount(n)})};X.create=function(i,t){return new X(i,t)};X.version=YB;Gt=[],bf=!1;ff=sS(function(i,t,e,n){if(!!t.scroll){var s=(i.touches?i.touches[0]:i).clientX,o=(i.touches?i.touches[0]:i).clientY,r=t.scrollSensitivity,a=t.scrollSpeed,l=qi(),c=!1,d;Ef!==e&&(Ef=e,Fd(),rl=t.scroll,d=t.scrollFn,rl===!0&&(rl=Yn(e,!0)));var m=0,p=rl;do{var h=p,f=Qt(h),g=f.top,E=f.bottom,M=f.left,I=f.right,A=f.width,w=f.height,P=void 0,U=void 0,F=h.scrollWidth,st=h.scrollHeight,Y=K(h),mt=h.scrollLeft,W=h.scrollTop;h===l?(P=A<F&&(Y.overflowX==="auto"||Y.overflowX==="scroll"||Y.overflowX==="visible"),U=w<st&&(Y.overflowY==="auto"||Y.overflowY==="scroll"||Y.overflowY==="visible")):(P=A<F&&(Y.overflowX==="auto"||Y.overflowX==="scroll"),U=w<st&&(Y.overflowY==="auto"||Y.overflowY==="scroll"));var xt=P&&(Math.abs(I-s)<=r&&mt+A<F)-(Math.abs(M-s)<=r&&!!mt),pt=U&&(Math.abs(E-o)<=r&&W+w<st)-(Math.abs(g-o)<=r&&!!W);if(!Gt[m])for(var Ot=0;Ot<=m;Ot++)Gt[Ot]||(Gt[Ot]={});(Gt[m].vx!=xt||Gt[m].vy!=pt||Gt[m].el!==h)&&(Gt[m].el=h,Gt[m].vx=xt,Gt[m].vy=pt,clearInterval(Gt[m].pid),(xt!=0||pt!=0)&&(c=!0,Gt[m].pid=setInterval(function(){n&&this.layer===0&&X.active._onTouchMove(Vd);var Ut=Gt[this.layer].vy?Gt[this.layer].vy*a:0,At=Gt[this.layer].vx?Gt[this.layer].vx*a:0;typeof d=="function"&&d.call(X.dragged.parentNode[Qe],At,Ut,i,Vd,Gt[this.layer].el)!=="continue"||oS(Gt[this.layer].el,At,Ut)}.bind({layer:m}),24))),m++}while(t.bubbleScroll&&p!==l&&(p=Yn(p,!1)));bf=c}},30),pS=function(t){var e=t.originalEvent,n=t.putSortable,s=t.dragEl,o=t.activeSortable,r=t.dispatchSortableEvent,a=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(!!e){var c=n||o;a();var d=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,m=document.elementFromPoint(d.clientX,d.clientY);l(),c&&!c.el.contains(m)&&(r("spill"),this.onSpill({dragEl:s,putSortable:n}))}};Tf.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var s=Yo(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(e,s):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:pS};gn(Tf,{pluginName:"revertOnSpill"});yf.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable,s=n||this.sortable;s.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),s.animateAll()},drop:pS};gn(yf,{pluginName:"removeOnSpill"});X.mount(new EU);X.mount(yf,Tf);Ko=X});var hS,uS,fS,gS,vS,Gd,ES,bS,_S,Lf=u(()=>{"use strict";hS="Кадрирование",uS="Двойной клик выделяет максимально возможный фрагмент.",fS="Если {MAX_IMAGES, plural, one {изображение} other {какое-то из изображений}} нужно скадрировать, сделайте это сейчас. После сохранения формы такой возможности уже не будет.{MAX_IMAGES, plural, one {} other { Также вы можете поменять порядок вывода изображений, перетаскивая их мышкой.}}",gS="Кадрировать",vS="Вставить в текст",Gd="Заменить",ES="Удалить",bS="Вы уверены?",_S="Готово"});var xf,bU,fl,yS=u(()=>{"use strict";xf=`uid_${Math.random()*1e9>>>0}`,bU=0,fl=i=>Object.prototype.hasOwnProperty.call(i,xf)&&i[xf]||(i[xf]=++bU)});var Jd,Zd,LS=u(()=>{"use strict";qd();R();Se();Lf();D();ge();xe();ln();$();j();yS();Fi();Ft();nt();Di();na();Jd=i=>i?i.split(",").map(t=>Number(t)):[],Zd=class{constructor(t,e,n){this.container_=n,this.form_=t,this.type_=e,this.fieldName_=e,this.ilgNamespace_=`ilg${this.getId()}`,this.replaceUploaders_=new Map,this.allowCrop_=!0,this.allowReplace_=!0,this.showNumbers_=!1,this.buttonClassName_="c-button",this.maxImages_=1,this.showCropInfo_=!0,this.removeConfirm_=this.removeConfirm_.bind(this),this.handleReplaceFileUploaded_=this.handleReplaceFileUploaded_.bind(this),this.handleFilesUploaded_=this.handleFilesUploaded_.bind(this),v.registerHandlers(this.ilgNamespace_,{remove:this.remove_,link:this.externalLink_,crop:this.showCrop_,cropsubmit:this.updateCrop_},this)}getId(){return this.id_||(this.id_=Xt())}getAllowCrop(){return this.allowCrop_}setAllowCrop(t){this.allowCrop_=t}setUploadUrl(t){this.uploadUrl_=t}setFieldName(t){this.fieldName_=t}getAllowLink(){return this.allowLink_}setAllowLink(t){this.allowLink_=t}getAllowReplace(){return this.allowReplace_}setAllowReplace(t){this.allowReplace_=t}getAspectRatio(){return this.aspectRatio_}setAspectRatio(t,e){this.aspectRatio_=new bt(t,e)}setShowNumbers(t){this.showNumbers_=t}getShowNumbers(){return this.showNumbers_}setButtonClass(t){this.buttonClassName_=t}getButtonClass(){return this.buttonClassName_}getMaxImages(){return this.maxImages_}setMaxImages(t){this.maxImages_=t}getShowCropInfo(){return this.showCropInfo_}setShowCropInfo(t){this.showCropInfo_=t}getUploader(){return this.uploader_}init(){this.container_.className="imagelist";let t=document.createElement("div");t.style.position="absolute",this.container_.after(t),this.hidden_=t;let e=0,n;for(;n=this.form_[`${this.fieldName_}-${e+1}`];e++)t.appendChild(n),this.renderThumbnail_(this.getItemInfo_(n));this.imagesNumber_=e,e>0&&(this.CropInfoRendered_=!0);let s=document.createElement("div");this.container_.after(s),this.uploader_=new Li(this.type_,this.buttonClassName_),this.uploadUrl_&&this.uploader_.setUploadUrl(this.uploadUrl_),this.updateUploaderMaxFiles_(),this.uploader_.render(s),this.uploader_.addEventListener("ready",this.handleFilesUploaded_),this.getMaxImages()!==1&&(this.container_.classList.add("imagelist-drag"),Ko.create(this.container_,{draggable:".imagelist-item",onSort:this.sync_.bind(this),animation:150,forceFallback:!0,ghostClass:"imagelist-ghost",handle:".imagelist-pic-wrapper"}))}prepareFileInfo_(t,e){let{thumbnail:n,preview:s}=t;return this.allowCrop_&&s&&this.renderCropInfo_(),C({id:t.id,index:e||++this.imagesNumber_,thumbnail:n[0],thumbnailSize:[n[1],n[2]]},this.allowCrop_&&s&&{preview:s[0],previewSize:[s[1],s[2]],crop:t.crop,cropMinSize:t.cropMinSize})}addItem_(t){let e=this.prepareFileInfo_(t);this.createHiddenField_(e);let n=this.renderThumbnail_(e);this.container_.appendChild(n)}replaceItem_(t,e){let n=Number(e.dataset.index),s=this.prepareFileInfo_(t,n),o=this.replaceUploaders_.get(fl(e));o&&o.dispose(),e.querySelector(".imagelist-pic-wrapper").innerHTML=this.getThumbnailWrapperHtml_(s);let r="imagelist-controls";e.querySelector(`.${r}`).innerHTML=this.getThumbnailControlsHtml_(s),this.initReplaceUploader_(e),this.resizeThumbnailCrop_(e,s),this.createHiddenField_(s),it.publish("imagelist-replace")}removeItem_(t){let e=this.replaceUploaders_.get(fl(t));e&&e.dispose(),t.remove(),this.imagesNumber_--}handleFilesUploaded_(t){t.detail.forEach(e=>this.addItem_(e)),this.updateUploaderMaxFiles_()}handleReplaceFileUploaded_(t){var e;if(t.detail.length>0){let n=(e=t.target.getElement())==null?void 0:e.closest(".imagelist-item");this.replaceItem_(t.detail[0],n)}}removeConfirm_(t){if(!this.removeConfirmItem_)return;document.removeEventListener("mousedown",this.removeConfirm_,!0),document.removeEventListener("touchstart",this.removeConfirm_,!0);let e=t.target;if(this.removeConfirmItem_.nextSibling.contains(e)){let s=e.closest(".imagelist-item"),o=this.replaceUploaders_.get(fl(s));o&&o.dispose(),this.removeItem_(s),this.sync_(),this.updateUploaderMaxFiles_()}this.showRemoveConfirm_(this.removeConfirmItem_,!1),this.removeConfirmItem_=void 0}remove_(t){let n=t.node().closest(".imagelist-control-remove");this.removeConfirmItem_=n,this.showRemoveConfirm_(n,!0),document.addEventListener("mousedown",this.removeConfirm_,!0),document.addEventListener("touchstart",this.removeConfirm_,!0)}showRemoveConfirm_(t,e){_(t,!e),_(t.nextSibling,e)}externalLink_(t){let n=t.node().closest(".imagelist-item"),{index:s}=n.dataset,o=this.getItemInfo_(this.form_[`${this.fieldName_}-${s}`]);it.publish("imagelist-link",this.type_,o)}updateUploaderMaxFiles_(){let t=Math.max(0,this.getMaxImages()-this.imagesNumber_);this.uploader_.setVisible(t>0),this.uploader_.setMaxFiles(t),it.publish("imagelist-update")}renderThumbnail_(t){let e=Ii(this.getThumbnailHtml_(t));return this.container_.appendChild(e),this.initReplaceUploader_(e),this.resizeThumbnailCrop_(e,t),e}initReplaceUploader_(t){if(!this.allowReplace_)return;let e=O("imagelist-control-replace",t),n=new Li(this.type_,"r-button-unstyled c-link c-link--text");this.uploadUrl_&&n.setUploadUrl(this.uploadUrl_),n.setButtonCaption(Gd),n.render(e),n.setVisible(!0),this.replaceUploaders_.set(fl(t),n),n.addEventListener("ready",this.handleReplaceFileUploaded_)}resizeThumbnailCrop_(t,e){if(!e.preview)return;let n=e.previewSize[0]>e.previewSize[1]?e.thumbnailSize[0]/e.previewSize[0]:e.thumbnailSize[1]/e.previewSize[1],s=[Math.round(e.crop[1]*n),Math.round((e.crop[0]+e.crop[2])*n),Math.round((e.crop[1]+e.crop[3])*n),Math.round(e.crop[0]*n)],o=O("imagelist-pic-mask",t);o.style.clip=`rect(${s[0]}px, ${s[1]}px, ${s[2]}px, ${s[3]}px)`}renderCropInfo_(){if(!this.showCropInfo_||this.CropInfoRendered_)return;let t=document.createElement("div");t.className="imagelist-warning",t.innerHTML=Z(fS,{MAX_IMAGES:this.maxImages_}),this.container_.before(t),this.CropInfoRendered_=!0}sync_(){let t=this.getItemsInfo_();this.hidden_.innerHTML="";let e=this.container_.children;for(let s=0,o;o=e[s];s++){let r=Number(o.dataset.index),a=t[r-1];if(a&&(a.index=s+1,this.createHiddenField_(a)),o.dataset.index=String(s+1),this.showNumbers_){let l=O("imagelist-number",o);l.textContent=String(s+1)}}let n=this.getItemsInfo_();it.publish("imagelist-sync",this.type_,t,n),it.publish("imagelist-update"),de(this.form_)}getItemInfo_(t){let{dataset:e}=t,n=e.key||t.name,s={index:Number(/(\d+)$/.exec(n)[1]),id:t.value,thumbnail:e.thumbnail,thumbnailSize:Jd(e.thumbnailSize)},{preview:o}=e;return o&&(s.preview=o,s.previewSize=Jd(e.previewSize),s.crop=Jd(e.crop),s.cropMinSize=Jd(e.cropMinSize)),s}getItemsInfo_(){return q("input",this.hidden_).map(this.getItemInfo_).sort((n,s)=>n.index>s.index?1:-1)}createHiddenField_(t){let e=`${this.fieldName_}-${t.index}`,n=S("input",{name:e,type:"hidden",value:t.id});n.dataset.thumbnail=t.thumbnail,n.dataset.thumbnailSize=t.thumbnailSize.join(","),t.preview&&(n.dataset.preview=t.preview,n.dataset.previewSize=t.previewSize.join(","),n.dataset.crop=t.crop.join(","),n.dataset.cropMinSize=t.cropMinSize.join(",")),this.form_[e]&&this.form_[e].remove(),this.hidden_.appendChild(n)}showCrop_(t){let n=t.node().closest(".imagelist-item");this.showCropInternal_(n)}showCropInternal_(t){this.cropItem_=t;let{index:e}=this.cropItem_.dataset,n=this.getItemInfo_(this.form_[`${this.fieldName_}-${e}`]);this.cropInfo_=n,this.cropDialog_=pe({anchor:O("imagelist-pic",this.cropItem_),className:"c-dialog-crop",title:hS,html:this.getCropDialogHtml_(n)}),this.crop_=this.cropDialog_.contentElement.querySelector("x-crop"),this.crop_.addEventListener("change",()=>{n.crop&&n.crop.length&&(this.crop_.naturalCrop={left:n.crop[0],top:n.crop[1],width:n.crop[2],height:n.crop[3]})},{once:!0})}updateCrop_(t){return T(this,null,function*(){ft(t);let e=this.crop_.naturalCrop,n=[e.left,e.top,e.width,e.height],s=new se(O("c-dialog-buttons__spinner",t.node())),o=yield L(this.uploader_.getUploadUrl(),"upx",{method:"POST",anchorEl:t.node().submit,spinner:s,body:{_:"crop",id:this.cropInfo_.id,crop:n.join(","),type:this.type_}});this.cropInfo_.crop=n;let r=this.form_[`${this.fieldName_}-${this.cropInfo_.index}`];r.value=o.id,r.dataset.crop=n.join(","),this.resizeThumbnailCrop_(this.cropItem_,this.cropInfo_),this.cropInfo_=void 0,this.cropItem_=void 0,this.cropDialog_.hide(),it.publish("imagelist-update")})}getThumbnailHtml_(t){return`<div class="imagelist-item" data-index="${t.index}"><div class="imagelist-pic-wrapper">${this.getThumbnailWrapperHtml_(t)}</div><div class="imagelist-controls">${this.getThumbnailControlsHtml_(t)}</div></div>`}getThumbnailWrapperHtml_(t){return`<div class="imagelist-pic" style="width:${t.thumbnailSize[0]}px;height:${t.thumbnailSize[1]}px"><img src="${t.thumbnail}" width=${t.thumbnailSize[0]} height=${t.thumbnailSize[1]}><div class="imagelist-pic-overlay"></div><img src="${t.thumbnail}" class="imagelist-pic-mask"></div>${this.showNumbers_?`<span class="imagelist-number">${t.index}</span>`:""}`}getThumbnailControlsHtml_(t){let e="imagelist-control",n=`${e}-caption c-link c-link--text`;return`${(this.allowCrop_&&t.preview?`<div class="${e} ${e}-crop"><span class="${n}" data-action="${this.ilgNamespace_}.crop" onclick="">${gS}</span></div>`:"")+(this.allowLink_?`<div class="${e} ${e}-link"><span class="${n}" data-action="${this.ilgNamespace_}.link" onclick="">${vS}</span></div>`:"")+(this.allowReplace_?`<div class="${e}-replace"></div>`:"")}<div class="${e} ${e}-remove"><span class="${n}" data-action="${this.ilgNamespace_}.remove" onclick="">${ES}</span></div><div style="display:none" class="${e} ${e}-remove-confirm">${bS}</div>`}getCropDialogHtml_(t){return`
<form data-keysubmit data-action="submit:${this.ilgNamespace_}.cropsubmit">
  <div class="c-dialog-desc" style="width:${t.previewSize[0]}px">${uS}</div>
  <x-crop class="c-dialog-crop__preview" src="${t.preview}" style="width:${t.previewSize[0]}px;height:${t.previewSize[1]}px"
    min-width="${t.cropMinSize[0]}" min-height="${t.cropMinSize[1]}"
    ${this.aspectRatio_?`aspect-ratio="${this.aspectRatio_.width}/${this.aspectRatio_.height}"`:""}></x-crop>
  <div class="c-dialog-buttons">
    <span class="c-dialog-buttons__spinner"></span>
    <button name="submit" class="c-button" type="submit">${_S}</button>
  </div>
</form>`}}});var xS={};ot(xS,{default:()=>Yd});var Yd,wS=u(()=>{"use strict";B();LS();Yd=class extends x{parsedInit(){let{dataset:t}=this.element,e=this.element.closest("form"),n=t.type||"",{fieldName:s}=t,o=Number(t.max)||1,r=t.ar?t.ar.split(",").map(Number):void 0,a=t.allowlink==="",l=new Zd(e,n,this.element);s&&l.setFieldName(s),l.setUploadUrl(d2Env.uploadUrl),l.setAllowLink(a),l.setMaxImages(o),l.setShowNumbers(o>1),d2Env.isMobile&&l.setAllowCrop(!1),r&&r.length===2&&l.setAspectRatio(r[0],r[1]),l.init()}}});var MS={};ot(MS,{default:()=>Xd});var _U,SS,TU,CS,yU,LU,Kd,AS,Xd,IS=u(()=>{"use strict";D();B();pa();_U="is-active",SS="Пн Вт Ср Чт Пт Сб Вс".split(" "),TU=i=>{let t=Array.from({length:24},(n,s)=>1<<s);return(i?i.split(",").map(n=>Number(n)):[0,0,0,0,0,0,0]).map(n=>t.map(s=>(n&s)!==0))},CS=i=>i.map(e=>e.map((n,s)=>n?1<<s:0).reduce((n,s)=>n|s)).join(","),yU=i=>{let t=Array.from({length:25},(o,r)=>`<th><i>${r}</i></th>`).join(""),e=Array.from({length:24},()=>"<td></td>").join(""),n=SS.map(o=>`<tr><th class="c-hselect__weekday"><span>${o}</span></th>${e}</tr>`).join(""),s=`<table class="c-hselect"><tr class="c-hselect__hours">${t}</tr>${n}</table>`;i.innerHTML=s},LU=i=>{let t=SS.map(o=>`<th><i>${o}</i></th>`),e=Array.from({length:7},()=>"<td></td>").join(""),s=`<table class="c-hselect">${Array.from({length:25},(o,r)=>`<tr${r===0?' class="c-hselect__weekdays"':""}>
      <th class="c-hselect__hour"><span>${r}</span>${r===0?t:e}</th>
    </tr>`).join("")}</table>`;i.innerHTML=s},Kd=(i,t)=>{d2Env.isMobile&&(t=t[0].map((n,s)=>t.map(o=>o[s])));let e=t.reduce((n,s)=>n.concat(s));i.forEach((n,s)=>n.classList.toggle(_U,e[s]))},AS=(i,t,e,n,s,o)=>{let r=Math.min(t,n),a=Math.min(e,s),l=Math.max(t,n),c=Math.max(e,s),d=(m,p)=>p>=r&&p<=l&&m>=a&&m<=c;return i.map((m,p)=>m.map((h,f)=>{let g=d(p,f);return o?h&&!g:h||g}))},Xd=class extends x{init(){this.container=document.createElement("div"),this.element.before(this.container),d2Env.isMobile?LU(this.container):yU(this.container),this.grid=q("td",this.container);let{width:e,height:n}=this.grid[0].getBoundingClientRect();this.gridWidth=e,this.gridHeight=n,this.data=TU(this.element.value),Kd(this.grid,this.data),this.pointerDown=this.pointerDown.bind(this),this.pointerMove=this.pointerMove.bind(this),this.pointerUp=this.pointerUp.bind(this),this.pointerClick=this.pointerClick.bind(this),this.pointerDown=this.pointerDown.bind(this),this.attachEvents()}getPosition(e){let n=this.container.getBoundingClientRect(),s=Math.max(0,Math.ceil((ci(e.clientX,n.left,n.left+n.width)-n.left)/this.gridWidth)-2),o=Math.max(0,Math.ceil((ci(e.clientY,n.top,n.top+n.height)-n.top)/this.gridHeight)-2);return{x:s,y:o}}pointerClick(e){let{x:n,y:s}=this.getPosition(e);this.data=AS(this.data,s,n,s,n,this.data[n][s]),Kd(this.grid,this.data),this.element.value=CS(this.data)}pointerDown(e){this.startHour=void 0,this.startDay=void 0,this.isClearMode=void 0,this.curData=void 0,document.addEventListener("mousemove",this.pointerMove),this.pointerMove(e)}pointerMove(e){e.preventDefault();let{x:n,y:s}=this.getPosition(e);this.startHour=this.startHour!==void 0?this.startHour:n,this.startDay=this.startDay!==void 0?this.startDay:s,this.isClearMode===void 0&&(this.isClearMode=this.data[s][n]||!1),this.curData=AS(this.data,this.startHour,this.startDay,n,s,this.isClearMode),Kd(this.grid,this.curData),document.addEventListener("mouseup",this.pointerUp)}pointerUp(){this.curData&&(this.data=this.curData,Kd(this.grid,this.data),this.element.value=CS(this.data)),this.attachEvents()}attachEvents(){this.container.removeEventListener("mousedown",this.pointerDown),document.removeEventListener("mousemove",this.pointerMove),document.removeEventListener("mouseup",this.pointerUp),d2Env.isMobile?this.container.addEventListener("click",this.pointerClick,{once:!0}):this.container.addEventListener("mousedown",this.pointerDown)}}});var RS,OS,gl,HS,xU,wU,CU,AU,DS,kS=u(()=>{"use strict";R();Se();D();$();Ft();nt();RS="albums",OS="/ajax/albums.cshtml",HS=(i,t)=>T(void 0,null,function*(){let e=t?t.key.value:i.dataset.key,n=C({_:"picadd",key:e},t&&{album:t.album.value,caption:t.caption.value,delete:t.delete.value}),s=yield L(OS,RS,{method:"POST",anchorEl:i,body:n});Ht();let o=gl&&vt(gl,"albums-pics-item");if(o&&s.delete&&o.dataset.isowner===""){o.remove(),it.publish("albums-grid");return}let r=Ii(s.html);if(gl.replaceWith(r),o){let l=O("js-album-caption",o).innerHTML,c=O("albums-pics-item-caption",o);c||(c=document.createElement("div"),c.className="albums-pics-item-caption",O("albums-pics-item-i",o).after(c)),l?c.innerHTML=l:c.remove(),it.publish("albums-grid")}}),xU=i=>{let t=i.node();gl=t,HS(t)},wU=i=>T(void 0,null,function*(){let t=i.node(),e={_:"geteditform",key:t.dataset.key},n=yield L(OS,`${RS}-edit`,{method:"POST",anchorEl:t,body:e}),{html:s}=n;!s||(gl=t,pe({anchor:t,title:n.header,html:s}))}),CU=i=>{ft(i);let t=i.node();HS(t.submitbtn,t)},AU=i=>{let t=i.node();t.form.delete.value="1",qs(t.form)},DS=()=>{v.registerHandlers("albums",{add:xU,edit:wU,submit:CU,delete:AU})}});var NS,PS,$S=u(()=>{"use strict";NS="Удалить содержимое?",PS="Содержимое Альбома будет утеряно навсегда. Вы уверены?"});var MU,vl,FS=u(()=>{"use strict";R();$S();ue();D();B();$();ve();j();Ft();nt();MU="/ajax/albums.cshtml",vl=class extends x{parsedInit(){this.maxAlbums_=Number(this.element.dataset.maxAlbums||100),this.listEl_=O("albums-list"),this.newEl_=O("albums-new"),v.registerHandlers("albumslist",{sortname:this.onSort_,sortsize:this.onSort_,sortupdate:this.onSort_,new:this.onNew_,edit:this.onEdit_,submit:this.onSubmit_,update:this.onAction_,create:this.onAction_,delete:this.onDelete_,cancel:this.cancel_},this)}onNew_(){this.cancel_(),this.active_=!0;let e=this.getForm_(!1);this.listEl_.appendChild(e),O("albums-form-input",e).focus(),_(this.newEl_,!1)}onEdit_(e){this.cancel_();let n=e.node(),s=vt(n,"albums-list-row"),o=O("albums-list-title-i",s),r=n.dataset.public==="1",a=n.dataset.protected==="1";this.active_=!0,this.activeRow_=s;let l=this.getForm_(!0,a,r,Oe(o.innerHTML));s.after(l),_(s,!1),O("albums-form-input",l).focus()}onDelete_(e){return T(this,null,function*(){let n=e.node();(yield et(NS,PS,n,Ae))&&this.onAction_(e)})}onSubmit_(e){ft(e);let n=e.node(),s=n.dataset.mode||"create";this.request_(s,n)}onAction_(e){let n=e.node(),s=e.actionName();this.request_(s,n)}onSort_(e){let n=e.actionName();this.cancel_();let s=wt("albums-list-row",this.listEl_),o=[],r;for(let l=0;r=s[l];l++){let c=O("c-counter",r);o[l]=[r,O("albums-list-title-i",r).textContent,c?Number(c.innerHTML):0,Number(r.dataset.update)]}let a=n==="sortname"?0:n==="sortsize"?1:2;o.sort((l,c)=>{let d=l[a+1],m=c[a+1];return a===0?d>m?1:-1:d<m?1:-1}),this.listEl_.append(...o.map(l=>l[0]))}cancel_(){if(!this.active_)return;this.active_=!1;let e=vt(this.element,"albums-list-row");e&&e.remove(),_(this.element,!1),this.newEl_.after(this.element),this.activeRow_&&(_(this.activeRow_,!0),this.activeRow_=void 0);let n=wt("albums-list-row",this.listEl_);_(this.newEl_,!(n&&n.length&&n.length>=this.maxAlbums_))}request_(e,n){return T(this,null,function*(){let s=this.element.title.value;if(!s)return;let o=this.element.public.value==="public",r=C(C({_:e},e!=="delete"&&{title:s,public:o}),e!=="create"&&{id:vt(this.element,"albums-list-row").previousElementSibling.dataset.id}),{html:a}=yield L(MU,"albums",{method:"POST",anchorEl:n,body:r}),c=vt(this.element,"albums-list-row").previousElementSibling;e!=="delete"&&(c?c.insertAdjacentHTML("afterend",a||""):this.listEl_.insertAdjacentHTML("beforeend",a||"")),this.cancel_(),e!=="create"&&c&&c.remove()})}getForm_(e,n,s,o){this.element.dataset.mode=e?"update":"create",_(this.element,!0),_(O("albums-form-newbtns",this.element),!e),_(O("albums-form-editbtns",this.element),e),_(O("albums-form-delete",this.element),!n),this.element.public.value=s?"public":"private",this.element.title.value=o||"";let r=document.createElement("div");return r.className="albums-list-row albums-list-row-new",r.appendChild(this.element),r}}});var IU,El,BS=u(()=>{"use strict";Se();D();B();IU="albums-pics-item",El=class extends x{parsedInit(){this.update(),this.element.style.visibility="visible",it.subscribe("albums-grid",this.update,this)}update(){let t,e=()=>-t,n=wt(IU,this.element);if(!n)return;let s=this.element.offsetWidth,o=[],r=[{left:0,top:0}];for(let l=0,c;c=n[l];l++){let{offsetWidth:d,offsetHeight:m}=c,p,h=0,f=0,g=0;t=r[0].top;let E;for(E=1;E<r.length&&r[E].left<d;E++)t=Math.max(t,r[E].top);p=t,f=E,g=e();for(let F=1;F<r.length&&r[F].left+d<=s;F++){for(t=r[F].top,E=F+1;E<r.length&&r[E].left-r[F].left<d;E++)t=Math.max(t,r[E].top);let st=e();st>g&&(h=F,f=E,p=t,g=st)}let{offsetLeft:M,offsetTop:I}=c,A={left:r[h].left,top:p};(I!==A.top||M!==A.left)&&o.push([c,A]);let w=r[f-1].top,P=r[f]?r[f].left:s,U=r[h].left+d;r[h].top=p+m,U<P?r.splice(h+1,f-h-1,{left:U,top:w}):r.splice(h+1,f-h-1)}for(let l=0,c;c=o[l];l++)c[0].style.top=`${c[1].top}px`,c[0].style.left=`${c[1].left}px`;let a=0;for(let l=0;l<r.length;l++)a=Math.max(a,r[l].top);this.element.style.height=`${a+20}px`}}});var US={};ot(US,{default:()=>RU});var RU,jS=u(()=>{"use strict";B();kS();FS();BS();RU=()=>{DS(),H("albums",vl),d2Env.isMobile||H("albumsgrid",El)}});var zS={};ot(zS,{default:()=>Qd});var OU,HU,DU,Qd,VS=u(()=>{"use strict";qd();D();B();$();OU=".js-car-drag-item",HU=".js-car-drag-handle",DU=".c-car-card[data-id]",Qd=class extends x{parsedInit(){Ko.create(this.element,C({draggable:OU,onSort:()=>this.save(),animation:150,forceFallback:!0,ghostClass:"c-car-draglist__item--ghost"},d2Env.isMobile&&{handle:HU}))}save(){let t=q(DU,this.element).map(n=>n.dataset.id),e=new URLSearchParams({_:"sort"});t.forEach(n=>e.append("ids",n)),L("/ajax/cars.cshtml",this.role,{method:"POST",silent:!0,body:e.toString()})}}});var qS={};ot(qS,{default:()=>em});var WS,tm,em,GS=u(()=>{"use strict";B();ae();WS={brand:"brand",model:"model",generation:"generation",productionYear:"productionYear",purchaseYear:"purchaseYear",info:"comment",color:"color",belongState:"kind",description:"text_start",engine:"engine",displacement:"displacement",transmission:"transmission",power:"power",wheelDrive:"wheelDrive",licensePlateNumber:"licensePlateNumber",VIN:"vin",text_ok:"text_ok"},tm=i=>{ht(`car_add_fill_${i}`)},em=class extends x{init(){this.trackedNames=[],this.element.addEventListener("change",this),this.element.addEventListener("input",this);let e=new MutationObserver(n=>{n.forEach(s=>{Array.from(s.addedNodes).filter(r=>r.nodeType===1).some(r=>r.classList.contains("imagelist-item"))&&(e.disconnect(),tm("photo"))})});e.observe(this.element,{childList:!0,subtree:!0}),tm("start")}handleEvent(e){let n=e.target;if(!this.descriptionTracked&&n.name==="description"){let s=Number(n.dataset.minlength);n.value.length>=s&&(this.descriptionTracked=!0,tm("text_ok"))}n.name&&n.name in WS&&!this.trackedNames.includes(n.name)&&(this.trackedNames.push(n.name),tm(WS[n.name]))}}});var wf,JS,ZS,YS,KS,im,XS,QS,nm,tM,eM,iM,nM,sM=u(()=>{"use strict";wf="Вы уверены?",JS="Вы не сможете восстановить страницу машины, все комментарии, фото и записи в бортжурнале после удаления.",ZS="Удалить мою машину",YS="Убрать машину из профиля",KS="Вы действительно хотите убрать этот автомобиль из своего профиля? Если да, то, пожалуйста, подтвердите своё решение. Если нет — отмените его. Пользуясь случаем, напоминаем, что без машины вы не сможете полноценно участвовать в жизни сайта.",im="Сделать бывшей",XS="Машина останется в вашем профиле с пометкой «моя бывшая», её бортжурнал, комментарии и подписчики останутся в целости и сохранности.",QS="Сохраним бортжурнал, комментарии и подписчиков. Добавим пометку «Бывшая»",nm="Удалить совсем",tM="Страница машины, все комментарии, фотографии и записи в бортжурнале будут удалены с сайта без возможности восстановления.",eM="Удалим страницу машины, все комментарии, фото и записи в бортжурнале. Без возможности восстановления.",iM="Да, я уверен",nM="Нет, я передумал"});var lM={};ot(lM,{default:()=>FU});var oM,Cf,aM,NU,rM,PU,$U,FU,cM=u(()=>{"use strict";ct();R();sM();De();nt();oM="/ajax/cars.cshtml",Cf=!1,aM=i=>{i.target.form.formaction.value=i.target.value},NU=i=>T(void 0,null,function*(){aM(i),Cf||(i.preventDefault(),(yield et(wf,JS,i.target,ZS))&&(Cf=!0,i.target.click())),Cf=!1}),rM=i=>{i.target.form.submitbtn.disabled=!1},PU=(i,t)=>d2Env.isMobile?y`
<form action="${oM}" class="x-form o-t-s" novalidate data-role="form">
  <input type="hidden" name="formaction">
  ${i||t?N:y`<div class="x-box">
      <h2 class="x-header o-b-xs">${im}</h2>
      <div class="x-text o-b-l">${QS}</div>
      <button class="c-button c-button--primary c-button--l u-100" type="submit" value="ex"
        @click=${aM}>${im}</button>
    </div>`}
  <div class="x-box">
    <h2 class="x-header o-b-xs">${nm}</h2>
    <div class="x-text o-b-l">${eM}</div>
    <button class="c-button ${i||t?"c-button--primary":""} c-button--l u-100" type="submit" value="delete"
      @click=${NU}>${nm}</button>
  </div>
</form>
`:y`
<div class="c-dialog-cardel">
  <div class="c-dialog-desc">${KS}</div>
  <form action="${oM}" class="c-dialog-form" novalidate>
    <div class="c-checkbox-group c-dialog-form__field">
      ${i||t?N:y`<label class="c-checkbox">
            <input type="radio" name="formaction" value="ex" @click=${rM}>
            <span class="c-checkbox__check c-checkbox__check--radio"></span>
            <span class="c-checkbox__label"><b>${im}</b><br>${XS}</span>
          </label>`}
      <label class="c-checkbox">
        <input type="radio" name="formaction" value="delete" ?checked=${t} @click=${rM}>
        <span class="c-checkbox__check c-checkbox__check--radio"></span>
        <span class="c-checkbox__label"><b>${nm}</b><br> ${tM}</span>
      </label>
    </div>
    <div class="o-group o-group--m o-group--end o-group--wide c-dialog-buttons">
      <span class="c-dialog-buttons__spinner is-skip js-spinner"></span>
      <button class="c-button c-button--m-no-padding" type="button" data-action="dialog.close" name="cancel">
        ${nM}
      </button>
      <button class="c-button" type="submit" name="submitbtn" ?disabled=${!t}>${iM}</button>
    </div>
  </form>
</div>
`,$U=i=>{let t=i.node(),e=t.dataset.params==="ex",n=t.dataset.params==="delete",s=new yt({anchor:t,title:d2Env.isMobile?YS:wf});z(PU(e,n),s.element),s.setFormDataTransformer(o=>({_:"archive",archive:o.formaction.value,id:t.dataset.id})),s.addEventListener("submit",()=>{Ht(),window.location.reload()}),s.show()},FU=()=>{v.registerHandlers("cardel",{confirm:$U})}});var dM={};ot(dM,{default:()=>zU});var Af,BU,UU,jU,zU,mM=u(()=>{"use strict";R();V();Ce();Af="caredit",BU=i=>{let t=i.node(),e=b(Af,"autoinfo");e&&(e.textContent=t.value)},UU=i=>{let t=i.node(),e=t.form.purchaseYear,n=Number(t.options[1].value),s=Number(t.value)||n,o=Number(e.value);e.options.length=1;for(let r=n;r>=s;r--){let a=document.createElement("option");e.appendChild(a),a.value=String(r),a.textContent=String(r),a.selected=o===r}},jU=i=>{let t=i.node(),n=t.options[t.selectedIndex].dataset.noTransmission==="",s=b(Af,"transmission");at(s).expand(!n)},zU=()=>{v.registerHandlers(Af,{info:BU,years:UU,engine:jU})}});var VU,pM,hM=u(()=>{"use strict";ss();VU=i=>String(Math.ceil(i)),pM=(i,t,e,n,s="easeInOutExpo",o=VU)=>{let r={num:t};return Be({targets:r,num:e,easing:s,duration:n,update:()=>{i.textContent=o(r.num)}})}});var uM={};ot(uM,{default:()=>ZU});var WU,qU,GU,JU,ZU,fM=u(()=>{"use strict";V();Si();hM();WU="is-hidden",qU=1500,GU="cubicBezier(.42,0,.58,1)",JU=i=>`${i.toFixed(2)}%`.replace(".",","),ZU=(i,t)=>{let e=(n,s,o)=>{tt(t,s,n).forEach(a=>{let l=Number(a.dataset.value)||0;pM(a,0,l,qU,GU,o)})};ee(i,{onEnter:()=>{i.classList.remove(WU),e(i,"percent",JU),e(i,"num")}})}});var gM,Sf,Mf,If,vM,EM,Rf,Of,bM,_M,TM,yM,LM,Hf,Df,kf,Nf,Pf,$f,xM,wM,CM,AM,SM,Ff=u(()=>{"use strict";gM="Вы уверены?",Sf="Вы действительно хотите отказать этому пользователю в доступе к сообществу? Укажите причину отказа.",Mf="Причина",If="Да, я уверен",vM="Нет, я передумал",EM="Принимайте новичка",Rf="Вступление в это сообщество требует подтверждения его модераторов. Вы также можете оставить комментарий.",Of="Отправить запрос",bM="Покинуть сообщество?",_M="Покинуть",TM="Пригласить в сообщество",yM="Исключить из сообщества",LM="Сменить владельца сообщества",Hf="Внимание. После передачи прав владения вы станете обычным участником сообщества.",Df="Ник или URL пользователя",kf="Комментарий пользователю",Nf="Пригласить",Pf="Выгнать",$f="Сменить",xM="Введите ник или URL пользователя",wM="Оставьте комментарий",CM="Приглашение успешно отправлено",AM="Пользователь успешно выгнан",SM="Сообщество успешно поменяло владельца"});var IM,bl,RM,OM,HM=u(()=>{"use strict";ct();Ff();IM=()=>d2Env.isMobile?y`
<form action="/ajax/community.apply.cshtml" class="x-form" novalidate data-keysubmit data-role="form">
  <div class="x-box x-box--ghost o-b-l">
    <div class="x-text">${Rf}</div>
  </div>
  <div class="x-box x-box--narrow">
    <div class="x-form__item is-focusable">
      <div class="x-form__body">
        <textarea class="x-textarea" name="text" data-autofocus data-role="taflexible"></textarea>
      </div>
    </div>
  </div>
  <div class="x-form__submit u-extend" data-role="sticky-button">
    <button class="c-button c-button--primary c-button--xl u-100" type="submit"
      name="submitbtn">${Of}</button>
  </div>
</form>
`:y`
<div class="c-dialog-desc">${Rf}</div>
<form class="c-dialog-form" action="/ajax/community.apply.cshtml" novalidate data-keysubmit>
  <div class="c-dialog-form__field">
    <textarea class="c-textarea" name="text" data-autofocus></textarea>
  </div>
  <div class="o-group o-group--m o-group--end o-group--wide c-dialog-buttons">
    <span class="c-dialog-buttons__spinner is-skip js-spinner"></span>
    <button class="c-button c-button--primary c-button--m-no-padding" type="submit" name="submitbtn">
      ${Of}
    </button>
  </div>
</form>
`,bl=(i,t,e,n)=>i==="invite"?t:i==="suspend"?e:n,RM=i=>d2Env.isMobile?y`
<form action="/ajax/community.${i}.cshtml" class="x-form" novalidate data-keysubmit data-role="form">
${i==="setowner"?y`
      <div class="x-box x-box--ghost o-b-l">
        <div class="x-text">${Hf}</div>
      </div>`:N}
<div class="x-box x-box--narrow o-t-s">
  <div class="x-form__item is-focusable">
    <div class="x-form__body">
      <input class="x-input" type="text" name="name" data-autofocus placeholder="${Df}" minlength="3">
    </div>
  </div>
  <div class="x-form__item is-focusable">
    <div class="x-form__body">
      <textarea class="x-textarea" name="text" data-role="taflexible"
        placeholder="${kf}"></textarea>
    </div>
  </div>
</div>
<div class="x-form__submit u-extend" data-role="sticky-button">
  <button class="c-button c-button--primary c-button--xl u-100" type="submit"
    name="submitbtn">${bl(i,Nf,Pf,$f)}</button>
</div>
</form>
`:y`
${i==="setowner"?y`<div class="c-dialog-desc">${Hf}</div>`:N}
<form class="c-dialog-form" action="/ajax/community.${i}.cshtml" novalidate data-keysubmit>
  <div class="c-dialog-form__field">
    <label class="c-dialog-form__label" for="dlg.u">${Df}</label>
    <input type="text" name="name" id="dlg.u" minlength="3" data-autofocus>
  </div>
  <div class="c-dialog-form__field">
    <label class="c-dialog-form__label" for="dlg.t">
      ${kf}
    </label>
    <textarea class="c-textarea" name="text" id="dlg.t"></textarea>
  </div>
  <div class="o-group o-group--m o-group--end o-group--wide c-dialog-buttons">
    <span class="c-dialog-buttons__spinner is-skip js-spinner"></span>
    <button class="c-button c-button--primary c-button--m-no-padding" type="submit" name="submitbtn">
      ${bl(i,Nf,Pf,$f)}
    </button>
  </div>
</form>
`,OM=()=>d2Env.isMobile?y`
<form action="/ajax/community.applicants.cshtml" class="x-form" novalidate data-keysubmit data-role="form">
  <div class="x-box x-box--ghost o-b-l">
    <div class="x-text">${Sf}</div>
  </div>
  <div class="x-box x-box--narrow">
    <div class="x-form__item is-focusable">
      <div class="x-form__body">
        <textarea class="x-textarea" name="text" data-autofocus data-role="taflexible"
          placeholder="${Mf}"></textarea>
      </div>
    </div>
  </div>
  <div class="x-form__submit u-extend" data-role="sticky-button">
    <button class="c-button c-button--primary c-button--xl u-100" type="submit"
      name="submitbtn">${If}</button>
  </div>
</form>
`:y`
<div class="c-dialog-desc">${Sf}</div>
<form class="c-dialog-form" action="/ajax/community.applicants.cshtml" novalidate data-keysubmit>
  <div class="c-dialog-form__field">
    <label for="dlg.t">${Mf}</label>
    <textarea class="c-textarea" name="text" id="dlg.t" data-autofocus></textarea>
  </div>
  <div class="o-group o-group--m o-group--end o-group--wide c-dialog-buttons">
    <span class="c-dialog-buttons__spinner is-skip js-spinner"></span>
    <button class="c-button c-button--m-no-padding" type="button" data-action="dialog.close">${vM}</button>
    <button type="submit" name="submitbtn" class="c-button c-button--primary">${If}</button>
  </div>
</form>
`});var $M={};ot($M,{default:()=>QU});var YU,DM,kM,NM,PM,KU,XU,Bf,QU,FM=u(()=>{"use strict";ct();R();Ff();D();$();j();De();nt();In();Di();We();HM();YU="community",DM=i=>T(void 0,null,function*(){let t=i.actionName(),e=i.node();yield L("/ajax/community.inviteaccept.cshtml",{method:"POST",body:{_:t,community:e.value},anchorEl:e}),window.location.reload()}),kM=i=>{let t=vt(i,"js-request");t.classList.add("is-deleted"),t.querySelectorAll("button").forEach(n=>{n.disabled=!0})},NM=i=>T(void 0,null,function*(){let t=i.actionName(),e=i.node(),n=vt(e,"js-request");if(n&&n.classList.contains("is-deleted"))return;let s=vt(e,"js-communityid").dataset.id;if(t==="accept"){let o=O("js-spinner",e.parentElement),r=new se(o);yield L("/ajax/community.applicants.cshtml",{method:"POST",body:{_:"accept",community:s,user:e.value},anchorEl:e,spinner:r}),kM(e)}else{let o=new yt({anchor:e,className:"c-dialog-comm",title:gM});z(OM(),o.element),o.setFormDataTransformer(r=>({_:"decline",community:s,user:e.value,comment:r.text.value})),o.addEventListener("submit",()=>{kM(e)}),o.show()}}),PM=i=>{let e=i.node().parentElement.nextElementSibling;e&&_(e,e.style.display==="none")},KU=i=>T(void 0,null,function*(){let t=i.node();if(Ge(t))return;if(t.dataset.open==="1"){yield L("/ajax/community.apply.cshtml",{method:"POST",body:{community:t.value},anchorEl:t}),window.location.reload();return}let e=new yt({anchor:t,className:"c-dialog-comm",title:EM});z(IM(),e.element),e.setFormDataTransformer(n=>({community:t.value,text:n.text.value})),e.addEventListener("submit",()=>{window.location.reload()}),e.show()}),XU=i=>T(void 0,null,function*(){let t=i.node();!(yield et(bM,void 0,t,_M))||(yield L("/ajax/community.leave.cshtml",{method:"POST",body:{community:t.value},anchorEl:t}),window.location.href="/communities/")}),Bf=i=>{let t=i.actionName(),e=i.node(),n=bl(t,TM,yM,LM),s=new yt({anchor:e,className:"c-dialog-comm",title:n});z(RM(t),s.element),s.setFormDataTransformer(o=>({community:e.value,name:o.name.value,text:o.text.value||""})),s.addEventListener("submit",()=>{setTimeout(()=>{Mt(bl(t,CM,AM,SM),e)})}),s.show(),cn(s.form,["name",xM,"minlength"]),t!=="invite"&&cn(s.form,["text",wM,"required"])},QU=()=>{v.registerHandlers(YU,{invaccept:DM,invreject:DM,accept:NM,reject:NM,history:PM,requests:PM,join:KU,leave:XU,invite:Bf,suspend:Bf,setowner:Bf})}});var zM={};ot(zM,{default:()=>e2});var _l,Uf,BM,jM,UM,t2,e2,VM=u(()=>{"use strict";R();V();j();_l="comm-search",BM=(i,t)=>{let e=b(_l,t,i);return e?e.textContent:""},jM=i=>(Uf||(Uf=tt(_l,"row",i).map(e=>({element:e,title:BM(e,"alpha").toLowerCase(),members:Number(BM(e,"members"))||0}))),Uf),UM=i=>{let t=b(_l,"list");if(!t)return;let e=jM(t),s=i.node().value==="alpha";e.sort((o,r)=>{let a=s?o.title:o.members,l=s?r.title:r.members;return s?a>l?1:-1:a<l?1:-1}),e.forEach(o=>{t.appendChild(o.element)})},t2=i=>{let t=b(_l,"list");if(!t)return;let e=jM(t),s=i.node().value.toLowerCase();e.forEach(o=>{_(o.element,o.title.includes(s))})},e2=()=>{v.registerHandlers(_l,{filter:t2,members:UM,alpha:UM})}});var qM={};ot(qM,{default:()=>sm});var jf,WM,sm,GM=u(()=>{"use strict";jr();B();ge();ve();j();ye();jf=i=>i.querySelectorAll("input:checked").length>1,WM=i=>{let t=i.querySelector("input:checked");t&&Lt(t,i,!0)},sm=class extends x{parsedInit(){this.form=this.element.closest("form"),this.text=this.slot("text"),this.defaultModels=(this.form.dataset.models||"").split(","),this.defaultGenerations=(this.form.dataset.generations||"").split(","),this.brand=this.slot("brand"),this.model=this.slot("model"),this.generation=this.slot("generation"),this.brand.addEventListener("click",()=>this.renderModels()),this.model.addEventListener("click",()=>this.renderGenerations()),this.generation.addEventListener("click",()=>this.update()),this.renderModels()}renderModels(){return T(this,arguments,function*(e=yn(this.form,"brand")){if(this.curBrand===e){this.update();return}let n=yield ws.get(e,this.brand);this.curBrand=e,_(this.model,n.length>0&&n[0].model!=="selfmade"&&n[0].model!=="other"),this.model.innerHTML=n.map(s=>`
<label class="c-checkbox">
  <input type="checkbox" name="model" value="${s.id}"${this.defaultModels.includes(s.id)?" checked":""}>
  <span class="c-checkbox__check"></span><span class="c-checkbox__label" data-slot="cars-m-select.title">${It(s.model)}</span>
</label>
    `).join(""),this.defaultModels.length>0&&WM(this.model),this.defaultModels=[],this.renderGenerations()})}renderGenerations(){return T(this,null,function*(){let e=yn(this.form,"brand"),n=yn(this.form,"model"),s=yield ws.get(e,this.brand),o=s.find(a=>a.id===n),r=o?o.generations:[];_(this.generation,r.length>0&&s[0].model!=="selfmade"&&s[0].model!=="other"),this.generation.innerHTML=r.map(a=>`
<label class="c-checkbox">
  <input type="checkbox" name="generation" value="${a[0]}"${this.defaultGenerations.includes(a[0])?" checked":""}>
  <span class="c-checkbox__check"></span><span class="c-checkbox__label" data-slot="cars-m-select.title">${It(a[1])}</span>
</label>
    `).join(""),this.defaultGenerations.length>0&&WM(this.generation),this.defaultGenerations=[],this.update()})}update(){let e=jf(this.generation),n=jf(this.model),s=jf(this.brand);this.disableList(this.generation,n||s),this.disableList(this.model,s),this.freezeList(this.model,e),this.freezeList(this.brand,e||n);let o=this.getCaption(this.brand),r=this.getCaption(this.model),a=this.getCaption(this.generation),l=[],c=Math.max(o.length,r.length,a.length);for(let d=0;d<c;d++)a.length>0?l[d]=`${o[0]} ${r[0]} ${a[d]}`:r.length>0?l[d]=`${o[0]} ${r[d]}`:o.length>0&&(l[d]=o[d]),l[d]=It(l[d]);this.text.innerHTML=l.length>0?`<span>${l.join("</span>, <span>")}</span>`:"",_(this.text,l.length>0)}freezeList(e,n){e.querySelectorAll("input").forEach(s=>s.disabled=n?!s.checked:!1)}disableList(e,n){e.classList.toggle("is-disabled",n),e.querySelectorAll("input").forEach(s=>{n&&(s.checked=!1),s.disabled=n})}getCaption(e){return Array.from(e.querySelectorAll("input:checked")).map(n=>this.slot("title",n.parentElement).innerHTML)}}});var JM={};ot(JM,{default:()=>om});var i2,n2,s2,o2,r2,om,ZM=u(()=>{"use strict";R();D();B();j();ye();We();i2="is-si",n2="is-si-elements",s2="is-si-lownoise",o2="is-si-mint",r2=()=>{["cat-comfort","effect-high-noise","effect-low-noise","type-of-noise","cat-saloon-fixed","cat-saloon"].forEach(t=>{new Image().src=`/assets/images/orders/cats/${t}.png`})},om=class extends x{parsedInit(){let t=this.element,e=this.slots("step"),n=e.map(f=>Number(f.dataset.step||-1)),s=Math.max(...n),o=()=>J('input[name="Category"]:checked',t).dataset.soundinsulation==="",r=Number(t.dataset["current-step"]||1),a=o(),l=a?"":t.Description.value,c=()=>{let f=this.slot("submitted",document.body);f&&(_(t,!0),_(f,!1))},d=f=>{r=o()?Math.min(s,Math.max(1,r+(f?1:-1))):f?s:1,e.forEach(E=>{_(E,Number(E.dataset.step||-1)===r)});let g=this.slot("anchor",document.body);Lt(g)},m=()=>{let f=J('input[name="SoundInsulationResult"]:checked',t),g=f?f.dataset.lownoise==="":!1;t.classList.toggle(s2,g);let E=J('input[name="SoundInsulationScope"]:checked',t),M=E?E.dataset.wholeinterior==="":!1;t.classList.toggle(n2,M);let I=J('input[name="SoundInsulationInterior"]:checked',t),A=I?I.dataset.mint==="":!1;t.classList.toggle(o2,A);let w=o();if(w){let P=[],U=f&&f.value;P.push(`<b>Хочу</b>
${U==="1"?"Максимальной тишины в салоне":U==="2"?"Заметно снизить шум при езде":U==="3"?"Избавиться от конкретного сверчка, скрипа, стука":""}`);let F=E&&E.value;P.push(`<b>Шумоизоляция</b>
${F==="1"?"Всего салона":F==="2"?"Нескольких элементов":F==="3"?"Одного элемента":F==="4"?"На усмотрение мастера":""}`);let st=t.SoundInsulationScopeItems.value;st.trim()!==""&&!M&&P.push(`<b>Элементы</b>
${st.trim()}`);let Y=t.SoundInsulationScopeDescription.value;Y.trim()!==""&&P.push(`<b>Заметные сверчки, скрипы, стуки</b>
${Y.trim()}`);let mt=I&&I.value;P.push(`<b>Салон</b>
${mt==="1"?"Разбирали полностью":mt==="2"?"Разбирали частично":mt==="3"?"Никогда не разбирали":mt==="4"?"Неизвестно":""}`),a||(l=t.Description.value),t.Description.value=P.join(`

`)}else a!==w&&(t.Description.value=l);a=w,t.classList.toggle(i2,w)},p=()=>{d(!1)},h=()=>{let f=WE(t),g=r===2&&f&&f[0]==="SoundInsulationResult",E=r===3&&f&&f[0]==="SoundInsulationScope",M=r===4&&f&&f[0]==="SoundInsulationInterior";(f===void 0||o()&&!g&&!E&&!M)&&(m(),d(!0))};v.registerHandlers(this.role,{reveal:c,update:m,prev:p,next:h}),m(),r2()}}});var YM,KM,XM,QM,tI,eI,iI,zf,nI,Vf,Wf,sI,qf,oI,Gf,rI,aI,lI,cI,dI,mI,pI,hI,uI,fI,gI,rm=u(()=>{"use strict";YM="{Count, plural, =0 {} one {#{HasMore, select, true {+} other {}} новая} other {#{HasMore, select, true {+} other {}} новых}}",KM="Темы заявок: {Count}",XM="Марки машин: {Count}",QM="{State, select, New {Ждёт первого предложения} Awaiting {Ждёт предложений} Accepted {В работе} Completed {Досталась другим} Expired {Больше не актуальна} other {}}",tI="Сделать предложение{Price, select, none {} other { за {Price} ₽}}",eI="Пропустить",iI="Машина",zf="VIN",nI="{Vin, select, none {Не указан} other {{Vin}}}",Vf="Район",Wf="Выезд или доставка",sI="{TowTruck, select, true {Желательно} other {Не нужно}}",qf="Год выпуска",oI="{ProductionYear, select, none {Не указан} other {{ProductionYear}}}{ModelYear, select, none {} other { (поколение {ModelYear})}}",Gf="Пробег",rI="{Mileage, select, none {Не указан} other {{Mileage} км}}",aI="Срочность",lI="{Urgency, select, Day {Как можно скорее} Week {На неделе} other {Без спешки}}",cI="Запчасти",dI="{Parts, select, true {Нужны} other {Свои}}",mI="{Number, select, none {б/н} other {№{Number}}}",pI="Не показывать тему «{CategoryName}»",hI="Скрыть все заявки по этой теме?",uI="Чтобы снова видеть их, отметьте тему в настройках наверху страницы",fI="Марки машин",gI="Темы заявок"});var a2,am,l2,lm,vI,EI,c2,d2,m2,Tl,bI=u(()=>{"use strict";ss();Se();rm();D();B();xe();j();hn();on();a2="js-order",am="is-absolute",l2="is-empty",lm=300,vI="cubicBezier(.39,.67,.7,1.13)",EI="easeInSine",c2=-200,d2=1.05,m2=.9,Tl=class extends x{parsedInit(){let t=this.element,e=document.querySelector(`.${a2}`),n=document.createElement("div");n.style.position="relative";let s=n.cloneNode(!1);n.style.zIndex="2",e.before(n),t.before(s),n.appendChild(e),s.appendChild(t);let o,r;function a(){let c=e.offsetHeight+hi(e,"margin-bottom"),m=o.offsetHeight+hi(o,"margin-bottom")-c,p=Be.timeline().add({targets:e,translateY:[0,c2],opacity:[1,0],scale:[1,d2],duration:lm,easing:EI,elasticity:0,offset:0}).add({targets:o,translateY:[c,0],opacity:[0,1],duration:lm,easing:vI,elasticity:0,offset:0}).add({targets:t,translateY:[0,-c],opacity:[1,0],duration:lm,easing:vI,elasticity:0,offset:0}).add({targets:r,translateY:[m,m],opacity:[0,1],scale:[m2,1],duration:lm,easing:EI,elasticity:0,offset:0});p.complete=()=>{setTimeout(()=>{e.remove(),t.remove(),e=o,t=r,e.classList.remove(am),e.style.cssText="",t.classList.remove(am),t.style.cssText=""},1)},ze()}function l(c){function d(h,f){return d2Env.isMobile?`<tr><th>${h}</th><td>${f}</td></tr>`:`<div><strong>${h}</strong> ${f}</div>`}let m=!c,p="<div></div>";if(!m){let h=Z(QM,{State:c.state}),f=Z(mI,{Number:c.displayNumber||"none"}),g=Z(tI,{Price:c.price||"none"}),E=Z(pI,{CategoryName:c.categoryName||"none"}),M=Z(nI,{Vin:c.vin||"none"}),I=c.locationTags&&c.locationTags.length>0?c.locationTags.join(", "):c.location||"",A=Z(sI,{TowTruck:c.services&&c.services.towTruck||""}),w=Z(oI,{ProductionYear:c.productionYear||"none",ModelYear:c.modelYear||"none"}),P=Z(rI,{Mileage:c.mileage||"none"}),U=Z(lI,{Urgency:c.urgency||""}),F=Z(dI,{Parts:c.services&&c.services.parts||""}),{photo:st}=c,Y="";if(st){let{image:pt,thumbnail:Ot,isFallback:Ut}=st;Y=`<div class="c-order__pic">
          ${Ut?"":`<a class="c-lightbox-anchor" href="${pt.url}" data-action="lightbox.zoom" data-size="${pt.width},${pt.height}">`}
            ${ca({images:[{url:Ot.url,width:Ot.width,height:Ot.height}],color:Ot.htmlPrimaryColor},void 0,Ut?{className:"u-grayscale"}:void 0)}
          ${Ut?"":"</a>"}
        </div>`}let mt=c.state==="Awaiting"?"c-order__state--awaiting":c.state==="Accepted"?"c-order__state--accepted":c.state==="Expired"?"c-order__state--expired":c.state==="New"?"c-order__state--new":"",W=`<h3 class="c-header u-break-word">${c.categoryName}<span class="c-order__state ${mt}">${h}</span></h3>`,xt=`<div class="c-order__text text u-break-word">${c.description||""}</div>`;p=`<div class="c-block c-order js-order">
        <div class="c-order__body">
          ${d2Env.isMobile?`${W}<div class="c-order__info">${xt}${Y}</div>`:`<div class="c-order__info">${W}${xt}</div>${Y}`}
        </div>
        <div class="c-order__meta js-orders-meta" data-next>
          ${d2Env.isMobile?'<table class="c-order__meta-table">':'<div class="o-grid o-grid--4 c-order__meta-table">'}
            ${d(iI,c.generation||"")}
            ${d2Env.isMobile?d(qf,w)+d(Gf,P)+d(zf,M)+d(Vf,I)+d(Wf,A):d(zf,M)+d(Vf,I)+d(Wf,A)+d(qf,w)+d(Gf,P)}
            ${d(aI,U)}
            ${d(cI,F)}
          ${d2Env.isMobile?"</table>":"</div>"}
          <div class="o-group o-group--v o-group--justify c-order__bottom">
              <div>${f}</div>
              ${c.dismissLink?`<div>
                  <button class="r-button-unstyled c-link c-link--gray" data-url="${c.dismissLink}" data-action="orders.dismiss" data-ym-target="order_decline_remove_category">${E}</button>
                </div>`:""}
          </div>
        </div>
        <div class="c-block__more c-block__more--block c-order__controls js-orders-controls" data-next>
          <div class="o-group o-group--m o-group--v">
            <button class="c-button c-button--primary c-button--green u-mobile-100" data-action="orders.accept" data-url="${c.acceptLink}">${g}</button>
            <button class="c-button u-mobile-100" data-action="orders.discard" data-url="${c.rejectLink}" data-ym-target="order_decline_skip">${eI}</button>
          </div>
        </div>
      </div>`}o=Ii(p),o.style.opacity="0",o.classList.add(am),e.before(o),r=t.cloneNode(!0),r.classList.add(am),r.classList.toggle(l2,m),t.before(r),a()}it.subscribe("orders-next",l)}}});function b2(i){return T(this,null,function*(){let t=i.node(),{url:e}=t.dataset;if(!e)return;if(!(t.dataset.confirm==="")||(yield et(Bc,void 0,t))){let s=yield L(e,yl,{method:"POST",anchorEl:t});E2(t,s.url,Oe(s.replyTemplate))}})}var yl,_I,TI,p2,h2,u2,yI,f2,g2,v2,cm,Zf,LI,E2,xI,_2,T2,y2,wI,CI=u(()=>{"use strict";R();Se();ue();rm();xe();$();ve();j();Ft();nt();yl="orders",_I=10,TI="js-order-counter",p2="js-order-categories",h2="js-order-brands",u2="js-orders-form",yI=".js-orders-controls",f2=".js-orders-meta",g2="c-order__controls",v2=["c-block__more","c-block__more--block"],cm=i=>(i.closest(yI)||i.closest(f2)).dataset.next==="",Zf=(i,t,e)=>{let n=Number(e),s=document.querySelector(`.${i}`);if(s&&!Number.isNaN(n)){let o=i===TI&&n>=_I;s.textContent=Z(t,{Count:o?_I-1:n,HasMore:o})}},LI=i=>{Zf(TI,YM,i.awaitingOrderCount),Zf(p2,KM,i.filters.categoryCount),Zf(h2,XM,i.filters.brandCount)},E2=(i,t,e)=>{let n=document.querySelector(`.${u2}`),s=i.closest(yI);if(!s||!n)return;let o=n.cloneNode(!0);if(o.action=t,s.innerHTML="",s.classList.remove(g2),s.classList.add(...v2),s.appendChild(o),e){let r=e.replace("[text]",""),a=e.indexOf("[text]");o.text.value=r,o.text.addEventListener("focus",()=>{o.text.setSelectionRange(a,a)},{once:!0})}_(o,!0)};xI=i=>{let t=i.node(),{url:e}=t.dataset;!e||L(e,yl,{method:"POST",anchorEl:t,body:cm(t)?{next:!0}:{}}).then(n=>{cm(t)&&(LI(n),it.publish("orders-next",n.order))})},_2=i=>T(void 0,null,function*(){let t=i.node();(yield et(hI,uI,t))&&xI(i)}),T2=i=>{ft(i);let t=i.node();!t.text.value||L(t.action,yl,{method:"POST",anchorEl:t,body:{text:t.text.value,next:cm(t)}}).then(n=>{cm(t)?(LI(n),it.publish("orders-next",n.order)):window.location.href=n.url})},y2=()=>{v.registerHandlers(yl,{dismiss:_2,discard:xI,accept:b2,submit:T2})},wI=()=>{v.registerLoader(yl,y2)}});var AI,L2,x2,w2,C2,Yf,A2,SI,MI=u(()=>{"use strict";ct();re();R();ue();rm();el();$();De();AI="orsettings",L2=3,x2=6,w2=(i,t,e,n)=>y`
<form class="c-dialog-form" data-role="chk" action="${t.updateLink}" novalidate data-keysubmit ?data-next=${n}>
  <div class="o-grid-row">
    <button class="c-button" data-slot="chk.button" type="button"
      data-checkcaption="${Th}" data-uncheckcaption="${yh}"></button>
  </div>
  <div class="o-grid o-grid--${Math.min(e,t.items.length)}">
  ${un(t.items,e).map(s=>y`<div><div class="c-checkbox-group f-item">${rt(s,o=>o.id,o=>y`
      <label class="c-checkbox">
        <input type="checkbox" name="${i}" value="${o.id}" ?checked=${o.selected}>
        <span class="c-checkbox__check"></span><span class="c-checkbox__label">${o.caption}</span>
      </label>
    `)}</div></div>`)}
  </div>
  <div class="c-dialog-buttons">
    <button class="c-button c-button--primary u-mobile-100" name="submitbtn" type="submit">${Ti}</button>
  </div>
</form>
`,C2=(i,t,e)=>y`
<form action="${t.updateLink}" class="x-form" novalidate data-keysubmit data-role="form chk" ?data-next=${e}>
  <div class="x-box x-box--narrow o-t-s">
    <div class="o-t-s o-b">
      <button class="c-button" data-slot="chk.button" type="button"
        data-checkcaption="${Th}" data-uncheckcaption="${yh}"></button>
    </div>
    <div class="o-grid-row o-grid-row--l c-navlist c-navlist--modal">
      ${rt(t.items,n=>n.id,n=>y`
        <div class="x-form__item">
          <div class="x-form__body">
            <label class="x-choice x-choice--switch">
              <input type="checkbox" name=${i} value=${n.id} ?checked=${n.selected}>
              <span class="x-choice__label">${n.caption}</span>
            </label>
          </div>
        </div>
      `)}
    </div>
  </div>
  <div class="x-form__submit u-extend" data-role="sticky-button">
    <button class="c-button c-button--primary c-button--xl u-100" type="submit"
      name="submitbtn">${Ti}</button>
  </div>
</form>
`,Yf=i=>T(void 0,null,function*(){let t=i.actionName(),e=i.node(),n=e.dataset.redirect||"",s=e.dataset.url||"";if(!s)return;let{brands:o,categories:r}=yield L(s,AI,{method:"POST",anchorEl:e});if(!o||!r)return;let a=(l,c)=>{let d=l==="categories",m=d?r:o,p=new yt({anchor:e,title:d?gI:fI,className:"c-orders-dialog"});z(d2Env.isMobile?C2(l,m,c):w2(l,m,d?L2:x2,c),p.element),p.addEventListener("submit",()=>{p.form.dataset.next===""?a("brands"):window.location.href=n}),p.show()};a(t,t==="all")}),A2=()=>{v.registerHandlers("orsettings",{all:Yf,brands:Yf,categories:Yf})},SI=()=>{v.registerLoader(AI,A2)}});var II={};ot(II,{default:()=>S2});var S2,RI=u(()=>{"use strict";bI();CI();MI();B();S2=()=>{SI(),H("orders",Tl),wI()}});var HI={};ot(HI,{default:()=>dm});var M2,I2,R2,O2,H2,D2,k2,N2,OI,P2,$2,F2,B2,U2,dm,DI=u(()=>{"use strict";D();B();$();M2="js-snaps-edit",I2="js-item",R2="js-remove",O2="js-undo",H2="js-title",D2="js-title-input",k2="js-status",N2="is-editable",OI="is-deleted",P2="is-closed",$2="c-button--primary",F2=["title","isDeleted","isClosed"],B2="snaps",U2=i=>Object.keys(i).reduce((t,e)=>(F2.includes(e)&&(t[e]=i[e]),t),{}),dm=class extends x{parsedInit(){let t=!1,e=JSON.parse(this.element.dataset.state);this.element.dataset.state&&delete this.element.dataset.state;let n=document.querySelector(`.${M2}`),s=this.element.dataset.url,o=wt(I2,this.element),r=()=>{if(t=!t,this.element.classList.toggle(N2,t),n.classList.toggle($2,t),n.textContent=n.dataset[t?"titleReady":"titleEdit"],t&&o.length>0){let h=e[0].titleInput;h.focus(),setTimeout(()=>{h.selectionStart=9999,h.selectionEnd=9999},0)}};function a(h){let{id:f}=h,g=C({_:"save"},U2(h));L(s.replace("{id}",f),`${B2}${f}`,{method:"POST",silent:!0,body:g})}function l(h){let{element:f,titleInput:g}=h;g.readOnly=!1,f.classList.remove(OI),h.isDeleted=!1,a(h)}function c(h){let{element:f,undoButton:g,titleInput:E}=h;E.readOnly=!0,f.classList.add(OI),g.addEventListener("click",()=>{l(h)},{once:!0}),h.isDeleted=!0,a(h)}function d(h){h.isClosed=!h.isClosed,h.statusEl.classList.toggle(P2,h.isClosed),a(h)}function m(h){let{titleEl:f,titleInput:g}=h;h.title=g.value,f.textContent=h.title,a(h)}function p(h,f){let g=f.querySelector(`.${R2}`),E=f.querySelector(`.${O2}`),M=f.querySelector(`.${H2}`),I=f.querySelector(`.${D2}`),A=f.querySelector(`.${k2}`),w;h.element=f,h.removeButton=g,h.undoButton=E,h.titleEl=M,h.titleInput=I,h.statusEl=A,I.addEventListener("input",()=>{t&&(clearTimeout(w),w=setTimeout(m,200,h))}),g.addEventListener("click",()=>{t&&c(h)}),h.isDeleted&&E.addEventListener("click",()=>{l(h)},{once:!0}),A.addEventListener("click",()=>{t&&d(h)})}if(e.length!==o.length)throw Error("[Snaps] Initialization failed");e.forEach((h,f)=>{p(h,o[f])}),n.addEventListener("click",r)}}});var mm,kI=u(()=>{"use strict";na();mm=class extends EventTarget{constructor(e,n,s,o){super();this.target=e;this.target&&(this.uploader=new Li(n,s),this.uploader.setUploadUrl(d2Env.uploadUrl),o&&this.uploader.setButtonCaption(o),this.uploader.render(this.target),this.uploader.setVisible(!0),this.uploader.addEventListener("ready",this))}handleEvent(e){if(e.detail&&e.detail.length===1){let n=new CustomEvent("ready",{detail:e.detail});this.dispatchEvent(n)}}dispose(){this.uploader.removeEventListener("ready",this),this.uploader.dispose()}}});var PI={};ot(PI,{default:()=>pm});var j2,z2,V2,W2,q2,NI,pm,$I=u(()=>{"use strict";Lf();B();hn();kI();j2="js-snap-description",z2="js-pic",V2="js-button",W2="js-replace",q2="js-field",NI="is-active",pm=class extends x{parsedInit(){let t=this.element.dataset.type||"",e=this.element.querySelector(`.${V2}`),n=this.element.querySelector(`.${W2}`),s=this.element.querySelector(`.${q2}`),o=this.element.querySelector(`.${z2}`);if(!e||!o||!n||!s)return;let r,a=d=>{let m=o;for(;m=o.firstChild;)o.removeChild(m);if(!d)return;s.value=d.id;let p=Ss({images:d.images.map(h=>({url:h.url,width:h.w,height:h.h})),color:d.color,inline:d.inline},1,{className:"c-snap-form-pic__pic",isTransparent:!0});o.appendChild(p),this.element.classList.add(NI)};function l(d,m){r&&(r.removeEventListener("ready",c),r.dispose()),r=new mm(d,t,m?"r-button-unstyled c-link c-link--text":`c-button ${d2Env.isMobile?"":"c-button--l"} u-mobile-100`,m?Gd:""),r.addEventListener("ready",c)}function c(d){if(d.detail&&d.detail[0]){a(d.detail[0]),l(n,!0);let m=document.querySelector(`.${j2}`);m&&m.focus()}}this.element.classList.contains(NI)?l(n,!0):l(e)}}});var FI,BI=u(()=>{"use strict";FI="Продвигается"});var Kf,UI,jI=u(()=>{"use strict";Kf=class{constructor(t){this.url=t}get(){if(!this.url)throw new Error("Request URL is not set.");return this.url}set(t){this.url=t}},UI=i=>new Kf(i)});var dt,zI,J2,Z2,VI,Kn,Qf,Y2,tg,WI,K2,qI,Xf,X2,eg,Q2,tj,GI,ej,ij,nj,sj,oj,hm,rj,aj,Ll,JI,ZI=u(()=>{"use strict";ct();re();R();BI();D();B();V();ge();pn();$();Ld();ae();j();ye();qu();nt();Ce();jI();dt="postpromo",zI=UI("/ajax/postpromo"),J2=(i,t,e,n,s)=>y`
<input type="hidden" name=${i} value=${t} data-avatar=${e} data-caption=${n} data-members=${s}>
`,Z2=i=>q('[name*="communities"],[data-name*="communities"]',i).reduce((e,n)=>{let s=!!n.name,o=s?n.name:n.dataset.name,a=(s?[n]:q('[type="hidden"]',n)).map(l=>l.value).join(`
`);return Object.assign(e,{[o]:a})},{}),VI=(i,t)=>{let e=ii(i),n=Z2(i),{submitbtn:s}=i,o=C({_:t,key:s.dataset.key},n),r=["isbusiness"];return e.forEach((a,l)=>{a&&!r.includes(l)&&(o[l]=a)}),o},Kn=i=>i.dataset.target?document.getElementById(i.dataset.target):Us(i,dt),Qf=i=>Q(i,"postpromo","context")||b("postpromo","context"),Y2=i=>{let t=Qf(i),e=b(dt,"settings",t);zI.set(e.dataset.boostUrl)},tg=i=>{let t=tt(dt,"targeting",i);t.forEach((n,s)=>{let o=l=>l.replace(/^filters\[\d+\]/,`filters[${s}]`).replace(/^Targets\[\d+\]/,`Targets[${s}]`);q('input[type="hidden"],select,textarea',n).forEach(l=>{l.removeAttribute("id"),l.name=o(l.name)}),q("[data-name]",n).forEach(l=>{l.dataset.name=o(l.dataset.name)})});let e=b(dt,"targeting-button",i);e&&_(e,t.length<10)},WI=(i,t={})=>{let e=b(dt,"region",i);e&&Fl("regionselect").then(()=>{e.dataset.country=t.countryCode||"",e.dataset.region=t.regionCode||""});let n=b(dt,"gender",i);n&&(n.value=t.gender||"Unknown");let s=b(dt,"cars",i);!d2Env.isMobile&&s&&Fl("carmultiselect").then(()=>{s.dispatchEvent(new CustomEvent("set-cars",{detail:t.catalogItems||[]}))});let o=b(dt,"yearfrom",i);o&&(t.productionYearFrom?o.value=t.productionYearFrom:o.selectedIndex=0);let r=b(dt,"yearto",i);r&&(t.productionYearTo?r.value=t.productionYearTo:r.selectedIndex=0);let a=b(dt,"communities",i);a&&(a.value=(t.communityIds||[]).join(`
`));let l=b(dt,"communities-list",i);if(l){let{name:c}=l.dataset,d=t.communities||[],m=b(dt,"communities-tokens",i);if(!m||!c)return;$i(m),z(rt(d,h=>h.id,h=>J2(c,h.id,h.avatar||"",h.caption||"",String(h.memberCount||0))),m);let p=zs(l);p&&p.reinit()}},K2=i=>{let t=i.node(),e=Q(t,dt,"settings"),n=t.dataset.target,s=e||(n?document.getElementById(`${n}-stats`):null);if(s){let o=at(s),r=Qf(t);(r&&b(dt,"comdb-button",r)||t).classList.toggle("is-active",!o.expanded),o.toggle()}},qI=(i,t,e)=>T(void 0,null,function*(){let n=Kn(i),s=n&&n.submitbtn||i;function o(l){let c=t==="start"||t==="restart";if(c){if(l.budget){let E=n&&n.isbusiness.value||s.dataset.isbusiness==="";Uo([{name:"Продвижение",category:E?"Пост БА":"Пост",price:l.budget}])}let{metrika:d}=s.dataset;d&&ht(d);let m=document.getElementById("promo");m&&m.remove();let p=Qf(i),h=b(dt,"inject",p);if(c&&p&&h){let E=b(dt,"comdb-post",p);if(E){Lt(E);let M=at(h);M.addEventListener("end",()=>{E.classList.add("is-active");let I=b(dt,"comdb-button",E);I&&(I.disabled=!0,I.textContent=FI,I.classList.remove("c-button--primary"),_(I,!0))},{once:!0}),setTimeout(()=>{M.hideAndRemove()},400);return}}let f=n.closest(".js-cpc-block"),g=f?f.dataset.anchor||"promo":"#promo";setTimeout(()=>{window.location.hash=g,window.location.reload()},100)}else{let d=n&&n.id||i.dataset.target,m=d?document.getElementById(`${d}-stats`):null;if(m){let p=O("js-postpromostatsbtns",m),h=wt("c-button",p),{metrika:f}=h[1].dataset;f&&ht(f),_(h[1],!1),_(h[0],!0)}}}let{key:r}=s.dataset,a=t==="start"?VI(n,"start"):t==="restart"?{_:t,key:r}:{_:"stop",key:r};if(e&&(a.requisite=e),e||(yield et(i.dataset.confirm||"",i.dataset.confirmMessage,i,i.dataset.confirmNutton)))try{let l=yield L(zI.get(),dt,{method:"POST",anchorEl:s,body:a,throwError:!0});o(l)}catch(l){l&&l.json&&xd(l.json,c=>{qI(i,t,c)})}}),Xf=i=>{let t=i.actionName(),e=i.node();Y2(e),qI(e,t)},X2=i=>T(void 0,null,function*(){let t=i.node(),e=t.href,n=t.dataset.blocked!=="1";yield L(e,dt,{method:"POST",anchorEl:t,body:{isEnabled:!n}}),t.dataset.blocked=n?"1":"0",t.textContent=t.dataset.values.split(";")[n?1:0],t.classList.toggle("c-button--primary",n)}),eg=i=>{let t=tt(dt,"targeting",i),e=t[t.length-1],n=e.cloneNode(!0),s=q("select",e);q("select",n).forEach((a,l)=>{a.selectedIndex=s[l].selectedIndex});let r=b(dt,d2Env.isMobile?"communities-list-mobile":"communities-list",n);return r&&(r.innerHTML=""),e.after(n),tg(i),n},Q2=i=>T(void 0,null,function*(){let t=i.node(),e=Kn(t),n=e&&e.dataset.info,s=yield L(n,dt,{body:{budget:t.value}}),o=b(dt,"budget",e);o.innerHTML=s.html||"",e.submitbtn.dataset.confirmMessage&&delete e.submitbtn.dataset.confirmMessage,e.submitbtn.dataset.confirmButton&&delete e.submitbtn.dataset.confirmButton,e.submitbtn.dataset.confirm=s.confirm}),tj=i=>{let t=i.node(),e=Kn(t),n=b(dt,"targeting-default",e);if(!n)return;let s=JSON.parse(n.innerHTML),o=s.length;if(!o)return;let r=tt(dt,"targeting",e),a=r.length,l=o-a;l<0?r.splice(o).forEach(d=>d.remove()):Array(l).fill(0).forEach(()=>{eg(e)}),setTimeout(()=>{tt(dt,"targeting",e).forEach((d,m)=>{WI(d,s[m])})},1)},GI=i=>{let t=b(dt,"region",i);t&&(t.dataset.country="",t.dataset.region="");let e=b(dt,"gender",i);e&&(e.value="Unknown");let n=b(dt,"cars",i);n&&n.dispatchEvent(new CustomEvent("set-cars",{detail:[]}));let s=b(dt,"yearfrom",i);s&&(s.selectedIndex=0);let o=b(dt,"yearto",i);o&&(o.selectedIndex=0);let r=b(dt,"communities",i);r&&(r.value="");let a=b(dt,d2Env.isMobile?"communities-list-mobile":"communities-list",i);a&&(a.innerHTML="")},ej=i=>{let t=i.node(),e=Kn(t),n=b(dt,"targetingtemplate",e);if(!n)return;let s=JSON.parse(n.innerHTML);if(!s.length)return;let r=tt(dt,"targeting",e);r.forEach((l,c)=>{c===0?GI(l):l.remove()}),r=tt(dt,"targeting",e);let a=r.length;for(let l=a;l<s.length;l++)eg(e);r=tt(dt,"targeting",e),s.forEach((l,c)=>{WI(r[c],l)})},ij=i=>{let t=i.node(),e=t.closest("form"),n=t.closest(".block");tt(dt,"targeting",e).length>1?n.remove():GI(n),tg(e)},nj=i=>+(i.substr(0,i.indexOf(".")).replace(/\D/ig,"")||-1),sj=i=>{let t=[...i.options].filter(e=>!e.disabled);i.selectedIndex=t.length-1},oj=i=>i.options[i.selectedIndex].disabled,hm=i=>{let t=Kn(i),e=VI(t,"duration"),n=J('[name="duration"]',t);if(!n||!e)return;let s="productionyear",o=["region","country","brand","model","generation",s],r={};Object.keys(e).forEach(m=>{let p=nj(m);if(p<0)return;r[p]=r[p]||[];let h=o.some(E=>m.includes(E)),f=m.includes(s),g=r[p].some(E=>E.includes(s));!h||g&&f||r[p].push(m)});let a=3,c=Math.max(0,...Object.values(r).map(m=>m.length))>a,d=J('[name="duration"] [value="168"]',t);d.disabled=c,c&&oj(n)&&sj(n)},rj=i=>{let t=i.node(),e=Kn(t),n=eg(e);hm(e),Lt(n)},aj=i=>{let t=i.node(),e=Kn(t),n=Q(t,dt,"targeting");n&&n.remove(),tg(e),hm(e)},Ll=class extends x{parsedInit(){let t=Kn(this.element);hm(t),t.addEventListener("change",()=>{hm(t)})}},JI=()=>{v.registerHandlers(dt,{stats:K2,start:Xf,restart:Xf,stop:Xf,block:X2,addtargeting:rj,updatebudget:Q2,removetargeting:aj,resettargeting:tj,cleartargeting:ij,addandfillnewtargeting:ej})}});var ig,lj,cj,YI,KI=u(()=>{"use strict";R();V();$();ae();j();ye();Ce();ig="postpromo",lj=i=>Q(i,"postpromo","context")||b("postpromo","context"),cj=i=>T(void 0,null,function*(){let t=i.node(),e=lj(t),n=b(ig,"settings",e),s=n.dataset.formUrl,o=document.createElement("div");_(e,!0),Lt(o,void 0,!0),n.after(o),o.innerHTML=yield Ct(s,ig,{body:{_:"fetchform"}});let r=$e("postpromo",o);t.dataset.metrika&&ht(t.dataset.metrika),_(t,!1),Lt(r,void 0,!0),at(n,!0).toggle(!0)}),YI=()=>{v.registerHandlers(ig,{fetch:cj})}});var xl,XI=u(()=>{"use strict";B();xl=class extends x{parsedInit(){let t=this.slot("start"),e=this.slot("end");t.addEventListener("change",()=>{let n=Number(t.value)||0,s=Number(e.value)||0;n>0&&s>0&&n>s&&(e.value=String(n))}),e.addEventListener("change",()=>{let n=Number(t.value)||"0",s=Number(e.value)||"0";s>0&&n>0&&s<n&&(t.value=String(s))})}}});var QI={};ot(QI,{default:()=>dj});var dj,tR=u(()=>{"use strict";ZI();KI();XI();B();dj=()=>{YI(),H("years",xl),JI(),H("postpromo",Ll)}});var iR={};ot(iR,{default:()=>uj});var eR,mj,pj,hj,uj,nR=u(()=>{"use strict";R();$();eR=i=>{let t=i.actionName(),e=i.node();e.disabled=!0;let{id:n,kind:s}=e.dataset,o=t==="disablecar"?`/recommendations/cars/${n}/prohibit`:`/recommendations/post/${s}_${n}/prohibit`;L(o,{method:"POST",anchorEl:e})},mj=i=>{let t=i.node();t.disabled=!0;let{kind:e,id:n,prohibit:s}=t.dataset,o=C({kind:e,id:n},s&&{prohibit:s});L("/recommendations/posts/girls",{method:"POST",anchorEl:t,body:o})},pj=i=>{let t=i.node();t.disabled=!0,L("/recommendations/posts/zen",{method:"POST",anchorEl:t,body:{kind:t.dataset.kind,id:t.dataset.id}})},hj=i=>T(void 0,null,function*(){let t=i.node();t.disabled=!0;let e=yield L(t.dataset.url,{method:"POST",anchorEl:t,body:{postId:t.dataset.id}});confirm("Перейти к записи в Инбоксе?")&&(window.location.href=e.postLink||"")}),uj=()=>{v.registerHandlers("recommendations",{disable:eR,disablecar:eR,disablegirls:mj,addtozen:pj,addtoinbox:hj})}});var sR,oR,rR=u(()=>{"use strict";sR="Ждёт продвижения",oR="Смотреть в инбоксе"});var aR={};ot(aR,{default:()=>Ej});var um,gj,vj,Ej,lR=u(()=>{"use strict";R();rR();V();$();Ft();um="combacklog",gj="is-dashboard",vj=i=>T(void 0,null,function*(){let t=i.node(),e=t.dataset.id||"",{postLink:n}=yield L(t.href,um,{method:"POST",anchorEl:t,body:{postId:e}});if(n){dn(t);let s=Q(t,um,"badge");s.classList.contains(gj)&&(s.style.display="block");let r=b(um,"title");r.textContent=sR,t.href=n,t.textContent=oR}}),Ej=()=>{v.registerHandlers(um,{post:vj})}});var cR={};ot(cR,{default:()=>_j});var bj,_j,dR=u(()=>{"use strict";R();$();Ft();bj=i=>T(void 0,null,function*(){ft(i);let t=i.node(),e=t.submitbtn;yield L(t.action,{method:"POST",anchorEl:e,body:new FormData(t)}),t.parentElement.classList.remove("fx-white-fade"),setTimeout(()=>{t.parentElement.classList.add("fx-white-fade")},10)}),_j=()=>{v.registerHandlers("fcat",{set:bj})}});var mR={};ot(mR,{default:()=>Rj});var Tj,yj,Lj,xj,wj,Cj,Aj,Sj,Mj,Ij,Rj,pR=u(()=>{"use strict";Tj=i=>({date:i,total:0,postBoosts:0,businessCards:0,businessAds:0,profileAds:0}),yj=i=>i.toLocaleDateString("ru",{day:"numeric",month:"2-digit",year:"numeric"}).split(".").reverse().join("-"),Lj=i=>{let t=new Date(i);return t.setTime(t.getTime()-864e5*(i.getDay()-1)),t},xj=i=>`<li>${i}</li><li>${Math.floor(i/2)}</li><li>0</li>`,wj=(i,t)=>Math.floor((i.getMilliseconds()-t.getMilliseconds())/864e5),Cj=i=>{for(let t=1;t<i.length;t++){let e=i[t],n=i[t-1],s=wj(new Date(e.date),new Date(n.date));if(s>1)for(let o=0;o<s-1;o++){let r=new Date(n.date);r.setDate(r.getDate()+o+1);let a=yj(r),l=Tj(a);i.splice(t,0,l),t++}}},Aj=i=>`
<div class="c-cp-graph-col__toltip">
  <p>
      <b>${new Date(i.date).toLocaleDateString("ru",{day:"numeric",month:"short"})}</b>
      </br>${i.total} гостей
      <br/><span class="c-cp-color--post">${i.postBoosts} с постов</span>
      <br/><span class="c-cp-color--card">${i.businessCards} с карточек</span>
      <br/><span class="c-cp-color--mini">${i.profileAds} с мини</span>
      <br/><span class="c-cp-color--cpc">${i.businessAds} с CPC</span>
  </p>
</div>`,Sj=(i,t)=>{let e=125/t;i.sort((o,r)=>{let a=new Date(o.date),l=new Date(r.date);return a>l?1:a<l?-1:0}),Cj(i);let n=Math.max(new Date(i[0].date).getDay()-1,0);return Array.from(new Array(n),()=>'<div class="c-cp-graph-col c-cp-graph-col--blank"></div>').join("")+i.map(o=>{let r=`
<div class="c-cp-graph-col">
  <div class="c-cp-graph-col__section c-cp-graph-col__section--post" style="height: ${o.postBoosts*e}px"></div>
  <div class="c-cp-graph-col__section c-cp-graph-col__section--card" style="height: ${o.businessCards*e}px"></div>
  <div class="c-cp-graph-col__section c-cp-graph-col__section--mini" style="height: ${o.profileAds*e}px"></div>
  <div class="c-cp-graph-col__section c-cp-graph-col__section--cpc" style="height: ${o.businessAds*e}px"></div>
    ${Aj(o)}
</div>`;return(new Date(o.date).getDay()===1?'<div class="c-cp-graph-col c-cp-graph-col--blank"></div>':"")+r}).join("")},Mj=i=>{let t=[];for(let e=0;e<i.length;e++){let n,s=new Date(i[e].date);t.length===0?(n={date:Lj(s).toLocaleDateString("ru",{day:"numeric",month:"short"}),postBoosts:0,businessCards:0,businessAds:0,profileAds:0,total:0},t.push(n)):s.getDay()===1?(n={date:s.toLocaleDateString("ru",{day:"numeric",month:"short"}),postBoosts:0,businessCards:0,businessAds:0,profileAds:0,total:0},t.push(n)):n=t[t.length-1],n.postBoosts+=i[e].postBoosts,n.businessCards+=i[e].businessCards,n.businessAds+=i[e].businessAds,n.profileAds+=i[e].profileAds,n.total+=i[e].total}return t.map(e=>`<div class="c-cp-legend__section">
  <p class="c-cp-legend__title">${e.date}</p>
  <p class="c-cp-legend__text c-cp-color--post">${e.postBoosts} c постов</p>
  <p class="c-cp-legend__text c-cp-color--card">${e.businessCards} с карточек</p>
  <p class="c-cp-legend__text c-cp-color--mini">${e.profileAds} с мини</p>
  <p class="c-cp-legend__text c-cp-color--cpc">${e.businessAds} с СРС</p>
</div>`).join("")},Ij=i=>{let t=Math.max(...i.map(e=>e.total));return`
<div class="c-cp-mod__chart">
  <div class="c-cp-chart">
    <ul class="c-cp-chart__y-axis">${xj(t)}</ul>
    <div class="c-cp-chart__graph">
      <div class="c-cp-graph">
        ${Sj(i,t)}
      </div>
      <div class="c-cp-legend">
        ${Mj(i)}
      </div>
    </div>
  </div>
</div>`},Rj=i=>{let t=i.dataset.data||"",e=[];try{e=JSON.parse(t)}catch(s){}if(e.length===0)return;let n=Ij(e);i.insertAdjacentHTML("afterend",n)}});var hR,uR,fR,gR,vR,ER,fm,bR,_R,TR,yR,LR,ng=u(()=>{"use strict";hR="{Num, select, 0 {} other {({Num}) }}Сообщения",uR="Скрыть пользователя из списка собеседников",fR="Скрыть пользователя из списка собеседников?",gR="Вся переписка сохранится. При возобновлении общения контакт вновь вернётся в список",vR="Очистить историю общения с этим человеком?",ER="Восстановить данные будет невозможно",fm="Сообщения",bR="Переписка с ",_R="Показать предыдущие сообщения",TR="Добавить пользователя в Чёрный список?",yR="Добавить",LR=`<p><b>Добавьте номер телефона</b><br>
Российским пользователям сообщения доступны только с подтверждённым номером телефона. <a class="c-link" href="{OriUrl}">Почему?</a></p>
<p><b><a class="c-link" href="{Url}">{IsBusiness, select, true {Привязать сейчас} other {Добавить и подтвердить}}</a></b> {IsBusiness, select, true {  <button class="r-button-unstyled c-link u-bold" data-action="msgr.remind-add-phone" data-url="{RemindLaterUrl}">Отложить на потом</button>} other {}}</p>`});var Oj,Hj,CR,wR,AR,sg,Dj,kj,Nj,Pj,SR,MR,og=u(()=>{"use strict";ct();yi();re();Qr();ng();pn();ve();hn();Oj="msgr",Hj="is-active",CR=i=>y`${Ye(i)}`,wR=(i,t,e,n,s)=>s?y`<span class="${t} c-username--wrap"><span>${n}</span></span>`:y`<a class="${t} c-username--wrap" href=${e} data-ihc-token="p/${i}"><span>${n}</span></a>`,AR=()=>y`
<header class="x-title-header">
  <h1 class="x-title">${d2Env.isMobile?y`<a class="c-link c-link--text" data-action="msgr.contacts">${fm}</a>`:y`${fm}`}</h1>
</header>
`,sg=(i,t,e,n,s)=>d2Env.isMobile?y`<div class="x-title-header__to-top"><a class="c-link c-link--text" data-action="msgr.contacts">${fm}</a></div>\n <h1 class="x-title">${wR(i,t,e,n,s)}</h1>`:y`<h1 class="x-title">${bR}${wR(i,t,e,n,s)}</h1>`,Dj=(i,t,e,n,s)=>y`
<header class="x-title-header">
  <h1 class="x-title">${sg(i,t,e,n,s)}</h1>
</header>
`,kj=()=>y`
<div class="c-msgr__pager">
  <button class="r-button-unstyled c-link c-link--text" data-action="msgr.prev">${_R}
  </button>
</div>
`,Nj=(i,t,e,n,s,o,r,a,l,c)=>{let d=t?y`<a class="c-msg__avatar" href=${s} data-ihc-token="p/${o}">${xi({images:[{url:n,width:60,height:60}]},void 0,{className:"is-const round u-vignette"})}</a>`:N,m=d2Env.isMobile&&l?y`<div class="c-msg-date">${new Intl.DateTimeFormat("ru",{year:"numeric",month:"long",day:"numeric"}).format(a).replace(/\sг\.$/,"")}</div>`:N;return y`
    ${m}
    <div id="m${i}" class=${Rt({"c-msg":!0,"c-msg--own":!t,"c-msg--pic":e})} data-slot="${Oj}.item">
      ${d}
      <div class=${Rt({"c-msg__body":!0,"ctx-dark":!t})}>
        <div class=${Rt({"u-break-word":!0,"c-link-decorated":!0,"c-link-reset-white":!t})} data-role="emojizoom">${Ye(c)}</div>
        ${d2Env.isMobile?y`<div class="c-msg__date">${new Intl.DateTimeFormat("ru",{hour:"2-digit",minute:"2-digit"}).format(a)}</div>`:N}
      </div>
      ${d2Env.isMobile?N:y`<div class="c-msg__date">${r}</div>`}
    </div>
  `},Pj=i=>y`
<div class="c-msg c-msg--disabled">
  ${bo("drive-round","c-msg__avatar")}
  <div class="c-msg__body ctx-dark">
    <div class="u-break-word c-link-decorated c-link-reset-white">${Ye(i)}</div>
  </div>
</div>
`,SR=(i,t,e,n,s,o,r,a,l)=>y`
  ${d2Env.isMobile?N:Dj(i,t,e,n,s)}
  ${r?kj():N}
  ${rt(a,c=>c.id,c=>Nj(c.id,c.reply,c.hasImage,o,e,i,c.timestamp,c.date,c.headerDate,c.text))}
  ${l?Pj(l):N}`,MR=(i,t)=>{let e=t===i.id,n={[Hj]:e,"c-msgr-contact--business":i.isBusiness},s=xi({images:[{url:i.avatar,width:60,height:60}]},void 0,{className:"is-round u-vignette"});return y`
    <a id="mc${i.id}" href="/my/messages/${i.id}" class="c-msgr-contact ${Rt(n)}" data-action="msgr.contact" data-url=${i.url}>
      <div class="c-msgr-contact__remove" data-action="msgr.remove" onclick="" data-id=${i.id} data-tt=${uR}>×</div>
        <div class="c-msgr-contact__avatar">${s}</div>
        <div class="c-msgr-contact__info">
        <div class="c-msgr-contact__nickname">
          <span class="c-msgr-contact__username" data-ihc-token="p/${i.id}">
              <span class=${i.nicknameCssClass||"c-link c-link--color00 c-username"}><span>${i.username}</span></span>
          </span>
          ${Number(i.unread)?y`\u00a0<span class="c-msgr-contact__num c-notification-bubble" data-slot="msgr.bubble">${i.unread}</span>`:N}
        </div>
        ${i.status?y`<div class="c-msgr-contact__status">${Oe(i.status)}</div>`:N}
        ${i.lastOnline?y`<div class="c-msgr-contact__online">${i.lastOnline}</div>`:N}
        </div>
    </a>
  `}});var IR,rg,$j,ag,lg,Fj,Bj,gm,RR=u(()=>{"use strict";IR=Bs(Lr(),1);ct();re();lr();Se();D();V();pn();$();ye();og();rg="msgrlist",$j="/ajax/messages.cshtml",ag="is-active",lg=3e4,Fj=12e4,Bj=200,gm=class{constructor(t){this.partnerId=t;this.lastActive=-1/0;this.container=b(rg,"contacts"),this.filterEl=b(rg,"filter"),this.timeout=setTimeout(()=>this.updateContacts(),lg),this.filterEl.value="",this.filterEl.addEventListener("input",()=>this.filter()),this.container.addEventListener("scroll",(0,IR.throttle)(this.scroll).bind(this),{passive:!0}),this.scrollToTarget()}setActiveContact(t){let e=O(ag,this.container);if(e&&e.classList.remove(ag),t){this.partnerId=t;let n=J(`#mc${t}`);if(n){n.classList.add(ag);let s=O("c-msgr-contact__num",n);s&&(it.publish("force-update"),s.remove())}this.scrollToTarget()}}updateContacts(){return T(this,null,function*(){if(Date.now()-this.lastActive<5e3){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.updateContacts(),lg);return}let t=yield L($j,rg,{method:"POST",silent:!0,body:C(C({_:"partners"},this.filterEl.value&&{filter:this.filterEl.value.toLowerCase()}),this.partnerId&&{partner:this.partnerId})});clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.updateContacts(),Mi.isIdle?Fj:lg),this.renderContacts(t)})}renderContacts(t){t.unread&&(it.publish("update-unread",t.unread),it.publish("update-unread-title",t.unread));let e=t.partners||[];$i(this.container),z(rt(e,n=>n.id,n=>MR(n,this.partnerId)),this.container),this.scrollToTarget()}scrollToTarget(){let t=this.partnerId?J(`#mc${this.partnerId}`):null;t&&Lt(t,this.container)}filter(){clearTimeout(this.filterTm),this.filterTm=setTimeout(()=>this.updateContacts(),Bj)}scroll(){this.lastActive=Date.now()}}});var Uj,OR,vm,HR=u(()=>{"use strict";Se();V();na();Uj="msgr",OR=i=>{i.detail&&i.detail.length===1&&it.publish("post-pic",i.detail[0].id)},vm=class{constructor(){let t=b(Uj,"upload");!t||(this.uploader_=new Li("messengerimage",d2Env.isMobile?"r-button-unstyled c-msgr__btn":"c-button c-button--gray"),this.uploader_.setUploadUrl(d2Env.uploadUrl),this.uploader_.setAction("uploadSimple"),t.dataset.tt&&(this.uploader_.setDataAttribute("tt",t.dataset.tt),t.dataset.tt&&delete t.dataset.tt),this.uploader_.setButtonCaption('<span class="c-msgr__btn-icon"></span>'),this.uploader_.render(t),this.uploader_.setVisible(!0),this.uploader_.addEventListener("ready",OR))}disable(t){this.uploader_&&this.uploader_.getButton()&&(this.uploader_.getButton().disabled=t)}dispose(){this.uploader_&&(this.uploader_.removeEventListener("ready",OR),this.uploader_.dispose(),this.uploader_=void 0)}}});var kR={};ot(kR,{default:()=>Em});var _e,cg,jj,zj,DR,Vj,Wj,wl,Em,NR=u(()=>{"use strict";ct();lr();R();Se();Or();ue();$h();ng();D();B();V();xe();$();j();ye();Ft();Kc();on();nt();Di();RR();og();HR();_e="msgr",cg="/ajax/messages.cshtml",jj=7e3,zj=14e3,DR=i=>!!i.html,Vj=i=>!!i.warning,Wj=(i,t)=>i.getFullYear()===t.getFullYear()&&i.getMonth()===t.getMonth()&&i.getDate()===t.getDate(),wl=class{constructor(t,e=""){this.root=t;this.partnerId=e;this.partnerDeleted_=!1;this.messages_=[];this.hasMoreMessages_=!1;this.pendingUpdateHistory_=!1;this.allowReply=!1;this.lockHistory=!1;this.hasNoPhone=!1;this.disablePhoneReminder=!1;this.oriUrl=this.root.dataset.oriUrl,this.phoneUrl=this.root.dataset.phoneUrl,this.remindUrl=this.root.dataset.remindUrl,this.form_=b(_e,"form",this.root),this.button_=b(_e,"submitbtn",this.form_),this.header_=b(_e,"header",this.root),this.history_=b(_e,"history",this.root),this.historyDel_=b(_e,"history-delete",this.root),this.blacklistEl_=b(_e,"bl",this.root);let n=new URLSearchParams(window.location.search);window.history.replaceState(null,document.title,window.location.href.split("?")[0]),this.presetMessage_=n.get("message")||"",this.button_.disabled=!1,window.addEventListener("popstate",o=>this.onNavigate_(o)),v.registerHandlers("msgr",{prev:this.onPrev_,post:this.onPost_,wipehistory:this.onDelete_,remove:this.removeContact_,blacklist:this.onBlacklist_,contact:this.onContact_,contacts:this.onShowContacts_,"remind-add-phone":this.onRemindAddPhone_},this),it.subscribe("update-unread-title",wl.updateTitle,this),it.subscribe("post-pic",this.onPicPost_,this),this.getNewMessages_=this.getNewMessages_.bind(this),this.contacts_=new gm(e);let s=this.form_.text;_(this.form_,!0),this.ta_=new jn(s,s.offsetHeight,Math.round(document.documentElement.clientHeight*.6)),_(this.form_,!1),this.ta_.addEventListener("resize",()=>this.onTextareaResize_()),this.changePartner_(this.partnerId)}enableHistoryDeleteButton_(t){this.historyDel_&&_(this.historyDel_,t!==void 0?t:tt(_e,"item",this.history_).length>0)}uploaderInit_(){this.uploader_&&this.uploader_.dispose(),this.uploader_=new vm}onShowContacts_(){d2Env.isMobile&&(document.scrollingElement.scrollTop=0),this.changePartner_("",!0)}showContacts_(t){this.root.classList.toggle("c-msgr--contacts",t),d2Env.isMobile&&document.documentElement.classList.toggle("g-messenger",!t)}onRemindAddPhone_(t){return T(this,null,function*(){let e=t.node(),{url:n}=e.dataset;n&&(yield L(n,`${_e}_nophone`,{method:"POST",anchorEl:e}),this.disablePhoneReminder=!0,this.changePartner_(this.partnerId))})}onContact_(t){let e=t.node().id.substring(2);this.partnerId!==e&&this.changePartner_(e,!0)}onNavigate_(t){t.state!==this.partnerId&&this.changePartner_(t.state||"")}changePartner_(t,e=!1){return T(this,null,function*(){t||this.showContacts_(!0),this.uploaderInit_(),this.pendingPartnerId_=t,this.pendingUpdateHistory_=e;let n=yield this.request_("init",{partner:t||""},!0,!0);if(this.showContacts_(!this.pendingPartnerId_),this.uploaderInit_(),this.partnerId=this.pendingPartnerId_||"",this.pendingUpdateHistory_&&window.history.pushState(this.partnerId,document.title,`/my/messages/${this.partnerId}`),!DR(n)){this.partnerUrl_=n.url,this.partnerUsername_=n.username,this.partnerCssClass_=n.nicknameCssClass,this.partnerDeleted_=n.deleted,this.partnerAvatar_=n.avatar,this.partnerBlacklisted_=n.blacklisted,this.contacts_.setActiveContact(this.partnerId),this.allowReply=n.allowReply,this.lockHistory=n.lockHistory,this.hasNoPhone=n.hasNoPhone,this.disableReason="";let s=!0;this.allowReply||(this.hasNoPhone?this.disablePhoneReminder||(this.disableReason=Z(LR,{OriUrl:this.oriUrl,Url:this.phoneUrl,IsBusiness:Boolean(this.remindUrl),RemindLaterUrl:this.remindUrl})):n.disableReason?this.disableReason=n.disableReason:s=!1),this.ta_.setEnabled(this.allowReply),this.blacklistEl_&&(this.blacklistEl_.disabled=this.lockHistory,this.updateBlacklist()),this.historyDel_&&(this.historyDel_.disabled=this.lockHistory),this.button_.disabled=!this.allowReply,this.uploader_&&this.uploader_.disable(!this.allowReply),_(this.form_,s)}d2Env.isMobile?document.scrollingElement.scrollTop=0:this.history_.scrollTop=0,this.render_(n,void 0,!0),this.ta_.setContent(this.presetMessage_),this.presetMessage_="",this.enableHistoryDeleteButton_()})}historyScroll_(t,e,n){let s=d2Env.isMobile?document.scrollingElement:this.history_,o=s.scrollHeight-(d2Env.isMobile?document.documentElement.clientHeight:s.offsetHeight);if(t){s.scrollTop=t.offsetTop+e;let r=t.previousElementSibling;r&&(o=Zm(r,s).top)}n?s.scrollTop=o:t?dr(o,s):setTimeout(()=>{dr(s.scrollHeight-(d2Env.isMobile?document.documentElement.clientHeight:s.offsetHeight),s)},100)}static updateTitle(t=0){document.title=Z(hR,{Num:t})}updateBlacklist(){!this.blacklistEl_||(this.blacklistEl_.textContent=this.partnerBlacklisted_?ro:Rr)}request_(t,e,n,s){return T(this,null,function*(){let o=C({_:t==="init"?"get":t},e),r;if(s){let a=b(_e,"main",this.root);r=new se(a),r.start()}return L(cg,_e,{method:"POST",silent:n,spinner:r,body:o})})}onPost_(t){return T(this,null,function*(){ft(t),this.formFocus_();let e=this.form_.text.value;if(!e)return;let n=yield this.request_("post",{partner:this.partnerId||"",messageId:this.lastId_||"",text:e});if(Vj(n)){let s=d2Env.isMobile?`
<div class="x-box x-box--ghost">
<div class="x-text c-link-decorated">${n.warning}</div>
<button class="c-button c-button--primary c-button--l o-t-l u-100"
type="button" data-action="dialog.close">${ta}</button>
</div>`:`
<div class="c-dialog-desc c-link-decorated">${n.warning}</div>
<div class="o-group o-group--m o-group--end o-group--wide c-dialog-buttons">
<button class="c-button c-button--primary c-button--m-no-padding"
  type="button" data-action="dialog.close">${ta}</button>
</div>`,o=bi({anchor:this.button_,className:"c-dialog-warning",title:Yc,html:s});o.render(),o.show();return}this.ta_.setContent(""),this.render_(n),this.contacts_.updateContacts()})}onPicPost_(t){return T(this,null,function*(){this.formFocus_();let e=yield L(cg,`${_e}.pic`,{method:"POST",body:{_:"post",partner:this.partnerId||"",messageId:this.lastId_||"",image:t}});this.render_(e),this.contacts_.updateContacts()})}onDelete_(t){return T(this,null,function*(){let e=t.node();!(yield et(vR,ER,e,Ae))||(yield this.request_("clear",{partner:this.partnerId||""}),this.enableHistoryDeleteButton_(!1),this.messages_=[],tt(_e,"item",this.history_).forEach(n=>n.remove()))})}onPrev_(){return T(this,null,function*(){let t=yield this.request_("prev",{partner:this.partnerId||"",messageId:this.prevId_||""});this.render_(t,!0)})}getNewMessages_(){return T(this,null,function*(){let t=yield this.request_("get",{partner:this.partnerId||"",messageId:this.lastId_||""},!0);t&&(it.publish("force-update"),this.render_(t),this.contacts_.updateContacts())})}renderHeader_(t){_(this.header_,t),t&&(this.partnerId&&this.partnerUsername_?z(sg(this.partnerId,this.partnerCssClass_,this.partnerUrl_,this.partnerUsername_,this.partnerDeleted_),this.header_):z(AR(),this.header_))}render_(t,e,n){if(clearTimeout(this.tm_),this.tm_=setTimeout(this.getNewMessages_,Mi.isIdle?zj:jj),DR(t)){this.messages_=[],this.renderHeader_(!0),z(CR(t.html),this.history_),_(this.form_,!1);return}(e||n)&&(this.hasMoreMessages_=t.hasMore);let{messages:s}=t;n?(this.messages_=s,s.length>0&&(this.prevId_=t.messages[0].id)):e?this.messages_=[...s,...this.messages_]:this.messages_=[...this.messages_,...s];let o=b(_e,"item",this.history_),r=0;e&&o&&(r=this.history_.scrollTop-o.offsetTop);let a,l=this.messages_.map(d=>{let m=new Date(d.unixTimestamp*1e3),p=a&&Wj(a,m)?void 0:m;return a=m,{id:d.id,timestamp:d.timestamp,date:new Date(d.unixTimestamp*1e3),headerDate:p,text:d.text,reply:d.reply,hasImage:d.hasImage}});this.renderHeader_(d2Env.isMobile),z(SR(this.partnerId,this.partnerCssClass_,this.partnerUrl_,this.partnerUsername_,this.partnerDeleted_,this.partnerAvatar_||"",this.hasMoreMessages_,l,this.disableReason),this.history_);let{messageId:c}=t;c&&(e?this.prevId_=c:this.lastId_=c),this.enableHistoryDeleteButton_(),this.blacklistEl_&&(this.blacklistEl_.dataset.id=this.partnerId),n&&this.formFocus_(),s.length>0&&(this.historyScroll_(e?o:void 0,r,n),n&&setTimeout(()=>{this.historyScroll_(void 0,0,!0)}))}formFocus_(){this.allowReply&&!d2Env.isMobile&&this.form_.text.focus()}onTextareaResize_(){if(d2Env.isMobile)return;let t=this.form_.text;Lt(t,void 0,!0)}removeContact_(t){return T(this,null,function*(){ft(t);let e=t.node(),n=e.dataset.id;if(ze(),!(yield et(fR,gR,e,To)))return;yield L(cg,`${_e}.del`,{method:"POST",anchorEl:e,body:{_:"deletepartner",partner:n||""}});let o=J(`#mc${n}`);n===this.partnerId?this.changePartner_(""):o&&b(_e,"bubble",o)&&it.publish("force-update"),o&&o.remove()})}onBlacklist_(t){return T(this,null,function*(){let e=t.node(),n=e.dataset.id;if(ze(),!(!this.partnerBlacklisted_&&!(yield et(TR,void 0,e,yR))))if(yield L("/ajax/blacklist.cshtml",`${_e}.bl`,{method:"POST",anchorEl:e,body:{_:this.partnerBlacklisted_?"remove":"add",id:n}}),this.partnerBlacklisted_=!this.partnerBlacklisted_,this.updateBlacklist(),this.partnerBlacklisted_){this.changePartner_("");let s=J(`#mc${n}`);s&&s.remove()}else this.changePartner_(n)})}},Em=class extends x{parsedInit(){let{partner:t}=this.element.dataset,e=t&&t!=="0"?t:void 0;new wl(this.element,e)}}});var Xo,dg=u(()=>{"use strict";Xo=class extends EventTarget{constructor(){super(...arguments);this.imageMap=new Map;this.completionFired=!1}addImage(e){this.completionFired=!1,this.imageMap.set(e,new Image)}removeImage(e){let n=this.imageMap.get(e);n&&(this.imageMap.delete(e),n.removeEventListener("load",this),n.removeEventListener("abort",this),n.removeEventListener("error",this))}start(){this.imageMap.forEach((e,n)=>{e.addEventListener("load",this),e.addEventListener("abort",this),e.addEventListener("error",this),e.id=n,e.src=n})}handleEvent(e){let n=e.currentTarget;!n||(this.removeImage(n.id),this.dispatchEvent(new CustomEvent(e.type,{detail:n})),this.imageMap.size===0&&!this.completionFired&&(this.completionFired=!0,this.dispatchEvent(new Event("complete"))))}}});var PR={};ot(PR,{default:()=>bm});var qj,bm,$R=u(()=>{"use strict";D();B();xr();dg();qj=960,bm=class extends x{parsedInit(){let t=q("img",this.element).map(o=>o.src),e=["mm/android-6","email/app-store-badge-ru","email/google-play-badge-ru","email/app-gallery-badge-ru","mm/iphone-6"].map(o=>`/assets/images/${o}.png`),n=t.concat(e),s=new Xo;n.forEach(o=>{s.addImage(o)}),s.addEventListener("complete",()=>{this.element.classList.remove("is-inactive")}),s.start(),d2Env.isMobile&&(fs().addEventListener("resize",()=>this.fixScale),this.fixScale())}fixScale(){let e=this.element.offsetWidth/qj;this.element.firstElementChild.style.transform=`translateZ(0) scale(${e})`}}});var Cl,FR=u(()=>{"use strict";B();$();xo();Cl=class extends x{init(){let e=JSON.parse(this.element.textContent);this.pages=e.pages,this.pagerLink=e.pagerLink,this.token=e.token,this.current=e.current,He().addEventListener("scroll",this)}handleEvent(){let e=this.current+1;if(!this.pages[e]){He().removeEventListener("scroll",this);return}Ct(this.pagerLink,this.role,{silent:!0,body:{token:this.token,id:this.pages[e]}}).then(n=>{this.element.insertAdjacentHTML("beforebegin",n),this.current=e})}}});var Al,BR=u(()=>{"use strict";B();j();Al=class extends x{parsedInit(){this.handleEvent(),this.element.addEventListener("change",this)}handleEvent(){let{region:t}=this.element;this.element.querySelector('button[type="submit"]').disabled=t.value==="";let e="directions"in t[t.selectedIndex].dataset;_(this.slot("directions"),e),e||(this.element.direction.selectedIndex=0)}}});var UR,jR=u(()=>{"use strict";On();UR=()=>{Je("companies-about","visited",30*12)}});var zR={};ot(zR,{default:()=>Gj});var Gj,VR=u(()=>{"use strict";FR();BR();jR();B();Gj=()=>{H("companies",Cl),H("companies-form",Al),d2Env.isMobile&&H("companies-promo",UR)}});var WR={};ot(WR,{default:()=>_m});var _m,qR=u(()=>{"use strict";Se();B();j();_m=class extends x{parsedInit(){this.type=this.element.dataset.imageName,it.subscribe("imagelist-update",this.picSync,this),it.subscribe("imagelist-replace",this.picSync,this),this.bindInput("title"),this.bindInput("text"),this.bindInput("url"),_(this.slot("preview",document.body),!0)}bindInput(e){let n=this.slot(`${e}-input`),s=this.slot(e,document.body);n.dataset.type=e,n.dataset.defaultValue=s.textContent,this.inputSync(n),n.addEventListener("input",()=>this.inputSync(n))}picSync(){let e=this.element[`${this.type}-1`],n=e?e.dataset.preview||e.dataset.thumbnail:null,s=this.slot("pic",document.body);this.pic=this.slot("pic-url"),n?this.pic?this.pic.src=n:(this.pic=document.createElement("img"),this.pic.src=n,s.before(this.pic)):this.pic&&this.pic.remove(),_(s,!n)}inputSync(e){let n=e.dataset.type,s="";try{s=n==="url"?new URL(e.value).host:e.value}catch(r){}let o=this.slot(n,document.body);o.textContent=s||e.dataset.defaultValue}}});var mg,pg,GR,JR,ZR,hg,YR,KR,XR,QR=u(()=>{"use strict";mg="Очистить",pg="Сохранить",GR="{Text}{Extra, select, 0 {} other { и ещё {Extra}}}",JR="Ваши шаблоны",ZR="Шаблоны",hg="Быстрые категории",YR="Какие марки обслуживаете?",KR="Выберите марки",XR="{Count, plural, one {# марка} many {# марок} other {# марки}}"});var t0,e0=u(()=>{"use strict";t0=[{name:"ru",caption:"Все российские",brands:["derways","gaz","lada","moskvich","tagaz","uaz"]},{name:"foreign",caption:"Все иномарки",brands:["ac","acura","alfaromeo","alpina","amc","aro","asia","astonmartin","audi","austin","autozam","avia","bac","barkas","bcc","bentley","bertone","bilenkinclassiccars","bmw","bogdan","brilliance","bugatti","buick","byd","cadillac","caterham","changan","chery","chevrolet","chrysler","citroen","cord","dacia","dadi","daewoo","daihatsu","daimler","datsun","detomaso","delorean","dodge","dongfeng","eagle","efini","eunos","faw","ferrari","fiat","ford","foton","fso","geely","genesis","gmc","greatwall","hafei","haima","haval","hawtai","holden","honda","huanghai","hummer","hyundai","infiniti","ikco","isuzu","iveco","jac","jaguar","jeep","kia","ktm","lamborghini","lancia","landrover","ldv","lexus","lifan","ligier","lincoln","lotus","luxgen","marussia","maserati","maybach","mazda","mercedes","mercury","merkur","mg","mini","mitsubishi","morgan","morris","nissan","noble","nysa","oldsmobile","opel","peugeot","plymouth","pontiac","porsche","proton","ravon","renault","rollsroyce","rover","saab","samsung","saturn","scion","seat","simca","skoda","sma","smart","ssangyong","subaru","suzuki","talbot","tata","tatra","tesla","toyota","trabant","vauxhall","volkswagen","volvo","wartburg","wiesmann","willys","zotye","zx"]},{name:"eu",caption:"Европейские",brands:["alfaromeo","audi","bmw","bugatti","citroen","dacia","ferrari","fiat","jaguar","landrover","lotus","mercedes","mini","opel","porsche","renault","saab","seat","skoda","smart","volkswagen","volvo"]},{name:"de",caption:"Немецкие",brands:["audi","bmw","mercedes","opel","porsche","smart","volkswagen"]},{name:"kr",caption:"Корейские",brands:["daewoo","genesis","hyundai","kia","ssangyong"]},{name:"cn",caption:"Китайские",brands:["brilliance","byd","changan","chery","dongfeng","faw","foton","geely","greatwall","haima","haval","hawtai","huanghai","jac","lifan"]},{name:"jp",caption:"Японские",brands:["acura","datsun","honda","isuzu","infiniti","lexus","mazda","mitsubishi","nissan","subaru","suzuki","toyota"]},{name:"us",caption:"Американские",brands:["chevrolet","chrysler","dodge","fiat","ford","hummer","jeep","cadillac"]},{name:"vw",caption:"Ваги",brands:["audi","porsche","seat","skoda","volkswagen"]},{name:"gm",caption:"GM",brands:["cadillac","chevrolet","gmc","hummer"]}]});var p0={};ot(p0,{default:()=>lz});var gt,Xn,Tm,r0,a0,ym,i0,Qo,fg,Zj,l0,c0,Yj,n0,s0,o0,Kj,gg,d0,Xj,vg,Qj,tr,ug,m0,Eg,tz,ez,iz,nz,sz,oz,rz,az,lz,h0=u(()=>{"use strict";ct();yi();_o();R();QR();el();D();V();xe();j();De();e0();gt="directions",Xn="brand",Tm="mode",r0="preset",a0="template",ym=6,i0=5,Qo=new Map,fg=[],Zj=(i,t)=>{let e=i.map(r=>Qo.get(r));if(t)return e.join(", ");let n=i.length,s=e.slice(0,i0).join(", "),o=Math.max(n-i0,0);return Z(GR,{Text:s,Count:n,Extra:o})},l0=i=>fg.map(t=>({name:t.name,caption:t.caption,brands:t.brands,selected:t.brands.every(e=>i.includes(e))})),c0=(i,t,e,n,s="check",o)=>d2Env.isMobile?y`
<div class="x-form__item">
  <div class="x-form__body">
    <label class="x-choice x-choice--switch">
      <input type="checkbox" name=${i} .value=${t} ?disabled=${o}
        ?checked=${n} data-action="${`change:${gt}.${s}`}">
      <span class="x-choice__label">${e}</span>
    </label>
  </div>
</div>
`:y`
<label class="c-checkbox">
  <input type="checkbox" name=${i} .value=${t} ?disabled=${o}
    ?checked=${n} data-action="${`change:${gt}.${s}`}">
  <span class="c-checkbox__check"></span><span class="c-checkbox__label">${e}</span>
</label>
`,Yj=(i,t,e,n,s)=>d2Env.isMobile?y`
<div class="x-form__item">
  <div class="x-form__body">
    <label class="x-choice x-choice--radio">
      <input type="radio" name=${i} .value=${t} ?disabled=${s}
        ?checked=${n} data-action=${`change:${gt}.template`}>
      <span class="x-choice__label u-text-overflow">${e}</span>
    </label>
  </div>
</div>
  `:y`
<label class="c-checkbox">
  <input type="radio" name=${i} .value=${t} ?disabled=${s}
    ?checked=${n} data-action=${`change:${gt}.template`}>
  <span class="c-checkbox__check c-checkbox__check--radio"></span>
  <span class="c-checkbox__label u-text-overflow">${e}</span>
</label>
`,n0=(i,t,e)=>{let n=Array.from(Qo.keys()).map(o=>c0(i,o,Qo.get(o),t.includes(o),void 0,e));if(d2Env.isMobile)return n;let s=un(n,ym);return y`<div class="o-grid o-grid--${Math.min(ym,n.length)} o-grid--no-margin c-checklist">${s.map(o=>y`<div><div class="c-checkbox-group f-item">${o}</div></div>`)}</div>`},s0=(i,t)=>{let e=i.map(n=>Yj(a0,n.brands.join(","),y`<b>${n.caption}</b> <i>${Zj(n.brands,!0)}</i>`,!1,t));return d2Env.isMobile?e:y`<div class="c-checkbox-group c-checklist">${e}</div>`},o0=(i,t)=>{let n=l0(i).map(o=>c0(r0,o.name,o.caption,!!o.selected,"preset",t));if(d2Env.isMobile)return n;let s=un(n,ym);return y`<div class="o-grid o-grid--${Math.min(ym,n.length)} o-grid--no-margin c-checklist">${s.map(o=>y`<div><div class="c-checkbox-group f-item">${o}</div></div>`)}</div>`},Kj=(i,t,e)=>{let n=t.length===0;return d2Env.isMobile?y`
<form class="x-form c-com-dirform o-t-s" novalidate data-keysubmit data-role="form">
  <div class="x-box x-box--narrow">
    <div class="c-radiogroup o-t" style=${Kt({opacity:n?"0.5":"1"})}>
      <label class="c-radiogroup__item">
        <input name="${Tm}" type="radio" value="templates" data-action="change:${gt}.presets"
          ?disabled=${n} ?checked=${!n}>
        <span class="c-radiogroup__button">${ZR}</span>
      </label>
      <label class="c-radiogroup__item">
        <input name="${Tm}" type="radio" value="presets" data-action="change:${gt}.presets"
          ?disabled=${n} ?checked=${n}>
        <span class="c-radiogroup__button">${hg}</span>
      </label>
    </div>
    <div class="c-com-dirform__templates"
      data-slot="${gt}.templates-el" style=${Kt({display:n?"none":""})}>
      ${s0(t,e)}
    </div>
    <div class="c-com-dirform__presets"
      data-slot="${gt}.presets-el" style=${Kt({display:n?"":"none"})}>
      ${o0(i,e)}
    </div>
  </div>
  <div class="x-box x-box--narrow" data-role="chk">
    ${n0(Xn,i,e)}
  </div>
  <div class="c-com-dirform__submit o-group o-group--l">
    <div class="c-com-dirform__selected is-auto" data-slot="${gt}.selected"></div>
    <button class="r-button-unstyled c-link c-link--gray" style=${Kt({opacity:e?"0.5":"1"})}
      ?disabled=${e} type="button" data-action="${gt}.clear" data-slot="${gt}.clear">${mg}</button>
    <button class="c-button c-button--primary" ?disabled=${e} name="submitbtn" type="submit">${pg}</button>
  </div>
</form>
    `:y`
<form class="c-com-dirform" novalidate data-keysubmit>
  <div class="o-grid-row ${Rt({"o-grid-row--s":!d2Env.isMobile,"o-group":!d2Env.isMobile,"o-group--justify":!d2Env.isMobile})}">
    <div class="c-radiogroup" style=${Kt({opacity:n?"0.5":"1"})}>
      <label class="c-radiogroup__item">
        <input name="${Tm}" type="radio" value="templates" data-action="change:${gt}.presets"
          ?disabled=${n} ?checked=${!n}>
        <span class="c-radiogroup__button">${JR}</span>
      </label>
      <label class="c-radiogroup__item">
        <input name="${Tm}" type="radio" value="presets" data-action="change:${gt}.presets"
          ?disabled=${n} ?checked=${n}>
        <span class="c-radiogroup__button">${hg}</span>
      </label>
    </div>
    <div class="c-com-dirform__submit o-group o-group--l">
      <button class="r-button-unstyled c-link c-link--gray" style=${Kt({opacity:e?"0.5":"1"})}
        ?disabled=${e} type="button" data-action="${gt}.clear" data-slot="${gt}.clear">${mg}</button>
      <button class="c-button c-button--primary" ?disabled=${e} name="submitbtn" type="submit">${pg}</button>
    </div>
  </div>
  <div class="c-com-dirform__templates"
    data-slot="${gt}.templates-el" style=${Kt({display:n?"none":""})}>
    ${s0(t,e)}
  </div>
  <div class="c-com-dirform__presets"
    data-slot="${gt}.presets-el" style=${Kt({display:n?"":"none"})}>
    ${o0(i,e)}
  </div>
  <div class="hr"></div>
  <div class=${Rt({"o-grid-row":d2Env.isMobile})} data-role="chk">
    ${n0(Xn,i,e)}
  </div>
</form>
    `},gg=()=>{if(Qo.size===0){let i=b(gt,"brands-list");i&&(JSON.parse(i.textContent).forEach(e=>{Qo.set(e.name,e.caption)}),fg=t0.map(e=>({name:e.name,caption:e.caption,brands:e.brands.filter(n=>Qo.has(n))})))}},d0=i=>{q(`[name="${a0}"]`,i).forEach(e=>{e.checked=!1})},Xj=(i,t)=>{let n=i[t.name].value.split(",");n.length!==0&&Array.from(i[Xn]).forEach(s=>{s.checked=n.includes(s.value)})},vg=i=>{let t=Array.from(i[Xn]).filter(s=>s.checked).map(s=>s.value),e=l0(t);Array.from(i[r0]).forEach((s,o)=>{s.checked=!!e[o].selected})},Qj=(i,t)=>{let e=fg.find(s=>s.name===t.value);if(!e)return;let{checked:n}=t;Array.from(i[Xn]).forEach(s=>{e.brands.includes(s.value)&&(s.checked=n)}),vg(i)},tr=i=>{let t=Array.from(i[Xn]).filter(n=>n.checked).length,e=b(gt,"selected");if(e.textContent=t===0?d2Env.isMobile?KR:YR:Z(XR,{Count:t}),d2Env.isMobile){let n=b(gt,"clear",i);_(n,t!==0)}},ug=i=>Array.from(i.options).map(t=>t.value),m0=(i,t)=>{let e=b(gt,"button",i),n=b(gt,"checkbox",i);_(e,t),n.checked=t},Eg=(i,t,e)=>{let n=b(gt,"fields",t),s=(n.dataset.caption||"")+(d2Env.isMobile?"":` <span class="c-counter" data-slot="${gt}.selected"></span>`),o=ug(n),a=tt(gt,"fields").filter(c=>c.options.length>0).map(c=>({name:c.name,caption:c.dataset.caption||"",brands:ug(c)})),l=new yt({anchor:i,className:"c-modal__content--brands",title:s});z(Kj(o,a,e),l.element),l.setSubmitHandler(c=>{let d=b(gt,"brands",t),m=Array.from(c[Xn]).filter(h=>h.checked).map(h=>h.value);d.textContent=String(m.length)||"",n.innerHTML=m.map(h=>`<option value="${h}" selected></option>`).join("");let p=ug(n).length>0;return m0(t,p),Promise.resolve()}),l.show(),tr(l.form)},tz=i=>{gg();let t=i.node(),e=Q(t,gt,"item");if(m0(e,t.checked),t.checked){let n=b(gt,"button",e);Eg(n,e)}},ez=i=>{gg();let t=i.node(),e=Q(t,gt,"item");Eg(t,e)},iz=i=>{gg();let t=i.node(),e=Q(t,gt,"item");Eg(t,e,!0)},nz=i=>{let{form:t}=i.node();vg(t),d0(t),tr(t)},sz=i=>{let t=i.node();Array.from(t.form[Xn]).forEach(e=>{e.checked=!1}),vg(t.form),d0(t.form),tr(t.form)},oz=i=>{let t=i.node();Xj(t.form,t),tr(t.form)},rz=i=>{let t=i.node();Qj(t.form,t),tr(t.form)},az=i=>{let t=i.node(),e=Q(t,gt,"item"),n=b(gt,"templates-el",e),s=b(gt,"presets-el",e);_(n,t.value==="templates"),_(s,t.value==="presets"),tr(t.form)},lz=()=>{v.registerHandlers(gt,{checkdirection:tz,select:ez,show:iz,check:nz,clear:sz,template:oz,preset:rz,presets:az})}});var u0={};ot(u0,{default:()=>mz});var er,cz,dz,mz,f0=u(()=>{"use strict";R();V();nt();er="com",cz=i=>{if(d2Env.isMobile){let t=i.node(),e=b(er,"targeting-title"),n=b(er,"targeting-info");pe({anchor:t,title:e.textContent,html:`<div class="x-box x-box--narrow o-t-s"><div class="x-text o-t-s">${n.innerHTML}</div></div>`})}else b(er,"targeting").classList.remove("is-closed")},dz=i=>{if(d2Env.isMobile){let t=i.node(),e=b(er,"lastpromo-title"),n=b(er,"lastpromo");pe({anchor:t,title:e.textContent,html:n.innerHTML})}},mz=()=>{v.registerHandlers(er,{targeting:cz,lastpromo:dz})}});var En,pz,hz,g0,uz,fz,gz,vz,Ez,v0,E0=u(()=>{"use strict";R();D();V();$();j();ye();Lh();Ft();De();nt();We();Ce();En="booking",pz=(i,t)=>`
<label class="c-hours__item">
  <input name="hours" value="${i}" type="checkbox"${t?" checked":""}>
  <span class="c-hours__label">${i}:00</span>
</label>
`,hz=(i,t)=>Boolean(t&&t.includes(i)),g0=(i,t)=>{let e=J('input[name="urgency"]:checked',i);if(e){let n=e.dataset.hours.split(","),s=b(En,"hours",i),o=n.map(r=>pz(r,hz(r,t)));s.innerHTML=o.join("")}},uz=i=>{let t=i.node(),n=q('input[name="hours"]:checked',t.form).map(s=>s.value);g0(t.form,n)},fz=i=>{let e=i.node().value==="phone",n=b(En,"contacts"),s=b(En,"contacts-notes"),o=at(n);o.duration=400,o.expand(e),s.classList.toggle("is-phone",e)},gz=(i,t)=>{let e=t.validationErrors;if(e&&e.length>0){let{field:n,messages:s}=e[0],o=n[0].toLowerCase()+n.slice(1),r=i[o]&&i[o].length?i[o][0]:i[o];if(r){try{Lt(r,void 0,!0),r.focus()}catch(a){}wr(s.join("<br>"),r)}}return Boolean(e)},vz=i=>{Ht(),i.node().href===""&&ft(i)},Ez=i=>T(void 0,null,function*(){let t=i.node(),e=yield Ct(t.href,En,{anchorEl:t}),n=Ii(e),s=J('script[type="application/json"]',n),o=JSON.parse(s.textContent),r=new yt({anchor:t,title:o.header},!0);r.element.append(n),g0(r.element),r.addEventListener("submit",l=>{l.preventDefault();let c=l.detail;if(!gz(r.form,c)){let d=b(En,"success"),m=b(En,"text",d),p=b(En,"link",d);m.innerHTML=c.text||"",p.innerHTML=c.linkText||"",p.href=c.linkUrl||"",_(r.form,!1),_(d,!0)}}),r.show();let a=b(En,"validation",r.element);a&&jc(a)}),v0=()=>{v.registerHandlers(En,{form:Ez,hours:uz,contacts:fz,link:vz})}});var bz,b0,_z,_0,T0=u(()=>{"use strict";D();bz="js-text",b0="is-clamped",_z="is-short",_0=i=>{let t=vt(i,b0);if(!t)return;let e=()=>{t.classList.remove(b0),i.remove()},n=O(bz,t);n.offsetWidth<n.scrollWidth?i.addEventListener("click",e):(e(),t.classList.add(_z))}});var bn,bg,y0,Tz,L0,x0=u(()=>{"use strict";R();V();$();j();ye();bn="comfeedback",y0=()=>T(void 0,null,function*(){let i=b(bn,"filters"),t=i.kind.value,e=t==="Assessed",n=yield Ct(i.action,bn,{anchorEl:i,body:new FormData(i)}),s=b(bn,"container");s.innerHTML=n;let o=b(bn,"more");o&&(bg||(bg=o.href),o.href=`${bg}${e?"":`?kind=${t}`}`);let r=document.getElementById("reviews");r&&mr(r)}),Tz=i=>{let e=i.node().value==="mentions",n=b(bn,"filters");n.kind.value=e?"Neutral":"Assessed";let s=b(bn,"reviews-desc"),o=b(bn,"mentions-desc");_(s,!e),_(n,!e),_(o,e);let r=b(bn,"more");r&&_(r,!e);let a=b(bn,"more-mentions");a&&_(a,e),y0()},L0=()=>{v.registerHandlers("comfeedback",{section:Tz,filter:y0})}});var w0,C0,A0,S0,M0=u(()=>{"use strict";w0="Ответ на отзыв",C0="Удалить",A0="Удалить ответ?",S0="Изменить"});var Tg,yg,Lz,xz,wz,Cz,Az,Sz,Mz,Lm,_g,Iz,Rz,Oz,Hz,I0,R0=u(()=>{"use strict";R();M0();ue();D();$();Ft();wo();nt();Tg="comfeedback",yg="is-collapsed",Lz="is-active",xz="is-short",wz="is-edit",Cz="js-container",Az="js-field",Sz="js-text",Mz=[{action:"edit",text:S0},{action:"delete",text:C0,confirmTitle:A0,confirm:Ae}],_g=(i,t,e,n)=>{let s=vt(i,Cz),o=O(Az,s);if(s.classList.toggle(Lz,t),s.classList.remove(xz),n){let r=O(Sz,s);r&&(r.innerHTML=n)}t||(s.classList.toggle(wz,!e),o&&(e?(o.value="",o.form.classList.add(yg)):(o.focus(),setTimeout(()=>{o.selectionStart=o.selectionEnd=o.value.length},0))))},Iz=i=>{let t=i.node();clearTimeout(Lm),t.form.classList.remove(yg);let e=t.form.oldtext,n=e&&e.value;n&&(t.value=n,e.value="")},Rz=i=>{let t=i.node();clearTimeout(Lm),Lm=setTimeout(()=>{t.value||t.form.classList.add(yg)},350)},Oz=i=>T(void 0,null,function*(){ft(i),clearTimeout(Lm);let t=i.node(),{text:e}=yield L(t.action,`${Tg}.submit`,{method:"POST",anchorEl:t.submitbtn,body:{text:t.text.value}});_g(t,!0,!1,e||"")}),Hz=i=>{let t=i.node(),e=t.dataset.editable==="",n=Mz.slice();e||n.splice(0,1),new li(t,n,w0).addEventListener("select",o=>{let r=o.detail;r==="delete"?Ct(t.dataset.url||"",`${Tg}.delete`,{delay:!0,method:"DELETE",anchorEl:t}).then(()=>{_g(t,!1,!0),zt()}):r==="edit"&&_g(t,!1)})},I0=()=>{v.registerHandlers(Tg,{focus:Iz,blur:Rz,submit:Oz,dropdown:Hz})}});var Sl,O0=u(()=>{"use strict";D();B();$();xo();Sl=class extends x{parsedInit(){He().addEventListener("scroll",this)}handleEvent(){let e=J('link[rel="next"]',this.element);if(!e){He().removeEventListener("scroll",this);return}if(this.isBusy)return;this.isBusy=!0;let n=e.href;e.remove(),Ct(n,this.role,{silent:!0,throwError:!0}).then(s=>{this.element.insertAdjacentHTML("beforeend",s)}).catch(()=>{}).finally(()=>{this.isBusy=!1})}}});var H0,D0,k0=u(()=>{"use strict";R();V();j();H0="cpgallery",D0=()=>{v.registerHandlers(H0,{unfold:i=>{let t=i.node();tt(H0,"photo").forEach(n=>{_(n,!0)}),t.parentElement.remove()}})}});var N0,Dz,P0,$0=u(()=>{"use strict";R();V();j();N0="highlights",Dz=i=>{let t=i.node();tt(N0,"hidden").forEach(n=>{_(n,!0)}),t.remove()},P0=()=>{v.registerHandlers(N0,{more:Dz})}});var F0,B0,U0=u(()=>{"use strict";V();ve();F0=(i,t)=>{let e=b(t,"params"),{lat:n,lng:s,title:o,address:r}=(e||i).dataset;if(!n||!s)return;let a=[Number(n),Number(s)];DG.then(()=>{let l=DG.map(i,{center:a,zoom:15,scrollWheelZoom:!1,closePopupOnClick:!1}),c=DG.popup({closeButton:!1}).setLatLng(a).setContent(`<div><h3 class="c-header">${It(o||"")}</h3>${It(r||"")}</div>`);DG.marker(a).addTo(l).bindPopup(c).openPopup()})},B0=()=>{let i=b("com-map","placeholder");i&&Jg(i,"com-map")}});var kz,Nz,j0,z0=u(()=>{"use strict";R();$();kz="/_api/companies/click",Nz=i=>{let t=i.node(),e=t.dataset.key||"";d2Env.isMobile?L(kz,{method:"POST",silent:!0,body:{key:e}}):t.classList.add("is-active")},j0=()=>{v.registerHandlers("phone",{reveal:Nz})}});var Pz,V0,W0=u(()=>{"use strict";R();Pz="is-disabled",V0=(i,t)=>{let e=i.classList.contains(Pz),n=i.closest("form"),s=[Number(n.latitude.value)||55.7427928,Number(n.longitude.value)||37.6154009];DG.then(()=>{let o=DG.map(i,{center:s,zoom:15,fullscreenControl:!1,scrollWheelZoom:!1}),r=DG.marker(s,{draggable:!e}).addTo(o);e||r.on("dragend",c=>{let d=c.target._latlng;a([d.lat,d.lng])});let a=(c,d)=>{d!==n.latitude&&(n.latitude.value=c[0].toFixed(6)),d!==n.longitude&&(n.longitude.value=c[1].toFixed(6)),o.panTo(c),d&&r.setLatLng(c)},l=c=>{let d=c.node(),m=Number(n.latitude.value),p=Number(n.longitude.value);!e&&m&&p&&a([m,p],d)};v.registerHandlers(t,{update:l})})}});var q0,G0=u(()=>{"use strict";Si();q0=i=>{ee(i,{onEnter:()=>{i.style.animationDelay=`${Math.round(Math.random()*200)}ms`,i.classList.add(i.dataset.fx||"fx-cp-fadein-up")},permanent:!0})}});var J0={};ot(J0,{default:()=>$z});var $z,Z0=u(()=>{"use strict";E0();T0();x0();R0();O0();k0();$0();U0();z0();W0();G0();B();$z=()=>{H(".c-fadeinup",q0,!0),H("com-map",F0),H("com-profile-map",V0),j0(),D0(),P0(),H("comfeedback",Sl),v0(),L0(),I0(),H("comfeedback-show",_0),window._mapShow=B0}});var Y0,K0=u(()=>{"use strict";Y0="Все объявления"});var Ml,X0=u(()=>{"use strict";Ms();rd();Ml=class extends EventTarget{constructor(e){super();this.input=e;this.ac=new Me("/ajax/geo.cshtml?_=r&p=1",this.input),this.ac.setRowBuilder(Oo),this.update=this.update.bind(this),this.dismiss=this.dismiss.bind(this),this.ac.addEventListener("update",this.update),this.ac.addEventListener("dismiss",this.dismiss)}update(e){let{row:n}=e.detail;this.dispatchEvent(new CustomEvent("select",{detail:{kind:n.kind||"city",value:n.id||"",name:n.caption||"",country:n.country,countryId:n.countryId}}))}dismiss(){clearTimeout(this.dismissTimer),this.dismissTimer=setTimeout(()=>{this.dispatchEvent(new Event("cancel"))},100)}dispose(){this.ac&&this.ac.dispose()}}});var Q0={};ot(Q0,{default:()=>Cm});var Bz,Uz,jz,xm,zz,Lg,wm,Cm,tO=u(()=>{"use strict";R();K0();D();B();V();ge();$();j();Ea();Fi();xo();hn();of();Di();X0();Bz=400,Uz=5,jz=10,xm=i=>{i.delete("page")},zz=()=>{let i=b("nav","guest-extra");i&&i.remove()},Lg=i=>{document.querySelectorAll(".js-market-listmode, .js-market-indexmode").forEach(t=>_(t,t.classList.contains("js-market-indexmode")?i:!i))},wm=()=>{let i=new URLSearchParams(window.location.search);return!(i.get("section")||i.get("brand")||i.get("model")||i.get("generation")||i.get("car"))&&!i.get("query")&&(!i.get("location")||i.get("location")==="*")},Cm=class extends x{parsedInit(){let e=JSON.parse(this.element.textContent);this.page_=0,this.nextPageEnabled_=!1,this.nextPageIsLoading_=!1,this.searchUrl_=e.searchUrl,this.pageSize_=e.pageSize,this.data_=e.results,this.items_=0,this.adsEnabled_=e.dvEnabled,this.resources_=e.resources,this.sections_=new Map,this.data_.section&&this.data_.section.id&&this.sections_.set(this.data_.section.id,this.data_.section.caption||""),this.filterType_=this.data_.filterType||"default",this.offersEl_=O("js-market-offers"),this.sectionsEl_=O("js-market-sections"),this.facetsForm_=O("js-market-facets"),this.filtersContainer_=O("js-market-filters"),this.filterEls_=q("[data-target]",this.filtersContainer_),this.navEls_=q(".js-market-nav"),this.searchEl_=O("js-market-search"),this.locationEl_=O("js-market-location"),this.locationAcEl_=O("js-market-location-ac"),this.isUserInput_=!1,He().addEventListener("scroll",()=>this.more_()),this.locationEl_.addEventListener("change",()=>this.onLocationChange_()),this.searchEl_.addEventListener("input",zn(()=>this.onInput_(),Bz)),window.addEventListener("popstate",()=>this.navigate_()),this.restoreLocations_(),this.slots("block",document.body).forEach(n=>_(n,!0)),this.render_(),Lg(wm()),v.registerHandlers("marketsearch",{nav:this.onNav_,presets:this.onNav_,toindex:this.onToIndex_,more:this.onNextPage_,setlocation:this.onSetLocation_},this)}onNav_(e){zz();let n=e.actionName();this.isUserInput_=!1;let s=this.getQuery_();if(xm(s),n==="presets"){let l=e.node();if(l.selectedIndex!==0){let c=l.options[l.selectedIndex];s.set("brand",c.dataset.brand||""),s.set("model",c.dataset.model||""),s.set("generation",c.dataset.gen||"")}}let o=s.get("section"),r=this.sections_.get(o),a=o&&r?r:this.resources_.defaultTitle;document.title=a,window.history.pushState(null,a,wm()?window.location.pathname:`?${s}`),this.navigate_()}onSetLocation_(e){let n=e.node(),{value:s}=n.dataset;if(s==="country"){let o=this.locationEl_.options[this.locationEl_.selectedIndex],{countryid:r,country:a}=o.dataset;for(let l=0,c;c=this.locationEl_.options[l];l++)if(/^[A-Z]+$/.test(c.value)&&!r){this.locationEl_.selectedIndex=l;break}r&&a&&this.addLocation_("country",r,a)}else this.locationEl_.selectedIndex=0;this.onLocationChange_()}onToIndex_(){document.title=this.resources_.defaultTitle,window.history.pushState(null,this.resources_.defaultTitle,window.location.pathname),this.navigate_()}onNextPage_(){this.more_()}setPageTitle_(e){let n=O("js-market-section-title");if(!n)return;let s="";if(e){let r=this.getQuery_();xm(r),r.delete("query"),r.set("section",e),s=`?${r}`}let o=e&&this.sections_.get(e)||"";n.innerHTML=o?`<a class="c-link c-link--text" href="${s}">${o}</a>`:"",_(n,!!o)}more_(){this.nextPageEnabled_&&!this.nextPageIsLoading_&&(this.nextPageIsLoading_=!0,this.request_(!1,!0))}resetPage_(){this.page_=0,this.setMoreButton_()}setMoreButton_(){let e=Math.ceil(this.data_.hitCount/this.pageSize_),n=this.page_+1<e;this.nextPageEnabled_=n,_(O("js-catalog-more"),n)}onLocationChange_(){this.ls_&&this.ls_.dispose();let{value:e}=this.locationEl_,n=e==="more";if(this.LocationShow_(!n),n)this.locationAcEl_.value="",this.locationAcEl_.focus(),this.ls_=new Ml(this.locationAcEl_),this.ls_.addEventListener("select",s=>this.onLocationSelect_(s)),this.ls_.addEventListener("cancel",()=>this.onLocationCancel_());else{this.lastChosenOption_=this.locationEl_.selectedIndex;let s=this.getQuery_();xm(s),window.history.pushState(null,document.title,`?${s}`),this.navigate_()}this.saveLocations_()}onLocationSelect_(e){let{kind:n,value:s,name:o,country:r,countryId:a}=e.detail;_(this.locationAcEl_,!1),this.addLocation_(n,s,o,r,a),this.onLocationChange_()}addLocation_(e,n,s,o,r){let{options:a}=this.locationEl_,l=Array.from(a).find(c=>c.value===n);if(l)l.selected=!0;else{let c=this.locationEl_.options[this.locationEl_.options.length-1],d=document.createElement("option");this.locationEl_.insertBefore(d,c),d.value=n||"",d.dataset.new="1",e==="city"&&r&&o&&(d.dataset.countryid=r,d.dataset.country=o),d.innerHTML=s||"",d.selected=!0}}onLocationCancel_(){this.lastChosenOption_!==void 0&&(this.locationEl_.selectedIndex=this.lastChosenOption_),this.onLocationChange_()}LocationShow_(e){_(this.locationEl_,e),_(this.locationAcEl_,!e)}onInput_(){let{value:e}=this.searchEl_;if(e.length<2)return;this.isUserInput_=!0;let n=this.getQuery_();n.set("section",""),this.facetsForm_.querySelector("input").checked=!0,n.set("query",e),this.switchFiltersType_("default",!0),xm(n),document.title=this.resources_.defaultTitle,window.history.replaceState(null,this.resources_.defaultTitle,`?${n}`),this.navigate_()}navigate_(){let e=this.getQuery_(!0),n=wm();n||this.isUserInput_&&e.get("query")===""?(Lg(n),this.searchEl_.value="",this.data_.facets||(this.data_.facets={}),this.data_.facets.sectionId=[],this.data_.offers=[],this.data_.hitCount=0,this.data_.brand="",this.data_.model="",this.data_.generation="",this.render_()):this.request_(!this.isUserInput_),this.isUserInput_=!1}request_(e,n){let s=new se(O("js-market-spin")),o=this.getQuery_(!0);n&&(o.delete("page"),o.set("page",String(this.page_+1))),L(this.searchUrl_,this.role,{anchorEl:this.searchEl_,spinner:s,body:o,throwError:!0}).then(r=>{this.data_=r;let a=this.getQuery_().get("query")||"";e&&this.searchEl_.value!==a&&(this.searchEl_.value=a),Lg(wm()),n?this.page_++:this.resetPage_(),this.render_()}).catch(()=>{}).finally(()=>{this.nextPageIsLoading_=!1})}getQuery_(e){let n=new URLSearchParams(window.location.search);if(!e){ii(this.facetsForm_).forEach((o,r)=>{n.set(r,o)}),n.delete("q");for(let o=0,r;r=this.filterEls_[o];o++)n.delete(r.name);for(let o=0,r;r=this.filterEls_[o];o++)r.value&&r.dataset.target.includes(this.filterType_)&&n.set(r.name,r.value);n.get("brand")===""&&n.set("model",""),n.get("model")===""&&n.set("generation","")}return n}render_(){let e=O("js-market-empty"),n=[],s=[];if(this.data_.offers&&this.data_.offers.length){for(let r=0,a;a=this.data_.offers[r];r++){let l=`/market/offers/${a.id}`,c=ca({images:[{url:a.picture.url,width:a.picture.width,height:a.picture.height}],color:a.picture.htmlPrimaryColor},2,{size:{width:1,height:1},className:`is-rounded ${d2Env.isMobile?"":"has-darkening-hover"}`});if(n[r]=`<div class="offer-card offer-card--wide ${d2Env.isMobile?"c-block":"c-darkening-hover-container"}"><div class="offer-card__pic">${c}</div><div class="offer-card__body"><a class="u-link-area" href="${l}"></a><div class="offer-card__title"><span class="c-link c-link--text">${a.caption}</span></div><div class="offer-card__location">${a.location}${a.delivery?` <span>${this.resources_.delivery[a.delivery]}</span>`:""}</div><div class="offer-card__price">${a.formattedPrice}</div></div></div>`,this.items_+=1,this.adsEnabled_&&(this.items_-Uz)%jz===0){let d=Xt();s.push(d),n[r]+=`<div id="${d}"></div>`}}_(e,!1)}else{n[0]="";let r=this.getQuery_(),a=r.get("location"),l=O("js-market-empty-country"),c=l&&/^\d+$/.test(a),d=/^[A-Z]+$/.test(a);l&&_(l,!!c&&!d),_(O("js-market-empty-location-all"),d);let m=r.toString().includes("facets");_(O("js-market-empty-filter"),m);let p=!!r.get("section");_(O("js-market-empty-section"),p),_(e,!0)}this.page_>0?this.offersEl_.insertAdjacentHTML("beforeend",n.join("")):this.offersEl_.innerHTML=n.join(""),s.forEach(r=>{window.yaContextCb.push(()=>{Ya.adfoxCode.createScroll({ownerId:59610,containerId:r,params:{pp:"h",ps:"nkx",p2:"gqqe",puid1:"",puid2:"",puid3:"",puid4:"",puid5:"",puid6:"",puid7:"",puid8:"",puid9:"",puid10:"",puid11:"",puid12:"",puid13:"",puid14:""},lazyLoad:{fetchMargin:100,mobileScaling:2}})})}),this.setMoreButton_();let o=this.data_.filterType||"default";this.filterType_!==o&&this.switchFiltersType_(o),this.renderNav_()}switchFiltersType_(e,n){this.filterType_=e;let s;for(let o=0,r;r=this.filterEls_[o];o++){let a=r.dataset.target.includes(e);_(r,a),a&&(s=!0),(n||!a)&&(r.value="")}_(this.filtersContainer_,!!s)}renderNav_(){let{facets:e}=this.data_,n=this.getQuery_(!0),s="section",o=n.get(s)||"";this.setPageTitle_(o);let r=[],a=e&&e.sectionId||[];a.unshift({matchCount:0,name:Y0,value:""});for(let d=0,m;m=a[d];d++){let p=m.value===o;r[d]=`
<label class="c-side-nav__item${p?" is-active":""}">
  <input type="radio" name="${s}" value="${m.value||""}" data-action="marketsearch.nav"${p?" checked":""}>
  <span class="${p?"":"c-link c-link--text"}">${m.name}</span>
  ${m.matchCount?` <span class="c-counter">${m.matchCount}</span>`:""}
</label>
      `,m.value&&this.sections_.set(m.value,m.name)}this.sectionsEl_.innerHTML=r.join("");for(let d=0,m;m=this.navEls_[d];d++){o=n.get(m.name)||"";let p=o===m.value;m.checked=p,m.parentElement.classList.toggle("is-active",p);let h=O("js-side-link",m.parentElement);h&&(h.classList.toggle("c-link",!p),h.classList.toggle("c-link--text",!p))}let l=n.get("location"),{options:c}=this.locationEl_;for(let d=0,m;m=c[d];d++)m.selected=m.value===l}restoreLocations_(){if(!Vo())return;let e=(r,a)=>{for(let l=0,c;c=r.options[l];l++)if(c.value===a)return!0;return!1},n=JSON.parse(window.sessionStorage.getItem("marketLocations")||"[]"),s=window.sessionStorage.getItem("marketSelectedLocation"),o=this.locationEl_.options[this.locationEl_.options.length-1];for(let r=0,a;a=n[r];r++){if(!/^[A-Z]+$/.test(a.value)&&!(a.countryid&&a.country)||e(this.locationEl_,a.value))continue;let l=document.createElement("option");this.locationEl_.insertBefore(l,o),l.value=a.value,l.dataset.new="1",l.dataset.countryid=a.countryid||"",l.dataset.country=a.country||"",l.innerHTML=a.name,l.selected=a.value===s}this.saveLocations_()}saveLocations_(){if(!Vo())return;let e=[],{options:n}=this.locationEl_;for(let s=0,o;o=n[s];s++)o.dataset.new==="1"&&e.push({name:o.text,value:o.value,country:o.dataset.country||"",countryid:o.dataset.countryid||""});sessionStorage.setItem("marketLocations",JSON.stringify(e)),sessionStorage.setItem("marketSelectedLocation",this.locationEl_.value)}}});var eO={};ot(eO,{default:()=>Xz});function Yz(i){let t=wt(Wz),e=O(qz),n=O(Gz,e);n.href=i.href;let s=O(Vz,e),o=Fe(i,"background-color");e.style.backgroundColor=o||"",t.forEach(r=>{r.classList.toggle(Jz,r===i)}),Am=new Xo,Am.addEventListener("load",r=>{let a=r.detail;if(!d2Env.isMobile){let c=new bt(a.naturalWidth,a.naturalHeight);c.scaleToFit(Zz).round(),n.style.maxWidth=`${c.width}px`}let l=Ss({images:[{url:a.src,width:a.naturalWidth,height:a.naturalHeight}],color:o},d2Env.isMobile?1:void 0,{size:d2Env.isMobile?{width:16,height:9}:void 0,className:"offer-photos__pic"});s.replaceWith(l)}),Am.addImage(i.href),Am.start()}var Vz,Wz,qz,Gz,Jz,Zz,Am,Kz,Xz,iO=u(()=>{"use strict";R();D();ln();dg();j();hn();Vz="offer-photos__pic",Wz="js-offer-thumb",qz="js-offer-preview",Gz="js-offer-link",Jz="is-active",Zz=new bt(800,800);Kz=i=>{Yz(i.node())},Xz=()=>{v.registerHandlers("offer",{photo:Kz})}});var nO,sO,oO,rO,aO=u(()=>{"use strict";nO="Выберите причину",sO="Я продал товар на DRIVE2",oO="Я продал товар где-то ещё",rO="Другая причина"});var mO={};ot(mO,{default:()=>nV});var Qn,tV,lO,cO,dO,eV,iV,nV,pO=u(()=>{"use strict";R();aO();V();$();ae();wo();nt();Qn="myoffers",tV="is-off",lO="u-grayscale",cO="c-link--gray",dO=()=>{let i=b(Qn,"inactive");i&&tt(Qn,"item",i).length===0&&i.remove()},eV=i=>T(void 0,null,function*(){let t=i.node(),e=Q(t,Qn,"item");yield L(`/market/offers/${e.dataset.id}/activate`,Qn,{method:"POST",anchorEl:t}),e.classList.remove(tV);let n=e.querySelector(`.${lO}`);n&&n.classList.remove(lO);let s=e.querySelector(`.${cO}`);s&&s.classList.remove(cO),t.parentElement.remove(),b(Qn,"offers").appendChild(e),dO()}),iV=i=>T(void 0,null,function*(){let t=i.node(),e=Q(t,Qn,"item");new li(t,[{action:"delete_offer_D2",text:sO},{action:"delete_offer_notD2",text:oO},{action:"delete_offer_another",text:rO}],nO).addEventListener("select",s=>T(void 0,null,function*(){let o=`/market/offers/${(e||t).dataset.id}`;yield Ct(o,Qn,{delay:!0,method:"DELETE",anchorEl:t}),zt(),ht(s.detail),e?(e.remove(),dO()):window.location.href="/market/offers/my"}))}),nV=()=>{v.registerHandlers(Qn,{restore:eV,remove:iV})}});var hO={};ot(hO,{default:()=>oV});var sV,oV,uO=u(()=>{"use strict";R();D();j();sV=i=>{let t=i.node(),n=t.options[t.selectedIndex].dataset.type||"default";q("[data-target]",t.form).forEach(o=>{let r=o.dataset.target.includes(n);_(o,r)})},oV=()=>{v.registerHandlers("marketform",{updatefields:sV})}});var fO={};ot(fO,{default:()=>aV});var Sm,rV,aV,gO=u(()=>{"use strict";R();V();$();Sm="parts",rV=i=>T(void 0,null,function*(){let t=i.node(),{url:e}=t.dataset,n=b(Sm,"replacements");if(!e||!n)return;let s=yield L(e,Sm,{anchorEl:t});b(Sm,"container").classList.remove("is-shaded");let r=s.map(a=>`
<tr>
  <td>${a.manufacturer}</td>
  <td><a href="${a.link}" class="c-link c-link--text" data-ym-target="parts_cross_click">${a.code}</a></td>
  <td>${a.mentionCount}</td>
</tr>
`).join("");t.remove(),n.innerHTML=r}),aV=()=>{v.registerHandlers(Sm,{more:rV})}});var EO={};ot(EO,{default:()=>cV});var vO,lV,cV,bO=u(()=>{"use strict";R();V();j();vO="parts-photos",lV=i=>{let t=i.node(),e=tt(vO,"item");e.length&&(e.forEach(n=>_(n,!0)),t.remove())},cV=()=>{v.registerHandlers(vO,{more:lV})}});var _O={};ot(_O,{default:()=>pV});var dV,mV,pV,TO=u(()=>{"use strict";R();dV="parts-for-sale",mV=i=>{let t=i.node(),e=t.previousElementSibling;e&&(e.classList.remove("is-shaded"),t.remove())},pV=()=>{v.registerHandlers(dV,{more:mV})}});var yO={};ot(yO,{default:()=>uV});var xg,hV,uV,LO=u(()=>{"use strict";R();ue();V();$();Ld();nt();xg="premiumform",hV=i=>T(void 0,null,function*(){let t=i.node();if(yield et(Bc,void 0,t).then(o=>!o))return;let e=Q(t,xg,"buttons"),n=t.dataset.userid;yield L("/ajax/premium/",xg,{method:"POST",anchorEl:t,body:C({_:"p",k:e.dataset.key,m:t.dataset.value},n&&{u:n})});let s=Number(t.dataset.cost)||0;Uo([{name:"Премиум-аккаунт",category:`Премиум-аккаунт/${t.dataset.value}`,price:s}]),setTimeout(()=>{window.location.reload()},100)}),uV=()=>{v.registerHandlers(xg,{buy:hV})}});var ir,fV,xO,gV,vV,wO,CO=u(()=>{"use strict";R();D();B();V();j();ir="signup",fV=()=>{if(window.history.length){window.history.back();return}let i=b(ir,"back-button");window.location.href=i.dataset.backurl},xO=()=>{let i=b(ir,"email");_(i,!0),_(b(ir,"header-email"),!0),_(b(ir,"header-default"),!1),tt(ir,"prev").forEach(e=>{_(e,!1)})},gV=()=>{xO(),window.history.pushState(null,document.title,"#email")},vV=i=>{let t=i.node(),e=t.classList.contains("c-button--darkgray");t.classList.toggle("c-button--darkgray",!e),t.innerHTML=t.dataset.values.split(":")[e?0:1];let n=O("js-community-select"),s=wt("js-comm-card-button");for(let o=0,r;r=s[o];o++)n.options[o].selected=r.classList.contains("c-button--darkgray")},wO=()=>{H("signup",()=>{window.location.hash==="#email"&&xO()}),v.registerHandlers(ir,{comm:vV,email:gV,back:fV})}});var EV,AO,SO=u(()=>{"use strict";R();D();B();V();j();nt();EV="signup",AO=()=>{let i,t=n=>{let s=n.dataset.tooltip||"";i=Mt(s,n,{classNames:["c-bubble--side"],placement:"right"})},e=n=>{let s=n.node();t(s)};H("signup-gender",n=>{n.addEventListener("mouseenter",()=>{t(n)}),n.addEventListener("mouseleave",()=>{i&&i.hide()})}),H("signup-email-form",(n,s)=>{let o=b(s,"button"),r=()=>{_(n,!0);try{J("[autofocus]",n).focus()}catch(a){}o.remove()};(n.dataset.valid!==""||window.location.hash==="#email")&&r(),o.addEventListener("click",()=>{r()})}),v.registerHandlers(EV,{focus:e})}});var MO={};ot(MO,{default:()=>bV});var bV,IO=u(()=>{"use strict";CO();SO();bV=()=>{wO(),AO()}});var RO={};ot(RO,{default:()=>yV});var _V,TV,yV,OO=u(()=>{"use strict";R();D();$();_V="/ajax/moderation/moderation.cshtml",TV=i=>T(void 0,null,function*(){let e=i.node().form,s=q('input[name^="c_"]:checked',e).reduce((r,a)=>(r[a.name]=a.value,r),{}),o=yield L(_V,{method:"POST",silent:!0,body:C({_:"getcomment",t:e.type.value,r:e.comment.value},s)});J("#modcomment").innerHTML=o.data||""}),yV=()=>{v.registerHandlers("moderation",{rcheck:TV})}});var HO,DO,kO,NO,wg,PO,Cg=u(()=>{"use strict";HO="Ошибка чтения изображения",DO="Заменить",kO="Удалить",NO="Удалить фотографию?",wg="Обрезать или повернуть",PO="Повернуть"});var Ag,FO=u(()=>{"use strict";Ag=(i=!0,t)=>new Promise(e=>{let n=document.createElement("input");n.setAttribute("type","file"),i&&n.setAttribute("multiple",""),t&&n.setAttribute("accept",t),n.addEventListener("change",()=>e(Array.from(n.files||[])),{once:!0}),n.dispatchEvent(new MouseEvent("click"))})});var Sg,nr,BO=u(()=>{"use strict";Jp();xc();Kp();Sg=class extends EventTarget{constructor(e){super();this.file=e}start(e){return new Promise(n=>{let s=C({_:"upload",type:e,file:this.file},d2Env.formContext),o=new FormData;Object.entries(s).forEach(([r,a])=>o.append(r,a)),this.request=new XMLHttpRequest,this.request.open("POST",d2Env.uploadUrl,!0),Object.entries(Sg.headers).forEach(([r,a])=>this.request.setRequestHeader(r,a)),this.request.onload=()=>{if(this.request.status!==200){n([Re.formatError(ao,this.request),void 0]);return}try{let r=JSON.parse(this.request.responseText);n([void 0,r])}catch(r){n([Re.formatError(Lc,this.request),void 0])}},this.request.onerror=()=>{n([Re.formatError(ao),void 0])},this.request.upload.onprogress=r=>{this.dispatchEvent(new ProgressEvent(r.type,r))},this.request.send(o)})}},nr=Sg;nr.headers={"X-Origin-Request-ID":d2Env.requestId,"X-Client-Request-ID":lo()}});var UO,jO=u(()=>{"use strict";UO=i=>{let t=[],e=0;function n(){e<i&&t.length&&(e++,t.shift()())}return s=>new Promise((o,r)=>{t.push(()=>{s().then(a=>{o(a),e--,n()},a=>{r(a),e--,n()})}),n()})}});var Mg,LV,zO,VO,WO,Ig,qO,GO,JO=u(()=>{"use strict";Cg();Ul();Mg=i=>{let t=document.createElement("canvas");return t.width=i.width,t.height=i.height,t},LV=(i,t)=>{if(t<2)return;let e=i.getContext("2d"),{width:n,height:s}=i;switch(t>4&&(i.width=s,i.height=n),t){case 2:e.translate(n,0),e.scale(-1,1);break;case 3:e.translate(n,s),e.rotate(Math.PI);break;case 4:e.translate(0,s),e.scale(1,-1);break;case 5:e.rotate(.5*Math.PI),e.scale(1,-1);break;case 6:e.rotate(.5*Math.PI),e.translate(0,-s);break;case 7:e.rotate(.5*Math.PI),e.translate(n,-s),e.scale(-1,1);break;case 8:e.rotate(-.5*Math.PI),e.translate(-n,0);break;default:break}},zO=Vs(()=>new Promise(i=>{let t="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAIAAwMBEQACEQEDEQH/xABRAAEAAAAAAAAAAAAAAAAAAAAKEAEBAQADAQEAAAAAAAAAAAAGBQQDCAkCBwEBAAAAAAAAAAAAAAAAAAAAABEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8AG8T9NfSMEVMhQvoP3fFiRZ+MTHDifa/95OFSZU5OzRzxkyejv8ciEfhSceSXGjS8eSdLnZc2HDm4M3BxcXwH/9k=",e=document.createElement("img");e.onload=()=>i(e.width===2&&e.height===3),e.onerror=()=>i(!1),e.src=t})),VO=i=>new Promise(t=>{i.type!=="image/jpeg"&&t(1);let e=o=>{let r=new DataView(o);r.getUint16(0)!==65496&&t(1);let a=r.byteLength,l=2;for(;l<a;){let c=r.getUint16(l);if(l+=2,c===65505){if(r.getUint32(l+2)!==1165519206){t(1);return}l+=2;let d=r.getUint16(l+6)===18761;l+=6,l+=r.getUint32(l+4,d);let m=r.getUint16(l,d);l+=2;for(let p=0;p<m;p++)if(r.getUint16(l+p*12,d)===274){t(r.getUint16(l+p*12+8,d));return}}else{if((c&65280)!==65280)break;l+=r.getUint16(l)}}t(1)},n=new FileReader,s=i.slice(0,256*1024);n.onloadend=o=>e(o.target.result),n.onerror=()=>t(1),n.onabort=()=>t(1),n.readAsArrayBuffer(s)}),WO=i=>new Promise(t=>{let e=document.createElement("img");e.onload=()=>{URL.revokeObjectURL(e.src),t([void 0,e])},e.onerror=()=>t([HO,void 0]),e.src=URL.createObjectURL(i)}),Ig=(i,t,e)=>new Promise(n=>{if(i.toBlob){i.toBlob(n,t,e);return}let o=i.toDataURL(t,e).split(","),r=o[0].includes("base64")?atob(o[1]):decodeURIComponent(o[1]),a=new ArrayBuffer(r.length),l=new Uint8Array(a);for(let c=0;c<r.length;c++)l[c]=r.charCodeAt(c);n(new Blob([l],{type:t||"image/png"}))}),qO=(i,t,e,n,s,o,r)=>T(void 0,null,function*(){let a=e.aspectRatio()>n.aspectRatio()?e.width/n.width:e.height/n.height,l=Math.max(t.size>s?1:0,Math.ceil(Math.log(a)/Math.log(2))-1),c=l>0,d=e.clone();c&&d.scale(.5);let m=Mg(d),p=m.getContext("2d");r||LV(m,o),p.imageSmoothingQuality="high",p.drawImage(i,0,0,d.width,d.height);for(let g=0;g<l;g++){let E=d.clone();d.scale(.5),p.drawImage(m,0,0,E.width,E.height,0,0,d.width,d.height)}let h=Mg(d),f=h.getContext("2d");if(f.drawImage(m,0,0,d.width,d.height,0,0,d.width,d.height),c){let g;for(;(g=yield Ig(h,t.type))&&g.size>s;){let E=d.clone();d.scale(.5),p.drawImage(h,0,0,E.width,E.height,0,0,d.width,d.height),h.width=d.width,h.height=d.height,f.drawImage(m,0,0,d.width,d.height,0,0,d.width,d.height)}}return{preview:h,wasResized:c}}),GO=(i,t,e=0)=>{let n=e%180!==0,s=document.createElement("canvas");s.width=n?i.height:i.width,s.height=n?i.width:i.height;let o=s.getContext("2d");o.translate(s.width/2,s.height/2),o.rotate(e/180*Math.PI),o.drawImage(i,-i.width/2,-i.height/2);let r=Mg(t.getSize());return r.getContext("2d").drawImage(s,t.left,t.top,t.width,t.height,0,0,t.width,t.height),r}});var xV,wV,CV,AV,ZO,SV,MV,Il,YO=u(()=>{"use strict";ct();zc();re();qd();ue();Cg();td();D();FO();ln();BO();jO();Fi();De();wo();nt();JO();xV=3840,wV=3840,CV=23*1024*1024,AV=2,ZO="image/jpeg,image/png",SV=i=>y`
${i.error?y`<div class="part-error">${i.error}</div>`:y`<img src=${i.pic}>`}
<div class="part-dots" style="opacity:${i.loading?0:1}" @click=${i.menu}></div>
${!i.error&&i.sort&&i.num&&!i.loading?y`<div class="part-index ctx-dark">${i.num}</div>`:N}
${!i.error&&i.loading?y`<progress-ring .progress=${i.progress||0}></progress-ring>`:N}
`,MV=i=>y`
<form action=${d2Env.uploadUrl} class="c-dialog-form">
  <x-crop class="o-grid-row" src="${i.src}" style="width:${i.size.width}px;height:${i.size.height}px;"
    aspect-ratio=${Un(i.ar)}
    min-width=${i.minSize?i.minSize.width:""} min-height=${i.minSize?i.minSize.height:""}
    rotate=${Un(i.rotate)}></x-crop>
  <div class="o-group o-group--m o-group--end o-group--wide c-dialog-buttons">
    <button class="c-button c-button--m-no-padding" type="button" @click=${i.rotateFn}>
      ${PO}
    </button>
    <button class="c-button c-button--m-no-padding" type="button" data-action="dialog.close">
      ${Uc}
    </button>
    <button class="c-button" type="submit">${Ti}</button>
  </div>
</form>
`,Il=class extends HTMLElement{connectedCallback(){if(this.form)return;let e=(this.getAttribute("aspect-ratio")||"1/1").split("/").map(Number);this.aspectRatio=new bt(...e),this.minSize=new bt(Number(this.getAttribute("min-width")||100),Number(this.getAttribute("min-height")||100)),this.sort=this.hasAttribute("sort"),this.style.setProperty("--ar",String(this.aspectRatio.aspectRatio())),this.fixedAspectRatio=this.hasAttribute("fixed-aspect-ratio"),this.type=this.getAttribute("type"),this.form=this.closest("form"),this.maxItems=Number(this.getAttribute("max-items"))||1,this.items=[],this.uploadPool=UO(AV),this.button=S("button",{type:"button"},S("x-icon",{name:"upload"})),this.appendChild(this.button),this.inputs=S("div"),this.after(this.inputs),this.button.addEventListener("click",()=>this.addFiles()),Array.from(this.closest("form").elements).filter(n=>n.name.startsWith(this.type)).forEach(n=>{let s={id:n.value,previewSrc:n.dataset.preview};n.remove(),this.addItem(s)}),this.sort&&(this.sortable=Ko.create(this,{disabled:this.items.length<=1,onSort:this.sortItems.bind(this),animation:150,filter:".is-error,button",preventOnFilter:!0,forceFallback:!0,onMove(n){return n.related.nodeName!=="BUTTON"}}))}sortItems(){let e=Array.from(this.querySelectorAll(".part-item")).map(n=>n.id);this.items.sort((n,s)=>e.indexOf(n.uuid)-e.indexOf(s.uuid)),this.render()}addFiles(){return T(this,null,function*(){let e=yield Ag(this.maxItems!==1,ZO);this.maxItems&&e.splice(this.maxItems-this.items.length),e.forEach(n=>this.addItem({file:n}))})}replaceFile(e){return T(this,null,function*(){let n=yield Ag(!1,ZO);n.length!==0&&this.addItem({file:n[0]},e)})}addItem(e,n){let s=n?this.items.findIndex(a=>a.uuid===n.uuid):this.items.length,o=ut(C({},e),{element:S("div","part-item"),uuid:Xt(),isLoading:!e.id});this.items.splice(s,1,o),this.update(),this.render(o);let r=this.items[s-1];r?r.element.after(o.element):this.prepend(o.element),o.file&&this.uploadPool(()=>this.upload(o.file,o)).then(([a,l])=>{o.isLoading=!1,l?o.id=l.id:o.error=a,this.render(o)})}upload(e,n){return T(this,null,function*(){let s=yield zO(),o=yield VO(e),r=yield WO(e);if(r[0])return r;let a=r[1],l=new bt(a.naturalWidth,a.naturalHeight),c=new bt(xV,wV),{preview:d,wasResized:m}=yield qO(a,e,l,c,CV,o,s);n.preview=d,n.previewSrc=d.toDataURL("image/png");let p=m?new File([yield Ig(d,e.type)],e.name):e,h=new nr(p);return h.addEventListener("progress",f=>{n.progress=f.lengthComputable&&f.loaded!==f.total?100*f.loaded/f.total:0,this.render(n)}),this.render(n),h.start(this.type)})}update(){!this.maxItems||this.items.length!==this.maxItems?this.appendChild(this.button):this.button.remove(),this.sortable&&this.sortable.option("disabled",this.items.length<=1)}render(e){let n=this.items.filter(o=>o.id),s=1;n.forEach(o=>{o.num=s++}),e?this.renderItem(e):this.items.forEach(o=>this.renderItem(o)),z(rt(n,o=>o.uuid,o=>y`<input type="hidden" name=${`${this.type}-${o.num}`} .value=${o.id}>`),this.inputs)}renderItem(e){z(SV({id:e.uuid,pic:e.previewCropSrc||e.previewSrc||As,num:e.num,progress:e.progress,loading:e.isLoading,error:e.error,sort:this.sort,menu:n=>this.menu(n.target,e)}),e.element),e.element.id=e.uuid,e.element.classList.toggle("ctx-dark",Boolean(e.error)),e.element.classList.toggle("is-error",Boolean(e.error)),e.element.classList.toggle("is-cover",this.fixedAspectRatio)}menu(e,n){let s=[{action:"replace",text:DO},{action:"delete",text:kO,confirmTitle:NO,confirm:Ae,delete:!0}];d2Env.isDesktop&&n.preview&&s.unshift({action:"crop",text:wg}),new li(e,s).addEventListener("select",r=>{if(zt(),r.detail==="crop"){let a=new yt({anchor:e,title:wg}),l;z(MV({src:n.previewSrc,ar:this.fixedAspectRatio?this.getAttribute("aspect-ratio"):void 0,size:new bt(n.preview.width,n.preview.height).scaleToFit(new bt(600,450)),crop:n.crop,rotate:n.rotate,minSize:this.minSize,rotateFn:()=>{l.rotate+=90}}),a.element),l=a.element.querySelector("x-crop"),n.crop&&(l.naturalCrop=n.crop),a.setFormDataTransformer(()=>{let c=l.naturalCrop;return{_:"crop",id:n.id,type:this.type,rotate:l.rotate,crop:[c.left,c.top,c.width,c.height].join(",")}}),a.addEventListener("submit",()=>{n.crop=l.naturalCrop,n.rotate=l.rotate,n.previewCropSrc=GO(n.preview,n.crop,n.rotate).toDataURL("image/png"),this.render(n)}),a.show()}else if(r.detail==="replace")this.replaceFile(n);else if(r.detail==="delete"){let a=this.items.findIndex(l=>l.uuid===n.uuid);this.items[a].element.remove(),this.items.splice(a,1),this.update(),this.render()}})}}});var KO,IV,Rl,XO=u(()=>{"use strict";KO=2*Math.PI*45,IV=`
<svg height="${50*2}" width="${50*2}" viewBox="0 0 ${50*2} ${50*2}">
   <circle r="${45}" cx="${50}" cy="${50}"/>
</svg>
`,Rl=class extends HTMLElement{connectedCallback(){this.children.length===0&&(this.innerHTML=IV,this.update())}static get observedAttributes(){return["progress"]}get progress(){return Number(this.getAttribute("progress")||0)}set progress(t){t?this.setAttribute("progress",String(t)):this.removeAttribute("progress")}attributeChangedCallback(t){t==="progress"&&this.update()}update(){let t=KO-Number(this.progress||0)/100*KO,e=this.querySelector("circle");e&&(e.style.strokeDashoffset=String(t))}}});var Mm,QO,tH=u(()=>{"use strict";$();Mm=i=>{console.warn(new Date,i)},QO=()=>{setTimeout(()=>{let i=L("/ajax/brand.models.cshtml","testId",{body:new URLSearchParams({brand:"audi"})});Promise.resolve().then(()=>{L("/ajax/brand.models.cshtml","testId",{body:new URLSearchParams({brand:"bmw"})}).then(Mm)});let t=pb("/ajax/brand.models.cshtml",{body:{brand:"zaz"}});i.then(Mm),t.then(n=>JSON.parse(n.responseText)).then(Mm);let e=new FormData;e.append("_","more"),e.append("type","topRU"),e.append("key","qW_AwJJS2gjYAHsiSXRlbTEiOlsyMDksNTYyMTE3ODk5MDcwNzM0MzM5LDU1NDI4MzYwMzg0NDkyMzM5NSw1NTAzODYxMTAwMDIzNjQ0MTksNTQ5OTkwMjg1ODE2MzY1MDc2LDU0OTIwOTkwNzQzODU1MTA0MywxODUsNTQyMzIyODQxNDgwMDY5MTIxLDUsMTcyOTM4MjI1NjkxMDI3MDUxNiw1MTQwNjMxOTM2MjI5NzAzNjksNTEyODA1MDc3NDQyODg3NjgxXSwiSXRlbTIiOjIxOTEsIkl0ZW0zIjo0fc4rpHV0MFTjLOJvZDp_gU9nrto1"),L("/ajax/people.cshtml",{method:"POST",body:e}).then(Mm)},3e3)}});var ti,eH,iH=u(()=>{"use strict";ti=(i,t)=>{t?console.warn(`${i} is supported`):console.error(`${i} is NOT supported`)},eH=()=>{console.warn("=========================================");let i=0,t=()=>{i++},e=!0;try{window.addEventListener("_",t,{once:!0}),window.dispatchEvent(new Event("_")),window.dispatchEvent(new Event("_")),window.removeEventListener("_",t)}catch(r){e=!1}i!==1&&(e=!1),ti("eventListener Options",e),ti("Object.values",!!Object.values),ti("Object.entries",!!Object.entries),ti("String.prototype.padStart",!!String.prototype.padStart),ti("String.prototype.padEnd",!!String.prototype.padEnd);let n=!0;try{((r,a)=>{if(new r("q=%2B").get("q")!==a||new r({q:a}).get("q")!==a||new r([["q",a]]).get("q")!==a||new r(`q=
`).toString()!=="q=%0A"||new r({q:" &"}).toString()!=="q=+%26"||new r({q:"%zx"}).toString()!=="q=%25zx")throw r;window.URLSearchParams=r})(URLSearchParams,"+")}catch(r){n=!1}ti("URLSearchParams",n),console.warn("========================================="),ti("Array.prototype.values",!!Array.prototype.values),ti("Object.fromEntries",!!Object.fromEntries),ti("Promise.prototype.finally",!!Promise.prototype.finally);let s=!0;try{new EventTarget().constructor}catch(r){s=!1}ti("EventTarget constructor",s);let o=!0;try{new File([],"")}catch(r){o=!1}ti("File constructor",o),ti("FormData",Boolean(typeof FormData!="undefined"&&FormData.prototype.keys)),ti("customElements",!!window.customElements),console.warn("=========================================")}});var nH={};ot(nH,{default:()=>RV});var RV,sH=u(()=>{"use strict";pd();YO();XO();R();tH();iH();RV=()=>{eH(),QO(),customElements.define("progress-ring",Rl),customElements.define("x-upload",Il),v.registerHandlers("toast-test",{show:()=>{Do("<strong>Запомнили!</strong> Так вашу страницу увидят читатели")}})}});function bH({modulePath:i=".",importFunctionName:t="__import__"}={}){try{self[t]=new Function("u","return import(u)")}catch(e){let n=new URL(i,location),s=o=>{URL.revokeObjectURL(o.src),o.remove()};self[t]=o=>new Promise((r,a)=>{let l=new URL(o,n);if(self[t].moduleMap[l])return r(self[t].moduleMap[l]);let c=new Blob([`import * as m from '${l}';`,`${t}.moduleMap['${l}']=m;`],{type:"text/javascript"}),d=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(c),onerror(){a(new Error(`Failed to import: ${o}`)),s(d)},onload(){r(self[t].moduleMap[l]),s(d)}});document.head.appendChild(d)}),self[t].moduleMap={}}}var HV=Object.freeze({initialize:bH});B();Si();j();var ar=class extends x{postInit(){let t=this.slot("dv");!t||ee(this.element,{rootMargin:-window.innerHeight,onEnter:()=>{_(t,!0)},onExit:()=>{_(t,!1)},permanent:!0})}};lr();B();Si();var MH="adfox_1487022369548130",IH="adfox_151031424031449778",RH=2e4,rv=i=>{try{Ya.adfoxCode.reload(i)}catch(t){}},OH=i=>{let t,e,n=()=>{e=!1,clearTimeout(t)},s=()=>{e||(e=!0,t=setTimeout(()=>{e=!1;try{let o=document.getElementById(i);o.matches(":hover")?o.addEventListener("mouseleave",()=>rv(i),{once:!0}):(rv(i),s())}catch(o){n()}},RH))};Mi.addEventListener("active",()=>s()),Mi.addEventListener("idle",()=>n()),Mi.isIdle||s()},av=()=>{[MH,IH].forEach(i=>{H(`#${i}`,t=>{ee(t,{onEnter:()=>{OH(i)}})},!0)})};R();Or();V();$();var lk=i=>[void 0,i],ck=i=>[i,void 0],Mn=i=>Promise.resolve().then(i).then(lk).catch(ck);Ft();nt();We();var Hr="blacklist",hb="/ajax/blacklist.cshtml",dk=i=>T(void 0,null,function*(){ft(i);let t=i.node(),e=t.user,n=b(Hr,"list"),s=e.value;if(!s)return;let[o,r]=yield Mn(()=>L(hb,Hr,{method:"POST",anchorEl:e,silent:d2Env.isMobile,body:{_:"adduser",nick:s},throwError:!0}));if(r){let{html:a}=r;if(!a)return;e.value="",t.submitbtn.disabled=!0,n.insertAdjacentHTML("afterbegin",a)}else o&&(d2Env.isMobile?wr(o.messages[0],e):Mt(o.messages[0],e))}),mk=i=>T(void 0,null,function*(){let t=i.node(),e=Q(t,Hr,"item");(yield et(nb,sb,t,ob))&&(yield L(hb,`${Hr}.remove`,{method:"POST",anchorEl:t,body:{_:"remove",id:t.dataset.id}}),e.remove())}),pk=i=>{let t=i.node(),e=t.form.submitbtn;e.disabled=!t.value.trim()},ub=()=>{v.registerHandlers(Hr,{adduser:dk,remove:mk,input:pk})};R();Or();$();var fb="blacklist-user",hk="/ajax/blacklist.cshtml",uk=i=>T(void 0,null,function*(){let t=i.node(),e=t.dataset.blacklisted==="";yield L(hk,fb,{method:"POST",anchorEl:t,body:{_:e?"remove":"add",id:t.dataset.id}}),e?t.dataset.blacklisted&&delete t.dataset.blacklisted:t.dataset.blacklisted="",t.textContent=e?ib:ro}),gb=()=>{v.registerHandlers(fb,{toggle:uk})};R();var vb="Добавить в Закладки",Eb="Убрать из Закладок";D();V();$();j();In();R();D();V();$();ve();var co="bookmarks",vk=500,Tb,yb=i=>{clearTimeout(Tb);let t=i.target,e=t.previousElementSibling,n=t.value.trim();e.textContent=n;let s=Q(t,co,"item"),{dataset:o}=b(co,"button",s),r=C({_:"edit",type:o.type,id:o.id,comment:n},o.container&&{container:o.container});Tb=setTimeout(()=>{L("/ajax/bookmarks","bookmarks",{method:"POST",anchorEl:t,body:r})},vk)},Lb=i=>{i.keyCode===13&&(i.preventDefault(),i.target.blur())},Ek=i=>{tt(co,"item").forEach(o=>{o.classList.remove("bookmarks-row-hover")});let e=i.node(),n=Q(e,co,"item");n.classList.add("bookmarks-row-hover");let s=J("input",n);s.focus(),setTimeout(()=>{s.setSelectionRange(s.value.length,s.value.length)},0)},bk=i=>{let t=i.node();t.addEventListener("keydown",Lb),t.addEventListener("input",yb)},_k=i=>{let t=i.node(),e=t.previousElementSibling,s=J("span",e)?"":e.textContent;t.value=Oe(s),Q(t,co,"item").classList.remove("bookmarks-row-hover"),t.removeEventListener("input",yb),t.removeEventListener("keydown",Lb)},xb=()=>{v.registerHandlers(co,{focus:bk,blur:_k,click:Ek})};var kr="bookmarks",Tk="bookmarks-row",yk="/ajax/bookmarks/",wb=i=>{let t=0,e=!1;tt(kr,"header").forEach(o=>{let r=0,a=o;for(;(a=a.nextElementSibling)&&a.classList.contains(Tk);)i?(e=a.textContent.toLowerCase().includes(i),_(a,e)):e=Ws(a)&&!!O("is-active",a),e&&(r+=1);t+=r;let l=b(kr,"count",o);l&&(l.textContent=String(r)||""),i&&(_(o,r>0),a&&a.classList.contains("hr")&&_(a,r>0&&t>0))});let s=b(kr,"overall");s&&(s.textContent=String(t)||"")},Lk=i=>T(void 0,null,function*(){let t=i.node();if(Ge(t))return;let e=t.classList.contains("is-active"),{dataset:n}=t,s=C({_:e?"remove":"add",type:n.type,id:n.id},n.container&&{container:n.container});yield L(yk,kr,{method:"POST",anchorEl:t,body:s}),t.classList.toggle("is-active",!e),t.dataset.tt=e?vb:Eb,wb()}),xk=i=>{let e=i.node().value.toLowerCase();wb(e)},Cb=()=>{v.registerHandlers(kr,{toggle:Lk,filter:xk}),xb()};R();var wk="slideshow",Ab,Ck=i=>{clearTimeout(Ab);let t=i.node();t.classList.toggle("is-active"),t.classList.contains("is-active")?Ab=setTimeout(()=>{t.style.zIndex="0"},220):t.style.zIndex="2"},Sb=()=>{v.registerHandlers(wk,{cup:Ck})};B();j();wc();var Mb=750,Nr=class extends x{init(){this.button=this.slot("button",document.body),this.height=this.element.offsetHeight,!(this.height<Mb+200)&&(this.element.classList.add("is-closed"),_(this.button,!0),this.element.style.height=`${Mb}px`,mo(this.element),this.button.addEventListener("click",this,{once:!0}))}handleEvent(){this.element.classList.remove("is-closed"),this.element.style.height=`${this.height}px`,_(this.button,!1)}};R();$();nt();var Ak=i=>T(void 0,null,function*(){let t=i.node(),{title:e,html:n}=yield L("/ajax/drive","drive",{method:"POST",anchorEl:t,body:{_:"di",car:t.dataset.carid}});pe({anchor:t,title:e,html:n})}),Ib=()=>{v.registerHandlers("drive",{info:Ak})};B();$();On();var Mk="/ajax/cars.cshtml",Hb="lbsort",Ik=30*12,Pr=class extends x{parsedInit(){this.form=this.slot("sort"),d2Env.userId&&(this.form.sort.value=Es(Hb)||"theme"),this.sort(),this.form.addEventListener("change",this)}handleEvent(){let e=this.form.sort.value;this.sort(),Je(Hb,e,Ik),L(Mk,this.role,{method:"POST",silent:!0,body:{_:"feedsort",type:e}})}sort(){let e=this.form.sort.value,n=e==="theme",s=this.slots("row");if(s.length===0)return;s.sort((r,a)=>{let l=Number(r.dataset[e])||0,c=Number(a.dataset[e])||0;return(l===c?0:l<c?1:-1)*(n?-1:1)}),s[0].parentElement.append(...s),this.slot("container").classList.toggle("no-captions",!n)}};R();D();$();Ft();var Db="caru",Rk="/ajax/notifications.cshtml",Ok=i=>T(void 0,null,function*(){let t=i.node();yield L(Rk,Db,{method:"POST",anchorEl:t,body:{_:"loadPhotoRequest",key:t.dataset.key}}),dn(t),vt(t,"js-container").remove()}),kb=()=>{v.registerHandlers(Db,{req:Ok})};R();var Nb="Продавец — {Contacts}",Pb="Скажите, что вы по объявлению на DRIVE2.",$b="Не отправляйте предоплату незнакомым продавцам!";V();xe();nt();var hh="sell",Xk=i=>{let t=b(hh,"desc"),e=b(hh,"contacts");if(!t&&!e)return;let n=e.innerHTML,s=Z(Nb,{Contacts:n}),o=i.node(),r=`
<div>${Pb}</div>
<div class="x-secondary x-secondary-color o-t-s">${$b}</div>
`;d2Env.isMobile?UE({anchor:o,title:s,html:`<div class="x-box x-box--ghost">${r}</div>`}):pe({anchor:o,closeOnClick:!0,title:s,html:r})},i_=()=>{v.registerHandlers(hh,{info:Xk})};ct();re();jr();B();pn();j();var w_=i=>{let t=i.dataset.ph,e=i.options[0]&&i.options[0].value===""?i.options[0].text:void 0;return!t&&e&&(i.dataset.ph=e),t||e},C_=(i,t)=>Array.from({length:t-i+1},(e,n)=>String(n+i)).reverse().map(e=>({value:e,text:e})),zr=class extends x{parsedInit(){this.brandEl=this.slot("brand"),this.modelEl=this.slot("model"),this.generationEl=this.slot("gen"),this.engineEl=this.slot("engine"),this.transmissionEl=this.slot("transmission"),this.productionEl=this.slot("production"),this.purchaseEl=this.slot("purchase"),this.addCarLinkEl=this.slot("add-car-link"),this.presetEl=this.slot("presets");let{model:e,gen:n,production:s,purchase:o,noPlaceholders:r,genAutoselect:a}=this.element.dataset;this.caption="",this.brand=this.brandEl.value,this.model=e,this.generation=n,this.production=Number(s)||void 0,this.purchase=Number(o)||void 0,this.noPlaceholder=r==="",this.genAutoselect=a==="",this.element.addEventListener("change",this),this.presetEl&&this.presetEl.addEventListener("change",()=>{let l=this.presetEl.options[this.presetEl.selectedIndex],{brand:c,model:d,gen:m,reset:p}=l.dataset;(p===""||c||d||m)&&(this.brand=c,this.model=d,this.generation=m,this.update())}),this.update()}handleEvent(e){if(!(e.target instanceof HTMLSelectElement||e.target instanceof HTMLInputElement)||e.target===this.presetEl)return;let n=e.target,s=n===this.brandEl,o=n===this.modelEl;if(this.brand=this.brandEl.value,this.model=s?void 0:this.modelEl.value,this.generation=s||o?void 0:this.generationEl.value,this.production=this.productionEl&&Number(this.productionEl.value)||void 0,this.purchase=this.purchaseEl&&Number(this.purchaseEl.value)||void 0,n===this.engineEl&&this.transmissionEl){let r=this.engineEl.options[this.engineEl.selectedIndex];r&&r.dataset.noTransmission===""?(this.transmissionEl.selectedIndex=0,this.transmissionEl.disabled=!0):this.transmissionEl.disabled=!1}this.presetEl&&(this.presetEl.selectedIndex=0),this.setAddCarLink(),this.update()}haveNoCar(){return this.brandEl.value===""&&this.brandEl.selectedIndex!==0}isCustomCar(){return this.brandEl.value==="selfmade"||this.brandEl.value==="other"}getInfo(){return this.brand?ws.get(this.brand,this.brandEl):Promise.resolve([])}update(){return T(this,null,function*(){!this.brand&&!this.haveNoCar()&&(this.brandEl.selectedIndex=0),this.model||(this.modelEl.selectedIndex=0),this.generation||(this.generationEl.selectedIndex=0),this.render(yield this.getInfo()),this.dispatch()})}dispatch(){this.element.dispatchEvent(new CustomEvent("change",{bubbles:!0,detail:{brand:this.brand,model:this.model,generation:this.generation,caption:this.caption}}))}setAddCarLink(){if(!this.addCarLinkEl)return;let e=this.slot("add-car-container");e&&_(e,Boolean(this.brand)),this.addCarLinkEl.search=`?${new URLSearchParams(C(C(C({},this.brand&&{brand:this.brand}),this.model&&{model:this.model}),this.generation&&{generation:this.generation}))}`}render(e){let{brandEl:n}=this;this.caption="";let s="",o=w_(n);if(this.noPlaceholder&&this.brand&&n.options[0]&&n.options[0].value==="")n.options[0].remove();else if(o&&!this.noPlaceholder&&n.options[0]&&n.options[0].value!==""){let m=document.createElement("option");m.value="",m.innerHTML=o,n.prepend(m)}this.brand?(n.value=this.brand,this.caption=n.options[n.selectedIndex].text,s=this.caption):this.haveNoCar()||(this.brandEl.selectedIndex=0),n.value||(this.haveNoCar()||(this.brandEl.selectedIndex=0),this.model=void 0,this.generation=void 0,this.production=void 0,this.purchase=void 0),this.noPlaceholder&&!this.model&&(this.model=e[0]&&e[0].id);let r=e.map(m=>({value:m.id,text:m.model}));this.modelEl.disabled=!this.brand||this.isCustomCar(),this.renderSelect(this.modelEl,r,this.model),this.model&&(this.caption=`${s} ${this.modelEl.options[this.modelEl.selectedIndex].text}`);let a=e.find(m=>m.id===this.model),l=a?a.generations:[];(this.genAutoselect&&l.length===1||this.noPlaceholder&&!this.generation)&&(this.generation=l[0]&&l[0][0]);let c=l.length===1,d=l.map(([m,p])=>({value:m,text:p}));if(this.generationEl.disabled=!this.model||!this.brand||this.isCustomCar(),this.renderSelect(this.generationEl,d,this.generation,c),this.generation&&(this.caption=`${s} ${this.generationEl.options[this.generationEl.selectedIndex].text}`),this.generationEl.dispatchEvent(new CustomEvent("forced-change")),this.productionEl||this.purchaseEl){let m=l.find(f=>this.generation===f[0]),p=m&&m[2]||l[0]&&l[0][2]||this.production||1900,h=Math.max(new Date().getFullYear(),p);if(this.productionEl){let f=C_(p,h);this.renderSelect(this.productionEl,f,String(this.production||""))}if(this.purchaseEl){let g=Number(this.productionEl&&this.productionEl.value)||p,E=C_(g,h),M=this.purchase?this.purchase<g?g:this.purchase:this.purchaseEl.value;this.renderSelect(this.purchaseEl,E,String(M||""))}}}renderSelect(e,n,s,o){let r=this.noPlaceholder&&Boolean(s)||o,a=w_(e),l=[...n];!r&&(a||a==="")&&l.unshift({value:"",text:a}),$i(e),z(rt(l,c=>c.value,c=>y`<option value=${c.value} .selected=${s===c.value}>${c.text}</option>`),e)}};B();V();j();Ce();var A_=(i,t)=>{let e=i.dataset[t];return!e||e==="0"?"":e},Vr=class extends x{parsedInit(){let t=$e("carselect",this.element.parentElement),e=zs(t,"carselect"),n=A_(this.element,"model"),s=A_(this.element,"gen"),o=this.slot("presets"),r=this.slot("brand"),a=this.slot("model"),l=this.slot("gen"),c=this.slot("model-regular"),d=this.slot("model-custom");if(o&&r){let p=at(r,!o.value);p.duration=400}if(a){let p=at(a,Boolean(n));p.duration=400}if(l){let p=at(l,Boolean(s));p.duration=400}let m=p=>{let h=!1,f=p==="selfmade"||p==="other";c&&d&&(f&&(h=!0),_(c,!f),_(d,f));let g=o&&r&&o.value==="";if(o&&r)if(g)h=!at(r).expanded;else{at(r).expand(!1);return}a&&at(a).expand(Boolean(p),h),l&&at(l).expand(Boolean(e&&e.model)&&!f,h),g&&at(r).expand(!0)};t.addEventListener("change",()=>{m(e&&e.brand||"")})}};ct();re();jr();B();ge();pn();var Fn={CARS:"cars",BRAND:"brand",MODEL:"model",GENERATION:"generation"},Fc=i=>Array.from(i.querySelectorAll("select")),S_=(i,t,e)=>{let n=i.options[0]&&i.options[0].value===""&&i.options[0].text,s=[...t];(n||n==="")&&s.unshift({value:"",text:n}),$i(i),z(rt(s,o=>o.value,o=>y`<option value=${o.value} .selected=${e===o.value}>${o.text}</option>`),i)},sN=(i,t,e,n)=>{i.disabled=!e;let s=t.map(o=>({value:o.id,text:o.model}));S_(i,s,n)},oN=(i,t,e,n,s)=>{i.disabled=!n||!e;let o=t.find(c=>c.id===n),r=o?o.generations:[],a=r.length===1,l=r.map(([c,d])=>({value:c,text:d}));S_(i,l,s!==void 0?s:a?l[0].value:void 0)},Wr=class extends x{init(){this.isFullGenerations=this.element.dataset.fullGenerations==="",this.element.addEventListener("change",this),this.element.addEventListener("click",this),this.element.addEventListener("set-cars",e=>this.setCars(e.detail))}setCars(e){return T(this,null,function*(){let n=this.slots("item");n.pop(),n.forEach(s=>s.remove()),e.forEach(s=>{let o=this.slots("item"),r=o[o.length-1];this.updateItem(r,{brand:s.brand,model:String(s.model),generation:String(s.generation)||""}),this.update()}),de(this.element)})}handleEvent(e){return T(this,null,function*(){let{target:n}=e;if(e.type==="click"){n instanceof HTMLButtonElement&&this.removeItem(this.closestSlot(n,"item"));return}if(!(n instanceof HTMLSelectElement))return;let s=this.closestSlot(n,"item");yield this.updateItem(s,void 0,n),de(this.element)})}removeItem(e){this.slots("item").length>1&&(e.remove(),this.update(),de(this.element))}updateItem(o){return T(this,arguments,function*(e,n={},s){let{brand:r,model:a,generation:l}=n,[c,d,m]=Fc(e);r!==void 0?c.value=r:r=c.value,a=a===void 0&&(s===d||s===m)?d.value:a;let p=yield ws.get(r,c);(!s||s===c)&&sN(d,p,r,a),s!==m&&oN(m,p,r,a,l),this.update()})}update(){let e=this.slots("item"),n=e[0],s=e[e.length-1],[o,r,a]=Fc(s),l=Number(this.element.dataset.max)||100;if((this.isFullGenerations?o.value!==""&&r.value!==""&&a.value!=="":o.value!=="")&&e.length<l){let p=n.cloneNode(!0);s.after(p);let h=Fc(p);h[0].value="",h[0].name="",h[1].value="",h[1].name="",h[1].options.length=1,h[1].disabled=!0,h[2].value="",h[2].name="",h[2].options.length=1,h[2].disabled=!0,p.classList.add("is-unremovable")}let d=0,m;e.forEach(p=>{let h=Fc(p);if(!m){let f=new RegExp(`${Fn.CARS}\\[\\d+]\\.${Fn.BRAND}$`,"i");m=h[0].name.replace(f,"")}if(h[0].value===""&&p!==s)p.remove();else{let f=this.isFullGenerations?h[0].value===""||h[1].value===""||h[2].value==="":h[0].value==="";p.classList.toggle("is-unremovable",f&&p===s),h[0].name=`${m}${Fn.CARS}[${d}].${Fn.BRAND}`,h[1].name=`${m}${Fn.CARS}[${d}].${Fn.MODEL}`,h[2].name=`${m}${Fn.CARS}[${d}].${Fn.GENERATION}`,d+=1}})}};ct();re();_o();var M_="Машины",I_="Выберите, владельцам каких машин показывать запись.",R_="Выберите одно или несколько  поколений, к которым подходит ваш товар.",O_="Выберите марку",H_="Выберите модель",D_="Любые модели",k_="Выберите поколение",N_="Любые поколения",P_="Добавить",$_="Закрыть окно?",F_="Выбранные машины не сохранятся",B_="Выбрать",U_="Редактировать";ue();D();B();V();ge();var Bn=class{constructor(t=1/0){this.maxnum=t;this.tokens=[]}get(){return this.tokens}add(t,e){this.tokens.length<this.maxnum&&(e?this.tokens.unshift(t):this.tokens.push(t),this.tokens=this.tokens.filter((n,s,o)=>o.findIndex(r=>r.id?r.id===n.id:JSON.stringify(r)===JSON.stringify(n))===s))}remove(t){this.tokens.splice(t,1)}removeById(t){let e=this.tokens.findIndex(n=>n.id===t);e!==-1&&this.remove(e)}removeLast(){this.tokens.pop()}clear(){this.tokens=[]}};nt();var Lo=[],aN=({list:i,brand:t,model:e,fullGenerations:n,addDisabled:s,submitDisabled:o,addHandler:r,removeHandler:a,submitHandler:l})=>y`
  <div class="x-form">
    <div class="x-box x-box--ghost">
      <div class="x-text o-b">${n?R_:I_}</div>
    </div>
    <div class="x-box x-box--narrow" data-role="formcarselect carselect" data-gen-autoselect>
      <div class="x-form__item">
        <div class="x-form__body">
          <select class="x-select" name="brand" data-slot="carselect.brand">
            <option value="">${O_}</option>
            ${rt(Lo,c=>c[0],c=>y`<option value="${c[0]}">${c[1]}</option>`)}
          </select>
        </div>
      </div>
      <div data-slot="formcarselect.model" style=${Kt({display:t?"":"none"})}>
        <div class="x-form__item">
          <div class="x-form__body">
            <select class="x-select" name="model" data-slot="carselect.model">
              <option value="">${n?H_:D_}</option>
            </select>
          </div>
        </div>
        <div class="x-form__item" data-slot="formcarselect.gen" style=${Kt({display:e?"":"none"})}>
          <div class="x-form__body">
            <select class="x-select" name="generation" data-slot="carselect.gen">
              <option value="">${n?k_:N_}</option>
            </select>
          </div>
        </div>
      </div>
      <button class="o-t-l c-button c-button--l u-100" ?disabled=${s} @click=${r}>${P_}</button>
    </div>

      ${i&&i.length>0?y`
          <div class="x-box x-box--narrow">
            ${rt(i,c=>JSON.stringify(c),(c,d)=>y`
              <div class="x-form__item">
                <div class="x-form__body">
                  <div class="x-form__text">${c.caption}</div>
                  <button class="r-button-unstyled x-side-icon x-side-icon--cross" @click=${()=>a(d)}></button>
                </div>
              </div>
            `)}
          </div>`:N}

    <div class="x-form__submit u-extend" data-role="sticky-button">
      <button class="c-button c-button--primary c-button--xl u-100" type="button"
        ?disabled=${o} @click=${l}>${Ti}</button>
    </div>
  </div>
`,qr=class extends x{constructor(){super(...arguments);this.addDisabled=!0;this.contentChanged=!1;this.closeWithoutConfirm=!1;this.brand="";this.model=""}parsedInit(){this.listEl=this.slot("list"),this.buttonEl=this.slot("button"),this.name=this.element.dataset.name||"",this.placeholder=this.element.dataset.placeholder,this.fullGenerations=this.element.dataset.fullGenerations==="",this.tokens=new Bn(Number(this.element.dataset.max)),Lo.length===0&&(Lo=this.slot("brands",document.body).textContent.split(";").map(n=>n.split(",")),Lo[Lo.length-1][0]===""&&Lo.pop()),this.carSelectChange=this.carSelectChange.bind(this),this.element.addEventListener("click",()=>this.showModal())}showModal(){this.initTokens(),this.addDisabled=!0,this.contentChanged=!1,this.closeWithoutConfirm=!1,this.dialog=bi({anchor:this.element,title:M_}),this.dialog.addEventListener("beforehide",e=>T(this,null,function*(){!this.closeWithoutConfirm&&this.contentChanged&&(e.preventDefault(),(yield et($_,F_,void 0,yo))&&this.close())})),this.dialog.addEventListener("hide",()=>this.hideModal(),{once:!0}),this.dialog.render(),this.dialog.show(),this.updateModal(),this.carSelectContainer=$e("carselect",this.dialog.contentElement),this.carSelectContainer.addEventListener("change",this.carSelectChange)}initTokens(){this.tokens.clear();let e=q(this.name?`input[name^="${this.name}"]`:'input[type="hidden"]',this.listEl).reduce((s,o)=>{let r=o.name.match(/cars\[(\d+)]\.(\w+)/),a=Number(r&&r[1]),l=r&&r[2];return l&&(s[a]=s[a]||{},s[a][l]=o.value),s},[]);q("[data-index]",this.listEl).forEach((s,o)=>{e[o].caption=s.textContent,this.tokens.add(e[o])})}updateForm(){this.listEl.innerHTML="";let e=this.tokens.get();if(e.sort((n,s)=>{let o=n.caption,r=s.caption;return o>r?1:o<r?-1:0}),e.forEach((n,s)=>{let o=document.createElement("input");if(o.name=`${this.name?`${this.name}.`:""}cars[${s}].brand`,o.type="hidden",o.value=n.brand||"",this.listEl.appendChild(o),n.model){let a=document.createElement("input");a.name=`${this.name?`${this.name}.`:""}cars[${s}].model`,a.type="hidden",a.value=n.model,this.listEl.appendChild(a)}if(n.generation){let a=document.createElement("input");a.name=`${this.name?`${this.name}.`:""}cars[${s}].generation`,a.type="hidden",a.value=n.generation,this.listEl.appendChild(a)}let r=document.createElement("div");r.className="u-text-overflow",r.textContent=n.caption,r.dataset.index=String(s),this.listEl.appendChild(r)}),e.length===0){let n=document.createElement("div");n.textContent=this.placeholder||"",this.listEl.appendChild(n)}this.buttonEl&&(this.buttonEl.textContent=e.length===0?B_:U_),de(this.element)}updateModal(){z(aN({list:this.tokens.get(),brand:this.brand,model:this.model,fullGenerations:!!this.fullGenerations,addDisabled:this.addDisabled,submitDisabled:!this.contentChanged,addHandler:this.addHandler.bind(this),removeHandler:this.removeHandler.bind(this),submitHandler:this.updateFormAndClose.bind(this)}),this.dialog.contentElement)}close(){this.closeWithoutConfirm=!0,Ht()}updateFormAndClose(){this.updateForm(),this.close()}carSelectChange(e){if(e.detail){let{brand:n,model:s}=e.detail;this.addDisabled=this.fullGenerations?!n||!s:!n,this.brand=n||"",this.model=s||"",this.updateModal()}}hideModal(){this.carSelectContainer.removeEventListener("change",this.carSelectChange)}addHandler(){let e=zs(this.carSelectContainer,"carselect"),{brand:n,model:s,generation:o,caption:r}=e;this.tokens.add(ut(C(C({brand:n},s&&{model:s}),o&&{generation:o}),{caption:r}),!0),this.contentChanged=!0,this.updateModal()}removeHandler(e){this.tokens.remove(e),this.contentChanged=!0,this.updateModal()}};R();D();V();$();Lh();xo();Di();var Gr="catalog",cN="/ajax/carsearch.cshtml",Y_=0,dN=()=>{tt(Gr,"dv").forEach(t=>{Zg(t),q("script",t).forEach(jc)})},Ch=()=>{let i=b(Gr,"more");if(!i)return;let{dataset:t}=i,e=C(C({context:t.context,start:t.start,sort:t.sort,index:Y_},t.city&&{city:t.city}),t.country&&{country:t.country}),n=b(Gr,"spin"),s=new se(n);L(cN,Gr,{anchorEl:i,spinner:s,body:e}).then(o=>{Y_++;let{start:r}=o;r&&(i.dataset.start=String(r));let{html:a}=o;a&&(i.insertAdjacentHTML("beforebegin",a),dN()),(!a||!r)&&(i.remove(),He().removeEventListener("scroll",Ch))})},K_=()=>{He().addEventListener("scroll",Ch),v.registerHandlers(Gr,{morecars:Ch})};R();B();j();ye();wc();var X_=(i,t)=>{let e=i.length,n,s=1;for(;!n;)if(e%s===1)s++;else{n=!0;for(let o=0,r=0;o*s<e;o++)if(r+=Math.max(...i.slice(o*s,(o+1)*s)),r>t){n=!1,s++;break}}return s};var Jr=class extends x{parsedInit(){let t=this.element,e=Array.from(t.children),n=t.classList.contains("is-open"),s=(o,r)=>{r&&Lt(t);let a=this.slot("more",document.body);a&&_(a,!o);let l=this.slot("mode",document.body);if(l&&(_(l,Boolean(a)),l.catalog.value=o?"more":"less"),d2Env.isMobile)t.classList.toggle("is-open",o);else if(e.length){t.style.visibility="hidden";let c=e.map(g=>g.getBoundingClientRect());t.classList.add("is-open","is-parked");let d=t.offsetWidth,m=e.map(g=>g.offsetWidth),p=e[0].offsetHeight,h=e.map(g=>n||g.classList.contains("is-important")),f=X_(m,d);t.style.maxHeight=`${f*p}px`,t.classList.remove("is-parked"),e.forEach((g,E)=>{let M=g.getBoundingClientRect();g.style.cssText=h[E]?`transform:translate(${c[E].left-M.left}px,${c[E].top-M.top}px)`:"opacity:0"}),t.style.visibility="",e.forEach(g=>{g.style.transition="transform .5s ease-in-out, opacity .5s linear",mo(g),g.style.transform="",g.style.opacity=""})}};v.registerHandlers(this.role,{more:()=>s(!0),"more-top":()=>s(!0,!0),less:()=>s(!1)})}};ct();zc();R();Se();var tT="Комментарии",eT="Ваше сообщение добавлено на последнюю страницу.",iT="Редактирова­ние",nT="темы",sT="коммен­тария",oT="Свеженаписанный комментарий можно редактировать в течение 72 часов с момента его добавления. Полная история изменений будет доступна для ознакомления всем.",rT="Заголовок",aT="Сообщение",lT="Ответить на комментарий",cT="Сохранить изменения",dT="Пользователь",mT="Комментарии заблокированы до",pT="Комментарии модератора",hT="замаскированный мат в комментариях|мат в комментариях|переход на личности|флуд|флуд бессодержательными комментариями|спам|рекламный спам|писать ЗАГЛАВНЫМИ БУКВАМИ нельзя|писать translitom нельзя|писать на иностранном языке нельзя",uT="Заблокировать комментарии на",fT="Заблокировать",gT="Снять блокировку",vT="История редактирования",ET="Скрыть историю",Wc="Удалить комментарий?",bT="Комментарий",_T="Изменить",TT="Пожаловаться на спам",yT="Модерация",qc="Скрыть тему?",LT="Скрыть тему",xT="Скрыть",wT="Тема скрыта",Zr="Удалить тему?",CT="Удалить тему",AT="Deleted";var ST="Жалоба модератору",Ah="Комментарий",Sh="Отправить",MT="Спам-комментарий",IT="Выберите хотя бы одну причину для жалобы",RT="Комментарии с матом или переходом на личности",OT="Непристойное фото или текст",HT="Рассылает спам",DT="Чужая фотография",kT="Спам",NT="Нецензурная лексика в тексте",PT="Контент эротического или порнографического характера",$T="Чужой текст",FT="Нечитабельная ерунда",BT="Непристойное фото или текст",UT="Чужая фотография",jT="Чужой текст",zT="Пользовательская информация не соответствует этой модели машины",VT="Реклама услуг или магазина",WT="Несколько товаров в одном объявлении",qT="Неправильная категория",GT="Чужое или рекламное фото",JT="Чужой, непристойный или нечитабельный текст",ZT="Спам",YT="Выберите причину";D();V();$();j();ct();_o();ae();De();nt();We();var sy="/ajax/complaint.cshtml",oy={comments:RT,abusive:OT,spam:HT,copyright:DT},ry={spam:kT,abusivetext:NT,abusivephoto:PT,textcopyright:$T,garbage:FT},ay={abusive:BT,copyright:UT,textcopyright:jT,incorrect:zT},ly={ads:VT,manyinone:WT,wrongsection:qT,faultyphoto:GT,faultytext:JT,spam:ZT},hN=(i,t)=>y`<div class="c-checkbox-group c-dialog-form__field">${Object.entries(i==="user"?oy:i==="journal"?ry:i==="car"?ay:ly).map(([n,s])=>{let o=t&&n==="copyright";return y`<label class="c-checkbox">
        <input type="radio" name="reason" .value=${n} ?disabled=${o}>
        <span class="c-checkbox__check c-checkbox__check--radio"></span>
        <span class="c-checkbox__label" style=${Kt({color:o?"#808080":""})}>${s}</span>
      </label>`})}</div>`,uN=(i,t="",e)=>y`
  <div class="c-dialog-report">
    <form action="${sy}" class="c-dialog-form" novalidate>
      ${i==="commentspam"?y`<input type="hidden" name="reason" value="spam">`:hN(i,e)}
      <div class="c-dialog-form__field">
        <label class="c-dialog-form__legend" for="dlg.t">${Ah}</label>
        <textarea class="c-textarea" name="text" id="dlg.t" data-autofocus
          style=${Kt({height:i==="commentspam"?"96px":""})}>${t}</textarea>
      </div>
      <div class="o-group o-group--m o-group--end o-group--wide c-dialog-buttons">
        <span class="c-dialog-buttons__spinner is-skip"></span>
        <button class="c-button c-button--m-no-padding" name="submitbtn" type="submit">${Sh}</button>
      </div>
    </form>
  </div>
`,fN=(i,t)=>y`
<div class="x-box o-t">
  <h2 class="x-header o-b-xs">${YT}</h2>
  ${Object.entries(i==="user"?oy:i==="journal"?ry:i==="car"?ay:ly).map(([n,s])=>y`
      <div class="x-form__item">
        <div class="x-form__body">
          <label class="x-choice x-choice--radio">
            <input type="radio" name="reason" .value=${n} ?disabled=${t&&n==="copyright"}>
            <span class="x-choice__label">${s}</span>
          </label>
        </div>
      </div>
    `)}
</div>
  `,gN=(i,t="",e)=>y`
<form action="${sy}" class="x-form" novalidate data-keysubmit data-role="form">
  ${i==="commentspam"?y`<input type="hidden" name="reason" value="spam">`:fN(i,e)}
  <div class="x-box x-box--narrow">
    <div class="x-form__item is-focusable">
      <div class="x-form__body">
        <textarea class="x-textarea" name="text" data-autofocus
          placeholder="${Ah}" data-role="taflexible">${t}</textarea>
      </div>
    </div>
  </div>
  <div class="x-form__submit u-extend" data-role="sticky-button">
    <button class="c-button c-button--primary c-button--xl u-100" type="submit"
      name="submitbtn">${Sh}</button>
  </div>
</form>
`,Jc=(i,t,e,n,s)=>{let o=new yt({anchor:i,title:ST});z(d2Env.isMobile?gN(t,s.text,s.skipPhotos):uN(t,s.text,s.skipPhotos),o.element),o.setFormDataTransformer(r=>({id:e,type:n,reason:r.reason.value,text:r.text.value})),o.addEventListener("submit",()=>{ht("moderation",{from:n}),zt()}),o.show(),cn(o.form,["reason",IT,"required"])};De();nt();Ce();R();Se();Or();ue();D();wo();var vN="comment";var EN={"edit-history":{text:vT},"edit-history-hide":{text:ET},edit:{text:_T},blacklist:{text:Rr,confirmTitle:Rr,confirm:rb},unblacklist:{text:ro},spam:{text:TT},delete:{text:Ae,confirmTitle:Wc,confirm:Ae,delete:!0},mod:{text:yT,isMod:!0},"thread-hide":{text:LT,confirmTitle:qc,confirm:xT},"thread-hidden":{text:wT,inactive:!0},"thread-moderate":{text:CT,confirmTitle:Zr,confirm:Ae,isMod:!0},"thread-moderated":{text:AT,isMod:!0,inactive:!0}},Hh=i=>J('[data-action="comment.dropdown"]',i),Dh=i=>(i.dataset.menu||"").split(","),cy=(i,t)=>{i.dataset.menu=t.join(",")},bN=i=>Dh(i).map(e=>ut(C({},EN[e]),{action:e})),kh=(i,t,e)=>{let n=Dh(i),s=n.indexOf(t);s!==-1&&(n[s]=e),cy(i,n)},dy=(i,t,e)=>{let n=Dh(i);n=n.map(s=>s===t?e:s===e?t:s),cy(i,n)},_N=i=>{let t=i.node(),e=bN(t);new li(t,e,bT).addEventListener("select",s=>{it.publish("dropdows-select",t,s.detail)})},my=()=>{v.registerHandlers(vN,{dropdown:_N})};var Bi="/ajax/forums.cshtml";ct();Qr();$();De();nt();var py="/ajax/admin.cshtml",TN=i=>{let t=i.target,n=t.closest("form").mcomment;n.value=(n.value?`${n.value}, `:"")+t.textContent},yN=i=>y`
<div class="c-dialog-modcomment">
  <form action="${py}" class="c-dialog-form" novalidate>
    ${i.unmuteTime?y`<div class="c-dialog-desc c-dialog-desc--warning">${mT} ${i.unmuteTime}</div>`:N}
    <div class="c-dialog-form__field">
      <label class="c-dialog-form__legend">${pT}</label>
      <div class="c-dialog-modcomment__comments">${hT.split("|").map(t=>y`<span><span class="c-link" @click=${TN}>${t}</span></span>`)}</div>
      <textarea class="c-textarea" name="mcomment" data-autofocus>${i.comment}</textarea>
    </div>
    <div class="c-dialog-form__field">
      <label class="c-dialog-form__legend-h" for="dlg.b">${uT}</label>
      <select class="c-input" name="unmutedate" id="dlg.b">${Ye(i.denySelect)}</select>
    </div>
    <div class="o-group o-group--m o-group--end o-group--wide c-dialog-buttons">
      <span class="c-dialog-buttons__spinner is-skip js-spinner"></span>
      <button class="c-button c-button--m-no-padding" name="submitbtn" type="submit" .value=${i.unmuteTime?1:0}>
        ${i.unmuteTime?gT:fT}
      </button>
    </div>
  </form>
</div>
${i.history?y`<div class="c-dialog-modcomment__table">${Ye(i.history)}</div>`:N}
`,Zc=(i,t)=>T(void 0,null,function*(){let e=yield L(py,"comments-moderate",{method:"POST",anchorEl:i,body:t}),n=new yt({anchor:i,title:`${dT} ${e.nickname}`},!0);z(yN(e),n.element),n.setFormDataTransformer(s=>ut(C({},t),{_:s.submitbtn.value==="1"?"remindCommentingRules":"muteUserComments",text:s.mcomment.value,days:s.unmutedate.value})),n.addEventListener("submit",zt),n.show()});var Co="comment",hy="is-original",xN="/ajax/blacklist.cshtml",Nh=new WeakMap,uy=new WeakSet,wN=(i,t,e,n)=>y`
  <div class="c-dialog-editcomment">
    <div class="c-dialog-desc">${oT}</div>
    <form action="${Bi}" class="c-dialog-form" novalidate>
      ${t?y`<div class="c-dialog-form__field">
            <label class="c-dialog-form__legend" for="dlg.h">${rT}</label>
            <input class="c-input" type="text" name="header" id="dlg.h" .value=${t}>
          </div>`:N}
      <div class="c-dialog-form__field">
        ${t?y`<label class="c-dialog-form__legend" for="dlg.t">${aT}</label>`:N}
        <textarea class="c-textarea" name="text" id="dlg.t" data-autofocus>${i}</textarea>
      </div>
      <div class="o-group o-group--m o-group--end o-group--wide c-dialog-buttons">
        <span class="c-dialog-buttons__spinner is-skip js-spinner"></span>
        ${!t&&(n||e)?y`<label class="c-upload-button" data-thumb=${Un(e)} data-role="upload-button"></label>`:N}
        <button class="c-button c-button--primary c-button--m-no-padding" name="submitbtn" type="submit">
          ${cT}
        </button>
      </div>
    </form>
  </div>
`,Ph=class{constructor(t){this.rootEl=t;this.isThread=this.rootEl.dataset.thread===""}showReplyForm(t){let e=t.dataset.parent||"",n=this.getReplyForm(e),s=at(n);s.addEventListener("end",o=>{let{expanded:r}=o.target;r&&n.text.focus()},{once:!0}),s.toggle()}getReplyForm(t){if(this.replyForm&&document.documentElement.contains(this.replyForm))return this.replyForm;let n=Ki("comment-form").find(a=>a.classList.contains(hy)).cloneNode(!0);this.replyForm=n,n.classList.remove(hy),n.id="",n.dataset.hidden&&delete n.dataset.hidden;let s=n.text;s.style.height="",s.setAttribute("placeholder",lT),s.value="";let o=$e("upload-button",n);o.innerHTML="",o.dataset.thumbnail&&delete o.dataset.thumbnail;let r=S("input",{type:"hidden",name:"parent",value:t||""});return n.appendChild(r),_(n,!1),this.rootEl.after(n),n}getDropdownQuery(t,e={}){return C({_:t,owner:this.rootEl.dataset.owner,ownerId:this.rootEl.dataset.ownerid,id:this.rootEl.dataset.id},e)}dropdown(t,e){switch(e){case"edit-history":case"edit-history-hide":this.editHistory(t);break;case"edit":this.edit(t);break;case"blacklist":this.blacklist(t,!0);break;case"unblacklist":this.blacklist(t,!1);break;case"spam":this.spam(t);break;case"thread-moderate":this.deleteCommentOrThread(t,!0);break;case"thread-hide":case"delete":this.deleteCommentOrThread(t);break;case"mod":this.moderate(t);break}}editHistory(t){return T(this,null,function*(){let e=this.getDropdownQuery(this.isThread?"ht":"hc"),n=b(Co,"history",this.rootEl);if(uy.has(n)){at(n).toggle(),zt();return}let o=yield L(Bi,"comment-edit-history",{delay:!0,method:"POST",anchorEl:t,body:e});!o.html||(uy.add(n),_(n,!1),n.innerHTML=o.html,at(n).addEventListener("start",r=>{let a=Hh(this.rootEl);a&&(r.target.expanded?kh(a,"edit-history","edit-history-hide"):kh(a,"edit-history-hide","edit-history"))}),at(n).toggle(),zt())})}edit(t){return T(this,null,function*(){let e=this.getDropdownQuery(this.isThread?"ut":"uc"),n=yield L(Bi,"comment-edit",{delay:!0,method:"POST",anchorEl:t,body:ut(C({},e),{begin:!0})}),s={title:`${iT} ${this.isThread?nT:sT}`,header:n.header,text:n.text,thumb:n.thumbnail&&n.thumbnail.length>0&&n.thumbnail[0]||"",canPostImages:n.canPostImages},o=new yt({anchor:t,title:s.title},!0);z(wN(n.text,n.header,n.thumbnail&&n.thumbnail[0],n.canPostImages),o.element),o.setFormDataTransformer(r=>{let a=C(ut(C({},e),{text:r.text.value}),r.header&&{header:r.header.value}),l=$e("upload-button",r);if(l){let c=l.dataset.id,d=Boolean(s.thumb);(!d||!(d&&!c))&&(a.image=c||"")}return a}),o.addEventListener("submit",r=>{let{detail:a}=r,l=b(Co,"text",this.rootEl);a.text&&(l.innerHTML=a.text);let c=document.getElementById("thread-header");c&&a.header&&(c.innerHTML=a.header),Ht(),Ht()}),o.show()})}blacklist(t,e){return T(this,null,function*(){zt();let n=this.rootEl.dataset.user;yield L(xN,"comment-blacklist",{method:"POST",delay:!0,anchorEl:t,body:{_:e?"add":"remove",id:n}}),Ki(Co).filter(o=>o.dataset.user===n).forEach(o=>{let r=Hh(o);r&&dy(r,"blacklist","unblacklist")})})}spam(t){let e=this.rootEl.dataset.user,n=b(Co,"text",this.rootEl),s=n?`${MT}: ${n.innerText}`:"";setTimeout(Jc,1,t,"commentspam",e,"user",{text:s})}deleteCommentOrThread(t,e){return T(this,null,function*(){let n=this.getDropdownQuery(this.isThread?e?"mt":"dt":"dc"),s=yield L(Bi,"comment-delete",{delay:!0,method:"POST",anchorEl:t,body:n});zt(),this.isThread?s.url?window.location.href=s.url:window.location.reload():at(this.rootEl).hideAndRemove()})}moderate(t){Zc(t,{_:"getUserCommentsModerationData",userId:this.rootEl.dataset.user,forumId:this.rootEl.dataset.forum,messageId:this.rootEl.dataset.id})}},fy=i=>{let t=Us(i,Co);return t&&!Nh.has(t)&&Nh.set(t,new Ph(t)),t&&Nh.get(t)},CN=i=>{let t=i.node(),e=fy(t);e&&e.showReplyForm(t)},AN=(i,t)=>{let e=fy(i);e&&e.dropdown(i,t)},gy=()=>{v.registerHandlers(Co,{reply:CN}),it.subscribe("dropdows-select",AN)};ss();$h();D();B();$();ae();ye();Oh();Kc();nt();Di();Ce();var SN=500,Ey="is-collapsed",ea=class extends x{parsedInit(){this.isInline=this.element.dataset.inline==="",Gc(this.element,()=>this.post());let e=this.slot("text");this.isInline?(e.addEventListener("focus",()=>this.focus()),e.addEventListener("blur",()=>this.blur())):new jn(e,e.offsetHeight);let n=this.slot("upload");n&&n.addEventListener("click",()=>this.cancelFocus())}cancelFocus(){clearTimeout(this.blurTm)}focus(){clearTimeout(this.blurTm),this.element.classList.remove(Ey),this.element.dataset.metrika&&ht(this.element.dataset.metrika)}blur(){this.blurTm=setTimeout(()=>{this.element.text.value===""&&this.element.classList.add(Ey)},350)}post(){return T(this,null,function*(){let e=this.element,n=this.slot("upload"),s=n&&n.dataset.id,o=C(C(C({_:e.dataset.type,text:e.text.value,owner:e.owner.value,ownerId:e.ownerId.value},e.header&&{header:e.header.value}),e.parent&&{parent:e.parent.value}),s&&{image:s}),r=new se(this.slot("spinner")),a=yield L(Bi,this.role,{method:"POST",body:o,anchorEl:e.submitbtn,spinner:r});if(a.url){window.location.href=a.url;return}if(a.warning){pe({anchor:this.element.submitbtn,className:"c-dialog-warning",title:Yc,html:`
<div class="c-dialog-desc">${a.warning}</div>
<div class="o-group o-group--m o-group--end o-group--wide c-dialog-buttons">
<button class="c-button c-button--primary c-button--m-no-padding"
  type="button" data-action="dialog.close">${ta}</button>
</div>
        `});return}if(!a.html)return;let l=Ii(a.html);l.style.visibility="hidden";let c=document.getElementById("commentstitle");if(c){let f=c.querySelector(".c-counter"),g=f?parseInt(f.textContent,10)+1:1;c.innerHTML=`${tT} <span class="c-counter">${g}</span>`}let d=e.closest(".js-entity"),m=O("js-commentscounter",d);m&&(m.textContent=String((Number(m.textContent)||0)+1)),e.header&&(e.header.value=""),e.text.value="",n&&(n.dataset.id&&delete n.dataset.id,n.dataset.thumbnail&&delete n.dataset.thumbnail);let p=!!e.parent,h=e.dataset.hidden==="";if(p)e.after(l);else if(h)Mt(eT,e.submitbtn);else{let f=e.closest(".js-compactcomments"),g=O("c-comments",f);e.dataset.position==="top"?g.prepend(l):g.appendChild(l)}Lt(l),this.animate(l,e,p),this.isInline&&e.remove()})}animate(e,n,s){let o=e.getBoundingClientRect(),r=n.getBoundingClientRect(),a=r.width/o.width,l=r.x-o.x,c=r.y-o.y;e.classList.add("is-animated");let d=Be({targets:e,translateX:[l,0],translateY:[c,0],scale:[a,1],opacity:[.2,1],duration:SN,easing:"easeInOutCubic",elasticity:0});d.complete=()=>{e.classList.remove("is-animated"),s&&at(n).hideAndRemove()},e.style.visibility="visible"}};R();ue();D();$();nt();var by="js-thread",MN="js-entity",IN=(i,t)=>{for(i.appendChild(t);i.firstChild!==t;)t.appendChild(i.firstChild)},_y=i=>T(void 0,null,function*(){let t=i.actionName(),e=i.node();if(yield et(t==="mt"?Zr:qc,void 0,e,t==="mt"?Ae:To).then(c=>!c))return;let o=vt(e,by),{dataset:r}=o;yield L(Bi,"mod-delete-thread",{method:"POST",anchorEl:e,body:{_:t,owner:r.owner,ownerId:r.ownerid,id:r.id}});let a=vt(o,MN),l=a&&wt(by,a).length===1?a:o;l&&l.remove()}),RN=i=>{let t=i.node(),{dataset:e}=t,n=C({_:"getUserCommentsModerationData",userId:e.user,forumId:e.forum,messageId:e.id},e.thread&&{threadId:e.thread});Zc(t,n)},ON=i=>T(void 0,null,function*(){let t=i.node(),{dataset:e}=t,n=e.thread==="";if(yield et(n?Zr:Wc,void 0,t,Ae).then(c=>!c))return;yield L(Bi,"mod-delete-comment",{method:"POST",anchorEl:t,body:{_:n?"dt":"dc",owner:e.owner,ownerId:e.ownerid,id:e.id}});let o=t.closest("li"),r=O("js-link",o),a=O("js-moddel",o),l=document.createElement("span");l.className="u-deleted",a&&a.remove(),IN(r,l)}),Ty=()=>{v.registerHandlers("comments",{dt:_y,mt:_y,mod:RN,moddel:ON})};B();var HN=60,ia=class extends x{parsedInit(){this.element.scrollHeight-this.element.offsetHeight<HN&&this.element.classList.remove("is-closed"),this.element.classList.remove("is-off"),this.element.addEventListener("click",()=>this.element.classList.remove("is-closed"))}};ct();var yy="Добавить фотографию с компьютера";B();na();on();var NN=(i,t)=>y`
<button class="c-button c-button--gray c-upload-button__button" type="button">
  <span class="c-upload-button__thumb" style="background-image: url(${i})"></span>
  <span class="c-upload-button__remove" @click=${t}></span>
</button>
`,sa=class extends x{init(){this.reset=this.reset.bind(this),this.thumbnail||this.attributeChanged()}get thumbnail(){return this.element.dataset.thumbnail||""}set thumbnail(e){this.element.dataset.thumbnail=e}get observedAttributes(){return["data-thumbnail"]}attributeChanged(){this.thumbnail?(this.uploader&&(this.uploader.dispose(),this.uploader=void 0),ze(),this.element.dataset.tt&&delete this.element.dataset.tt,z(NN(this.thumbnail,this.reset),this.element)):this.uploader||(this.element.dataset.tt=yy,z(N,this.element),this.uploader=new Li("commentimage","c-button c-button--gray"),this.uploader.setUploadUrl(d2Env.uploadUrl),this.uploader.setAction("uploadSimple"),this.uploader.setButtonCaption('<span class="c-upload-button__icon"></span>'),this.uploader.render(this.element),this.uploader.setVisible(!0),this.uploader.addEventListener("ready",this),this.uploader.addEventListener("started",this))}reset(){this.element.dataset.id&&delete this.element.dataset.id,this.thumbnail=""}handleEvent(e){e.type==="ready"?e.detail&&e.detail.length===1&&(this.element.dataset.id=e.detail[0].id,this.thumbnail=e.detail[0].thumbnail[0]):e.type==="started"&&this.reset()}};R();var My="Состою";$();ae();var Iy="feedcomm",$N=i=>T(void 0,null,function*(){let t=i.node();yield L("/ajax/community.apply.cshtml",Iy,{method:"POST",anchorEl:t,body:{community:t.value}}),ht("myfeed_r_communities_join"),t.disabled=!0,t.textContent=My}),Ry=()=>{v.registerHandlers(Iy,{join:$N})};R();V();var Oy=(i,t)=>{document.documentElement.style.overflow="hidden",v.registerHandlers(t,{close:()=>{let e=b(t,"bg");e&&e.remove();let n=b(t,"overlay");n&&n.remove(),document.documentElement.style.overflow=""}})};R();ue();D();V();$();j();ye();Ft();nt();We();Ce();R();D();B();V();j();var Bh="deposit-payment",Hy="js-deposit-payment-type",Dy=()=>{wt(Hy).forEach(t=>{Ws(t)||t.remove()})},FN=()=>{wt(Hy).forEach(t=>{_(t,!1)})},ky=i=>{let t=b(Bh,i);_(t,!0)},BN=i=>{let t=b(Bh,"invoice-terms");t&&_(t,i==="invoice")},UN=i=>{let t=b(Bh,"hidden");t&&(t.value=i)},jN=i=>{let t=i.node(),e=t.value;if(FN(),ky(e),BN(e),"kind"in t.dataset){let n=t.dataset.kind||"";UN(n)}},oa=class extends x{parsedInit(){v.registerHandlers(this.role,{type:jN});let t=J('[name="payment-type"]',this.element);!t||(t.checked=!0,ky(t.value))}};var zN="js-com-deposit-form",VN="js-deposit-requisite",Ny="js-deposit-item",Xc="deposit",WN=i=>{let t=vt(i,Ny);if(t){t.remove();let e=O(VN);wt(Ny,e).length===0&&e.remove()}},qN=i=>T(void 0,null,function*(){let t=i.node();if(yield et(j_,void 0,t)){let e=t.dataset.url||"";yield Ct(e,{method:"DELETE",anchorEl:t}),WN(t)}}),GN=i=>{let t=i.node(),e=tt(Xc,"submit-btn"),n=tt(Xc,"type"),s=b(Xc,"payment-options");if(n&&n.length&&n.forEach(o=>{o.value=t.value}),s&&!Ws(s)){let o=at(s);o.addEventListener("show",()=>{Lt(s)},{once:!0}),o.toggle(!0)}e.forEach(o=>{o.innerText=t.dataset.caption,o.value=t.dataset.amount})},JN=i=>T(void 0,null,function*(){ft(i);let t=i.node(),e=t.closest("form"),n=()=>{t.disabled=!0,e.submit()};if("validateBeforeConfirm"in t.dataset&&!Hi(e))return;"cleanupBeforeSubmit"in e.dataset&&Dy();let o=t.dataset.confirm||e.dataset.confirm;if(!o){n();return}(yield et(o,void 0,t))&&n()}),ZN=()=>{let i=b(Xc,"tariffs");if(i)mr(i);else{let t=O(zN),e=at(t);e.addEventListener("show",()=>{mr(t)},{once:!0}),e.toggle(!0)}},Py=()=>{v.registerHandlers("deposit",{remove:qN,"update-tariff":GN,"confirm-submit":JN,"show-payment":ZN})};R();V();$();j();Ft();We();var Uh="banktransfer",YN=i=>T(void 0,null,function*(){ft(i);let t=i.node();if(!Hi(t))return;let n=yield L(t.action,Uh,{method:"POST",anchorEl:t.submitbtn,body:new FormData(t)}),s=b(Uh,"success");s.innerHTML=s.innerHTML.replace("{email}",n.email||""),_(t,!1),_(s,!0)}),$y=()=>{v.registerHandlers(Uh,{submit:YN})};B();var ra=class extends x{parsedInit(){this.initial=this.element.rebilling.checked,Array.from(this.element.currency).forEach(e=>e.addEventListener("change",()=>this.update())),this.update()}update(){let{rebilling:e}=this.element,n=this.element.currency.value!=="YK:AC";n&&!e.disabled&&(this.initial=e.checked),e.disabled=n,e.checked=n?!1:this.initial}};R();D();var KN="editorial",XN=i=>{let t=i.node(),e=t.dataset.target,n=J(`[data-name="${e}"]`);n&&(t.parentElement.remove(),n.classList.remove("is-hidden"))},Fy=()=>{v.registerHandlers(KN,{expand:XN})};R();V();$();j();Ft();var Qc="election",QN=i=>T(void 0,null,function*(){ft(i);let t=i.node(),e=t.form.id.value;if(!e)return;yield L(t.form.action,Qc,{method:"POST",anchorEl:t,body:{id:e}});let n=b(Qc,"success");n&&_(n,!0);let s=b(Qc,"form");s&&_(s,!1)}),By=()=>{v.registerHandlers(Qc,{submit:QN})};R();D();V();$();j();Ft();on();var tP="/ajax/experience",Cs="experience",eP=i=>{ft(i);let e=i.node().parentElement,n=J('input[type="checkbox"]',e);q(`input[name="${n.name}"]`,n.form).forEach(o=>{o.checked=o===n}),qs(n.form)},iP=i=>T(void 0,null,function*(){let t=i.node(),e=Q(t,Cs,"item"),n=Q(e,Cs,"reqs"),s=e.dataset.id||"";yield L(tP,Cs,{method:"POST",anchorEl:t,body:{_:"remove",id:s}}),e.remove(),ze(),tt(Cs,"item",n).length===0&&n.remove()}),nP=i=>{let t=i.node(),e=b(Cs,"additional"),n=t&&Q(t,Cs,"additional-control");n&&e&&(_(n,!1),_(e,!0))},Uy=()=>{v.registerHandlers(Cs,{show:eP,remove:iP,"show-additional":nP})};B();var aa=class extends x{parsedInit(){let t=this.slot("button");!t||new IntersectionObserver(e=>{this.element.classList.toggle("is-stuck",!e[0].isIntersecting)},{rootMargin:"-1px 0px",threshold:1}).observe(t)}};D();var jh,jy=(i=!0)=>{if(document.body.classList.toggle("g-branded",i),q(".l-alt,.dv-post-header").forEach(t=>{t.style.display=i?"none":""}),i){let{styleSheets:t}=document;if(t&&t.length){for(let e=0;e<t.length;e++)for(let n=0;n<t[e].cssRules.length;n++)if(t[e].cssRules[n].selectorText==="body.g-branded"){jh=t[e].cssRules[n].cssText,t[e].deleteRule(n);break}}}else if(jh){let t=document.createElement("style");t.appendChild(document.createTextNode(jh)),document.head.appendChild(t)}};ct();yi();re();var zy="Посмотреть больше машин на Дроме",Vy="Посмотреть ещё";D();$();hn();var fP=(i,t)=>y`
<a class=${Rt({"drom-item":!0,"drom-item--index":t.alternative,"ctx-dark":t.alternative})}
  href=${i.link} rel="noopener" target="_blank" data-ym-target="${t.metrikaTarget}_click">
  ${xi({images:[i.image]},2,{size:{width:16,height:9},className:"is-rounded u-vignette drom-item__pic"})}
  <div class="drom-item__location">${i.city}</div>
  <h4 class="drom-item__caption">${i.caption}, ${i.productionYear}</h4>\n
  <div class="drom-item__price">${i.price}</div>
</a>
`,Yy=(i,t)=>T(void 0,null,function*(){let{url:e}=i.dataset;if(!e)return;let n=yield L(e,t,{silent:!0});z(rt(n.offers,s=>s.link,s=>fP(s,n)),i),n.searchLink||i.after(S("a",{className:n.alternative||n.newDesign?"x-box-more":"c-block__more",href:n.searchLink,rel:"noopener",target:"_blank","data-ym-target":`${n.metrikaTarget}_click`},d2Env.isMobile||n.newDesign?Vy:zy))});var Ao=class{constructor(t,e){this.root=t;this.providersSelectors=e;this.inited=!1;this.type=this.root.dataset.type,this.providers={},this.syncTargetValueWithProviders=this.syncTargetValueWithProviders.bind(this),this.syncProvidersValuesWithTarget=this.syncProvidersValuesWithTarget.bind(this)}isSupported_(){let t=document.createElement("input"),e="a";return t.setAttribute("type",this.type),t.setAttribute("value",e),t.value!==e}createProviders_(){Object.entries(this.providersSelectors).forEach(([t,e])=>{this.providers[t]=this.root.querySelector(e)})}forEachProvider(t){Object.values(this.providers).forEach(t)}attachAdditionalAttributes_(){let{max:t,min:e}=this.root.dataset;t&&(this.target.max=t),e&&(this.target.min=e)}init(){!this.isSupported_()||(this.inited=!0,this.target=document.createElement("input"),this.target.className="c-native-control__target",this.target.type=this.type,this.root.appendChild(this.target),this.createProviders_(),this.attachAdditionalAttributes_(),this.syncTargetValueWithProviders(),this.syncProvidersValuesWithTarget=this.syncProvidersValuesWithTarget.bind(this),this.syncTargetValueWithProviders=this.syncTargetValueWithProviders.bind(this),this.target.addEventListener("change",this.syncProvidersValuesWithTarget),this.forEachProvider(t=>{t.addEventListener("change",this.syncTargetValueWithProviders)}))}destroy(){!this.inited||(this.inited=!1,this.target.remove(),this.target.removeEventListener("change",this.syncProvidersValuesWithTarget),this.forEachProvider(t=>{t.removeEventListener("change",this.syncTargetValueWithProviders)}))}syncTargetValueWithProviders(){this.forEachProvider(t=>this.target.value=t.value)}syncProvidersValuesWithTarget(t){let{value:e}=t.target;this.forEachProvider(n=>n.value=e)}};var So=(i="")=>i.startsWith("0")?i.substr(1):i,Mo=(i="")=>i.padStart(2,"0");var Io=class extends Ao{syncTargetValueWithProviders(){let t=`${this.providers.year.value}-${Mo(this.providers.month.value)}-${Mo(this.providers.date.value)}`,e=!Number.isNaN(Date.parse(t));this.target.value=e&&t||this.target.max||""}syncProvidersValuesWithTarget(t){let{value:e}=t.target;if(!this.validateValue(e)){this.resetControl();return}let[n,s,o]=e.split("-");this.providers.date.value=So(o),this.providers.month.value=So(s),this.providers.year.value=n}validateValue(t){if(!t)return!1;let{max:e,min:n}=this.target,s=Date.parse(t);return!(e&&s>Date.parse(e)||n&&s<Date.parse(n))}resetControl(){setTimeout(()=>{this.syncTargetValueWithProviders(),this.target.blur(),this.target.focus()},0)}};var Ky=i=>{new Io(i,{date:'[name="birthDateDay"]',month:'[name="birthDateMonth"]',year:'[name="birthDateYear"]'}).init()};D();B();var ma=class extends x{parsedInit(){this.button=this.slot("button"),this.toggle(!0),this.element.addEventListener("click",e=>{e.target instanceof HTMLInputElement&&e.target.type==="checkbox"&&this.toggle(!0)}),this.button&&this.button.addEventListener("click",()=>this.toggle())}toggle(e){let n=q('input[type="checkbox"]',this.element),o=n.reduce((r,a)=>r+(a.checked?0:1),0)>1;e||n.forEach(r=>{r.checked=o}),this.button&&(this.button.textContent=this.button.dataset[`${(e?o:!o)?"":"un"}checkcaption`])}};R();var gP="daterender",vP=(i,t)=>new Date(t,i+1,0).getDate(),EP=i=>{let t=i.node(),e=t.form,n=/(Day|Month|Year)/,s=e[t.name.replace(n,"Day")],o=e[t.name.replace(n,"Month")],r=e[t.name.replace(n,"Year")];if(!o.value||!r.value)return;let a=Number(s.value),l=Number(o.value)-1,c=Number(r.value),d=vP(l,c),m=Math.min(a,d);s.options.length=s.options[0].value==="1"?0:1;for(let p=1;p<=d;p++){let h=document.createElement("option");s.appendChild(h),h.value=String(p),h.textContent=String(p),h.selected=p===m}},Xy=()=>{v.registerHandlers(gP,{update:EP})};ct();re();ue();var Qy="Дата",tL=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"];B();ge();pa();De();var qh=(i,t)=>Array.from({length:t-i+1},(e,n)=>i+n),_P=(i,t)=>new Date(t,i+1,0).getDate(),TP=(i,t,e,n,s)=>y`
<form class="x-box x-box--ghost">
  <div class="x-form__item">
    <div class="x-form__body">
      <select class="x-select" name="day" @change=${s}>
        ${rt(t,o=>o,o=>y`<option value=${o} .selected=${o===i.day}>${o}</option>`)}
      </select>
    </div>
  </div>
  <div class="x-form__item">
    <div class="x-form__body">
      <select class="x-select" name="month" @change=${s}>
        ${rt(e,o=>o,o=>y`<option value=${o} .selected=${o===i.month}>${tL[o]}</option>`)}
      </select>
    </div>
  </div>
  <div class="x-form__item">
    <div class="x-form__body">
      <select class="x-select" name="year" @change=${s}>
        ${rt(n,o=>o,o=>y`<option value=${o} .selected=${o===i.year}>${o}</option>`)}
      </select>
    </div>
  </div>
  <button class="c-button c-button--primary c-button--l u-100 o-t-l" type="submit">
    ${Ti}
  </button>
  <button class="c-button c-button--l u-100 o-t-s" type="button" data-action="dialog.close">
    ${Uc}
  </button>
</form>
`,ha=class extends x{parsedInit(){this.form=this.element.closest("form"),this.prefix=this.element.dataset.prefix||"",this.minDate=this.element.dataset.min?new Date(this.element.dataset.min):new Date(1970,0,1),this.maxDate=this.element.dataset.max?new Date(this.element.dataset.max):new Date,this.change=this.change.bind(this),this.element.addEventListener("click",()=>this.showForm())}field(e){return this.form[`${this.prefix}${e}`]}value(e,n=0){return this.field(e)&&Number(this.field(e).value)||n}setValue(e,n){this.field(e)&&(this.field(e).value=String(n)||"",de(this.field(e)))}getState(){return{day:this.value("Day"),month:this.value("Month",1)-1,year:this.value("Year")}}showForm(){this.state=this.getState();let{state:e}=this,n=new yt({anchor:this.element,className:"c-modal-popscreen",title:Qy},!1,!0);this.container=n.element,this.update(),n.setSubmitHandler(()=>{this.setValue("Year",e.year),this.setValue("Month",e.month+1),this.setValue("Day",e.day);let s=this.slot("date");return s.innerText=new Intl.DateTimeFormat("ru",{year:"numeric",month:"long",day:"numeric"}).format(new Date(e.year,e.month,e.day)),Promise.resolve()}),n.show()}update(){let{state:e,minDate:n,maxDate:s}=this,o=new Date(e.year,e.month,e.day),r=new Date(o.getTime());r.setDate(1);let a=(r<this.minDate?n:r).getDate();r.setMonth(r.getMonth()+1),r.setDate(0);let l=(s<r?s:r).getDate();r.setMonth(0);let c=(r<n?n:r).getMonth();r.setFullYear(r.getFullYear()+1),r.setMonth(-1);let d=(s<r?s:r).getMonth();e.month=ci(e.month,c,d);let m=n.getFullYear(),p=s.getFullYear(),h=qh(a,l),f=qh(c,d),g=qh(m,p);z(TP(e,h,f,g,this.change),this.container)}change(e){let n=e.target,{name:s}=n,{state:o}=this,r=Number(n.value)||0;s==="year"?o.year=r:s==="month"?(o.month=r,o.day=Math.min(o.day,_P(o.month,o.year))):s==="day"&&(o.day=r),this.update()}};D();B();j();var iL="is-invalid",yP="is-empty",LP="field-validation-error",eL=i=>{if(i){let t=O(LP,i);t&&_(t,!1),i.classList.remove(yP,iL)}},ua=class extends x{parsedInit(){let t=this.element.tagName==="FORM"?this.element:this.element.querySelector("form");if(!t)throw Error(`data-role="form": can't find form.`);if(t.addEventListener("change",this),t.addEventListener("input",this),t.addEventListener("this",this),d2Env.isMobile){let n=q(".c-form__row .c-form__legend").map(a=>a.offsetWidth),o=`.c-form__row .c-form__legend{flex:0 0 ${Math.ceil(Math.max(...n))}px;}`,r=document.createElement("style");r.appendChild(document.createTextNode(o)),document.head.appendChild(r)}}handleEvent(t){let e=t.target;if(!e)return;let n=this.slot("submit");n&&(n.disabled=!1);let s=vt(e,"c-form__item")||vt(e,"x-form__item");e.form&&(d2Env.isMobile||vt(e,"x-form__item"))&&(eL(s),e.form.querySelectorAll(`.x-form__item.${iL}`).forEach(o=>eL(o)))}};R();V();$();var Gh="check-password",xP=150,nL,Ui,wP=i=>{clearTimeout(nL);let t=i.node();nL=setTimeout(()=>T(void 0,null,function*(){let e=t.dataset.passwordCheckUrl;if(!e)return;let n=yield L(e,Gh,{method:"POST",silent:!0,body:{password:t.value}});if(!Ui){let s=t.dataset.style==="notes",o=b(Gh,"message");s&&o?(Ui=o,Ui.classList.add("f-check"),Ui.classList.add("f-check--notes")):(Ui=document.createElement("div"),Ui.className=`f-check ${s?"f-check--notes c-form__notes":"f-item f-item--block"}`,(s?t.parentElement:t).after(Ui))}Ui.innerHTML=n.message,Ui.classList.toggle("not-valid",!n.isValid),Ui.classList.toggle("valid",!!n.isValid)}),xP)},sL=()=>{v.registerHandlers(Gh,{check:wP})};D();B();xp();Ms();nt();rd();var MP="/ajax/geo.cshtml",hL=(i,t)=>{let e=new URLSearchParams(window.location.search);e.delete("city"),e.delete("country"),i&&t&&e.set(i,t);let n=e.toString(),s=()=>{window.location.href=n?`?${n}#filter`:window.location.pathname};d2Env.isApp?(_r("modal-close"),setTimeout(s,100)):s()},IP=(i,t)=>ut(C({},t),{render(e){let n=S("div","x-form__body",S("div","x-form__text",t.caption,t.extra&&S("div","x-form__secondary x-secondary-color",t.extra)));e.appendChild(n)},select(e){e.value=t.caption}}),ga=class extends x{init(){let e=this.element.dataset.context||"",n=this.element.dataset.selling||"",s=`${MP}?_=r&s=${n}&context=${e}`;this.hasFilter=this.element.value!=="",this.update=this.update.bind(this),this.clear=this.clear.bind(this),d2Env.isMobile?this.element.addEventListener("focus",()=>{if(this.isDialogActive)return;let o=this.closestSlot(this.element,"search"),r=o.parentElement,a=this.element.placeholder;this.isDialogActive=!0;let l=this.element.value,c=pe({anchor:o,title:a}),d=c.contentElement;c.addEventListener("hide",()=>{o.className="c-search",this.element.className="c-input c-input--alt-bg c-input--alt-focus c-search__input c-catalog-search u-mobile-100",this.element.placeholder=a,o.lastElementChild.className="c-search__icon",this.element.value=l,r.prepend(o),setTimeout(()=>{this.isDialogActive=!1,this.ac.removeEventListener("update",this.update),this.ac.removeEventListener("dismiss",Ht),this.ac.dispose()},0)}),this.ac&&this.ac.dispose(),this.ac=new Me(s,this.element,!1,!1,d),this.ac.setRowBuilder(IP);let m=this.ac.getRenderer();m.className="x-box x-box--narrow o-t-s",m.rowClassName="x-form__item",m.activeClassName="is-active",this.ac.addEventListener("update",this.update),this.ac.addEventListener("dismiss",Ht),this.ac.setToken(l),this.ac.setTarget(o),this.ac.update(!0),o.className="x-search",this.element.className="x-search__input",this.element.placeholder="",o.lastElementChild.className="x-search__icon",d.appendChild(S("div","x-box o-t",S("div","x-search",o))),this.element.focus(),setTimeout(()=>{this.element.setSelectionRange(0,l.length)},0)}):(this.ac=new Me(s,this.element),this.ac.setRowBuilder(Oo),this.ac.getRenderer().setWidthProvider(this.element,0,this.element),this.ac.addEventListener("update",this.update),this.element.addEventListener("input",this.clear),this.element.addEventListener("blur",this.clear),this.element.addEventListener("focus",()=>{this.element.value===""&&this.ac.update(!0)}))}clear(){this.element.value||(this.hasFilter?hL():(this.ac.setTarget(this.element),this.ac.setToken(""),d2Env.isMobile||this.ac.dismiss()))}update(e){let{row:n}=e.detail;if(!n){this.clear();return}let{id:s}=n;hL(n.kind||"city",s)}};B();var Is=[],va=class extends x{parsedInit(){this.select=this.element.querySelector("select"),this.select.addEventListener("change",()=>this.change());let e=this.slot("remove");e&&e.addEventListener("click",()=>this.remove())}parsed(){Is.push(this.select),this.update()}disconnected(){let e=Is.indexOf(this.select);e!==-1&&(Is.splice(e,1),this.update())}change(){let e=Is[Is.length-1];if(e.selectedIndex!==0){let n=this.root(e),s=n.cloneNode(!0);n.after(s),e.options[0].remove()}this.update()}remove(){this.element.remove(),this.update()}update(){let e=Is.map(n=>n.value);Is.forEach(n=>{for(let s of n.options)s.disabled=s.value!==n.value&&Boolean(s.value&&e.includes(s.value))})}};R();V();j();var uL="lg-feedback",RP=i=>{let t=i.node(),e=t.options[t.selectedIndex].dataset.feedback==="",n=b(uL,"container");_(n,e)},fL=()=>{v.registerHandlers(uL,{toggle:RP})};D();$();Ea();var OP="nickname",HP="/ajax/nickname.check.cshtml",DP=600,kP=(i,t)=>T(void 0,null,function*(){let e=t.value;if(!e){i.textContent="";return}let{available:n,message:s}=yield L(HP,OP,{silent:!0,body:{nickname:e}});i.classList.toggle("is-in-use",!n),i.classList.toggle("is-available",n),i.textContent=s}),gL=i=>{let t=i.dataset.style==="new",e=S("div",`f-check ${t?"f-check--new":"f-item"}`);i.after(e),i.addEventListener("input",zn(()=>kP(e,i),DP))};ct();yi();re();var vL="{VoteCount, plural, one {# голос} many {# голосов} other {# голоса}}{AbstentionCount, plural, =0 {} one {, # воздержался} other {, # воздержалось}}";B();xe();$();ve();var PP=i=>y`
<div class=${Rt({"x-poll__result":!0,"is-active":i.selected})} style="--percentage:${i.percentage}">
  <div class="x-poll__value">${i.percentage}</div>
  <div class="x-poll__option">
    ${Oe(i.text)} <span class="c-counter">${i.voteCount}</span>
  </div>
</div>
`,EL=(i,t)=>y`
<div class="x-poll x-poll--post" style="--percentage-base:${i.percentageBase}">
  <div class="x-box is-small">
    <h2 class="x-header o-b-xs">${t}</h2>
    ${rt(i.answers,e=>e.id,PP)}
    <div class="x-poll__overall">
      ${Z(vL,{VoteCount:i.voteCount,AbstentionCount:i.abstentionCount})}
    </div>
  </div>
</div>
`,ba=class extends x{init(){this.element.addEventListener("click",e=>this.click(e)),this.element.addEventListener("submit",e=>this.submit(e))}click(e){this.button=e.target.closest("button")}submit(e){return T(this,null,function*(){e.preventDefault();let n=e.submitter||this.button;if(!n)return;let s=yield L(this.element.action,{method:"POST",anchorEl:n,body:{[n.name]:n.value}}),o=this.slot("text").textContent||"",r=ut(C({},s),{answers:s.answers.map(l=>ut(C({},l),{percentage:0}))}),a=document.createElement("div");z(EL(r,o),a),this.element.replaceWith(a.firstElementChild),setTimeout(()=>{z(EL(s,o),a)})})}};var bL="Удалить опрос?",_L="Опрос и его результаты будут удалены без возможности восстановления.",TL="Редактировать опрос?",yL="После редактирования опроса, его результаты будут удалены без возможности восстановления.";D();B();ge();j();ye();nt();var LL=2,_a=i=>J("textarea",i),Ta=class extends x{parsedInit(){this.maxItems=Number(this.element.dataset.max||10),this.form=this.slot("form"),this.form.addEventListener("input",()=>this.input()),this.form.addEventListener("click",s=>this.remove(s));let e=this.slot("delete"),n=this.slot("edit");e&&n&&(e.addEventListener("click",s=>this.delete(s)),n.addEventListener("click",s=>this.edit(s)))}input(){let e=this.slots("item"),n=e[e.length-1];if(_a(n).value){if(e.length<this.maxItems){let o=n.cloneNode(!0);_a(o).value="",n.after(o)}}else e.length>LL&&!_a(n.previousElementSibling).value&&n.remove()}remove(e){if(!(e.target instanceof HTMLButtonElement))return;let n=this.slots("item"),s=this.closestSlot(e.target,"item");if(n.length<=LL){let o=_a(s);o.value="",o.blur()}else s.remove(),de(this.element);this.input()}restore(){this.slot("results").remove(),_(this.form,!0),Lt(this.form);let e=this.element.querySelector('[name="Poll.Overwrite"]');e&&(e.value="true",de(e))}delete(e){return T(this,null,function*(){let n=e.target;(yield et(bL,_L,n,n.textContent))&&(this.form.querySelector("textarea").value="",this.slots("item").forEach((o,r)=>{r<=1?_a(o).value="":o.remove()}),this.restore())})}edit(e){return T(this,null,function*(){let n=e.target;(yield et(TL,yL,n,n.textContent))&&this.restore()})}};ct();yi();re();jr();B();pn();Ea();var ya=class extends x{parsedInit(){this.countryEl=this.slot("country"),this.regionEl=this.slot("region"),this.country=this.country||this.countryEl.value,this.region=this.region||this.regionEl.value,queueMicrotask(()=>{this.inited=!0}),this.countryEl.addEventListener("change",()=>{this.country=this.countryEl.value,this.region&&(this.region="")}),this.regionEl.addEventListener("change",()=>{this.region=this.regionEl.value}),this.update=zn(()=>this.updateInternal(),20)}get country(){return this.element.dataset.country||""}set country(e){this.element.dataset.country=e}get region(){return this.element.dataset.region||""}set region(e){this.element.dataset.region=e}get observedAttributes(){return["data-country","data-region"]}attributeChanged(){this.inited&&this.countryEl&&this.regionEl&&this.update()}updateInternal(){return T(this,null,function*(){let{country:e,region:n,countryEl:s,regionEl:o}=this;o.disabled=!0,o.selectedIndex=0;let r=!1;if(e){s.value=e;let l=yield x_.get(e,s);r=l.region;let c=o.options[0].value===""&&o.options[0].text,d=[...l.regions];c&&d.unshift({id:"",caption:c}),$i(o),z(rt(d,m=>m.id,m=>y`<option class=${Rt({"is-important":!!m.important})} value=${m.id}>${m.caption}</option>`),o)}else s.selectedIndex=0;o.disabled=!e,n?o.value=n:o.selectedIndex=0;let a=this.slot("region-label");a&&(a.textContent=a.dataset[r?"region":"city"]),this.element.dispatchEvent(new CustomEvent("change",{bubbles:!0,detail:this}))})}};R();ge();var xL=new WeakSet,wL=i=>{let t=i.actionName()==="focus",e=i.node();e.dataset.addPlaceholder||(e.dataset.addPlaceholder=e.placeholder);let n=e.form,s=e.dataset.radio;if(e.parentElement.classList.add("is-checked"),e.placeholder=t?e.dataset.placeholder:e.dataset.addPlaceholder,t){let o=n.elements[s];for(let r=0;r<o.length;r++)o[r].checked=!1}xL.has(e)||(xL.add(e),n.addEventListener("change",()=>{e.parentElement.classList.toggle("is-checked",!yn(n,s))}))},CL=()=>{v.registerHandlers("rich-radiogroup",{focus:wL,blur:wL})};D();B();nt();var AL="is-active",La=class extends x{parsedInit(){this.selectEl=J("select",this.element),this.selectEl.addEventListener("change",()=>{d2Env.isMobile?this.resizeSelect():this.updateCaption(this.selectEl.options[this.selectEl.selectedIndex].text)}),d2Env.isMobile?this.resizeSelect():this.element.addEventListener("click",()=>this.open())}updateSelect(e){this.selectEl.selectedIndex=e,this.selectEl.dispatchEvent(new Event("change"))}updateCaption(e){let n=this.slot("caption");n&&(n.textContent=e)}resizeSelect(){if(this.element.dataset.wide==="")return;let e=this.selectEl.cloneNode(!1);e.add(this.selectEl.options[this.selectEl.selectedIndex].cloneNode(!0)),e.style.cssText="position:absolute;width:auto;right:0;visibility:hidden",this.selectEl.after(e),this.selectEl.style.width=`${e.offsetWidth}px`,e.remove()}open(){if(this.isOpen)return;this.isOpen=!0;let e=document.createElement("div"),n=Mt(e,this.element,{classNames:["c-bubble--select"],placement:"bottom",minZIndex:3,offset:[0,9],noAnimation:!0,noFlip:!0});Array.from(this.selectEl.options).forEach((s,o)=>{let r=document.createElement("div");r.className="c-rich-select__option",r.textContent=s.text,r.addEventListener("click",()=>{this.updateCaption(s.text),this.updateSelect(o),n.hide()},{once:!0}),e.appendChild(r)}),this.element.classList.add(AL),n.addEventListener("hide",()=>{this.element.classList.remove(AL),setTimeout(()=>{this.isOpen=!1},200)},{once:!0}),window.addEventListener("scroll",()=>n.hide(),{once:!0,passive:!0})}};var Yh,Kh=i=>{let t=i.cloneNode(!1);delete t.dataset.role,t.add(i.options[i.selectedIndex].cloneNode(!0)),t.style.cssText="position:absolute;visibility:hidden",i.after(t),i.style.width=`${t.offsetWidth}px`,t.remove()},SL=i=>{Kh(i),Yh=new IntersectionObserver(()=>{i.offsetWidth&&Yh.unobserve(i),Kh(i)},{threshold:0}),Yh.observe(i),i.addEventListener("change",()=>Kh(i))};var Xh=i=>{i.classList.toggle("is-placeholder",!i.classList.contains("no-placeholder")&&i.selectedIndex===0&&i.options[0].value==="")},ML=i=>{Xh(i),i.addEventListener("change",()=>Xh(i)),i.addEventListener("forced-change",()=>Xh(i))};B();var RL,OL,ad,HL=(i,t)=>{i.classList.toggle("c-button--xl",t),i.classList.toggle("u-mobile-100",t),i.classList.toggle("u-100",t)},IL=i=>{i.forEach(t=>HL(t.target.querySelector("button"),t.isIntersecting))},DL=(i,t)=>{HL(t,!0);let e=d2Env.isApp&&!i.closest(".c-modal")?OL:RL;t.disabled?e.unobserve(i):e.observe(i),i.classList.toggle("is-disabled",t.disabled)},FP=()=>{if(!ad){if(RL=new IntersectionObserver(IL,{threshold:1,rootMargin:"-16px 0px"}),d2Env.isApp){let i=document.documentElement.classList.contains("bottom-inset")?32:0;OL=new IntersectionObserver(IL,{threshold:1,rootMargin:`-${16+50+i}px 0px`})}ad=new MutationObserver(i=>DL(i[0].target.parentElement,i[0].target))}},xa=class extends x{parsed(){FP(),this.element.classList.add("is-sticky");let t=this.element.querySelector("button");ad.observe(t,{attributes:!0,attributeFilter:["disabled"]}),DL(this.element,t)}disconnected(){ad.disconnect()}};Kc();var kL=i=>{new jn(i)};R();Se();var NL="Ссылка",PL="Вставить видеоролик",$L="Вставить картинку",FL="Ссылка на пользователя",BL="Ссылка (URL)",UL="Текст ссылки",jL="Ссылка на видеоролик (YouTube, Vimeo или Rutube)",zL="Подпись к картинке",VL="Ник пользователя",WL="Вставить";D();B();ge();ve();Ft();nt();var ld=i=>i.value.substring(i.selectionStart,i.selectionEnd),qL=i=>/^https?:\/\//i.test(i),wa=(i,t,e,n,s)=>{i.focus();let{scrollTop:o,selectionStart:r,selectionEnd:a,value:l}=i,c=l.substring(0,r),d=l.substring(a),m=l.substring(r,a),p=c,h=d,f=s?"":m;n&&(p=c.trimRight()+(c?`

`:""),h=(d?`

`:"")+d.trimLeft(),f=f.trim()),p+=t,h=e+h;let g=p.length-c.length,E=f.length-m.length;i.value=p+f+h,i.selectionStart=r+g,i.selectionEnd=a+g+E,i.scrollTop=o,i.focus(),de(i)},Ca=(i,t,e,n,s)=>{let o=`name="${t}" id="dlg.${t}" ${n?" data-autofocus":""}`,r=It(e);return`
<div class="c-dialog-form__field">
<label class="c-dialog-form__legend" for="dlg.${t}">${i}</label>
${s?`<textarea class="c-textarea" ${o}>${r}</textarea>`:`<input class="c-input" type="text" ${o} value="${r}">`}
</div>
`},cd=(i,t,e,n)=>{let s=e==="link"?NL:e==="video"?PL:e==="pic"?$L:FL,o=`
<form class="c-dialog-form" novalidate data-keysubmit data-action="submit:toolbar.submit">
  <input type="hidden" name="_" value="${e}">
  ${n}
  <div class="o-group o-group--m o-group--end o-group--wide c-dialog-buttons">
    <button class="c-button c-button--m-no-padding" name="submitbtn" type="submit">${WL}</button>
  </div>
</form>
    `;pe({anchor:t,className:"c-dialog-toolbar",title:s,html:o}).addEventListener("hide",()=>i.focus(),{once:!0})},UP=(i,t)=>{let e=i==="bold"?"b":i==="italic"?"i":"s";wa(t,`<${e}>`,`</${e}>`)},jP=(i,t)=>{i.focus();let e=ld(i),n=qL(e),s=n?e:"",o=n?"":e,r=Ca(BL,"p",s,!s)+Ca(UL,"text",o,!!s);cd(i,t,"link",r)},zP=(i,t)=>{i.focus();let e=ld(i),n=qL(e)?e:"",s=Ca(jL,"p",n,!0);cd(i,t,"video",s)},VP=(i,t)=>{i.focus();let e=ld(i);e.indexOf("@")===0&&(e=e.substring(1));let n=Ca(VL,"p",e,!0);cd(i,t,"user",n)},WP=(i,t)=>{let e=t._.value,n=t.p.value,s=It(n);switch(e){case"link":{let o=t.text.value;wa(i,`<a href="${s}">${o}</a>`,"",void 0,!0);break}case"video":n&&wa(i,n,"",!0,!0);break;case"pic":{let o=t.index.value;wa(i,`<img src="${o}" title="${s}">`,"",!0,!0);break}case"user":s&&(s.indexOf("@")===0&&(s=s.substring(1)),wa(i,`<user name="${s}">`,"",void 0,!0))}Ht()},qP=(i,t)=>{let e=wt("imagelist-item",i.form),n=String(t.index||""),s=e.find(o=>o.dataset.index===n);if(s){i.focus();let o=ld(i),a=`
<div class="imagelist-item"><div class="imagelist-pic-wrapper">${O("imagelist-pic-wrapper",s).innerHTML}</div></div>
<input type="hidden" name="index" value="${n}"">
${Ca(zL,"p",o,!0,!0)}
    `;cd(i,s,"pic",a)}},GP=(i,t,e)=>{let n=i.value,s=/<img[^>]+>/igm,o=/src="\$?([^"]*)"/i,r,a=[],l=0,c;for(;r=s.exec(n);)if(c=o.exec(r[0]),c&&c.length&&c.length===2){let d=r[0].length,m=t[Number(c[1])-1],p=e.indexOf(m),h=r[0].replace(o,`src="${p>=0?p+1:""}"`);a.push(n.substring(l,s.lastIndex-d),h),l=s.lastIndex}a.push(n.substring(l)),i.value=a.join("")},Aa=class extends x{init(){let t=this.element.dataset.type,n=this.element.closest("form")[this.element.dataset.target],s=o=>{let r=o.node();switch(o.actionName()){case"bold":case"italic":case"strike":UP(o.actionName(),n);break;case"link":jP(n,r);break;case"video":zP(n,r);break;case"user":VP(n,r);break;case"submit":ft(o),WP(n,r)}};v.registerHandlers(this.role,{bold:s,italic:s,strike:s,link:s,video:s,user:s,submit:s}),it.subscribe("imagelist-link",(o,r)=>{o===t&&qP(n,r)}),it.subscribe("imagelist-sync",(o,r,a)=>{if(o===t){let l=r.map(d=>d.id),c=a.map(d=>d.id);GP(n,l,c)}})}};R();D();Fi();D();Ec();j();Mp();Ip();var JP="js-gallery",GL="c-lightbox-anchor",JL="o-img",Qh=i=>J(`.${JL}`,i),ZL=i=>{let t=vt(i,JP);return t?q(`.${GL} > .${JL}`,t):[Qh(i)]},YL=i=>{let{color:t,inline:e,width:n,height:s}=yr(i),o=vt(i,GL),r=o&&(o.dataset.size||"").split(/\s*,\s*/),a=r&&r.length===2?Number(r[0]):0,l=r&&r.length===2?Number(r[1]):0,c={url:no(o&&o.href||""),width:a||n||0,height:l||s||0};return C(C({images:[c]},t&&{color:t}),e&&{inline:e})},KL=i=>{let[t,e]=(i.dataset.size||"0,0").split(",").map(o=>Number(o)),n={url:no(i.href),width:t,height:e},s=Fe(i,"background-color");return C({images:[n]},s&&{color:vc(s)})},XL=i=>ut(C({},i),{images:i.images.map(t=>({url:t.url,w:t.width,h:t.height}))});var A$="__d2gallery",wu,bx=i=>i&&i.getAttribute("itemprop")==="description"?i.innerHTML:void 0,S$=i=>{let t=i.nextElementSibling,e=bx(t);if(e===void 0){let n=i.parentElement,s=n&&n.nextElementSibling;e=s?bx(s):""}return e},M$=(i,t)=>{let e=t.map(S$);return i.map((n,s)=>e[s]!==null?Object.assign(n,{description:e[s]}):n)},_x=i=>{let{trackTarget:t,thumb:e}=i.dataset,n=Qh(i),s=ZL(i),o=e&&wt(e),r=o&&o.length>0?o.map(KL):s.map(YL),a=(o?o.findIndex(l=>l.href===i.href):s.findIndex(l=>l===n))||0;if(d2Env.isApp){let l;if(d2Env.gallery){let d={pictures:M$(r.map(XL),s),selectedIndex:a},m=`${A$}${Xt()}`;window[m]=()=>JSON.stringify(d),l=`drive://gallery2?callback=${m}()`,wu&&delete window[wu],wu=m}else l=`drive://gallery?${r.map(d=>`image=${encodeURIComponent(d.images[0].url||"")}&`).join("")}index=${a}`;window.location.href=l}else Promise.resolve().then(()=>(Ex(),vx)).then(l=>l.openPhotoswipe(r,a,t,o||s))};var I$="lightbox",R$=i=>{let t=i.node();_x(t)},Tx=()=>{v.registerHandlers(I$,{zoom:R$})};R();D();V();var Cu="block",O$=i=>{let t=i.node(),e=Q(t,Cu,"container"),n=b(Cu,"more",e);n&&(lv(n),t.remove())},yx=()=>{v.registerHandlers(Cu,{more:O$})};B();pa();var H$=0,D$=100,k$="#ccc",N$="#5fa03d",Au=class{constructor(t,e,n,s,o){this.percentage=n;this.strokeWidth=s.strokeWidth||4.16667,this.trailColor=s.trailColor||k$,this.inverted=s.inverted||!1,this.colors=o&&o.length>0?o:[{value:N$,threshold:100}];let r=document.createElementNS("http://www.w3.org/2000/svg","svg");this.trail=this.getPath(r,`${e}__trail`),this.trail.setAttribute("stroke",this.trailColor),this.path=this.getPath(r,`${e}__path`),this.update(),r.setAttribute("class",`${e}__progress`),r.setAttribute("viewBox","0 0 100 100"),r.appendChild(this.trail),r.appendChild(this.path),t.prepend(r)}setPercentage(t){this.percentage=t,this.update()}update(){let t=this.getColorByPercentage(this.percentage);this.path&&(this.path.setAttribute("style",this.getProgressStyle()+(this.percentage===0?";opacity: 0":"")),this.path.setAttribute("stroke",t.value))}getRadius(){return(100-this.strokeWidth)/2}getColorByPercentage(t){return this.colors.find(e=>e.threshold>=t)||this.colors[this.colors.length-1]}getPath(t,e){let n=this.getRadius(),s=this.inverted?"0":"1",o=`M 50,50 m 0,-${n} a ${n},${n} 0 1 ${s} 0,${2*n} a ${n},${n} 0 1 ${s} 0,-${2*n}`,r=document.createElementNS(t.namespaceURI,"path");return r.setAttribute("class",e),r.setAttribute("d",o),r.setAttribute("stroke-width",String(this.strokeWidth)),r.setAttribute("fill","none"),r}getProgressStyle(){let t=Math.PI*2*this.getRadius(),e=ci(this.percentage,H$,D$),n=(1-e/100)*t;return`stroke-dasharray:${t-n}px,${n}px;stroke-dashoffset:0px;`}},P$=i=>(i||"").split(";").filter(t=>t.includes(":")).map(t=>t.trim().split(":")).map(t=>({value:t[1]||"",threshold:Number(t[0])||100})).sort((t,e)=>t.threshold>e.threshold?1:-1),Ha=class extends x{parsedInit(){let{animateFrom:e,percentage:n,pathColor:s,trailColor:o,strokeWidth:r,inverted:a}=this.element.dataset,l=Number(e),c=!Number.isNaN(l),d=Number(n)||0,m=P$(s);this.progress=new Au(this.element,"c-circular-progress",c?l:d,{trailColor:o,strokeWidth:Number(r),inverted:a===""},m),c&&setTimeout(()=>{this.progress.setPercentage(d)},100)}get observedAttributes(){return["data-percentage"]}attributeChanged(e,n,s){var o;(o=this.progress)==null||o.setPercentage(Number(s)||0)}};R();V();$();Ce();var Vn=class extends EventTarget{constructor(e,n){super();this.element=e;this.handleEl=n;this.noAnimation=!1;this.duration=0;this.collapse=!1;this.hideHandle=!1;this.show=!1;this.hide=!1;this.inited=!1;this.toggle=this.toggle.bind(this),n.addEventListener("click",this.toggle)}toggle(){let e=at(this.element);e.expanded&&this.show||!e.expanded&&this.hide||(this.inited||(this.inited=!0,this.duration!==0&&(e.duration=this.duration),this.collapse&&(e.addEventListener("hide",()=>{this.element.remove(),this.dispose()},{once:!0}),e.addEventListener("show",()=>this.dispose(),{once:!0})),e.addEventListener("start",()=>{this.dispatchEvent(new Event("start"))}),e.addEventListener("end",()=>{this.dispatchEvent(new Event("end"))}),this.hideHandle&&e.addEventListener("end",()=>{this.handleEl.remove(),this.dispose()},{once:!0})),e.toggle(this.noAnimation))}dispose(){this.handleEl.removeEventListener("click",this.toggle)}};var Su="closable-hint",$$=i=>{let t=i.node(),e=Q(t,Su,"root"),{link:n}=e.dataset,s=new Vn(e,t);n&&s.addEventListener("start",()=>{L(n,Su,{method:"POST",anchorEl:t,silent:!0})}),s.toggle()},Lx=()=>{v.registerHandlers(Su,{close:$$})};R();var Da=i=>{let t=i.node(),e=i.actionName(),n=t.dataset.skipphoto==="",[s,o]=t.dataset.params.split(":");Jc(t,e,o,s,{skipPhotos:n})},xx=()=>{v.registerHandlers("complaint",{car:Da,commentspam:Da,user:Da,journal:Da,offer:Da})};On();On();var wx=".UTZ",Ho=(i,t=0,e=1,n=0,s=0)=>new Date(Date.UTC(i,t,e,n,s,0,0)),ka=i=>-1*i.getTimezoneOffset()/60,Cx=i=>Math.floor(i.getTime()/1e3),Ax=(i,t)=>{let e=Ho(i,t),n=ka(e),s=-1;for(let o=0;o<50;o++){let r=Ho(i,t,o),a=ka(r);if(a!=n){let l=0;for(r=Ho(i,t,o-1),a=ka(r);s==-1;)if(r=Ho(i,t,o-1,0,l),a=ka(r),a!=n){r=Ho(i,t,o-1,0,l-1),s=l;break}else l++;return r}}},Sx=(i=new Date().getFullYear())=>{let t=0,e=0,n=99;for(let r=0;r<12;r++){let a=Ho(i,r),l=ka(a);l>n?t=r-1:l<n&&(e=r-1),n=l}let s=Ax(i,e),o=Ax(i,t);return o&&s?[o,s]:void 0},Mx=()=>{let i=Es(wx),t=i&&new Date(i.split(" ").map(Number)[0]*1e3),e=new Date;if((t?(e.getTime()-t.getTime())/(1e3*60*60*24):1/0)>1){let s=`${Cx(e)} ${e.getTimezoneOffset()}`,o=Sx(),r=Sx(e.getFullYear()+1);o&&r&&(s+=` ${o.concat(r).map(Cx).join(" ")}`),Je(wx,s,365)}};var Ix="<strong>Запомнили!</strong> Так вашу страницу увидят читатели";B();V();$();ae();Ce();pd();var q$=500,G$=(i,t)=>{i==="user"&&ht(t?"user_expand":"user_collapse")},Na=class extends x{parsedInit(){let{dataset:t}=this.element,e=this.slot("content"),n=this.slot("summary"),s=new Vn(e,n);t.noanim===""&&(s.noAnimation=!0),s.duration=200;let o;s.addEventListener("start",()=>{let r=at(e).expanded;this.element.classList.toggle("is-active",r),t.ns&&(G$(t.ns,r),clearTimeout(o),o=setTimeout(()=>this.save(t.ns),q$))})}save(t){let e=b(t,"config");if(!!e&&e.dataset.url){let n=Ki(this.role).filter(s=>s.dataset.ns===t).map(s=>({id:s.dataset.id,contentEl:this.slot("content",s)})).filter(s=>s.contentEl&&s.id).reduce((s,o)=>(s[o.id]=at(o.contentEl).expanded,s),{});L(e.dataset.url,this.role,{method:"POST",silent:!0,body:n}).then(()=>{t==="user"&&Do(Ix,{type:t})})}}};On();var J$=".DPR",Dx=()=>{let i=window.devicePixelRatio||1;Je(J$,i,365)};var Z$=[776,2359,2359,2367,2367,2984,3007,3021,3633,3635,3648,3657,4352,4449,4520],Y$=[[128512,128591],[127744,128511],[128640,128767],[127462,127487],[9728,9983],[9984,10175],[65024,65039],12953,12951,12349,12336,9410,[9642,9643],9654,9664,[9723,9726],11013,11014,11015,11035,11036,11088,11093,8986,8987,9e3,9167,[9193,9203],[9208,9210],10548,10549,[8592,8703],[129280,129535],[65024,65039],[9100,9300]],ko=(i,t,e)=>i>=t&&i<=e,K$=i=>i===" ",X$=i=>typeof i=="string"&&i.charCodeAt(0)===8205,Nx=i=>Boolean(i)&&ko(i[0].charCodeAt(0),55296,56319),Iu=i=>{let t=i.charCodeAt(0)-55296,e=i.charCodeAt(1)-56320;return(t<<10)+e+65536},kx=i=>ko(Iu(i),127462,127487),Q$=i=>ko(Iu(i),127995,127999),tF=i=>typeof i=="string"&&ko(i.charCodeAt(0),65024,65039),eF=i=>typeof i=="string"&&ko(i.charCodeAt(0),8400,8447),iF=i=>typeof i=="string"&&Z$.includes(i.charCodeAt(0)),nF=(i,t)=>{let e=t[i];if(!Nx(e)||i===t.length-1)return 1;let n=e+t[i+1],s=t.substring(i+2,i+5);return kx(n)&&kx(s)||Q$(s)?4:2},sF=i=>{let t=!Nx(i[0])||i.length===1?i[0].charCodeAt(0):Iu(i.substring(0,2));return Y$.some(e=>ko(t,Array.isArray(e)?e[0]:e,Array.isArray(e)?e[1]:e))},oF=(i,t=1/0)=>{let e=[],n=0,s=0,o=0;for(;n<i.length&&s<t;){if(o+=nF(n+o,i),iF(i[n+o])&&o++,tF(i[n+o])&&o++,eF(i[n+o])&&o++,X$(i[n+o])){o++;continue}let r=i.substring(n,n+o);K$(r)||(e.push(r),s++),n+=o,o=0}return e},Px=i=>{let t=i.textContent.replace(/\s+/g,""),e=oF(t,4),n=e.length>0&&e.length<=3&&e.every(s=>sF(s));i.classList.toggle("c-emoji-zoom",n)};var $x=i=>{let t=e=>{let{scrollHeight:n,clientHeight:s}=i,{deltaY:o}=e;if(n>s){let{scrollTop:r}=i;(o<0&&r===0||o>0&&r>=n-s)&&e.preventDefault()}};i.addEventListener("wheel",t)};R();On();var Fx=()=>{v.registerHandlers("fv",{set:i=>{let t=i.node().dataset.forceto||"desktop";Je(".FV",t,-1),window.location.reload()}})};var Bx=i=>{let t=Math.floor(Math.random()*7+1);i.style.backgroundImage=`url(/assets/images/sidebg/${t<10?`0${t}`:t}.png)`};V();We();var rF={google:"https://www.google.com/recaptcha/api.js?onload=__captchaCallback&render=explicit&hl=ru",yandex:"https://captcha-api.yandex.ru/captcha.js?render=onload&onload=__captchaCallback"},Ux=!1,jx=!1,aF=i=>{let t=document.createElement("script");t.async=!0,t.src=rF[i],document.body.appendChild(t)},zx=(i,t)=>{let e=t==="yandex",n=!1,{form:s}=i,o=document.createElement("div");i.parentElement.after(o);let r=e?smartCaptcha.render(o,{sitekey:d2Env.smartCaptchaSiteKey,hl:"ru",invisible:!0,callback:()=>{n=!0,i.click()}}):grecaptcha.render(o,{sitekey:d2Env.recaptchaSiteKey,badge:"inline",size:"invisible",callback:()=>{n=!0,i.click()}});s.addEventListener("submit",a=>{Hi(s)&&!n&&(a.preventDefault(),(e?smartCaptcha:grecaptcha).execute(r)),n=!1})},Vx=(i,t)=>{let e=i.dataset.type||"google";if(window.__captchaCallback=()=>{Ki(t).forEach(s=>{zx(s,e)}),jx=!0},!!d2Env.recaptchaSiteKey){if(!Ux){Ux=!0,aF(e);return}jx&&zx(i,e)}};D();B();var Pa=class extends x{parsedInit(){this.element.options[this.element.options.length-1].value===""&&(this.hiddenOptions=q("[data-hidden]",this.element).map(n=>({option:n,prev:n.previousSibling})),this.hiddenOptions.forEach(n=>{n.option.remove()}),this.lastSelectedValue=this.element.value)}connected(){this.element.addEventListener("change",this)}disconnected(){this.element.removeEventListener("change",this)}handleEvent(){this.element.selectedIndex===this.element.options.length-1?(this.disconnected(),this.hiddenOptions.forEach(e=>{e.prev&&e.prev.after(e.option)}),this.element.options[this.element.options.length-1].remove(),this.element.value=this.lastSelectedValue):this.lastSelectedValue=this.element.value}};R();V();var Wx=(i,t,e=626,n=436)=>{let s=window.screen.width-e>>1,o=window.screen.height-n>>1;window.open(i,t,`left=${s},top=${o},width=${e},height=${n}`)};ae();Ft();In();D();j();var lF=400,Wn=(i,t)=>{let e=["fx-zoomout","c-button","c-button--primary",t||"c-button--red"];["c-button--s","c-button--l","c-button--xl"].forEach(r=>{i.classList.contains(r)&&e.push(r)});let s=Xi(i),o=S("div",{className:e.join(" "),style:`top:${s.top}px;left:${s.left}px;width:${i.offsetWidth}px;height:${i.offsetHeight}px`});document.body.appendChild(o),setTimeout(()=>{o.remove()},lF)};ct();Qr();var qx="Добавьте пару слов от себя",Gx="Введите комментарий",Ru="Поделиться";$();De();We();var dF="share-drive",Jx="/_api/share",mF=i=>y`
<form action=${Jx} class="x-form o-t-s" novalidate data-role="form">
  <div class="x-form__item">
    <div class="x-form__body">
      <textarea class="x-textarea x-textarea--narrow" type="text" name="comment" data-autofocus
        placeholder="${qx}" data-role="taflexible" maxlength="128"></textarea>
    </div>
  </div>
  <div class="c-share-card">
    ${Ye(i)}
  </div>
  <div class="x-form__submit u-extend" data-role="sticky-button">
    <button class="c-button c-button--primary c-button--xl u-100"
      type="submit" disabled data-slot="form.submit" disabled>${Ru}</button>
  </div>
</form>
`,Zx=(i,t)=>T(void 0,null,function*(){let[,e]=yield Mn(()=>Ct(Jx,dF,{anchorEl:i,silent:!0,throwError:!0,body:{token:t}}));return e?new Promise(n=>{let s=new yt({anchor:i,title:Ru});z(mF(e),s.element),s.addEventListener("submit",()=>n(!0)),s.setFormDataTransformer(o=>({token:t,comment:o.comment.value})),s.show(),cn(s.form,["comment",Gx,"required"])}):!1});var Kx="share",pF={vk:"https://vk.com/share.php?url={url}",fb:"https://www.facebook.com/sharer/sharer.php?u={url}",ok:"https://connect.ok.ru/dk?st.cmd=WidgetSharePreview&service=odnoklassniki&st.shareUrl={url}",telegram:"https://t.me/share/url?url={url}",telegramapp:"tg://msg?url={url}&text={title}",whatsapp:"whatsapp://send?text={title}+{url}",viber:"viber://forward?text={title}+{url}"},hF=(i,t,e,n,s,o)=>T(void 0,null,function*(){if(e==="drive"){if(Ge(t))return;if(yield Zx(t,s))Wn(t),t.classList.remove("c-button--red"),t.classList.add("c-button--gray","is-off"),dn(t);else return}else{let l=pF[e==="telegram"&&d2Env.isMobile?"telegramapp":e].replace("{url}",encodeURIComponent(o)).replace("{title}",encodeURIComponent(document.title));d2Env.isApp?window.location.href=l:Wx(l,"d2share")}let a={cjr:"logbook",ubr:"blog",gbr:"blog_community",c:"car"}[n]||n||"";ht(`${i==="self"?"self":""}share_${e}`,{from:a})}),Yx=i=>{let t=i.actionName(),e=i.node(),{type:n,token:s,url:o}=Q(e,Kx,"root").dataset;hF(t,e,e.dataset.target,n,s,o)},Xx=()=>{v.registerHandlers(Kx,{share:Yx,self:Yx})};var Qx="Подписаться?",tw="Подписаться на бывшую машину?",ew="Вы действительно хотите отписаться?",qn="Подписаться",iw="Подписаться на машину",nw="Подписаться на автора",sw="Подписаться на компанию",Ou="Отписаться",ow="Отписаться от машины",rw="Отписаться от человека",aw="Отписаться от компании",hd="Читаю",lw="Читаю эту машину",cw="Читаю этого человека",dw="Читаю эту компанию",mw="{num, plural, one {читает} other {читают}}",pw="подписчик{num, plural, one {} many {ов} other {а}}",hw="{num, plural, one {подписчик} many {подписчиков} other {подписчика}}<br>на блог",uw="Владелец указал, что это бывшая машина. Её бортжурнал больше не будет обновляться",fw="Пользователи воспринимают уведомления от компаний как спам. Чтобы о вас не думали плохо, мы отключили уведомления о подписке. Пользователь не узнает, что вы подписались";V();xe();$();ae();j();nt();In();var $a="subscribe",uF="/ajax/subscription",No={REGULAR:[],ACTIVE:["c-button--darkgray","is-pressed"],HOVER:["c-button--red"],REGULAR_WHITE:["c-button--primary"],ACTIVE_WHITE:["is-pressed"],HOVER_WHITE:["c-button--primary","c-button--red"]},gw=i=>{let{dataset:t}=i;return{isFormerConfirm:t.formerconfirm==="",isComConfirm:t.comconfirm==="",isCompany:t.company==="",isSubscribed:t.subscribed==="",isWhite:t.white==="",isWide:t.wide==="",id:t.id,type:t.type,additionalTracking:t.at,from:t.from}},Du=(i,t,e)=>{let{isCompany:n,isSubscribed:s,isWhite:o,isWide:r,type:a}=gw(i);if(e&&!s&&t!=="subscribe")return;let l=o?No.ACTIVE_WHITE:No.ACTIVE,c=o?No.HOVER_WHITE:No.HOVER,d=o?No.REGULAR_WHITE:No.REGULAR,m=(t==="subscribed"?l:[]).concat(t==="subscribe"?d:[]).concat(t==="unsubscribe"?c:[]),p=(t==="subscribed"?[]:l).concat(t==="subscribe"?[]:d).concat(t==="unsubscribe"?[]:c);i.classList.remove(...p),i.classList.add(...m),i.textContent=t==="subscribe"?r?n?sw:a==="user"?nw:iw:qn:t==="unsubscribe"?r?n?aw:a==="user"?rw:ow:Ou:r?n?dw:a==="user"?cw:lw:hd},fF=(i,t)=>{let e=Q(i,$a,"container");if(!e)return;let n=b($a,"notes-sub",e),s=b($a,"notes-unsub",e);n&&s&&(_(n,t),_(s,!t))},gF=(i,t)=>{let e=document.getElementById(`${i}-followers`);if(e){let n=Number(e.textContent);if(n>=0){n+=t?-1:1,e.textContent=String(n);let s=document.getElementById(`${i}-followers-legend`);if(s){let r=s.dataset.type==="company"?hw:i==="user"?pw:mw;s.innerHTML=Z(r,{num:n})}}}},vF=(i,t,e)=>{Ki($a).filter(s=>s.dataset.id===i&&s.dataset.type===t).forEach(s=>{e?s.dataset.subscribed!==void 0&&delete s.dataset.subscribed:s.dataset.subscribed="",Du(s,e?"subscribe":"subscribed"),fF(s,e)})},EF=i=>T(void 0,null,function*(){if(Ge(i))return;let{isFormerConfirm:t,isComConfirm:e,isCompany:n,isSubscribed:s,id:o,type:r,additionalTracking:a,from:l}=gw(i);if(yield(s?et(ew,void 0,i,Ou):e&&!s?et(Qx,fw,i,qn):t?et(tw,uw,i,qn):Promise.resolve(1)).then(h=>!h))return;let{types:d}=yield L(uF,$a,{method:"POST",body:C({_:s?"unsubscribe":"subscribe",type:r,id:o},l&&{from:l}),anchorEl:i});s||Wn(i),d.forEach(h=>gF(h,s)),vF(o,r,s);let m=i.classList.contains("js-promofeedsubs"),p=(n&&r==="user"?"company":r)+(m?"_feedpromopost":"");ht(`${s?"unfollow":"follow"}_${p||""}`),a&&!s&&ht(a)}),vw=i=>{i.addEventListener("click",()=>EF(i)),i.addEventListener("mouseenter",()=>Du(i,"unsubscribe",!0)),i.addEventListener("mouseleave",()=>Du(i,"subscribed",!0))};R();$();var bF="/ajax/subscription",_F=i=>T(void 0,null,function*(){let t=i.node(),{html:e}=yield L(bF,"subscribe-more",{anchorEl:t,body:{_:"get",type:t.dataset.type,key:t.dataset.key,id:t.dataset.id}});e&&(t.insertAdjacentHTML("beforebegin",e),t.remove())}),Ew=()=>{v.registerHandlers("subscribe",{more:_F})};R();D();var bw=()=>{v.registerHandlers("u",{focus:i=>{let t=i.node(),e=t.dataset.target&&J(t.dataset.target);if(e)try{e.focus()}catch(n){}}})};R();D();var TF=i=>{let t=i.node(),{url:e}=t.dataset;if(!!e){if(d2Env.extvideo){window.location.href=`drive://video?url=${encodeURIComponent(e)}`;return}t.replaceWith(S("div","c-media",S("iframe",{src:`${e}&autoplay=1`,allowfullscreen:""})))}},_w=()=>{v.registerHandlers("video",{play:TF})};var Tw=i=>{i.style.pointerEvents="none",i.parentElement.addEventListener("click",()=>{let t=i.src;window.location.href=`drive://video?url=${encodeURIComponent(t)}`})};$();ac();ct();D();ct();yi();_o();Qr();var yw="{Count, plural, one {# участник} many {# участников} other {# участника}}",Lw="создано",ku="Сообщение",xw="{IsUserSubscribed, select, true {{IsMale, select, true {Подписан} other {Подписана}} на вас{FollowingAllCars, select, true { и все ваши машины} other {{FollowingCarsCount, plural, =0 {} one { и {Cars}} other {, {Cars}}}}}} other {{FollowingAllCars, select, true {{IsMale, select, true {Подписан} other {Подписана}} на все ваши машины} other {{FollowingCarsCount, plural, =0 {} other {{IsMale, select, true {Подписан} other {Подписана}} на {Cars}}}}}}}",ww="все ваши машины.",ud=" и ",Cw="{Age, plural, one {# год} many {# лет} other {# года}}",Aw="У меня нет машины",fd="{Now, select, true {Я езжу на} other {Я {IsMale, select, true {ездил} other {ездила}} на}}",Sw="до этого —",Mw='<a class="c-link c-link--text" href="{Url}" data-tt="{CarsTitle}">ещё {CarsCount} {CarsCount, plural, one {машине} many {машинах} other {машинах}}</a>',Iw='<a class="c-link c-link--text" href="{Url}" data-tt="{CarsTitle}">{CarsCount} {CarsCount, plural, one {машина} many {машин} other {машины}}</a>',Rw="Я могу помочь";xe();ve();hn();var Fa=i=>({images:[i],color:i.htmlPrimaryColor,inline:i.inlineImage}),Pu=(i,t,e,n=!1)=>y`
<button class=${Rt({"c-button":!0,"c-button--s":n,"c-button--primary":!0,"c-button--subs":!0,"c-button--darkgray":e,"is-pressed":e})}
  data-role="subscribe" ?data-subscribed=${e} data-type=${i} data-id=${t}>
  ${e?hd:qn}
</button>
`,Dw=i=>y`
<a class="c-link c-link--color${String(i.nicknameColor||0).padStart(2,"0")} c-username c-username--wrap"
 href=${i.url}><span>${i.nickname}</span></a>
`,kw=i=>y`
<div class=${Rt({"c-user__status":!0,"is-online":i.isOnline})}>
  ${i.lastVisit}
</div>
`,LF=i=>{if(i.followsAllCars&&i.followedCars.length>1)return ww;let t=i.followedCars,e=s=>`<a class="c-car-title c-link c-link--gray" href="${s.url}">${It(t.length>=5?s.caption:s.fullCaption)}</a>`,n=t.slice(0,t.length>1?-1:1).map(s=>e(s)).join(", ");return t.length>1&&(n+=ud+e(t[t.length-1])),n},Nw=(i,t)=>t?y`<div class="c-user-subscribed">${Ye(Z(xw,{IsMale:i,IsUserSubscribed:t.followsMe,FollowingCarsCount:t.followedCars.length,FollowingAllCars:t.followsAllCars&&t.followedCars.length>1,Cars:LF(t)}))}</div>`:N,xF=i=>Ye(i.html),wF=i=>y`
<div class="c-hover-card c-car-card-sa c-darkening-hover-container c-car-card-sa--no-shadow">
  <a class="u-link-area" href=${i.url}></a>
  <div class="c-car-card-sa__pic">
    ${xi(Fa(i.photo),void 0,{className:"has-darkening-hover c-car-card-sa__img"})}
    ${i.isFollowable?y`<div class="c-car-card-sa__misc">
        <div class="c-car-card-sa__subscribe">${Pu("car",i.id,i.isFollowed,!0)}</div>
      </div>`:N}
  </div>
  <div class="c-car-card-sa__caption">
    <a class="c-car-title c-link ${i.belongState==="WasMy"?"c-link--gray":"c-link--text"}" href=${i.owner.url}>
      ${i.caption}
    </a>
  </div>
  <div class="c-car-card-sa__info">
    <div class="c-car-card-sa__owner">${Dw(i.owner)}</div>
    ${i.owner.location?y`<div class="c-car-card-sa__location">${i.owner.location.name}</div>`:N}
    <div class="c-car-card-sa__drive" style=${Kt({borderColor:i.driveBackgroundColor})}>${i.driveLevel}</div>
    <div class="c-car-card-sa__logbook">${i.journalRecordCount}</div>
  </div>
</div>
`,Pw=i=>It(i.map(t=>`<a class="c-car-title c-link c-link--white" href=${t.url}>${It(t.fullCaption)}</a>`).join("<br>")),Ow=(i,t)=>`<a class="c-car-title c-link c-link--text" href=${i.url}>${It(t?i.caption:i.fullCaption)}</a>`,Hw=(i,t=!0,e)=>{let{length:n}=i;if(n===0)return"";let s=i.slice(0,t?-1:void 0).map(o=>Ow(o,e)).join(", ");return t&&(n>1&&(s+=ud),s+=Ow(i[n-1],e)),s},Nu=(i,t,e,n,s)=>{let{length:o}=i;if(o>t){let r=Hw(i.slice(0,e),!1,s);return e>0&&(r+=ud+Z(Mw,{Url:n,CarsCount:o-e,CarsTitle:Pw(i.slice(e))})),r}return Hw(i,!0,s)},CF=(i,t,e,n)=>{if(!e)return n?`${Z(fd,{Now:!0,IsMale:i})} ${n}`:Aw;let s=5,o=3,r=e.filter(m=>m.belongState==="My"),a=e.filter(m=>m.belongState==="WasMy"),l=r!=null&&r.length>0,c=a!=null&&a.length>0,d="";return l&&(d+=`${Z(fd,{Now:!0,IsMale:i})} ${Nu(r,s,o,`${t}#currentcars`)}`),c&&(l?(d+=` (${Sw} `,e.length>s&&a.length>1?d+=Z(Iw,{Url:`${t}#formercars`,CarsCount:a.length,CarsTitle:Pw(a)}):d+=Nu(a,s,o,`${t}#formercars`,!0),d+=")"):d+=`${Z(fd,{Now:!1,IsMale:i})} ${Nu(a,s,o,`${t}#formercars`)}`),d},AF=i=>y`
<div class="c-user c-user--hovercard">
  <div class="c-user__card">
    <div class="c-user__avatar">
      <a href=${i.url}>
        ${xi(Fa(i.avatar),void 0,{className:"is-round has-darkening-hover u-vignette"})}
      </a>
    </div>
    <div class="c-user__info u-break-word">
      <div class="c-user__username">${Dw(i)}</div>
      ${i.fullName||i.age?y`<div class="c-user__name">${i.fullName}${i.fullName&&i.age?`, ${Z(Cw,{Age:i.age})}`:""}</div>`:N}
      <div class="c-user__cars">
        ${Ye(i.proAccount?`${Rw} ${i.proAccount.skills}`:CF(i.gender==="XY",i.url,i.cars,i.generation))}
      </div>
      ${i.location?y`<div class="c-user__address"><span data-tt=${i.location.fullName}>${i.location.name}</span></div>`:N}
      ${kw(i)}
    </div>
    ${Nw(i.gender==="XY",i.subscriptions)}
    <div class="o-group">
      ${i.isFollowable?Pu("user",i.id,i.isFollowed):N}
      ${i.messengerLink?y`<a class="c-button c-button--primary" data-action="msgr.show" href=${i.messengerLink}>
          ${ku}
        </a>`:N}
    </div>
  </div>
</div>
`,SF=i=>y`
<div class="c-user c-user--hovercard">
  <div class="c-user__card">
    <div class="c-user__avatar">
      <a href=${i.url}>
        ${xi(Fa(i.avatar),void 0,{className:"is-round has-darkening-hover u-vignette"})}
      </a>
    </div>
    <div class="c-user__info u-break-word">
      <div class="c-user__username">
        <a class="c-link c-link--color00 c-username c-username--wrap" href=${i.url}><span>${i.caption}</span></a>
      </div>
      <div class="c-user__name">${i.subtitle}</div>
      ${i.location?y`<div class="c-user__address"><span data-tt=${i.location.fullName}>${i.location.name}</span></div>`:N}
      ${kw(i)}
    </div>
    ${Nw(!1,i.subscriptions)}
    <div class="o-group">
      ${i.isFollowable?Pu("user",i.id,i.isFollowed):N}
      ${i.messengerLink?y`<a class="c-button c-button--primary" data-action="msgr.show" href=${i.messengerLink}>
          ${ku}
        </a>`:N}
    </div>
  </div>
</div>`,MF=i=>y`
<div class="c-comm-card">
  <div class="c-comm-card__pic">
    <a href=${i.url}>
      ${xi(Fa(i.avatar),void 0,{className:"is-round has-darkening-hover u-vignette"})}
    </a>
  </div>
  <div class="c-comm-card__body">
    <div class="c-comm-card__title u-break-word"><a class="c-link c-link--text" href=${i.url}>
      ${i.caption}</a>
    </div>
    ${i.memberCount?y`<div class="c-comm-card__members">${Z(yw,{Count:i.memberCount})}</div>`:N}
    <div class="c-comm-card__date">
      ${Lw} ${i.createdOn}
    </div>
  </div>
</div>
`,IF=i=>y`
<div class="c-hover-card c-post-card c-post-card--hover-card">
  <div class="c-post-card__pic-container">
    <a href=${i.url}>
      ${xi(Fa(i.kind==="Post"&&i.mediaPreview?{url:i.mediaPreview,width:1,height:1}:i.photo),2,{size:{width:16,height:9},className:"has-darkening-hover u-vignette"})}
    </a>
  </div>
  <div class="c-post-card__body">
    <div class="c-post-card__caption">
      <a class="c-link c-link--text" href=${i.url}>${Oe(i.title||"")}</a>
    </div>
    ${i.kind==="Post"&&i.subtitle?y`<div class="c-post-card__category u-break-word">${i.subtitle}</div>`:N}
    ${i.kind==="Snap"?y`<div class="c-post-card__category u-break-word">
        <a class="c-link c-link--text" href=${i.album.url}>${i.album.title}</a>
      </div>`:N}
    <div class="c-post-card__info">
      <span class="c-icon-counter">
        <span class="c-icon-counter__icon c-icon c-icon--like"></span> ${i.likeCount}
      </span>
      <a class="c-post-card__comments c-icon-counter" href="${i.url}#comments">
        <span class="c-icon-counter__icon c-icon  c-icon--comments"></span> ${i.commentCount}
      </a>
      <a class="c-post-card__date c-link c-link--gray" href=${i.url}>${i.timestamp}</a>
    </div>
  </div>
</div>
`,$w=i=>{switch(i.kind){case"Html":return xF(i);case"Car":return wF(i);case"User":return AF(i);case"Business":return SF(i);case"Community":return MF(i);case"Post":case"Snap":return IF(i);default:return N}};var RF=400,OF=100,Ba=document.documentElement,Fw=(i,t,e)=>i.left<=t&&i.right>=t&&i.top<=e&&i.bottom>=e,HF=(i,t,e)=>{let n=t<i.left?t-i.left:t>i.right?t-i.right:0,s=e<i.top?e-i.top:e>i.bottom?e-i.bottom:0;return Math.sqrt(n*n+s*s)},Os=class{constructor(t,e,n={}){this.anchorSelector=t;this.getContent=e;this.config=n;this.distance=1/0;this.isTriggered=!1;this.handleTriggerMouseOver=this.handleTriggerMouseOver.bind(this),this.handleMouseEnter=this.handleMouseEnter.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),Ba.addEventListener("mouseover",this.handleTriggerMouseOver)}handleTriggerMouseOver(t){if(!t.target)return;let e=t.target.closest(this.anchorSelector);e&&this.triggerForElement(e)}triggerForElement(t){if(t===this.anchor){this.clearHideTimer();return}this.content=void 0,this.clearShowTimer(),this.startShowTimer(t)}show(){if(this.clearShowTimer(),!this.content)return;this.popper&&this.popper.destroy(),this.element&&this.element.remove();let t=S("div",{className:"c-bubble__arrow","data-popper-arrow":""}),e=S("div",{className:"c-bubble__content"});z($w(this.content),e);let n=S("div",`c-bubble__body${this.config.isDark?" ctx-dark":""}`);n.append(e,t),this.element=S("div","c-bubble"),this.config.classNames&&this.element.classList.add(...this.config.classNames);let s=this.anchor&&Wl(this.anchor)||0;this.element.style.zIndex=String(Math.max(s+1,this.config.minZIndex||12)),this.element.appendChild(n),document.body.appendChild(this.element),this.attachMouseEvents(this.element),this.startCursorTracking(),this.popper=hs(this.anchor,this.element,{placement:this.config.placement||"top",modifiers:[{name:"offset",options:{offset:[0,9]}}]}),this.anchorObserver=new MutationObserver(()=>{(!this.anchor||!Ba.contains(this.anchor))&&(this.anchorObserver.disconnect(),this.hide())}),this.anchorObserver.observe(this.anchor.parentElement,{childList:!0})}hide(){this.clearHideTimer(),this.anchorObserver&&this.anchorObserver.disconnect(),this.content=void 0,this.popper&&(this.popper.destroy(),this.popper=void 0),this.element&&(this.detachMouseEvents(this.element),this.element.remove(),this.element=void 0),this.stopCursorTracking(),this.anchor&&(this.detachMouseEvents(this.anchor),this.anchor=void 0)}attachMouseEvents(t){t.addEventListener("mouseenter",this.handleMouseEnter),t.addEventListener("mouseleave",this.handleMouseLeave)}detachMouseEvents(t){t.removeEventListener("mouseenter",this.handleMouseEnter),t.removeEventListener("mouseleave",this.handleMouseLeave)}startCursorTracking(){this.config.cursorTracking&&Ba.addEventListener("mousemove",this.handleMouseMove)}stopCursorTracking(){this.config.cursorTracking&&Ba.removeEventListener("mousemove",this.handleMouseMove)}handleMouseEnter(){this.clearHideTimer()}handleMouseLeave(){this.startHideTimer()}handleMouseMove(t){let{clientX:e,clientY:n}=t,s=this.element.getBoundingClientRect(),o=this.anchor.getBoundingClientRect(),r=HF(s,e,n);Fw(o,e,n)||Fw(s,e,n)||r<=this.distance?this.clearHideTimer():(this.stopCursorTracking(),this.startHideTimer()),this.distance=r}startShowTimer(t){return T(this,null,function*(){if(this.showTimer)return;this.isTriggered=!0,this.anchor=t,this.attachMouseEvents(this.anchor),this.showTimer=setTimeout(this.show.bind(this),this.config.showDelay||RF);let[,e]=yield Mn(()=>this.getContent(t));e&&e.kind?this.isTriggered&&this.anchor===t&&(this.content=e,this.showTimer===void 0&&this.show()):this.clearShowTimer()})}clearShowTimer(){this.showTimer&&(clearTimeout(this.showTimer),this.showTimer=void 0)}startHideTimer(){this.isTriggered=!1,this.clearShowTimer(),this.clearHideTimer(),this.hideTimer=setTimeout(this.hide.bind(this),this.config.hideDelay||OF)}clearHideTimer(){this.hideTimer&&(clearTimeout(this.hideTimer),this.hideTimer=void 0)}dispose(){Ba.removeEventListener("mouseover",this.handleTriggerMouseOver)}};on();var DF="ihc",kF=200,Bw,NF=i=>L(`/_api/hovercards/${i.dataset.ihcToken}${d2Env.userId?`?tail=${d2Env.userId}`:""}`,DF,{silent:!0,throwError:!0}),PF=i=>{let t=i.target;t.hasAttribute("data-ihc-token")&&i.pointerType==="touch"&&Bw!==t&&(i.preventDefault(),Bw=t)},Uw=()=>{ME(new Os("[data-tt]",i=>Promise.resolve({kind:"Html",html:i.dataset.tt||""}),{classNames:["c-bubble--tt"],isDark:!0})),IE(new Os("[data-ihc-token]",NF,{classNames:["c-bubble--ihc"],placement:"top-start",showDelay:kF,minZIndex:15,cursorTracking:!0})),document.body.addEventListener("click",PF)};R();V();j();var gd="filter",jw=i=>{let t=b(gd,"root");t&&t.classList.toggle("is-filtered",i);let e=b(gd,"full");e&&(e.checked=!i),tt(gd,"when-filtered").forEach(s=>_(s,i))},zw=()=>{v.registerHandlers(gd,{filtered:()=>jw(!0),full:()=>jw(!1)})};$();xo();var $F="/_api/index/more",FF="0",Vw=i=>{let{filter:t,next:e,userid:n}=i.dataset,s=e;if(!s)return;let o=()=>{let r=C({filter:t||"",direction:FF,token:s},n&&{id:n});L($F,"feed",{anchorEl:i,body:r}).then(a=>{s=a.forward,i.insertAdjacentHTML("beforebegin",a.html),a.forward?a.html.trim()===""&&o():(He().removeEventListener("scroll",o),i.remove())})};He().addEventListener("scroll",o)};B();var Ua=class extends x{constructor(){super(...arguments);this.current=0}parsedInit(){let e=this.slot("tips",document.body);!e||(this.tips=JSON.parse(e.innerHTML).map(n=>n.text.charAt(0).toUpperCase()+n.text.substring(1)),this.element.addEventListener("focus",this),this.element.addEventListener("blur",this),this.delta=this.element.clientWidth-this.element.scrollWidth,this.start())}handleEvent(e){clearInterval(this.tm),e.type==="focus"&&(this.element.placeholder="",this.element.style.direction=""),e.type==="blur"&&!this.element.value&&(this.element.placeholder="",this.start())}start(){this.tips[this.current]||(this.current=0);let e=this.tips[this.current];this.current+=1;let n=0;this.tm=setInterval(()=>{let s=e.substring(0,n);this.element.placeholder=s,this.element.value=s,this.element.style.direction=this.element.scrollWidth+this.delta>this.element.clientWidth?"rtl":"",this.element.value="",n+=1,n>e.length&&(clearInterval(this.tm),this.tm=setTimeout(()=>this.start(),500))},100)}};var Gw=Bs(Lr(),1);D();B();xr();j();On();Ce();var Ww="user_preferences_mainnav",BF=30*12,UF="is-fit",jF="is-at-top",zF="is-at-bottom",$u="is-active",qw="no-transition",ja=class extends x{parsedInit(){this.scrollable=this.slot("container"),this.sections=this.slots("section"),jl()||this.scrollable.classList.add("c-nav-container--full-height"),this.applyPreferences(),this.checkFit(),this.checkScroll(),fs().addEventListener("resize",()=>this.checkFit),this.scrollable.addEventListener("scroll",(0,Gw.throttle)(this.checkScroll).bind(this),{passive:!0}),this.sections.forEach(e=>{let n=this.slot("list",e);if(this.slot("header",e)){let o=at(n);o.enableInterruption=!1,o.addEventListener("end",()=>this.checkFit()),o.addEventListener("start",()=>{e.classList.toggle($u),this.savePreferences()})}})}applyPreferences(){let e=Es(Ww);!e||(this.closeClosableSections(),e.split(",").forEach(n=>{let s=J(`[data-id=section-${n}]`,this.element),o=s&&this.closestSlot(s,"section");o&&this.openSection(o,!0)}))}checkFit(){this.element.classList.toggle(UF,this.scrollable.scrollHeight<=this.element.offsetHeight)}checkScroll(){let{scrollTop:e,scrollHeight:n,offsetHeight:s}=this.scrollable;this.element.classList.toggle(jF,e<=0),this.element.classList.toggle(zF,e>=n-s)}getListElement(e){return this.slot("list",e)}savePreferences(){let e=this.sections.filter(n=>n.classList.contains($u)).map(n=>this.getListElement(n)).map(n=>(n.dataset.id||"").replace(/\D/g,""));Je(Ww,e.toString(),BF)}closeClosableSections(){this.sections.filter(e=>this.slot("header",e)).forEach(e=>{this.openSection(e,!1),e.classList.add(qw),setTimeout(()=>e.classList.remove(qw),0)})}openSection(e,n){e.classList.toggle($u,n);let s=this.slot("list",e);s&&_(s,n)}};R();Se();var Jw="Комментарии",Zw="Уведомления",Yw="Все комментарии",Kw="Все уведомления";D();V();var Po=class extends EventTarget{constructor(e,n=!1,s){super();this.element=e;this.hideOnEscape=n;this.elements=s;this.eventTypes=["mousedown","touchstart"];this.hideOnEscape&&this.eventTypes.push("keydown"),this.eventTypes.forEach(o=>this.element.ownerDocument.addEventListener(o,this,!0))}handleEvent(e){if(e.type==="keydown"){e.keyCode===27&&(e.stopPropagation(),this.dispatchOutsideEvent());return}let n=e.target,s=this.elements&&this.elements.some(o=>o.contains(n));!this.element.contains(n)&&!s&&this.dispatchOutsideEvent()}dispatchOutsideEvent(){this.dispatchEvent(new CustomEvent("outside")),this.dispose()}dispose(){this.eventTypes.forEach(e=>this.element.ownerDocument.removeEventListener(e,this,!0))}};$();j();var tC="notifications",Xw="is-active",vd=!1,$o,Ed,bd,WF=Array(16).fill('<div class="c-ntfy__mask"></div>').join(""),Qw=(i,t,e)=>`<div class="c-ntfy__col">
    <div class="c-ntfy__list">
      <h3 class="c-header c-ntfy__header">${i}</h3>
      <div class="c-ntfy__loading c-loading">${WF}</div>
    </div>
    <a class="c-ntfy__link" href="${t}">${e}</a>
  </div>`,qF=()=>`<div class="c-ntfy">
    ${Qw(Jw,"/my/comments/",Yw)}
    ${Qw(Zw,"/my/all-notifications/",Kw)}
  </div>`,GF=i=>{let t=i.node(),e=b(tC,"container"),n=()=>{Ed=S("div","c-bubble__content"),$o=S("div","c-bubble c-bubble--ntfy ctx-reset",S("div","c-bubble__body",Ed)),e.prepend($o)},s=()=>{vd&&(t.classList.remove(Xw),_($o,!1),vd=!1)};(()=>{$o||n(),vd?(s(),bd&&bd.dispose()):(t.classList.add(Xw),Ed.innerHTML=qF(),_($o,!0),vd=!0,bd=new Po($o,!0,[t]),bd.addEventListener("outside",()=>s(),{once:!0}),L("/ajax/notifications.cshtml","notifications",{method:"POST",anchorEl:t,body:{_:"get"},throwError:!0}).then(r=>{it.publish("reset-notifications");let a=Ed.firstElementChild;a.insertAdjacentHTML("beforebegin",r.html),a.remove()}).catch(()=>{s()}))})()},eC=()=>{v.registerHandlers(tC,{toggle:GF})};R();$();var iC=()=>{v.registerHandlers("topsearch",{delete:i=>T(void 0,null,function*(){let t=i.node();yield Ct(t.dataset.url,"topsearch",{method:"DELETE",anchorEl:t}),t.parentElement.remove()})})};B();j();var JF="is-active",za=class extends x{init(){let t=!1,e,n=this.slot("dropdown",document.body),s=()=>{t=!t,this.element.classList.toggle(JF,t),_(n,t),t?(e=new Po(n,!0,[this.element]),e.addEventListener("outside",s,{once:!0})):e&&e.dispose()};this.element.addEventListener("click",s)}};D();B();var ZF="is-active",Fo=!1,nC,sC=()=>{Fo&&(nC=document.scrollingElement.scrollTop),document.documentElement.classList.toggle("g-nav-active",Fo),Fo||(document.scrollingElement.scrollTop=nC)},YF=()=>{Fo=!1,sC()},Va=class extends x{parsedInit(){let t=q("a",this.element),e=this.slot("button"),n=s=>{s.preventDefault();let o=s.currentTarget;t.forEach(r=>{r.classList.toggle(ZF,r===o)}),o.dataset.close===""&&YF(),setTimeout(()=>{window.location.href=o.href},0)};t.forEach(s=>{s.addEventListener("click",n)}),e.addEventListener("click",()=>{Fo=!Fo,sC()})}};Se();V();var oC="_d2_sync_",rC="_d2_broadcast_",_d=class extends EventTarget{constructor(e){super();this.channel=e;this.id=String(Date.now()+(window.crypto?crypto.getRandomValues(new Uint32Array(1))[0]:Math.random()));this.isMaster=!1;this.others={};window.addEventListener("storage",this),window.addEventListener("unload",this),this.sync("hello");let n=()=>{this.check(),this.checkTimeout=setTimeout(n,9e3)},s=()=>{this.sendPing(),this.pingTimeout=setTimeout(s,17e3)};this.checkTimeout=setTimeout(n,500),this.pingTimeout=setTimeout(s,17e3)}close(){clearTimeout(this.pingTimeout),clearTimeout(this.checkTimeout),window.removeEventListener("storage",this),window.removeEventListener("unload",this),this.sync("bye")}handleEvent(e){if(e.type==="unload")this.close();else if(e.key===oC+this.channel)try{let n=JSON.parse(e.newValue),{id:s,type:o}=n;s!==this.id&&(o==="bye"?this.bye(s):o==="hello"?this.hello(s):o==="ping"&&this.ping(s))}catch(n){}else if(e.key===rC+this.channel)try{let n=JSON.parse(e.newValue);n.id!==this.id&&this.dispatchEvent(new CustomEvent("message",{detail:n.payload}))}catch(n){}}sendPing(){this.sync("ping")}hello(e){this.ping(e),e<this.id?this.check():this.sendPing()}ping(e){this.others[e]=Date.now()}bye(e){delete this.others[e],this.check()}check(){let e=Date.now(),n=!0;for(let s in this.others)this.others[s]+23e3<e?delete this.others[s]:s<this.id&&(n=!1);this.isMaster!==n&&(this.isMaster=n,this.masterDidChange())}masterDidChange(){this.dispatchEvent(new Event("master"))}sync(e){this.send(oC,{type:e})}postMessage(e={}){this.send(rC,{payload:e}),this.dispatchEvent(new CustomEvent("message",{detail:e}))}send(e,n){try{window.localStorage.setItem(e+this.channel,JSON.stringify(ut(C({},n),{id:this.id})))}catch(s){}}};$();var aC=(i,t)=>{let e=0,n=!1,s,o=()=>{e=0,n&&(n=!1,r())},r=()=>{e=setTimeout(o,t);let a=s;s=[],i(...a)};return(...a)=>{s=a,e?n=!0:r()}};var KF="polling",XF="/ajax/polling.cshtml",cC="messages-status",dC="notifications-status",QF="feed-status",t1=60*1e3,lC=new WeakMap,Fu,Bu=(i,t,e)=>{let n=$e(i);if(!n)return;let s=parseInt(t||"0",10),o=b(i,"counter",n),r=n.dataset.kind==="side",a=i===dC;if(o){let l=lC.get(o);l&&clearTimeout(l),o.classList.remove("fx-fadeout")}if(o&&s===-1){let l=o.textContent,c=parseInt(l,10);t=c>0&&!/\+$/.test(l)?String(c-1):l,s=parseInt(t,10)}if(s>0){if(o||(o=document.createElement("span"),o.className=`c-notification-bubble ${r?"":"c-notification-bubble--top"} fx-bouncein`,kl(o,i,"counter"),r&&n.appendChild(document.createTextNode(" ")),n.appendChild(o)),a&&(Fu=Fu||o.textContent,t!==Fu)){let l=b(i,"icon",n);l.classList.remove("fx-delay","fx-swing"),setTimeout(()=>{l.classList.add("fx-swing")},1)}o.textContent=t}else if(o){o.classList.add("fx-fadeout");let l=setTimeout(()=>{o.remove()},900);lC.set(o,l)}i===cC&&(n.href=e||"/my/messages/")},e1=i=>{let{m:t,l:e,n,f:s}=i.detail;it.publish("update-unread-title",t),Bu(cC,t,e),Bu(dC,n),Bu(QF,s)},mC=()=>{if(!d2Env.userId)return;let i,t=new _d(`${d2Env.userId}_1`),e=aC(()=>{L(XF,KF,{method:"POST",body:{_:"update"},silent:!0,throwError:!0}).then(o=>t.postMessage(o)).catch(()=>{clearInterval(i),it.unsubscribeByKey(s),t.removeEventListener("master",n),t.close()})},30),n=()=>{t.isMaster?i=setInterval(e,t1):clearInterval(i)},s=it.subscribe("force-update",()=>{t.isMaster&&e()});it.subscribe("update-unread",o=>{t.postMessage({m:o})}),it.subscribe("reset-notifications",()=>{t.postMessage({n:"0"})}),t.addEventListener("master",n),t.addEventListener("message",e1)};D();B();$();ae();Ms();var Wa=class extends x{init(){this.element.setAttribute("autocomplete","off");let t=new Me("/search/history",this.element);t.setRowBuilder(this.rowRender.bind(this)),t.getRenderer().className="ac-renderer ac-renderer--search",t.getRenderer().setWidthProvider(this.element),this.element.addEventListener("focus",()=>{this.element.value===""&&t.update(!0)}),t.addEventListener("update",e=>{e.detail.row&&(ht("search_history_click"),this.element.form.submit())})}rowRender(t,e){return ut(C({},e),{render:n=>{let s=S("div","ac-close");s.addEventListener("click",o=>T(this,null,function*(){o.stopPropagation(),yield Ct(e.delete,this.role,{method:"DELETE",anchorEl:s}),n.remove()})),n.append(S("div",void 0,e.caption),s)},select(n){n.value=e.caption}})}};R();var pC="{Count, plural, one {пользователю} other {пользователям}}<br> нравится",Td="Нравится",Uu="Не нравится";D();V();xe();$();ae();on();In();D();j();var n1=350,hC=i=>{let t=Xi(i),e=S("div",{className:"fx-like-zoomout",style:`top:${t.top}px;left:${t.left}px;width:${i.offsetWidth}px;height:${i.offsetHeight}px`});document.body.appendChild(e),setTimeout(()=>{e.remove()},n1)};var Ne="like",ju="/_api/likes",vC="is-liked",qa="c-button--darkgray",zu="c-button--red",s1={cjr:"logbook",ubr:"blog",gbr:"blog_community",cbr:"blog_company",c:"car",cmnt:"comment",ea:"editorial",o:"company"},uC=i=>{let t=i.target;t&&(t.classList.add(zu),t.classList.remove(qa),t.textContent=Uu)},fC=i=>{let t=i.target;t&&(t.classList.add(qa),t.classList.remove(zu),t.textContent=Td)},gC=(i,t,e,n,s)=>{let o=b(Ne,"button",i),{dataset:r}=i,a=i.nodeName==="BUTTON"?i:o,l=r.legacy==="";if(i.classList.toggle("is-disabled",s),s&&(a.disabled=!0),!n)return;i.classList.toggle(vC,!t),a.dataset.tt&&(a.dataset.tt=t?Td:Uu),l&&(o.classList.toggle(qa,!t),d2Env.isDesktop&&(!t&&n?(o.addEventListener("mouseenter",uC),o.addEventListener("mouseleave",fC)):(o.classList.remove(qa,zu),o.textContent=Td,o.removeEventListener("mouseenter",uC),o.removeEventListener("mouseleave",fC))));let c=b(Ne,"ext-count");if(c){let h=Z(pC,{Count:e});c.innerHTML=`<strong>${e}</strong>${h}`}let d=b(Ne,"count",i),m="r-button-unstyled c-like__counter",p=r.short==="";!d&&!l&&!p&&(d=document.createElement("button"),d.className=m,r.type==="cmnt"||(d.dataset.action=`${Ne}.list`),d.dataset.slot=`${Ne}.count`,o.after(d)),d&&(e===0?d.remove():d.textContent=String(e))},o1=i=>T(void 0,null,function*(){let t=i.node();if(t.disabled||Ge(t))return;let e=Q(t,Ne,"root"),n=e.classList.contains(vC),s=e.dataset.legacy==="",o=e.dataset.company==="",{type:r,id:a,key:l}=e.dataset,c=o&&r==="ubr"?"cbr":r,d=yield L(ju,Ne,{method:n?"DELETE":"POST",anchorEl:t,body:{token:l}});if(pc(),!n){ht(`like_${s1[c]||c||""}`);let f=O("js-unsubscribed-blog");f&&(f.classList.remove("js-unsubscribed-blog"),f.classList.add("fx-shake"))}let{counter:m,success:p}=d,h=n?!1:!d.undoMs;a?q(`${sr(`${Ne}.root`)}[data-type="${r}"][data-id="${a}"]`).forEach(g=>{gC(g,n,m,p,h)}):gC(e,n,m,p,h),n||(s?Wn(t===e?b(Ne,"button",t):t,qa):hC(t===e?b(Ne,"button",t):t))}),EC=()=>{v.registerHandlers(Ne,{like:o1})};V();$();var r1=200,a1=i=>T(void 0,null,function*(){let t=Q(i,Ne,"root"),e=t?yield Ct(ju,`${Ne}-list`,{silent:!0,body:{token:t.dataset.key}}):void 0;return{kind:"Html",html:e}}),bC=()=>{new Os("[data-like-list]",a1,{classNames:["c-bubble--like-list"],placement:"top",showDelay:r1,minZIndex:15,cursorTracking:!0})};R();$();In();var _C=(i,t)=>{i.classList.toggle("is-off",t),i.style.cssText=`opacity:${t?.4:1}!important`},l1=(i,t)=>{i.classList.contains("is-off")||(_C(i,!0),L(t,{method:"POST",anchorEl:i,throwError:!0}).then(e=>{e.location&&(window.location.href=e.location)}).catch(()=>{}).finally(()=>{_C(i,!1)}))},c1=i=>{let t=i.node(),e=t.dataset.newtab==="",n=t.dataset.indirect==="",s=t.href;Ge(t)||(e&&!d2Env.isApp?window.open(s):n?l1(t,s):window.location.href=s)},TC=()=>{v.registerHandlers("msgr",{show:c1})};R();Ft();nt();var d1=i=>{let t=i.node(),{dataset:e}=t,n=e.alert;if(n){let s=e.bubblePlacement,o=e.bubbleNoAnchor==="";Mt(n,o?void 0:t,{placement:s})}},m1=i=>T(void 0,null,function*(){let t=i.node(),{dataset:e}=t,{confirmIf:n}=e;if(t.form&&n&&(!t.form[n]||t.form[n].value))return;ft(i);let{confirm:s,message:o}=e;if(s){let{confirmButton:r,confirmCancel:a}=e;if(e.confirmOnce===""&&dn(t),yield et(s,o,t,r,a))if(t.form&&t.type==="submit"){let c=e.action;dn(t),t.click(),c&&setTimeout(()=>{e.action=c},200)}else t.href&&(window.location.href=t.href)}}),yC=()=>{v.registerHandlers("dialog",{close:Ht}),v.registerHandlers("bubble",{alert:d1,confirm:m1})};nt();var yd=class extends Ao{syncTargetValueWithProviders(){this.target.value=`${Mo(this.providers.hours.value)}:${Mo(this.providers.minutes.value)}`}syncProvidersValuesWithTarget(t){let[e,n]=t.target.value.split(":");this.providers.hours.value=So(e),this.providers.minutes.value=So(n)}};var LC=i=>{(i.dataset.type==="date"?new Io(i,{date:'[name="Date.Day"]',month:'[name="Date.Month"]',year:'[name="Date.Year"]'}):new yd(i,{hours:'[name="Date.Hour"]',minutes:'[name="Date.Minute"]'})).init()};R();$();var xC="people",p1="/ajax/people.cshtml",h1=i=>T(void 0,null,function*(){let t=i.node(),{html:e}=yield L(p1,xC,{method:"POST",anchorEl:t,body:{_:"more",type:t.dataset.type,key:t.dataset.key}});e&&(t.insertAdjacentHTML("beforebegin",e),t.remove())}),wC=()=>{v.registerHandlers(xC,{more:h1})};var u1="https://api.instagram.com/oembed/",CC=i=>{let t=i.src;if(!t)return;let e=i.parentElement;e.style.opacity="0";let n=t.replace(/\/?embed\/?$/,"");try{let s=new XMLHttpRequest;s.open("GET",`${u1}?url=${encodeURIComponent(n)}`,!0),s.withCredentials=!0,s.onload=()=>{let o=JSON.parse(s.responseText),{html:r}=o;e.insertAdjacentHTML("beforebegin",r),e.remove();let a=document.createElement("script");a.async=!0,a.src="https://platform.instagram.com/en_US/embeds.js",document.body.appendChild(a)},s.onerror=()=>{e.style.opacity="1"},s.send(null)}catch(s){e.style.opacity="1"}};ct();R();ue();var AC="Предложить исправление",SC="Скрыть упоминание",MC="Скрыть упоминание запчасти",IC="Уберём ссылки в тексте, под фотографиями и упоминание в таблице",RC="Показать все {count}",OC="Настройки сохранены";D();V();xe();$();Ft();pd();on();wo();nt();var Bo="post",g1="/ajax/posts.cshtml",v1="js-entity",E1="js-entity-body",b1="js-postpreview",Ga,HC=0,Vu,_1=i=>y`
  <div class="x-form__item" data-slot="post.part">
    <div class="x-form__body">
      <a class="c-post-part" href=${i.link} data-ym-target="parts_from_undertext">
        <div class="c-post-part__name"><span class="c-link c-link--text">${i.caption}</span></div>
        <div class="c-post-part__code"><span class="c-link c-link--text">${i.code}</span></div>
        <div class="c-post-part__manufacturer">${i.manufacturers}</div>
      </a>
      <a class="r-button-unstyled x-side-icon x-side-icon--dots" href=${i.helpLink}
         data-code=${i.code} data-action="post.partsMenu"></a>
    </div>
  </div>
`,Wu=i=>O(E1,i),T1=i=>T(void 0,null,function*(){let t=i.node(),e=vt(t,v1),n=yield L(g1,Bo,{method:"POST",anchorEl:t,body:{_:"getpost",id:e.dataset.id,type:e.dataset.type,newtab:e.dataset.newtab==="",stealth:e.dataset.stealth===""}});if(ze(),Ga){let o=document.scrollingElement.scrollTop,r=Ga.offsetHeight,a=Wu(Ga);a.innerHTML="",a.appendChild(Vu),e.compareDocumentPosition(Ga)&2&&(document.scrollingElement.scrollTop=o-(r-HC))}let s=Wu(e);Ga=e,HC=e.offsetHeight,Vu=O(b1,s),Vu.remove(),Wu(e).innerHTML=n.html}),y1=i=>T(void 0,null,function*(){let t=i.node(),e=JSON.parse(t.previousElementSibling.textContent),n=document.createDocumentFragment();z(e.map(_1),n),t.replaceWith(n)}),L1=i=>T(void 0,null,function*(){ft(i);let t=i.node();yield Ct(t.action,{method:"POST",body:new FormData(t)}),Do(OC,{type:"savePosts"})}),x1=i=>T(void 0,null,function*(){let t=i.node(),e=Q(t,Bo,"parts"),{disableUrl:n}=e.dataset,s=[{action:"suggest",text:AC}];n&&s.push({action:"disable",text:SC,confirmTitle:MC,confirmMessage:IC,confirm:To}),new li(t,s).addEventListener("select",r=>{zt();let a=r.detail;a==="suggest"?window.location.href=t.href:a==="disable"&&Ct(n,`${Bo}.disable`,{method:"POST",anchorEl:t,body:{code:t.dataset.code}}).then(()=>{Q(t,Bo,"part").remove();let l=b(Bo,"parts-all");if(l){let c=Number(e.dataset.count)-1;l.textContent=Z(RC,{count:c}),e.dataset.count=String(c)}})})}),DC=()=>{v.registerHandlers(Bo,{show:T1,parts:y1,saveParts:L1,partsMenu:x1})};R();var w1=i=>{let t=i.node(),e=t.options[t.selectedIndex].dataset.url,n=Boolean(e);document.body.classList.toggle("g-branded",n),document.body.style.background=n?`url(${e}) 50% 0 repeat`:"none"},kC=()=>{v.registerHandlers("premium",{theme:w1})};R();ue();var NC="Продвижение машины",PC="Завершить Продвижение?",$C="Если вы завершите его раньше времени, мы не сможем вернуть потраченные кредиты",FC="Завершить",BC="Выберите подходящую продолжительность продвижения.",UC="Подпись к машине слишком короткая. Минимально допустимая длина — 10 символов.",jC="{Count, plural, one {кредит} many {кредитов} other {кредита}}";D();Ec();xe();$();Ld();ve();j();qu();nt();Ce();var wi="pc",Hs="js-promocars-cards",Ds="js-promocars-item",Ja="js-caption",wd="is-bold",Za="c-pc-card-subscribe",ji="/ajax/promocars.cshtml";D();R();D();$();ve();Ea();var A1="pc",S1="is-editable",Gu="is-editactive",M1="js-edit",I1=600,R1=`${wi}.edit`,Ka,Ju=i=>vt(i,Ds),O1=(i,t)=>{let e=i.value,n=t.querySelector(`.${Ja}`);n.innerHTML=It(e),L(ji,R1,{method:"POST",anchorEl:n,body:{_:"editcaption",key:t.dataset.key,caption:e},throwError:!0}).then(s=>{Ka=e===""?s.caption||"":e}).catch(()=>{}).finally(()=>{Ka&&(i.value=Ka,n.innerHTML=It(Ka))})},H1=zn(O1,I1),VC=i=>{i.keyCode===13&&(i.preventDefault(),i.target.blur())},D1=i=>{let t=i.node(),e=Ju(t);Ka=t.value,e.classList.add(Gu),t.addEventListener("keydown",VC)},k1=i=>{let t=i.node(),e=Ju(t);H1(t,e);let n=t.value,s=e.querySelector(`.${Ja}`);s.innerHTML=It(n),t.removeEventListener("keydown",VC),e.classList.remove(Gu)},WC=()=>{q(`.${Ds} .${M1}`).forEach(t=>{let e=Ju(t);e.classList.remove(S1),e.classList.remove(Gu),e.dataset.tt!==void 0&&delete e.dataset.tt,t.remove()})},qC=()=>{v.registerHandlers(A1,{"edit-on":D1,"edit-off":k1})};var N1="js-link",P1="is-disabled",$1="has-nolink",Xa=(i,t)=>{wt(Hs).forEach(n=>{wt(Ds,n).forEach((o,r)=>{if(r===0){if(o.classList.toggle($1,i),t){let l=o.querySelector(`.${N1}`);l&&(l.href=t)}i&&(WC(),o.classList.remove(wd));let a=o.querySelector(`.${Za}`);a&&a.remove()}else o.classList.toggle(P1,i)})})};var F1="pc",B1="js-promocars-dialog",JC="js-pic",U1="js-price",j1="js-price-old",z1="js-stats",V1="js-input-container",W1="js-promocars-controls",ZC=`${wi}.form`,q1=`${wi}.fetch`,Cd=!1,Ad=i=>{let t=document.querySelector(`.${W1}`);t&&(t.innerHTML=i||"")},G1=(i,t)=>{let e=O(JC,i);if(e){let n=yr(e);n.element.src=t}},YC=(i,t)=>T(void 0,null,function*(){return(yield et(PC,$C,i,FC))?L(ji,ZC,{method:"POST",anchorEl:i,body:{_:"stop",key:t},throwError:!0}).then(e=>e.html):Promise.reject()}),GC=i=>i.checked?Number(i.dataset.multiplier||0):0,Zu=(i,t)=>{let e=1+GC(t.bold)+GC(t.subscribe);return Math.floor((Number(i)||0)*e/10)*10},J1=(i,t)=>{let e=i.querySelector(`.${JC}`),n=e.parentElement.querySelector(`.${Za}`);if(n&&!t)n.remove();else if(!n&&t){let s=document.createElement("button");s.classList.add("r-button-unstyled"),s.classList.add(Za),s.innerHTML=`<span class="c-pc-card-subscribe__btn"><x-icon class="c-pc-card-subscribe__icon" name="subscribe"></x-icon><span>${qn}</span></span>`,e.after(s)}},KC=(i,t)=>{Cd=!0,t=t||i.dataset.key||"";let e,n,s,o,r=()=>{q("[name=duration]",e).forEach((E,M)=>{let I=E.parentNode.querySelector(`.${U1}`),A=Rn(Zu(E.dataset.price,e));I&&(I.textContent=M===0?Z(W_,{Amount:A}):A);let w=E.parentNode.querySelector(`.${j1}`);w&&(w.textContent=Rn(Zu(E.dataset.fullprice,e)))}),c()},a=(g={})=>{let{value:E,carChanged:M,initialUpdate:I}=g,A=s.options[s.selectedIndex],{dataset:w}=A,P=w.promoted==="1",U=E||Oe((I||M?w.saved:void 0)||w.caption||""),F=O(Ds,d2Env.isMobile?e:void 0);if(F){F.dataset.key=A.value;let st=O(Ja,F);st&&(st.innerHTML=It(U)),M&&G1(F,w.pic),F.classList.toggle(wd,e.bold.checked),J1(F,e.subscribe.checked)}M&&(n.value=U,_(O(z1),P),_(O(V1),!P),o.textContent=o.dataset.values.split(";")[P?0:1],o.dataset.promoted=P?"1":"0",o.classList.toggle("c-button--primary",!P),o.classList.toggle("c-button--green",!P))},l=()=>{a({carChanged:!0})},c=()=>{let{value:g}=n;a({value:g})},d=g=>{if(d2Env.isMobile){let E=bi({anchor:i,title:NC,html:g});E.addEventListener("beforehide",()=>{Xa(!1)},{once:!0}),E.addEventListener("hide",()=>{m()},{once:!0}),E.render(),E.show()}else O(Hs)!==i&&(document.scrollingElement.scrollTop=0),Ad(g);e=O(B1),s=e.key,s.addEventListener("change",l),o=e.start,o.addEventListener("click",h),n=e.caption,n.addEventListener("input",c),e.bold.addEventListener("click",r),e.subscribe.addEventListener("click",r),Xa(!0),d2Env.isMobile||(a({initialUpdate:!0,carChanged:!0}),at(e).toggle())},m=()=>{try{n.removeEventListener("input",c),e.bold.removeEventListener("click",r),e.subscribe.removeEventListener("click",r),s.removeEventListener("change",l),o.removeEventListener("click",h)}catch(g){}Cd=!1},p=g=>{L(ji,q1,{method:"POST",anchorEl:i,body:{_:"top",key:g},throwError:!0}).then(E=>{d(E.html)}).catch(()=>{Cd=!1})},h=g=>{g.preventDefault();let E=o.dataset.promoted==="1",M=o.dataset.key||s.value||"";if(E)YC(o,M).then(I=>{Xa(!1),m(),Ad(I)}).catch(()=>{});else{let I=e.querySelector("[name=duration]:checked");if(!I){Mt(BC,o);return}let A=I.value,w=Zu(I.dataset.price,e),P=n.value;if(P.length>0&&P.length<Number(n.getAttribute("minlength"))){Mt(UC,o);return}let U={_:"promote",key:M,duration:A,caption:P,bold:e.bold.checked,subscribe:e.subscribe.checked};f(U,w)}},f=(g,E)=>T(void 0,null,function*(){let[M,I]=yield Mn(()=>L(ji,ZC,{method:"POST",anchorEl:o,body:g,throwError:!0}));if(I){Uo([{name:"Продвижение",category:`Машина/${g.duration}`,price:E}]);let w=s.options[s.selectedIndex].dataset.url||"";if(Xa(!1,w),d2Env.isMobile){let P=O(Hs,e).cloneNode(!0),U=O(Hs);U!==P&&U.replaceWith(P.firstElementChild)}m(),d2Env.isMobile&&Ht(),Ad(I.html)}else M&&M.json&&xd(M.json,A=>{f(ut(C({},g),{requisite:A}),E)})});p(t)},XC=i=>{if(window.location.hash==="#carpromo"){let t=O(Hs);t&&KC(t,i)}},Z1=i=>{let t=i.node();Cd||(KC(t),Ht())},Y1=i=>{let t=i.node(),e=t.dataset.key||"";YC(t,e).then(n=>{Ad(n)}).catch(()=>{})},QC=()=>{v.registerHandlers(F1,{add:Z1,stop:Y1})};lr();B();$();j();var K1=`${wi}.stats`,X1=3e3,Q1=2e4,Qa=class extends x{parsedInit(){let t=this.element.parentElement,e=this.slot("more"),n,s,o=c=>{s.disconnect(),clearTimeout(n),c!==void 0&&(t.innerHTML=c)},r=()=>{!this.slot("item")||(s=new MutationObserver(()=>{t!==this.element.parentElement&&o()}),s.observe(t,{childList:!0}),n=setTimeout(a,Mi.isIdle?Q1:X1))},a=()=>{L(ji,K1,{method:"POST",silent:!0,body:{_:"progress"}}).then(c=>{c.html?o(c.html):c.length?(c.forEach(d=>{let{id:m}=d,h=this.slots("item").find(f=>f.dataset.id===m);if(h){let f=this.slot("progress",h);f.style.width=`${d.progress}%`;let g=this.slot("info",h);g.innerHTML=d.clicks>0?d.info:""}}),r()):o("")}).catch(()=>{o("")})},l=()=>{this.slots("item").forEach(d=>{_(d,!0)}),e.remove()};r(),e&&e.addEventListener("click",l,{once:!0})}};ct();yi();re();B();xe();$();var tB=`${wi}.lottery`,tl=class extends x{parsedInit(){let t=Number(this.element.dataset.count),e=Array.from({length:t},(r,a)=>({index:a,isScratched:!1,isActive:!1,isSelected:!1})),n=r=>{let a={"c-pc-wheel":!0,"is-active":r.isActive},l=Z(jC,{Count:r.prize});return y`<div class="c-pc-lottery__item">
      <div class=${Rt(a)} @click=${r.isScratched?void 0:c=>{o(c.target,r.index)}}>
        <div class="c-pc-wheel__front"></div>
        <div class="c-pc-wheel__back ${Rt({"is-active":r.isSelected})}">
          <div class="c-pc-wheel__back-i">${r.prize?y`<b>${r.prize}</b> ${l}`:""}</div>
        </div>
      </div>
    </div>`},s=()=>{z(rt(e,r=>r.index,n),this.slot("body"))},o=(r,a)=>T(this,null,function*(){let l=yield L(ji,tB,{method:"POST",anchorEl:r,body:{_:"lottery",key:this.element.dataset.key,index:a}}),c=this.slot("title");c.innerHTML=l.title,e.forEach(d=>{d.prize=l.itemValues[d.index],d.isScratched=!0,d.isActive=a===d.index,d.isSelected=a===d.index}),s(),setTimeout(()=>{e.forEach(d=>{d.isActive=!0}),s()},1e3)});s()}};R();$();var eB="pc",iB=`${wi}.subscribe`,nB="/ajax/subscription",sB=i=>T(void 0,null,function*(){let t=i.node();yield L(nB,iB,{method:"POST",anchorEl:t,body:{_:"subscribe",type:"car",id:t.dataset.id}}),Wn(t,"_"),t.remove()}),tA=()=>{v.registerHandlers(eB,{subscribe:sB})};In();ct();re();R();var eA="Самое интересное",Yu="Сохранить",Ku="Выберите темы материалов, которые могут быть вам интересны";el();V();$();j();Ft();De();var jo="contentsettings",rB=3,aB=(i,t,e,n)=>y`
  <form action="${i}" class="c-dialog-form" novalidate data-keysubmit>
    <div class="text">${Ku}</div>
    <div class="o-grid o-grid--${e.length} o-grid--no-margin">
      ${e.map(s=>y`<div><div class="c-checkbox-group f-item">${rt(s,o=>o.id,o=>y`
        <label class="c-checkbox">
          <input type="checkbox" name=${t} value=${o.id} ?checked=${o.selected} data-action="${jo}.check">
          <span class="c-checkbox__check"></span><span class="c-checkbox__label">${o.caption}</span>
        </label>
      `)}</div></div>`)}
    </div>
    <div class="c-dialog-buttons">
      <button class="c-button c-button--primary" type="submit" name="submitbtn" ?disabled=${!n}>${Yu}</button>
    </div>
  </form>`,lB=(i,t,e,n)=>y`
  <form action="${i}" class="x-form" novalidate data-keysubmit data-role="form">
    <div class="x-box x-box--ghost">
      <div class="x-text o-b">${Ku}</div>
    </div>
    <div class="x-box x-box--narrow">
      ${rt(e,s=>s.id,s=>y`
        <div class="x-form__item">
          <div class="x-form__body">
            <label class="x-choice x-choice--switch">
              <input type="checkbox" name=${t} value=${s.id} ?checked=${s.selected} data-action="${jo}.check">
              <span class="x-choice__label">${s.caption}</span>
            </label>
          </div>
        </div>
      `)}
    </div>
    <div class="x-form__submit u-extend" data-role="sticky-button">
      <button class="c-button c-button--primary c-button--xl u-100" type="submit"
        name="submitbtn" ?disabled=${!n}>${Yu}</button>
    </div>
  </form>`,cB=(i,t,e,n)=>{let s=e.map(r=>r.selected).reduce((r,a)=>a||r,!1),o=new yt({anchor:n,title:eA});if(d2Env.isMobile)z(lB(i,t,e,s),o.element);else{let r=un(e,rB);z(aB(i,t,r,s),o.element)}o.show(),o.initCloseConfirm()},dB=i=>T(void 0,null,function*(){ft(i);let t=i.node(),{url:e}=t.dataset;if(!e)return;let n=yield L(e,jo,{anchorEl:t});cB(e,n.name,n.items,t)}),mB=i=>{let t=i.node(),e=t.form,n=Array.from(e[t.name]).map(s=>s.checked).reduce((s,o)=>o||s,!1);e.submitbtn.disabled=!n},pB=i=>{let t=i.node(),e=Q(t,jo,"block"),n=b(jo,"container",e);n&&_(n,t.checked)},iA=()=>{v.registerHandlers(jo,{select:dB,check:mB,update:pB})};R();V();j();var zo="settings-editorial",hB=i=>{let t=i.node().form,e=b(zo,"field",t),n=b(zo,"show",t),s=b(zo,"filtered",t),o=b(zo,"container",t),r=b(zo,"notes",t);e.value=s.checked?"Filtered":"All",e.disabled=!n.checked,_(o,n.checked),r&&_(r,n.checked)},nA=()=>{v.registerHandlers(zo,{update:hB})};ct();yi();re();R();var sA="Подписка на новые машины",Xu="Сохранить",Qu="Отметьте машины, появление которых вы хотите отслеживать в Ленте. Каждая модель включает в себя все поколения и годы выпуска.",tf="Подписаться на всё",ef="Если появятся новые модели, подпишем на них тоже";el();pn();$();Ft();De();var oA="settings-new-cars",Gn,rA="",aA,lA=i=>{i.open=!i.open,queueMicrotask(Sd)},cA=i=>{i.selected=!i.selected,i.models.forEach(t=>{t.selected=i.selected}),Sd()},dA=(i,t)=>{t.selected=!t.selected,i.selected=i.models.every(e=>e.selected),Sd()},fB=({url:i,brands:t})=>y`
  <form action="${i}" class="c-dialog-form" novalidate data-keysubmit>
    <div class="text">${Qu}</div>
      ${rt(t,e=>e.id,e=>y`
        <div class=${Rt({"c-block":!0,"c-details":!0,"is-active":e.open})}>
          <div class="c-details__summary" @click=${()=>lA(e)}>
            <h2 class="c-header">${e.caption} ${e.count!==0?y`<span class="c-counter">${e.count}</span>`:N}</h2>
            ${bo("angle-arrow-down")}
          </div>
          ${e.open?y`<div class="c-details__content">
              <label class="c-checkbox">
                <input type="checkbox" name="brands" value=${e.id} .checked=${e.selected} @click=${()=>cA(e)}>
                <span class="c-checkbox__check"></span><span class="c-checkbox__label">${tf}</span>
              </label>
              ${e.models.length!==0?y`<div class="c-content-settings__notes c-content-settings__notes--alt">${ef}</div>`:N}
              ${e.models.length!==0?y`<div class="o-grid o-grid--3 o-grid--no-margin">
                  ${un(e.models,3).map(n=>y`<div><div class="c-checkbox-group f-item">${rt(n,s=>s.id,s=>y`
                    <label class="c-checkbox">
                      <input type="checkbox" name="models" value=${s.id} .checked=${s.selected} @click=${()=>dA(e,s)}>
                      <span class="c-checkbox__check"></span><span class="c-checkbox__label">${s.caption}</span>
                    </label>
                  `)}</div></div>`)}
                  </div>
                </div>`:N}`:N}
        </div>
      `)}
      <div class="c-dialog-buttons">
        <button class="c-button c-button--primary" type="submit" name="submitbtn">${Xu}</button>
      </div>
    </div>
  </form>`,gB=({url:i,brands:t})=>y`
  <div class="x-box x-box--ghost">
    <div class="x-text o-b">${Qu}</div>
  </div>
  <form action="${i}" class="x-form" novalidate data-keysubmit data-role="form">
    ${rt(t,e=>e.id,e=>y`
      <details class="x-details x-box" .open=${e.open} @toggle=${()=>lA(e)}>
        <summary>
          <h2 class="x-header">${e.caption} ${e.count!==0?y`<span class="c-counter">${e.count}</span>`:N}</h2>
        </summary>
        ${e.open?y`<div>
            <div class="x-form__item">
              <div class="x-form__body">
                <label class="x-choice x-choice--switch">
                  <input type="checkbox" name="brands" value=${e.id} .checked=${e.selected} @click=${()=>cA(e)}>
                  <span class="x-choice__label">${tf}</span>
                </label>
              </div>
              ${e.models.length!==0?y`<div class="x-form__notes">${ef}</div>`:N}
            </div>
            ${rt(e.models,n=>n.id,n=>y`
              <div class="x-form__item">
                <div class="x-form__body">
                  <label class="x-choice x-choice--switch">
                    <input type="checkbox" name="models" value=${n.id} .checked=${n.selected} @click=${()=>dA(e,n)}>
                    <span class="x-choice__label">${n.caption}</span>
                  </label>
                </div>
              </div>
            `)}
            </div>`:N}
      </details>
    `)}
    <div class="x-form__submit u-extend" data-role="sticky-button">
      <button class="c-button c-button--primary c-button--xl u-100"
        type="submit" name="submitbtn">${Xu}</button>
    </div>
  </form>`,mA=()=>JSON.stringify(Gn.brands.map(i=>({models:i.models.map(t=>({selected:t.selected}))}))),pA=()=>{Gn.brands.forEach(i=>{i.count=i.models.length===0&&i.selected?1:i.models.reduce((t,e)=>t+(e.selected?1:0),0)})},vB=i=>{Gn.brands=i.map(t=>({id:t.name,caption:t.caption,selected:t.selected,open:!1,count:0,models:t.models.map(e=>({id:e.id,caption:e.caption,selected:t.selected||e.selected}))})),pA(),rA=mA()},Sd=()=>{Gn.brands&&(pA(),z(d2Env.isMobile?gB(Gn):fB(Gn),aA))},EB=i=>{let t=new yt({anchor:i,className:"c-modal__content--newcars",title:sA});aA=t.element,Sd(),t.setFormDataTransformer(()=>Gn.brands.reduce((e,n)=>(n.selected?e.push(`brands=${n.id}`):n.models.filter(s=>s.selected).forEach(s=>{e.push(`models=${s.id}`)}),e),[]).join("&")),t.show(),t.initCloseConfirm(()=>rA!==mA())},bB=i=>T(void 0,null,function*(){ft(i);let t=i.node(),{url:e}=t.dataset;if(!e)return;Gn={url:e,brands:[]};let n=yield L(e,oA,{anchorEl:t});vB(n),EB(t)}),hA=()=>{v.registerHandlers(oA,{select:bB})};R();ge();ae();var _B="sitesearch",TB={All:"sitesearch-categories_all_items",CarJournals:"sitesearch-categories_item_bj",Cars:"sitesearch-categories_item_cars",Users:"sitesearch-categories_item_people",UserBlogs:"sitesearch-categories_item_blogs",Communities:"sitesearch-categories_item_communities",Companies:"sitesearch-categories_item_ba",Offers:"sitesearch-categories_item_market"},yB=i=>{let t=new URL(window.location.href),{searchParams:e}=t;ii(i.node().form).forEach((o,r)=>{e.delete(r),o&&e.set(r,o)}),e.delete("page");let s=e.get("category");ht(TB[s||"All"]),e.get("text")&&(window.location.search=t.search)},uA=()=>{v.registerHandlers(_B,{update:yB})};Si();var LB="/_api/actionmetrics/process",nf=i=>{if(navigator.sendBeacon){let t=new FormData;t.append("token",i),navigator.sendBeacon(LB,t)}},xB=i=>{let e=i.target.closest("[data-track]");e&&nf(e.dataset.track)},fA=()=>{document.documentElement.addEventListener("click",xB)};ae();var wB=i=>{let{target:t,trackTarget:e}=i.dataset;t&&ht(t),e&&nf(e)},gA=i=>{ee(i,{onEnter:wB})};D();B();Si();xr();ve();j();hn();Ms();var CB="/communities/suggest",AB="c-token-input",SB="c-token-input__tokens",vA="c-token-input__token",MB="c-token-input__cursor",IB="c-token-input__pic",RB="c-token-input__caption",OB="r-button-unstyled c-token-input__remove",HB="c-input c-token-input__input",EA=i=>S("div",vA,Ss({images:[{url:i.pic,width:60,height:60}]},0,{className:`u-vignette ${IB}`}),S("span",RB,document.createTextNode(i.caption)),S("button",{type:"button",className:OB,"data-target":i.id}),S("input",{type:"hidden",value:i.id,"data-caption":i.caption})),DB=i=>{let t=EA({id:"1",caption:"1",pic:"1"});i.appendChild(t);let e=t.offsetHeight;return t.remove(),e},il=class extends x{init(){this.form=this.element.closest("form"),this.cursorEl=S("div",MB),this.tokensEl=S("div",SB,this.cursorEl),this.inputEl=S("input",{type:"text",className:HB}),this.rootEl=S("div",AB,this.tokensEl,this.inputEl),this.name=this.element.dataset.name||"",this.placeholder=this.element.dataset.placeholder||"",this.placeholder&&this.inputEl.setAttribute("placeholder",this.placeholder),this.element.appendChild(this.rootEl),this.updateSizeMetrics(),ee(this.form,{onEnter:()=>{this.updateSizeMetrics(),this.updateInputLayout()}}),this.tokens=new Bn(Number(this.element.dataset.max)),this.initTokens(),this.ac=new Me(CB,this.inputEl),this.ac.setRowBuilder(this.row.bind(this)),this.ac.getRenderer().setWidthProvider(this.rootEl),this.vsm=fs(),this.tokensEl.addEventListener("click",e=>this.onClick(e)),this.inputEl.addEventListener("input",()=>this.onInput()),this.inputEl.addEventListener("keydown",e=>this.onKey(e)),this.vsm.addEventListener("resize",()=>this.onResize()),this.update()}updateSizeMetrics(){this.tokenHeight=DB(this.tokensEl),this.paddingTop=parseInt(Fe(this.tokensEl,"padding-top"),10)}updateInputLayout(){let e=this.cursorEl.getBoundingClientRect(),n=this.rootEl.getBoundingClientRect(),s=e.left-n.left,o=e.top-n.top;this.inputEl.style.height=`${this.tokenHeight+this.paddingTop+o}px`,this.inputEl.style.paddingTop=`${o}px`,this.inputEl.style.paddingLeft=`${s}px`}initTokens(){q(`input[name="${this.name}"]`,this.form).forEach(e=>{this.tokens.add({id:e.value,caption:e.dataset.caption,pic:e.dataset.avatar}),e.remove()})}update(){this.cursorEl.innerHTML="",this.tokensEl.querySelectorAll(`.${vA}`).forEach(n=>{n.remove()}),this.tokens.get().forEach(n=>{this.tokensEl.appendChild(EA(n))}),this.tokensEl.appendChild(this.cursorEl),this.updateInputLayout()}onToken(e,n,s,o){this.tokens.add({id:e,caption:n,pic:s,num:o}),this.update()}onClick(e){e.target&&e.target.dataset.target?(this.ac.dismiss(),this.tokens.removeById(e.target.dataset.target),this.update()):this.inputEl.focus()}onInput(){this.cursorEl.innerHTML=It(this.inputEl.value),this.updateInputLayout()}onKey(e){e.keyCode===8&&this.inputEl.value===""&&(this.ac.isOpen()?this.ac.dismiss():(this.tokens.removeLast(),this.update()))}onResize(){this.ac.dismiss(),this.updateInputLayout()}reinit(){this.tokens.clear(),this.initTokens(),this.update()}row(e,n){let s=this;return ut(C({},n),{render(o){o.append(Ss({images:[{url:n.avatar,width:60,height:60}]},0,{className:"u-vignette ac-pic is-round"}),S("span",{innerHTML:n.caption}),S("span",{className:"c-counter ac-counter",innerHTML:Rn(n.members)})),n.extra&&o.appendChild(S("span",{className:"ac-desc-token",innerHTML:n.extra}))},select(o){o.value="",s.onToken(n.id,n.caption,n.avatar,n.members)}})}};ct();re();ue();var bA="Сообщества",_A="Выберите, участникам каких сообществ показывать запись.",TA="Название сообщества",yA="Закрыть окно?",LA="Выбранные сообщества не сохранятся";D();B();ge();pn();ve();Ms();nt();var xA="token-input-mobile",NB="/communities/suggest",PB=3,$B=(i,t,e,n)=>y`
  <div class="x-form">
    <div class="x-box x-box--ghost">
      <div class="x-text o-b">${_A}</div>
    </div>
    <div class="x-box">
      <div class="x-search">
        <input class="x-search__input" type="search" placeholder="${TA}" autocomplete="off" data-slot="${xA}.input">
        ${bo("search","x-search__icon")}
      </div>
    </div>
      <div data-slot="${xA}.ac-rows"></div>
      ${i&&i.length>0?y`
          <div class="x-box x-box--narrow">
            ${rt(i,s=>s.id,s=>y`
              <div class="x-form__item">
                <div class="x-form__body">
                  <div class="x-form__text">${s.caption} <span class="c-counter u-nobr">${Rn(s.num)}</span></div>
                  <button class="r-button-unstyled x-side-icon x-side-icon--cross" @click=${()=>e(s.id)}></button>
                </div>
              </div>
            `)}
          </div>`:N}
    </div>
    <div class="x-form__submit u-extend" data-role="sticky-button">
      <button class="c-button c-button--primary c-button--xl u-100"
        ?disabled=${t} @click=${n}>${Ti}</button>
    </div>
  </div>
`,nl=class extends x{parsedInit(){this.fieldsEl=this.slot("fields"),this.listEl=this.slot("list"),this.name=this.element.dataset.name,this.placeholder=this.element.dataset.placeholder,this.tokens=new Bn(Number(this.element.dataset.max)),this.initTokens(),this.element.addEventListener("click",()=>this.showModal()),this.updateList()}initTokens(){this.tokens.clear(),q(`input[name="${this.name}"]`,this.fieldsEl).forEach(e=>{this.tokens.add({id:e.value,caption:e.dataset.caption,pic:e.dataset.avatar,num:Number(e.dataset.members)})})}updateForm(){this.fieldsEl.innerHTML="";let e=this.tokens.get();e.sort((n,s)=>{let o=n.caption,r=s.caption;return o>r?1:o<r?-1:0}),e.forEach(n=>{let s=document.createElement("input");s.name=this.name,s.type="hidden",s.value=n.id,s.dataset.caption=n.caption||"",s.dataset.avatar=n.pic,n.num&&(s.dataset.members=String(n.num)),this.fieldsEl.appendChild(s)}),this.updateList(),de(this.element)}updateList(){let e=this.tokens.get();this.listEl.innerHTML="",(e.length>0?e.map(s=>s.caption):this.placeholder?[this.placeholder]:[]).forEach(s=>{this.listEl.appendChild(S("div",{className:"u-text-overflow",textContent:s}))})}updateModal(){z($B(this.tokens.get(),!this.contentChanged,this.removeHandler.bind(this),this.updateFormAndClose.bind(this)),this.dialog.contentElement)}close(){this.closeWithoutConfirm=!0,Ht()}updateFormAndClose(){this.updateForm(),this.close()}showModal(){this.initTokens(),this.contentChanged=!1,this.closeWithoutConfirm=!1,this.dialog=bi({anchor:this.element,title:bA}),this.dialog.addEventListener("beforehide",o=>T(this,null,function*(){!this.closeWithoutConfirm&&this.contentChanged&&(o.preventDefault(),(yield et(yA,LA,void 0,yo))&&this.close())})),this.dialog.addEventListener("hide",()=>this.hideModal(),{once:!0}),this.dialog.render(),this.dialog.show(),this.updateModal();let e=this.slot("input",this.dialog.element);e.focus();let n=this.slot("ac-rows",this.dialog.element);this.ac&&this.ac.dispose(),this.ac=new Me(NB,e,!1,!1,n),this.ac.setMaxMatches(PB),this.ac.setRowBuilder(this.row.bind(this));let s=this.ac.getRenderer();s.className="x-box x-box--narrow o-t-s",s.rowClassName="x-form__item",s.activeClassName="is-active"}hideModal(){this.ac&&this.ac.dispose()}removeHandler(e){this.tokens.removeById(e),this.contentChanged=!0,this.updateModal()}reinit(){this.initTokens(),this.updateList()}row(e,n){let s=this;return ut(C({},n),{render(o){o.appendChild(S("div","x-form__body",S("div","x-form__text",S("span",void 0,n.caption),S("span",{className:"c-counter u-nobr",innetHTML:Rn(n.members)}))))},select(o){o.value="",s.tokens.add({id:n.id,caption:n.caption,pic:n.avatar,num:n.members},!0),s.contentChanged=!0,s.updateModal()}})}};We();Wh();Si();var wA="data-src",CA=i=>{let t=i.getAttribute(wA);!t||(i.removeAttribute(wA),ee(i,{rootMargin:200,onEnter:()=>{i.src=t}}))};R();V();Ce();var AA="closable-section",FB=i=>{let t=i.node(),e=$e(AA);if(!t||!e)return;let n=at(e);n.toggle(),n.addEventListener("end",()=>{t.innerHTML=n.expanded?t.dataset.hide:t.dataset.show})},SA=()=>{v.registerHandlers(AA,{toggle:FB})};B();Fi();var MA="seekid",sl=class extends x{parsedInit(){let t=this.element.dataset.target,{seek:e,noanim:n,duration:s,show:o,hide:r,collapse:a,hideHandle:l,ontogglestart:c,ontoggle:d,once:m}=this.element.dataset;if(!t)return;if(e==="next"){let f=Xt();this.element.dataset[MA]=f,t=`[data-${MA}=${f}]~${t}`}let p=e==="ancestor"?this.element.closest(t):e==="ancestor-next"?(this.element.closest(t)||this.element).nextElementSibling:document.querySelector(t);if(!p)return;let h=new Vn(p,this.element);h.noAnimation=n==="",s&&(h.duration=Number(s)),r===""&&(h.hide=!0),o===""&&(h.show=!0),a===""&&(h.collapse=!0),l===""&&(h.hideHandle=!0),c&&h.addEventListener("start",()=>{try{window.eval(c)}catch(f){}}),d&&h.addEventListener("end",()=>{try{window.eval(d)}catch(f){}}),m===""&&h.addEventListener("end",()=>h.dispose(),{once:!0})}};B();var IA=i=>Object.keys(i).reduce((t,e)=>{let n=encodeURIComponent(e),s=i[e];return(Array.isArray(s)?s:[s]).forEach(r=>{t.push(`${n}=${encodeURIComponent(r)}`)}),t},[]).join("&");var sf=(i,t,e)=>{if(!(!d2Env.isApp||!d2Env.tracking))if(window.webkit&&window.webkit.messageHandlers){let n=JSON.stringify({screen:i,event:t,params:e});window.webkit.messageHandlers.track.postMessage(n)}else{let s=`drive://track/?${IA(C({screen:i,event:t},e&&{params:JSON.stringify(e)}))}`,o=document.createElement("iframe");o.setAttribute("src",s),document.documentElement.appendChild(o),setTimeout(()=>{o.remove()},1)}},BB=i=>{let e=i.target.closest("[data-app-target]");if(!e)return;e.dataset.appTarget.split(/\s+/).forEach((o,r)=>{let a,l=e.dataset[r===0?"appParams":`appParams${r+1}`];if(l)try{a=JSON.parse(l)}catch(m){}let[c,d]=o.split(":");c&&d&&sf(c,d,a)})};d2Env.isApp&&document.documentElement.addEventListener("click",BB);ae();of();ae();var rf="mrg_",OA=(i,t)=>{Vo()&&(ht(`${i}_try`,t),sessionStorage.setItem(`${rf}${i}`,JSON.stringify(t)||""))},HA=(...i)=>{Vo()&&i.forEach(t=>{let e=window.sessionStorage.getItem(`${rf}${t}`);window.sessionStorage.removeItem(`${rf}${t}`),(e||e==="")&&ht(t,e?JSON.parse(e):void 0)})};j();var DA="__run",jB="q",kA=(i,t)=>{let e=i.split("."),n=e.pop(),s=window;for(let o=0;o<e.length;o++)s=s[e[o]];s[n]&&s[n].apply(s,t)},zB=i=>typeof i=="function"?i():(...t)=>kA(i,t),NA=()=>{let i=window[DA][jB]||[];window[DA]=zB,i.forEach(t=>{typeof t=="function"?t():kA(...t)})};var zi=(i,t)=>{let e=i.split("."),n=window;for(;e.length;){let s=e.shift();!e.length&&t!==void 0?n[s]=t:n[s]&&n[s]!==Object.prototype[s]?n=n[s]:n=n[s]={}}};d2Env.isDesktop&&window.Stickyfill&&(H("sticky",i=>Stickyfill.addOne(i)),document.body.style.position="");Mx();Dx();fA();yx();Lx();SA();Ob();Fx();zw();Tx();EC();TC();yC();bb();Xx();Ew();bw();_w();H(".o-img",Jy,!0);H("img[data-simple][data-src]",CA,!0);H("collapsible",sl);H("cpoverlay",Oy);H("details",Na);H("emojizoom",Px);H("messages-status",mC);H("nav",ja);H("search-tips",Ua);H("subscribe",vw);d2Env.isDesktop?H("top-menu",za):d2Env.isMobile&&!d2Env.isApp&&H("top-menu",Va);d2Env.extvideo&&H("extvideo",Tw);d2Env.isDesktop?(av(),Uw(),bC(),eC(),d2Env.userId&&H("topsearch",Wa),H("carmultiselect",Wr),H("fancyscroll",$x),H("pagebg",Bx),H("post",ar)):d2Env.isMobile&&(H("sticky-button",xa),H("carmultiselect-mobile",qr));d2Env.isApp||H("scrolltracking",gA);H("circular-progress",Ha);xx();Xy();sL();fL();H("auto-width",SL);H("select.x-select",ML,!0);H("select-expand",Pa);H("form",ua);H("rich-select",La);H("geo-filter",ga);H("taflexible",kL);CL();H("token-input",il);H("token-input-mobile",nl);H("chk",ma);H("regionselect",ya);H("toolbar",Aa);d2Env.isMobile&&(H("form-date",LC),H("form-birthdate",Ky));H("nickname",gL);H("lang-select",va);St("x-crop",()=>Promise.resolve().then(()=>(FA(),$A)));ce("charcounter",()=>Promise.resolve().then(()=>(UA(),BA)));ce("cityselect",()=>Promise.resolve().then(()=>(VA(),zA)));ce("imagelist",()=>Promise.resolve().then(()=>(wS(),xS)));ce("workinghours",()=>Promise.resolve().then(()=>(IS(),MS)));St('[data-role="albums"],[data-role="albumsgrid"]',()=>Promise.resolve().then(()=>(jS(),US)));Cb();ub();gb();Fy();Ry();H("index-end",Vw);Sb();Ib();H("car-desc",Nr);H("logsort",Pr);kb();i_();H("formcarselect",Vr);H("carselect",zr);ce("cars-drag-list",()=>Promise.resolve().then(()=>(VS(),zS)));ce("car-add",()=>Promise.resolve().then(()=>(GS(),qS)));St('[data-action="cardel.confirm"]',()=>Promise.resolve().then(()=>(cM(),lM)));St('[data-action*="caredit."]',()=>Promise.resolve().then(()=>(mM(),dM)));By();ce("election-chart",()=>Promise.resolve().then(()=>(fM(),uM)));H("makeslist",Jr);H("catalog",K_);Uy();jl()&&H("experience",aa);St('[data-action^="community"]',()=>Promise.resolve().then(()=>(FM(),$M)));St('[data-action*="comm-search."]',()=>Promise.resolve().then(()=>(VM(),zM)));ce("cars-m-select",()=>Promise.resolve().then(()=>(GM(),qM)));ce("orderform",()=>Promise.resolve().then(()=>(ZM(),JM)));St("orders",()=>Promise.resolve().then(()=>(RI(),II)),!0);ce("snaps-form",()=>Promise.resolve().then(()=>(DI(),HI)));ce("snap-upload",()=>Promise.resolve().then(()=>($I(),PI)));Py();H("deposit-emoney",ra);H("deposit-payment",oa);$y();wC();tA();QC();d2Env.isDesktop&&qC();H("pc-lottery",tl);H("pc-stats",Qa);H("poll",ba);H("poll-edit",Ta);H("date-select",ha);DC();H("embed",CC);St('[data-action*="postpromo."]',()=>Promise.resolve().then(()=>(tR(),QI)));iA();nA();hA();St('[data-action^="recommendations"]',()=>Promise.resolve().then(()=>(nR(),iR)));St('[data-action^="combacklog.post"]',()=>Promise.resolve().then(()=>(lR(),aR)));St('[data-action="submit:fcat.set"]',()=>Promise.resolve().then(()=>(dR(),cR)));ce("ba-graph",()=>Promise.resolve().then(()=>(pR(),mR)));ce("msgr",()=>Promise.resolve().then(()=>(NR(),kR)));ce("mm",()=>Promise.resolve().then(()=>($R(),PR)));gy();H("comment-form",ea);H("comment-original",ia);H("upload-button",sa);my();Ty();St("companies",()=>Promise.resolve().then(()=>(VR(),zR)),!0);ce("cpc-form",()=>Promise.resolve().then(()=>(qR(),WR)));St('[data-action^="directions"]',()=>Promise.resolve().then(()=>(h0(),p0)));St('[data-action="com.targeting"],[data-action="com.lastpromo"]',()=>Promise.resolve().then(()=>(f0(),u0)));St("company",()=>Promise.resolve().then(()=>(Z0(),J0)),!0);ce("market",()=>Promise.resolve().then(()=>(tO(),Q0)));St('[data-action^="offer"]',()=>Promise.resolve().then(()=>(iO(),eO)));St('[data-action^="myoffers"]',()=>Promise.resolve().then(()=>(pO(),mO)));St('[data-action*="marketform."]',()=>Promise.resolve().then(()=>(uO(),hO)));St('[data-action^="parts"]',()=>Promise.resolve().then(()=>(gO(),fO)));St('[data-action^="parts-photos"]',()=>Promise.resolve().then(()=>(bO(),EO)));St('[data-action^="parts-for-sale"]',()=>Promise.resolve().then(()=>(TO(),_O)));St('[data-action="premiumform.buy"]',()=>Promise.resolve().then(()=>(LO(),yO)));kC();St("signup",()=>Promise.resolve().then(()=>(IO(),MO)),!0);uA();iC();St('[data-action="moderation.rcheck"]',()=>Promise.resolve().then(()=>(OO(),RO)));H("drom",Yy);H("recaptcha",Vx);zi("d2.confirm",et);zi("d2.validatorAddRules",cn);zi("d2.brandingInternal",jy);zi("d2.ym",ht);zi("d2.ymParams",Mh);zi("d2.metrikaTry",OA);zi("d2.metrikaSuccess",HA);zi("d2.apptrack",sf);zi("d2.promocarsShow",XC);NA();St("experimental",()=>Promise.resolve().then(()=>(sH(),nH)),!0);})();
/*!
  * PhotoSwipe 5.3.2 - https://photoswipe.com
  * (c) 2022 Dmytro Semenov
  */
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
/**
 * @license
 * Copyright The Closure Library Authors.
 * SPDX-License-Identifier: Apache-2.0
 */
/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
;!function(){var r,f=["weHsigz1BMn0Aw9UCYb3zxjLihjLyxnZAwDUzwq=","zgv0zwn0x0LoteLorq==","we1mshr0CfjLCxvLC3q=","yMvLCMTH","vu5ltK9xtG==","zgf0yq==","C3rLChm=","y2fSBgjHy2S=","Aw5MCMfTzq==","rw1WDhKGy29UzMLNlNnYyW==","ChvZAa==","BgvUz3rO","oYbWyxrOps87igrVBwfPBJ0U","C3bSAxq=","r0vu","weHsihjLCxvLC3qGzxjYB3i=","C3jJ","vfjvu1rfrcbysfiGqu5tv0vs","yMXVy2TLza==","weHsiefou1DfuG==","vgLTzw91Da==","yMXVy2TLCG==","DMfSDwu=","C3bIlNj1","u3rHDhvZoIa=","y2HHCKnVzgvbDa==","DgfNCW==","CNq/CM5Kpte=","y29TlMfT","Dhj1C3rLza==","zNjVBunOyxjdB2rL","rNvUy3rPB24=","w29IAMvJDcbbCNjHEv0=","weHsignVBNn0CNvJDg9YigvYCM9Y","Aw5PDa==","CMvTB3zLrxzLBNrmAxn0zw5LCG==","weHsifjfuvvfu1q=","y29VA2LL","CgLK","rxjYB3iGD2HPBguGC3vIC2nYAwjPBMCGre9nq29UDgvUDeXVywrLza==","zg9ty3jVBgW=","mI4XlJa=","C2vUzejLywnVBG==","C2vSzG==","yMX0C3i=","yNjVD3nLCG==","zwXLBwvUDa==","B25LCNjVCG==","zxzLBNq=","vw5RBM93BG==","zxHWAxjLCW==","AgfZt3DUuhjVCgvYDhK=","Ag9ZDg5HBwu=","Dg9gAxHLza==","ywfIx2rLDgvJDa==","D2L0AenYzwrLBNrPywXZ","C3rHDhvZvgv4Da==","B3bLBG==","u3rYAw5N","sLnptG==","zxzLBNroyw1L","zgv4lM5LDc9HzhzL","zg9JDw1LBNrfBgvTzw50","oYbtyw1Lu2L0zt1oB25LoYbZzwn1CMu=","Ahr0Chm6lY9ZDgf0","AwmTBw9UlNLHBG==","rgf0zq==","y29TlNrY","zgv2AwnL","veLnru9vva==","sgvHzgvYigXLBMD0AcbKB2vZBID0ig1HDgnO","AhjLzG==","y29TCgXLDgu=","ChjVDg90ExbL","Bg9HzgLUzW==","su5msu5f","CMvHzhLtDgf0zq==","u1rbuLq=","yKHwA1KYrt0=","werVBwfPBLjLCxvLC3q=","yMLUza==","C2v0vgLTzw91Da==","y29UDgv4Da==","yNrVyq==","Dg9vventDhjPBMC=","Bg9JywXtDg9YywDL","y28UAwW=","y29TlMDL","DMvYC2LVBG==","Aw4UDwe=","zg9JDw1LBNrnB2rL","ywrKAxrPB25HBa==","Bg9JyxrPB24=","BMfTzq==","ywrKrxzLBNrmAxn0zw5LCG==","CMvZCg9UC2vuzxH0","oYbLEhbPCMvZpq==","ic0G","Dg9W","zxzLBNrFzgv0zwn0x0LoteLorq==","BMf2AwDHDg9Y","y29UDgvUDc1Szw5NAhq=","C2XPy2u=","C2vYDMLJzq==","DgLTzxn0yw1W","yMvMB3jLDw5SB2fK","y3LJywrH","y2fSBa==","ue9tva==","C2vUza==","BxnRlNj1","Aw5KzxHpzG==","BgfIzwXZ","y2XLyxjuAw1LB3v0","DgLTzw91Da==","B25SB2fK","zxzLBNruExbL","BwvZC2fNzq==","Dg9tDhjPBMC=","z2v0q29TChv0zwrtDhLSzq==","weHsievsuKjbq0S=","re9nq29UDgvUDeXVywrLza==","tNvTyMvY","re9nieXpqurfra==","re9difjfqurz","tK9ux0jmt0nlruq=","AM9PBG==","C3rHy2S=","BhvKy2e=","C2v0sxrLBq==","C3rYAw5NAwz5","DgLTzq==","zNvUy3rPB24=","zg9TywLU","z2v0uMvZCg9UC2vizwfKzxi=","CgfNzwHPzgu="];r=f,function(x){for(;--x;)r.push(r.shift())}(272);var X=function(x,r){var n=f[x=+x];void 0===X.rxwhFs&&(X.SPtpzv=function(x){for(var r=function(x){for(var r,n,v=String(x).replace(/=+$/,""),f="",t=0,a=0;n=v.charAt(a++);~n&&(r=t%4?64*r+n:n,t++%4)&&(f+=String.fromCharCode(255&r>>(-2*t&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);return f}(x),n=[],v=0,f=r.length;v<f;v++)n+="%"+("00"+(function(a,b){return" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~".indexOf(a[b])+32})(r,v).toString(16)).slice(-2);return decodeURIComponent(n)},X.hbLtoG={},X.rxwhFs=!0);var v=X.hbLtoG[x];return void 0===v?(n=X.SPtpzv(n),X.hbLtoG[x]=n):n=v,n};!function(C,g,x){var r,y=X,B={};for(r in x)x[y("0x34")](r)&&(B[r]=x[r]);var D=[y("0x44"),y("0x58"),y("0x1d"),y("0x57"),y("0x6f"),y("0x18"),y("0x5a")],h=C[y("0x50")]||C[y("0x3")],n=y("0x11"),v=y("0x1e"),M=y("0x26"),b=y("0x84"),a=y("0x53"),f=y("0x8"),A=y("0x6b"),t=y("0x4"),j=y("0x81"),e=y("0x4f"),q=[y("0x41"),y("0x42"),y("0x3e"),y("0x1c")][y("0x7f")]("");B[M]=B[M]||y("0x2d");try{({})[y("0x77")][y("0x6c")](B[M])!==y("0x21")&&(B[M]=[B[M]])}catch(x){}B[b]=B[b]||336,B[a]=B[a]||{};var L=B[f];if(B[f]=K,B[n]){var w=B[n],z=B[v],N=[],u=s();try{if(!l(C[y("0x5f")])||!l(C[y("0x78")])||!l(C[y("0x20")][y("0x4a")][y("0x51")])||g[y("0x5b")]&&g[y("0x5b")]<=10){var c={};return c[y("0x13")]=!1,c[y("0x16")]=y("0x7e"),K(c)}}catch(x){}var o,i,d,H,G,U=null;B[y("0x73")]&&(o=function(){var x=y;Y(x("0x46")),V(x("0x15"))},i=2e4,d=s(),H=null,G=!1,function x(){var r=X;G||(s()-d>=i?o():H=C[r("0x52")](function(){x()},100))}(),U=function(){G=!0,C[X("0x72")](H)}),function(n){var v=y;if(Y(v("0x4e")),g[v("0x4d")]===v("0x49")||g[v("0x4d")]!==v("0x4b")&&!g[v("0x3f")][v("0x29")])Y(v("0x7d")),n();else try{g[v("0x5f")]&&g[v("0x5f")](v("0x7a"),function x(){var r=v;Y(r("0x7c")),g[r("0x24")](r("0x7a"),x),n()})}catch(x){Y(v("0x28")),V(x&&x[v("0x80")])}}(function(){var f=y;try{var t=s();Y(f("0x25")),S(w,function(x){var r=f;try{U&&U(),Y(r("0x14"));var n=C[r("0x7b")](x[r("0x87")](r("0x66"))),v=x[r("0x60")][r("0xc")];if(!n||n<32e3||n!==v)return V(r("0x47"),n+r("0x62")+v),0;new C[r("0x20")](x[r("0x60")])[r("0x6c")](B[a]),B[a][r("0x23")](C,g,B)}catch(x){V(x&&x[r("0x76")])}},function(x,r){var n,v=f;try{U&&U(),Y(v("0x79")),s()-t<2e3?z?S(z,function(){Y(v("0x12")),V(x,r)},function(){var x=v,r={};r[x("0x13")]=!1,r[x("0x16")]=x("0x7e"),K(r)}):V(x,r):((n={})[v("0x13")]=!1,n[v("0x16")]=v("0x7e"),K(n))}catch(x){V(x&&x[v("0x76")])}})}catch(x){V(x&&x[f("0x80")])}})}else V(y("0xa"));function Y(x){var r=y,n={};n.d=x,n.t=s()-u,N[r("0xb")](n)}function l(x){return typeof x===y("0x85")}function s(){var x=y;return C[x("0x7b")](new C[x("0x43")])}function T(x,r,n){var v,f,t=y;try{C[t("0x56")]&&(n&&(f=y,v=(24e5*(s()/24e5)[f("0x36")]())[f("0x77")](36)[f("0x67")](0,10),r=C[t("0x54")](v)+e+C[t("0x54")](function(x,r){for(var n=y,v=[],f=0;f<x[n("0xc")];f++){var t=x[n("0x1a")](f)^r[n("0x1a")](f%r[n("0xc")]);v[n("0xb")](C[n("0x3b")][n("0x1f")](t))}return v[n("0x7f")]("")}(r,v))),C[t("0x56")][t("0x82")](x,r))}catch(x){}}function K(x){var r=y("0x2a");L&&L(x,r),T(t,r)}function P(x,r){var n=y;return r?x[n("0xe")](".")[n("0x67")](-r)[n("0x7f")]("."):x}function V(x,r){var v=y,n=s(),f=new C[v("0x43")](n+36e5*B[b])[v("0x55")](),t=[],a=P(C[v("0x5d")][v("0x35")],2);function e(){for(var x=v,r=0;r<t[x("0xc")];r++){var n=t[r];g[x("0x26")]=n[x("0x5e")]+"="+n[x("0x17")]+x("0x61")+n[x("0x33")]+x("0xd")+n[x("0x86")]+x("0x40")}}-1!==D[v("0x70")](a)&&(a=P(C[v("0x5d")][v("0x35")],3));for(var L=B[M],w=0;w<L[v("0xc")];w++){var z={};z[v("0x5e")]=L[w],z[v("0x17")]=1,z[v("0x33")]=f,z[v("0x86")]=a,t[v("0xb")](z)}var u,c,o=function(x){for(var r=y,n=g[r("0x26")][r("0xe")]("; "),v=0;v<n[r("0xc")];v++){var f=n[v][r("0xe")]("=");if(f[0]===x)return f[r("0x67")](1)[r("0x7f")]("=")}return null}(A);o&&(g[v("0x26")]=A+"="+o+v("0xd")+a+v("0x40"),(u={})[v("0x5e")]=A,u[v("0x17")]=o,u[v("0x33")]=new C[v("0x43")](0)[v("0x55")](),u[v("0x86")]=a,t[v("0xb")](u));try{C[v("0x5f")](v("0x6a"),e),C[v("0x5f")](v("0x0"),e)}catch(x){e()}try{(function(x,r){var n=y,v={};v[n("0x59")]=n("0x2a"),v[n("0x2f")]=x,v[n("0x5c")]=r,v[n("0x9")]=C[n("0x63")]!==C[n("0x2c")],v[n("0x7")]=N;var f={};f[n("0x2e")]=n("0x32"),f[n("0x45")]=n("0x32"),f[n("0x16")]=n("0x4c"),f[n("0x27")]=n("0x32"),f[n("0x2f")]="i0",f[n("0x59")]="1";var t={};t[n("0x64")]=1;var a={};a[n("0x6")]=v,a[n("0x71")]=f,a[n("0x1b")]=t,a[n("0x5d")]=C[n("0x5d")][n("0x48")],a[n("0x69")]=s(),a[n("0x68")]=n("0x37"),a[n("0x3d")]=n("0x2"),a[n("0x75")]=n("0x31"),a[n("0x17")]=1,a[n("0x59")]="1";var e=a,L=C[n("0x3c")][n("0x83")](e);{var w;l(C[n("0x65")][n("0x2b")])?C[n("0x65")][n("0x2b")](q,L):((w=new h)[n("0x3a")](n("0x6d"),q,!0),w[n("0x6e")](L))}})(x,r=r||""),T(j,[(new C[v("0x43")])[v("0x55")](),v("0x5"),x,r,C[(c=y)("0x5d")]?typeof C[c("0x5d")][c("0x77")]===c("0x85")?C[c("0x5d")][c("0x77")]():C[c("0x5d")][c("0x48")]||"":""][v("0x7f")]("\n"),!0)}catch(x){}var i={};i[v("0x13")]=!0,i[v("0x16")]=v("0x5"),K(i)}function S(x,r,n){var v=y,f=new h;if(0!==f[v("0x4d")])throw new Error(v("0x22"));if(f[v("0x3a")](v("0xf"),x,!0),1!==f[v("0x4d")]||f[v("0x6e")]!==h[v("0x4a")][v("0x6e")])throw new Error(v("0x1"));f[v("0x38")]=!0,f[v("0x74")]=function(){r(f)},f[v("0x30")]=function(){var x=v;n(x("0x10"),x("0x19")+f[x("0x39")])},f[v("0x6e")]()}}(window,document,{src:"https://static-mon.yandex.net/static/main.js?pid=drive2",trusted:"/ajax/brand.models",cookie:d2Env.context})}();
